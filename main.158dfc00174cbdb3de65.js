(self.webpackChunkng_blog=self.webpackChunkng_blog||[]).push([[179],{8255:Ye=>{function Ie(B){return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+B+"'");throw f.code="MODULE_NOT_FOUND",f})}Ie.keys=()=>[],Ie.resolve=Ie,Ie.id=8255,Ye.exports=Ie},7716:(Ye,Ie,B)=>{"use strict";B.d(Ie,{deG:()=>CI,tb:()=>rA,AFp:()=>$C,ip1:()=>rv,CZH:()=>zu,hGG:()=>uf,z2F:()=>xg,sBO:()=>QT,Sil:()=>Sg,_Vd:()=>Lh,EJc:()=>sA,SBq:()=>qi,qLn:()=>zd,vpe:()=>ta,gxx:()=>pu,tBr:()=>Js,XFs:()=>tt,OlP:()=>Pn,zs3:()=>Dn,ZZ4:()=>Uh,aQg:()=>jh,soG:()=>sv,YKP:()=>My,v3s:()=>NN,h0i:()=>Lu,PXZ:()=>pA,R0b:()=>Cs,FiY:()=>Bo,Lbi:()=>Qa,g9A:()=>WC,n_E:()=>nf,Qsj:()=>Bh,FYo:()=>Ty,JOm:()=>zo,Tiy:()=>Nw,q3G:()=>Jn,tp0:()=>br,EAV:()=>ON,Rgc:()=>ac,dDg:()=>Di,DyG:()=>Os,q4F:()=>Ow,GfV:()=>zT,s_b:()=>zh,ifc:()=>Ve,eFA:()=>uv,G48:()=>lf,Gpc:()=>G,f3M:()=>Nd,X6Q:()=>Dg,_c5:()=>mv,VLi:()=>Tg,c2e:()=>iA,zSh:()=>nh,wAp:()=>pt,vHH:()=>be,EiD:()=>vp,mCW:()=>to,qzn:()=>I,JVY:()=>E,pB0:()=>ae,eBb:()=>k,L6k:()=>D,LAX:()=>V,cg1:()=>Fr,Tjo:()=>kg,kL8:()=>hw,yhl:()=>b,dqk:()=>rn,sIi:()=>jp,CqO:()=>Kl,QGY:()=>$E,F4k:()=>Ur,RDi:()=>Kv,AaK:()=>ee,z3N:()=>jo,qOj:()=>B_,TTD:()=>Rr,_Bn:()=>Sw,xp6:()=>uu,uIk:()=>RE,ekj:()=>oy,Suo:()=>xC,Xpm:()=>sr,lG2:()=>$t,Yz7:()=>ht,cJS:()=>Cn,oAB:()=>Ue,Yjl:()=>Wn,Y36:()=>zp,_UZ:()=>Pr,BQk:()=>X_,ynx:()=>Fa,qZA:()=>J_,TgZ:()=>Yl,EpF:()=>on,n5z:()=>rp,Ikx:()=>uw,LFG:()=>fn,$8M:()=>Vm,NdJ:()=>zE,CRH:()=>sf,kcU:()=>sb,O4$:()=>vI,oxw:()=>ey,ALo:()=>Yy,lcZ:()=>yg,xi3:()=>Ky,Hsn:()=>Ql,F$t:()=>yh,Q6J:()=>GE,s9C:()=>vh,DdM:()=>$y,iGM:()=>tn,MAs:()=>Gp,CHM:()=>Lc,LSH:()=>Db,kYT:()=>bt,Udp:()=>JE,WFA:()=>Er,d8E:()=>er,YNc:()=>PE,W1O:()=>jD,_uU:()=>ew,Oqu:()=>Wp,hij:()=>tc,AsE:()=>uy,Gf:()=>AC});var f=B(9765),$=B(5319),j=B(7574),he=B(6682),ye=B(8819);function X(a){for(let l in a)if(a[l]===X)return l;throw Error("Could not find renamed property on target object.")}function se(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function ee(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ee).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function W(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const L=X({__forward_ref__:X});function G(a){return a.__forward_ref__=G,a.toString=function(){return ee(this())},a}function H(a){return re(a)?a():a}function re(a){return"function"==typeof a&&a.hasOwnProperty(L)&&a.__forward_ref__===G}class be extends Error{constructor(l,u){super(function(a,l){return`${a?`NG0${a}: `:""}${l}`}(l,u)),this.code=l}}function we(a){return"string"==typeof a?a:null==a?"":String(a)}function Pe(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():we(a)}function Bt(a,l){const u=l?` in ${l}`:"";throw new be("201",`No provider for ${Pe(a)} found${u}`)}function Je(a,l){null==a&&function(a,l,u,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${u} ${d} ${l} <=Actual]`))}(l,a,null,"!=")}function ht(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Cn(a){return{providers:a.providers||[],imports:a.imports||[]}}function gr(a){return hi(a,Zi)||hi(a,Hs)}function hi(a,l){return a.hasOwnProperty(l)?a[l]:null}function Rs(a){return a&&(a.hasOwnProperty(Qr)||a.hasOwnProperty(ds))?a[Qr]:null}const Zi=X({\u0275prov:X}),Qr=X({\u0275inj:X}),Hs=X({ngInjectableDef:X}),ds=X({ngInjectorDef:X});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let Kt;function xr(a){const l=Kt;return Kt=a,l}function lt(a,l,u){const d=gr(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&tt.Optional?null:void 0!==l?l:void Bt(ee(a),"Injector")}function Lt(a){return{toString:a}.toString()}var Nt=(()=>((Nt=Nt||{})[Nt.OnPush=0]="OnPush",Nt[Nt.Default=1]="Default",Nt))(),Ve=(()=>((Ve=Ve||{})[Ve.Emulated=0]="Emulated",Ve[Ve.None=2]="None",Ve[Ve.ShadowDom=3]="ShadowDom",Ve))();const Xe="undefined"!=typeof globalThis&&globalThis,fa="undefined"!=typeof window&&window,Co="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,rn=Xe||"undefined"!=typeof global&&global||fa||Co,Y={},q=[],Q=X({\u0275cmp:X}),Te=X({\u0275dir:X}),ce=X({\u0275pipe:X}),ze=X({\u0275mod:X}),ut=X({\u0275loc:X}),kt=X({\u0275fac:X}),_n=X({__NG_ELEMENT_ID__:X});let mr=0;function sr(a){return Lt(()=>{const u={},d={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Nt.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||q,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Ve.Emulated,id:"c",styles:a.styles||q,_:null,setInput:null,schemas:a.schemas||null,tView:null},g=a.directives,_=a.features,v=a.pipes;return d.id+=mr++,d.inputs=Ht(a.inputs,u),d.outputs=Ht(a.outputs),_&&_.forEach(w=>w(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(K):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(Z):null,d})}function K(a){return ln(a)||function(a){return a[Te]||null}(a)}function Z(a){return function(a){return a[ce]||null}(a)}const Ae={};function Ue(a){return Lt(()=>{const l={type:a.type,bootstrap:a.bootstrap||q,declarations:a.declarations||q,imports:a.imports||q,exports:a.exports||q,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(Ae[a.id]=a.type),l})}function bt(a,l){return Lt(()=>{const u=jn(a,!0);u.declarations=l.declarations||q,u.imports=l.imports||q,u.exports=l.exports||q})}function Ht(a,l){if(null==a)return Y;const u={};for(const d in a)if(a.hasOwnProperty(d)){let g=a[d],_=g;Array.isArray(g)&&(_=g[1],g=g[0]),u[g]=d,l&&(l[g]=_)}return u}const $t=sr;function Wn(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function ln(a){return a[Q]||null}function jn(a,l){const u=a[ze]||null;if(!u&&!0===l)throw new Error(`Type ${ee(a)} does not have '\u0275mod' property.`);return u}function $s(a){return Array.isArray(a)&&"object"==typeof a[1]}function fi(a){return Array.isArray(a)&&!0===a[1]}function Pf(a){return 0!=(8&a.flags)}function ma(a){return 2==(2&a.flags)}function Ao(a){return 1==(1&a.flags)}function yr(a){return null!==a.template}function Oi(a){return 0!=(512&a[2])}function _a(a,l){return a.hasOwnProperty(kt)?a[kt]:null}class Wv{constructor(l,u,d){this.previousValue=l,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function Rr(){return Vf}function Vf(a){return a.type.prototype.ngOnChanges&&(a.setInput=Yv),Bf}function Bf(){const a=ud(this),l=null==a?void 0:a.current;if(l){const u=a.previous;if(u===Y)a.previous=l;else for(let d in l)u[d]=l[d];a.current=null,this.ngOnChanges(l)}}function Yv(a,l,u,d){const g=ud(a)||function(a,l){return a[Uf]=l}(a,{previous:Y,current:null}),_=g.current||(g.current={}),v=g.previous,w=this.declaredInputs[u],S=v[w];_[w]=new Wv(S&&S.currentValue,l,v===Y),a[d]=l}Rr.ngInherit=!0;const Uf="__ngSimpleChanges__";function ud(a){return a[Uf]||null}const ul="http://www.w3.org/2000/svg";let kc;function Kv(a){kc=a}function Tn(a){return!!a.listen}const Mo={createRenderer:(a,l)=>void 0!==kc?kc:"undefined"!=typeof document?document:void 0};function In(a){for(;Array.isArray(a);)a=a[0];return a}function ya(a,l){return In(l[a])}function pi(a,l){return In(l[a.index])}function Oc(a,l){return a.data[l]}function va(a,l){return a[l]}function ti(a,l){const u=l[a];return $s(u)?u:u[0]}function Zv(a){return 4==(4&a[2])}function fd(a){return 128==(128&a[2])}function qs(a,l){return null==l?null:a[l]}function Pc(a){a[18]=0}function Fc(a,l){a[5]+=l;let u=a,d=a[3];for(;null!==d&&(1===l&&1===u[5]||-1===l&&0===u[5]);)d[5]+=l,u=d,d=d[3]}const gt={lFrame:nb(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Xv(){return gt.bindingsEnabled}function Me(){return gt.lFrame.lView}function Gt(){return gt.lFrame.tView}function Lc(a){return gt.lFrame.contextLView=a,a[8]}function Rn(){let a=Vc();for(;null!==a&&64===a.type;)a=a.parent;return a}function Vc(){return gt.lFrame.currentTNode}function Ji(a,l){const u=gt.lFrame;u.currentTNode=a,u.isParent=l}function hl(){return gt.lFrame.isParent}function gd(){gt.lFrame.isParent=!1}function md(){return gt.isInCheckNoChangesMode}function fl(a){gt.isInCheckNoChangesMode=a}function vr(){const a=gt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Li(){return gt.lFrame.bindingIndex}function fs(){return gt.lFrame.bindingIndex++}function ps(a){const l=gt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function _d(a,l){const u=gt.lFrame;u.bindingIndex=u.bindingRootIndex=a,Bc(l)}function Bc(a){gt.lFrame.currentDirectiveIndex=a}function Kf(a){const l=gt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function Dm(){return gt.lFrame.currentQueryIndex}function pl(a){gt.lFrame.currentQueryIndex=a}function yd(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function Am(a,l,u){if(u&tt.SkipSelf){let g=l,_=a;for(;!(g=g.parent,null!==g||u&tt.Host||(g=yd(_),null===g||(_=_[15],10&g.type))););if(null===g)return!1;l=g,a=_}const d=gt.lFrame=Zf();return d.currentTNode=l,d.lView=a,!0}function Ws(a){const l=Zf(),u=a[1];gt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Zf(){const a=gt.lFrame,l=null===a?null:a.child;return null===l?nb(a):l}function nb(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function xm(){const a=gt.lFrame;return gt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const rb=xm;function Uc(){const a=xm();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function ni(){return gt.lFrame.selectedIndex}function gl(a){gt.lFrame.selectedIndex=a}function Yn(){const a=gt.lFrame;return Oc(a.tView,a.selectedIndex)}function vI(){gt.lFrame.currentNamespace=ul}function sb(){gt.lFrame.currentNamespace=null}function vd(a,l){for(let u=l.directiveStart,d=l.directiveEnd;u<d;u++){const _=a.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:S,ngAfterViewChecked:A,ngOnDestroy:M}=_;v&&(a.contentHooks||(a.contentHooks=[])).push(-u,v),w&&((a.contentHooks||(a.contentHooks=[])).push(u,w),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,w)),S&&(a.viewHooks||(a.viewHooks=[])).push(-u,S),A&&((a.viewHooks||(a.viewHooks=[])).push(u,A),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,A)),null!=M&&(a.destroyHooks||(a.destroyHooks=[])).push(u,M)}}function ml(a,l,u){Ed(a,l,3,u)}function bd(a,l,u,d){(3&a[2])===u&&Ed(a,l,u,d)}function Jf(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function Ed(a,l,u,d){const _=null!=d?d:-1,v=l.length-1;let w=0;for(let S=void 0!==d?65535&a[18]:0;S<v;S++)if("number"==typeof l[S+1]){if(w=l[S],null!=d&&w>=d)break}else l[S]<0&&(a[18]+=65536),(w<_||-1==_)&&(Xf(a,u,l,S),a[18]=(4294901760&a[18])+S+2),S++}function Xf(a,l,u,d){const g=u[d]<0,_=u[d+1],w=a[g?-u[d]:u[d]];if(g){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{_.call(w)}finally{}}}else try{_.call(w)}finally{}}class wa{constructor(l,u,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function tp(a,l,u){const d=Tn(a);let g=0;for(;g<u.length;){const _=u[g];if("number"==typeof _){if(0!==_)break;g++;const v=u[g++],w=u[g++],S=u[g++];d?a.setAttribute(l,w,S,v):l.setAttributeNS(v,w,S)}else{const v=_,w=u[++g];gi(v)?d&&a.setProperty(l,v,w):d?a.setAttribute(l,v,w):l.setAttribute(v,w),g++}}return g}function Rm(a){return 3===a||4===a||6===a}function gi(a){return 64===a.charCodeAt(0)}function wd(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let d=0;d<l.length;d++){const g=l[d];"number"==typeof g?u=g:0===u||Kn(a,u,g,null,-1===u||2===u?l[++d]:null)}}return a}function Kn(a,l,u,d,g){let _=0,v=a.length;if(-1===l)v=-1;else for(;_<a.length;){const w=a[_++];if("number"==typeof w){if(w===l){v=-1;break}if(w>l){v=_-1;break}}}for(;_<a.length;){const w=a[_];if("number"==typeof w)break;if(w===u){if(null===d)return void(null!==g&&(a[_+1]=g));if(d===a[_+1])return void(a[_+2]=g)}_++,null!==d&&_++,null!==g&&_++}-1!==v&&(a.splice(v,0,l),_=v+1),a.splice(_++,0,u),null!==d&&a.splice(_++,0,d),null!==g&&a.splice(_++,0,g)}function Cd(a){return-1!==a}function Ys(a){return 32767&a}function Ca(a,l){let u=function(a){return a>>16}(a),d=l;for(;u>0;)d=d[15],u--;return d}let km=!0;function Id(a){const l=km;return km=a,l}let ub=0;function No(a,l){const u=cn(a,l);if(-1!==u)return u;const d=l[1];d.firstCreatePass&&(a.injectorIndex=l.length,Om(d.data,a),Om(l,null),Om(d.blueprint,null));const g=qe(a,l),_=a.injectorIndex;if(Cd(g)){const v=Ys(g),w=Ca(g,l),S=w[1].data;for(let A=0;A<8;A++)l[_+A]=w[v+A]|S[v+A]}return l[_+8]=g,_}function Om(a,l){a.push(0,0,0,0,0,0,0,0,l)}function cn(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function qe(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,d=null,g=l;for(;null!==g;){const _=g[1],v=_.type;if(d=2===v?_.declTNode:1===v?g[6]:null,null===d)return-1;if(u++,g=g[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function ct(a,l,u){!function(a,l,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(_n)&&(d=u[_n]),null==d&&(d=u[_n]=ub++);const g=255&d;l.data[a+(g>>5)]|=1<<g}(a,l,u)}function ri(a,l,u){if(u&tt.Optional)return a;Bt(l,"NodeInjector")}function _l(a,l,u,d){if(u&tt.Optional&&void 0===d&&(d=null),0==(u&(tt.Self|tt.Host))){const g=a[9],_=xr(void 0);try{return g?g.get(l,d,u&tt.Optional):lt(l,d,u&tt.Optional)}finally{xr(_)}}return ri(d,l,u)}function Hc(a,l,u,d=tt.Default,g){if(null!==a){const _=function(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(_n)?a[_n]:void 0;return"number"==typeof l?l>=0?255&l:db:l}(u);if("function"==typeof _){if(!Am(l,a,d))return d&tt.Host?ri(g,u,d):_l(l,u,d,g);try{const v=_(d);if(null!=v||d&tt.Optional)return v;Bt(u)}finally{rb()}}else if("number"==typeof _){let v=null,w=cn(a,l),S=-1,A=d&tt.Host?l[16][6]:null;for((-1===w||d&tt.SkipSelf)&&(S=-1===w?qe(a,l):l[w+8],-1!==S&&np(d,!1)?(v=l[1],w=Ys(S),l=Ca(S,l)):w=-1);-1!==w;){const M=l[1];if(Ad(_,w,M.data)){const N=Fm(w,l,u,v,d,A);if(N!==Vr)return N}S=l[w+8],-1!==S&&np(d,l[1].data[w+8]===A)&&Ad(_,w,l)?(v=M,w=Ys(S),l=Ca(S,l)):w=-1}}}return _l(l,u,d,g)}const Vr={};function db(){return new Oo(Rn(),Me())}function Fm(a,l,u,d,g,_){const v=l[1],w=v.data[a+8],M=Dd(w,v,u,null==d?ma(w)&&km:d!=v&&0!=(3&w.type),g&tt.Host&&_===w);return null!==M?bn(l,v,M,w):Vr}function Dd(a,l,u,d,g){const _=a.providerIndexes,v=l.data,w=1048575&_,S=a.directiveStart,M=_>>20,F=g?w+M:a.directiveEnd;for(let z=d?w:w+M;z<F;z++){const J=v[z];if(z<S&&u===J||z>=S&&J.type===u)return z}if(g){const z=v[S];if(z&&yr(z)&&z.type===u)return S}return null}function bn(a,l,u,d){let g=a[u];const _=l.data;if(function(a){return a instanceof wa}(g)){const v=g;v.resolving&&function(a,l){throw new be("200",`Circular dependency in DI detected for ${a}`)}(Pe(_[u]));const w=Id(v.canSeeViewProviders);v.resolving=!0;const S=v.injectImpl?xr(v.injectImpl):null;Am(a,d,tt.Default);try{g=a[u]=v.factory(void 0,_,a,d),l.firstCreatePass&&u>=d.directiveStart&&function(a,l,u){const{ngOnChanges:d,ngOnInit:g,ngDoCheck:_}=l.type.prototype;if(d){const v=Vf(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,v)}g&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,g),_&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,_))}(u,_[u],l)}finally{null!==S&&xr(S),Id(w),v.resolving=!1,rb()}}return g}function Ad(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function np(a,l){return!(a&tt.Self||a&tt.Host&&l)}class Oo{constructor(l,u){this._tNode=l,this._lView=u}get(l,u){return Hc(this._tNode,this._lView,l,void 0,u)}}function rp(a){return Lt(()=>{const l=a.prototype.constructor,u=l[kt]||ip(l),d=Object.prototype;let g=Object.getPrototypeOf(a.prototype).constructor;for(;g&&g!==d;){const _=g[kt]||ip(g);if(_&&_!==u)return _;g=Object.getPrototypeOf(g)}return _=>new _})}function ip(a){return re(a)?()=>{const l=ip(H(a));return l&&l()}:_a(a)}function Vm(a){return function(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const d=u.length;let g=0;for(;g<d;){const _=u[g];if(Rm(_))break;if(0===_)g+=2;else if("number"==typeof _)for(g++;g<d&&"string"==typeof u[g];)g++;else{if(_===l)return u[g+1];g+=2}}}return null}(Rn(),a)}const Ks="__parameters__";function Fo(a,l,u){return Lt(()=>{const d=function(a){return function(...u){if(a){const d=a(...u);for(const g in d)this[g]=d[g]}}}(l);function g(..._){if(this instanceof g)return d.apply(this,_),this;const v=new g(..._);return w.annotation=v,w;function w(S,A,M){const N=S.hasOwnProperty(Ks)?S[Ks]:Object.defineProperty(S,Ks,{value:[]})[Ks];for(;N.length<=M;)N.push(null);return(N[M]=N[M]||[]).push(v),S}}return u&&(g.prototype=Object.create(u.prototype)),g.prototype.ngMetadataName=a,g.annotationCls=g,g})}class Pn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=ht({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const CI=new Pn("AnalyzeForEntryComponents"),Os=Function;function ts(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let d=a[u];Array.isArray(d)?(l===a&&(l=a.slice(0,u)),ts(d,l)):l!==a&&l.push(d)}return l}function ns(a,l){a.forEach(u=>Array.isArray(u)?ns(u,l):l(u))}function vl(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function Ia(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Vo(a,l){const u=[];for(let d=0;d<a;d++)u.push(l);return u}function cr(a,l,u){let d=bl(a,l);return d>=0?a[1|d]=u:(d=~d,function(a,l,u,d){let g=a.length;if(g==l)a.push(u,d);else if(1===g)a.push(d,a[0]),a[0]=u;else{for(g--,a.push(a[g-1],a[g]);g>l;)a[g]=a[g-2],g--;a[l]=u,a[l+1]=d}}(a,d,l,u)),d}function Gn(a,l){const u=bl(a,l);if(u>=0)return a[1|u]}function bl(a,l){return function(a,l,u){let d=0,g=a.length>>u;for(;g!==d;){const _=d+(g-d>>1),v=a[_<<u];if(l===v)return _<<u;v>l?g=_:d=_+1}return~(g<<u)}(a,l,1)}const qc={},Wc="__NG_DI_FLAG__",Sl="ngTempTokenPath",Rd=/\n/gm,Yc="__source",Kc=X({provide:String,useValue:X});let Sa;function Ct(a){const l=Sa;return Sa=a,l}function fb(a,l=tt.Default){if(void 0===Sa)throw new Error("inject() must be called from an injection context");return null===Sa?lt(a,void 0,l):Sa.get(a,l&tt.Optional?null:void 0,l)}function fn(a,l=tt.Default){return(Kt||fb)(H(a),l)}const Nd=fn;function Ta(a){const l=[];for(let u=0;u<a.length;u++){const d=H(a[u]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let g,_=tt.Default;for(let v=0;v<d.length;v++){const w=d[v],S=hp(w);"number"==typeof S?-1===S?g=w.token:_|=S:g=w}l.push(fn(g,_))}else l.push(fn(d))}return l}function Tl(a,l){return a[Wc]=l,a.prototype[Wc]=l,a}function hp(a){return a[Wc]}function _s(a,l,u,d){const g=a[Sl];throw l[Yc]&&g.unshift(l[Yc]),a.message=function(a,l,u,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let g=ee(l);if(Array.isArray(l))g=l.map(ee).join(" -> ");else if("object"==typeof l){let _=[];for(let v in l)if(l.hasOwnProperty(v)){let w=l[v];_.push(v+":"+("string"==typeof w?JSON.stringify(w):ee(w)))}g=`{${_.join(", ")}}`}return`${u}${d?"("+d+")":""}[${g}]: ${a.replace(Rd,"\n  ")}`}("\n"+a.message,g,u,d),a.ngTokenPath=g,a[Sl]=null,a}const Js=Tl(Fo("Inject",a=>({token:a})),-1),Bo=Tl(Fo("Optional"),8),br=Tl(Fo("SkipSelf"),4);let Xc;function Xs(a){var l;return(null===(l=function(){if(void 0===Xc&&(Xc=null,rn.trustedTypes))try{Xc=rn.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return Xc}())||void 0===l?void 0:l.createHTML(a))||a}class xa{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class yb extends xa{getTypeName(){return"HTML"}}class vb extends xa{getTypeName(){return"Style"}}class Vd extends xa{getTypeName(){return"Script"}}class bb extends xa{getTypeName(){return"URL"}}class Eb extends xa{getTypeName(){return"ResourceURL"}}function jo(a){return a instanceof xa?a.changingThisBreaksApplicationSecurity:a}function I(a,l){const u=b(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function b(a){return a instanceof xa&&a.getTypeName()||null}function E(a){return new yb(a)}function D(a){return new vb(a)}function k(a){return new Vd(a)}function V(a){return new bb(a)}function ae(a){return new Eb(a)}class Ke{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(Xs(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class mt{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Xs(l),u;const d=this.inertDocument.createElement("body");return d.innerHTML=Xs(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(l){const u=l.attributes;for(let g=u.length-1;0<g;g--){const v=u.item(g).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&l.removeAttribute(v)}let d=l.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Fn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ys=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function to(a){return(a=String(a)).match(Fn)||a.match(ys)?a:"unsafe:"+a}function Bi(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function Ho(...a){const l={};for(const u of a)for(const d in u)u.hasOwnProperty(d)&&(l[d]=!0);return l}const iu=Bi("area,br,col,hr,img,wbr"),Bd=Bi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ml=Bi("rp,rt"),_p=Ho(iu,Ho(Bd,Bi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ho(Ml,Bi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ho(Ml,Bd)),Go=Bi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ma=Bi("srcset"),Cb=Ho(Go,Ma,Bi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),FM=Bi("script,style,template");class Ib{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let g=this.checkClobberedElement(u,u.nextSibling);if(g){u=g;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!_p.hasOwnProperty(u))return this.sanitizedSomething=!0,!FM.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=l.attributes;for(let g=0;g<d.length;g++){const _=d.item(g),v=_.name,w=v.toLowerCase();if(!Cb.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let S=_.value;Go[w]&&(S=to(S)),Ma[w]&&(a=S,S=(a=String(a)).split(",").map(l=>to(l.trim())).join(", ")),this.buf.push(" ",v,'="',MI(S),'"')}var a;return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();_p.hasOwnProperty(u)&&!iu.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(MI(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const LM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,VM=/([^\#-~ |!])/g;function MI(a){return a.replace(/&/g,"&amp;").replace(LM,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(VM,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yp;function vp(a,l){let u=null;try{yp=yp||function(a){const l=new mt(a);return function(){try{return!!(new window.DOMParser).parseFromString(Xs(""),"text/html")}catch(a){return!1}}()?new Ke(l):l}(a);let d=l?String(l):"";u=yp.getInertBodyElement(d);let g=5,_=d;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,d=_,_=u.innerHTML,u=yp.getInertBodyElement(d)}while(d!==_);return Xs((new Ib).sanitizeChildren(Sb(u)||u))}finally{if(u){const d=Sb(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Sb(a){return"content"in a&&function(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Jn=(()=>((Jn=Jn||{})[Jn.NONE=0]="NONE",Jn[Jn.HTML=1]="HTML",Jn[Jn.STYLE=2]="STYLE",Jn[Jn.SCRIPT=3]="SCRIPT",Jn[Jn.URL=4]="URL",Jn[Jn.RESOURCE_URL=5]="RESOURCE_URL",Jn))();function Db(a){const l=function(){const a=Me();return a&&a[12]}();return l?l.sanitize(Jn.URL,a)||"":I(a,"URL")?jo(a):to(we(a))}const Hd="__ngContext__";function ii(a,l){a[Hd]=l}function Mb(a){const l=function(a){return a[Hd]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function su(a){return a.ngOriginalError}function zM(a,...l){a.error(...l)}class zd{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l),d=this._findContext(l),g=(a=l)&&a.ngErrorLogger||zM;var a;g(this._console,"ERROR",l),u&&g(this._console,"ORIGINAL ERROR",u),d&&g(this._console,"ERROR CONTEXT",d)}_findContext(l){return l?l.ngDebugContext||this._findContext(su(l)):null}_findOriginalError(l){let u=l&&su(l);for(;u&&su(u);)u=su(u);return u||null}}const jI=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(rn))();function $o(a){return a instanceof Function?a():a}var zo=(()=>((zo=zo||{})[zo.Important=1]="Important",zo[zo.DashCase=2]="DashCase",zo))();function e_(a,l){return undefined(a,l)}function Ip(a){const l=a[3];return fi(l)?l[3]:l}function t_(a){return Lb(a[13])}function qI(a){return Lb(a[4])}function Lb(a){for(;null!==a&&!fi(a);)a=a[4];return a}function ou(a,l,u,d,g){if(null!=d){let _,v=!1;fi(d)?_=d:$s(d)&&(v=!0,d=d[0]);const w=In(d);0===a&&null!==u?null==g?QI(l,u,w):Nl(l,u,w,g||null,!0):1===a&&null!==u?Nl(l,u,w,g||null,!0):2===a?function(a,l,u){const d=s_(a,l);d&&function(a,l,u,d){Tn(a)?a.removeChild(l,u,d):l.removeChild(u)}(a,d,l,u)}(l,w,v):3===a&&l.destroyNode(w),null!=_&&function(a,l,u,d,g){const _=u[7];_!==In(u)&&ou(l,a,d,_,g);for(let w=10;w<u.length;w++){const S=u[w];cu(S[1],S,a,l,d,_)}}(l,a,_,u,g)}}function Vb(a,l,u){return Tn(a)?a.createElement(l,u):null===u?a.createElement(l):a.createElementNS(u,l)}function r_(a,l){const u=a[9],d=u.indexOf(l),g=l[3];1024&l[2]&&(l[2]&=-1025,Fc(g,-1)),u.splice(d,1)}function i_(a,l){if(a.length<=10)return;const u=10+l,d=a[u];if(d){const g=d[17];null!==g&&g!==a&&r_(g,d),l>0&&(a[u-1][4]=d[4]);const _=Ia(a,10+l);!function(a,l){cu(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(d[1],d);const v=_[19];null!==v&&v.detachView(_[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function YI(a,l){if(!(256&l[2])){const u=l[11];Tn(u)&&u.destroyNode&&cu(a,l,u,3,null,null),function(a){let l=a[13];if(!l)return kl(a[1],a);for(;l;){let u=null;if($s(l))u=l[13];else{const d=l[10];d&&(u=d)}if(!u){for(;l&&!l[4]&&l!==a;)$s(l)&&kl(l[1],l),l=l[3];null===l&&(l=a),$s(l)&&kl(l[1],l),u=l&&l[4]}l=u}}(l)}}function kl(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let d=0;d<u.length;d+=2){const g=l[u[d]];if(!(g instanceof wa)){const _=u[d+1];if(Array.isArray(_))for(let v=0;v<_.length;v+=2){const w=g[_[v]],S=_[v+1];try{S.call(w)}finally{}}else try{_.call(g)}finally{}}}}(a,l),function(a,l){const u=a.cleanup,d=l[7];let g=-1;if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const v=u[_+1],w="function"==typeof v?v(l):In(l[v]),S=d[g=u[_+2]],A=u[_+3];"boolean"==typeof A?w.removeEventListener(u[_],S,A):A>=0?d[g=A]():d[g=-A].unsubscribe(),_+=2}else{const v=d[g=u[_+1]];u[_].call(v)}if(null!==d){for(let _=g+1;_<d.length;_++)d[_]();l[7]=null}}(a,l),1===l[1].type&&Tn(l[11])&&l[11].destroy();const u=l[17];if(null!==u&&fi(l[3])){u!==l[3]&&r_(u,l);const d=l[19];null!==d&&d.detachView(a)}}}function KI(a,l,u){return function(a,l,u){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return u[0];if(2&d.flags){const g=a.data[d.directiveStart].encapsulation;if(g===Ve.None||g===Ve.Emulated)return null}return pi(d,u)}(a,l.parent,u)}function Nl(a,l,u,d,g){Tn(a)?a.insertBefore(l,u,d,g):l.insertBefore(u,d,g)}function QI(a,l,u){Tn(a)?a.appendChild(l,u):l.appendChild(u)}function JI(a,l,u,d,g){null!==d?Nl(a,l,u,d,g):QI(a,l,u)}function s_(a,l){return Tn(a)?a.parentNode(l):l.parentNode}function au(a,l,u){return lu(a,l,u)}let lu=function(a,l,u){return 40&a.type?pi(a,u):null};function Wd(a,l,u,d){const g=KI(a,d,l),_=l[11],w=au(d.parent||l[6],d,l);if(null!=g)if(Array.isArray(u))for(let S=0;S<u.length;S++)JI(_,g,u[S],w,!1);else JI(_,g,u,w,!1)}function c_(a,l){if(null!==l){const u=l.type;if(3&u)return pi(l,a);if(4&u)return jb(-1,a[l.index]);if(8&u){const d=l.child;if(null!==d)return c_(a,d);{const g=a[l.index];return fi(g)?jb(-1,g):In(g)}}if(32&u)return e_(l,a)()||In(a[l.index]);{const d=Ub(a,l);return null!==d?Array.isArray(d)?d[0]:c_(Ip(a[16]),d):c_(a,l.next)}}return null}function Ub(a,l){return null!==l?a[16][6].projection[l.projection]:null}function jb(a,l){const u=10+a+1;if(u<l.length){const d=l[u],g=d[1].firstChild;if(null!==g)return c_(d,g)}return l[7]}function u_(a,l,u,d,g,_,v){for(;null!=u;){const w=d[u.index],S=u.type;if(v&&0===l&&(w&&ii(In(w),d),u.flags|=4),64!=(64&u.flags))if(8&S)u_(a,l,u.child,d,g,_,!1),ou(l,a,g,w,_);else if(32&S){const A=e_(u,d);let M;for(;M=A();)ou(l,a,g,M,_);ou(l,a,g,w,_)}else 16&S?Ol(a,l,d,u,g,_):ou(l,a,g,w,_);u=v?u.projectionNext:u.next}}function cu(a,l,u,d,g,_){u_(u,d,a.firstChild,l,g,_,!1)}function Ol(a,l,u,d,g,_){const v=u[16],S=v[6].projection[d.projection];if(Array.isArray(S))for(let A=0;A<S.length;A++)ou(l,a,g,S[A],_);else u_(a,l,S,v[3],g,_,!0)}function tS(a,l,u){Tn(a)?a.setAttribute(l,"style",u):l.style.cssText=u}function Gb(a,l,u){Tn(a)?""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u):l.className=u}function $b(a,l,u){let d=a.length;for(;;){const g=a.indexOf(l,u);if(-1===g)return g;if(0===g||a.charCodeAt(g-1)<=32){const _=l.length;if(g+_===d||a.charCodeAt(g+_)<=32)return g}u=g+1}}const nS="ng-template";function uR(a,l,u){let d=0;for(;d<a.length;){let g=a[d++];if(u&&"class"===g){if(g=a[d],-1!==$b(g.toLowerCase(),l,0))return!0}else if(1===g){for(;d<a.length&&"string"==typeof(g=a[d++]);)if(g.toLowerCase()===l)return!0;return!1}}return!1}function zb(a){return 4===a.type&&a.value!==nS}function dR(a,l,u){return l===(4!==a.type||u?a.value:nS)}function hR(a,l,u){let d=4;const g=a.attrs||[],_=function(a){for(let l=0;l<a.length;l++)if(Rm(a[l]))return l;return a.length}(g);let v=!1;for(let w=0;w<l.length;w++){const S=l[w];if("number"!=typeof S){if(!v)if(4&d){if(d=2|1&d,""!==S&&!dR(a,S,u)||""===S&&1===l.length){if(no(d))return!1;v=!0}}else{const A=8&d?S:l[++w];if(8&d&&null!==a.attrs){if(!uR(a.attrs,A,u)){if(no(d))return!1;v=!0}continue}const N=qb(8&d?"class":S,g,zb(a),u);if(-1===N){if(no(d))return!1;v=!0;continue}if(""!==A){let F;F=N>_?"":g[N+1].toLowerCase();const z=8&d?F:null;if(z&&-1!==$b(z,A,0)||2&d&&A!==F){if(no(d))return!1;v=!0}}}}else{if(!v&&!no(d)&&!no(S))return!1;if(v&&no(S))continue;v=!1,d=S|1&d}}return no(d)||v}function no(a){return 0==(1&a)}function qb(a,l,u,d){if(null===l)return-1;let g=0;if(d||!u){let _=!1;for(;g<l.length;){const v=l[g];if(v===a)return g;if(3===v||6===v)_=!0;else{if(1===v||2===v){let w=l[++g];for(;"string"==typeof w;)w=l[++g];continue}if(4===v)break;if(0===v){g+=4;continue}}g+=_?1:2}return-1}return function(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const d=a[u];if("number"==typeof d)return-1;if(d===l)return u;u++}return-1}(l,a)}function rS(a,l,u=!1){for(let d=0;d<l.length;d++)if(hR(a,l[d],u))return!0;return!1}function b1(a,l){e:for(let u=0;u<l.length;u++){const d=l[u];if(a.length===d.length){for(let g=0;g<a.length;g++)if(a[g]!==d[g])continue e;return!0}}return!1}function sS(a,l){return a?":not("+l.trim()+")":l}function P(a){let l=a[0],u=1,d=2,g="",_=!1;for(;u<a.length;){let v=a[u];if("string"==typeof v)if(2&d){const w=a[++u];g+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&d?g+="."+v:4&d&&(g+=" "+v);else""!==g&&!no(v)&&(l+=sS(_,g),g=""),d=v,_=_||!no(d);u++}return""!==g&&(l+=sS(_,g)),l}const dt={};function uu(a){Yd(Gt(),Me(),ni()+a,md())}function Yd(a,l,u,d){if(!d)if(3==(3&l[2])){const _=a.preOrderCheckHooks;null!==_&&ml(l,_,u)}else{const _=a.preOrderHooks;null!==_&&bd(l,_,0,u)}gl(u)}function d_(a,l){return a<<17|l<<2}function ro(a){return a>>17&32767}function Sp(a){return 2|a}function ka(a){return(131068&a)>>2}function h_(a,l){return-131069&a|l<<2}function Xt(a){return 1|a}function Qb(a,l){const u=a.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const g=u[d],_=u[d+1];if(-1!==_){const v=a.data[_];pl(g),v.contentQueries(2,l[_],_)}}}function Jd(a,l,u,d,g,_,v,w,S,A){const M=l.blueprint.slice();return M[0]=g,M[2]=140|d,Pc(M),M[3]=M[15]=a,M[8]=u,M[10]=v||a&&a[10],M[11]=w||a&&a[11],M[12]=S||a&&a[12]||null,M[9]=A||a&&a[9]||null,M[6]=_,M[16]=2==l.type?a[16]:M,M}function Fl(a,l,u,d,g){let _=a.data[l];if(null===_)_=function(a,l,u,d,g){const _=Vc(),v=hl(),S=a.data[l]=function(a,l,u,d,g,_){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?_:_&&_.parent,u,l,d,g);return null===a.firstChild&&(a.firstChild=S),null!==_&&(v?null==_.child&&null!==S.parent&&(_.child=S):null===_.next&&(_.next=S)),S}(a,l,u,d,g),gt.lFrame.inI18n&&(_.flags|=64);else if(64&_.type){_.type=u,_.value=d,_.attrs=g;const v=function(){const a=gt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();_.injectorIndex=null===v?-1:v.injectorIndex}return Ji(_,!0),_}function hu(a,l,u,d){if(0===u)return-1;const g=l.length;for(let _=0;_<u;_++)l.push(d),a.blueprint.push(d),a.data.push(null);return g}function kr(a,l,u){Ws(l);try{const d=a.viewQuery;null!==d&&pE(1,d,u);const g=a.template;null!==g&&Jb(a,l,g,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Qb(a,l),a.staticViewQueries&&pE(2,a.viewQuery,u);const _=a.components;null!==_&&function(a,l){for(let u=0;u<l.length;u++)dE(a,l[u])}(l,_)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{l[2]&=-5,Uc()}}function Ll(a,l,u,d){const g=l[2];if(256==(256&g))return;Ws(l);const _=md();try{Pc(l),function(a){gt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&Jb(a,l,u,2,d);const v=3==(3&g);if(!_)if(v){const A=a.preOrderCheckHooks;null!==A&&ml(l,A,null)}else{const A=a.preOrderHooks;null!==A&&bd(l,A,0,null),Jf(l,0)}if(function(a){for(let l=t_(a);null!==l;l=qI(l)){if(!l[2])continue;const u=l[9];for(let d=0;d<u.length;d++){const g=u[d],_=g[3];0==(1024&g[2])&&Fc(_,1),g[2]|=1024}}}(l),function(a){for(let l=t_(a);null!==l;l=qI(l))for(let u=10;u<l.length;u++){const d=l[u],g=d[1];fd(d)&&Ll(g,d,g.template,d[8])}}(l),null!==a.contentQueries&&Qb(a,l),!_)if(v){const A=a.contentCheckHooks;null!==A&&ml(l,A)}else{const A=a.contentHooks;null!==A&&bd(l,A,1),Jf(l,1)}!function(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const g=u[d];if(g<0)gl(~g);else{const _=g,v=u[++d],w=u[++d];_d(v,_),w(2,l[_])}}}finally{gl(-1)}}(a,l);const w=a.components;null!==w&&function(a,l){for(let u=0;u<l.length;u++)SR(a,l[u])}(l,w);const S=a.viewQuery;if(null!==S&&pE(2,S,d),!_)if(v){const A=a.viewCheckHooks;null!==A&&ml(l,A)}else{const A=a.viewHooks;null!==A&&bd(l,A,2),Jf(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),_||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,Fc(l[3],-1))}finally{Uc()}}function Gi(a,l,u,d){const g=l[10],_=!md(),v=Zv(l);try{_&&!v&&g.begin&&g.begin(),v&&kr(a,l,d),Ll(a,l,u,d)}finally{_&&!v&&g.end&&g.end()}}function Jb(a,l,u,d,g){const _=ni(),v=2&d;try{gl(-1),v&&l.length>20&&Yd(a,l,20,md()),u(d,g)}finally{gl(_)}}function Xb(a,l,u){if(Pf(l)){const g=l.directiveEnd;for(let _=l.directiveStart;_<g;_++){const v=a.data[_];v.contentQueries&&v.contentQueries(1,u[_],_)}}}function kp(a,l,u){!Xv()||(function(a,l,u,d){const g=u.directiveStart,_=u.directiveEnd;a.firstCreatePass||No(u,l),ii(d,l);const v=u.initialInputs;for(let w=g;w<_;w++){const S=a.data[w],A=yr(S);A&&lE(l,u,S);const M=bn(l,a,w,u);ii(M,l),null!==v&&wS(0,w-g,M,S,0,v),A&&(ti(u.index,l)[8]=M)}}(a,l,u,pi(u,l)),128==(128&u.flags)&&function(a,l,u){const d=u.directiveStart,g=u.directiveEnd,v=u.index,w=gt.lFrame.currentDirectiveIndex;try{gl(v);for(let S=d;S<g;S++){const A=a.data[S],M=l[S];Bc(S),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&eh(A,M)}}finally{gl(-1),Bc(w)}}(a,l,u))}function v_(a,l,u=pi){const d=l.localNames;if(null!==d){let g=l.index+1;for(let _=0;_<d.length;_+=2){const v=d[_+1],w=-1===v?u(l,a):a[v];a[g++]=w}}}function eE(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Np(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Np(a,l,u,d,g,_,v,w,S,A){const M=20+d,N=M+g,F=function(a,l){const u=[];for(let d=0;d<l;d++)u.push(d<a?null:dt);return u}(M,N),z="function"==typeof A?A():A;return F[1]={type:a,blueprint:F,template:u,queries:null,viewQuery:w,declTNode:l,data:F.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:S,consts:z,incompleteFirstPass:!1}}function nE(a,l,u,d){const g=DS(l);null===u?g.push(d):(g.push(u),a.firstCreatePass&&T_(a).push(d,g.length-1))}function iE(a,l,u){for(let d in a)if(a.hasOwnProperty(d)){const g=a[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(l,g):u[d]=[l,g]}return u}function _i(a,l,u,d,g,_,v,w){const S=pi(l,u);let M,A=l.inputs;!w&&null!=A&&(M=A[d])?(Lp(a,u,M,d,g),ma(l)&&function(a,l){const u=ti(l,a);16&u[2]||(u[2]|=64)}(u,l.index)):3&l.type&&(d=function(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),g=null!=v?v(g,l.value||"",d):g,Tn(_)?_.setProperty(S,d,g):gi(d)||(S.setProperty?S.setProperty(d,g):S[d]=g))}function aE(a,l,u,d){let g=!1;if(Xv()){const _=function(a,l,u){const d=a.directiveRegistry;let g=null;if(d)for(let _=0;_<d.length;_++){const v=d[_];rS(u,v.selectors,!1)&&(g||(g=[]),ct(No(u,l),a,v.type),yr(v)?(ES(a,u),g.unshift(v)):g.push(v))}return g}(a,l,u),v=null===d?null:{"":-1};if(null!==_){g=!0,w_(u,a.data.length,_.length);for(let M=0;M<_.length;M++){const N=_[M];N.providersResolver&&N.providersResolver(N)}let w=!1,S=!1,A=hu(a,l,_.length,null);for(let M=0;M<_.length;M++){const N=_[M];u.mergedAttrs=wd(u.mergedAttrs,N.hostAttrs),C_(a,u,l,A,N),E_(A,N,v),null!==N.contentQueries&&(u.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(u.flags|=128);const F=N.type.prototype;!w&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),w=!0),!S&&(F.ngOnChanges||F.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),S=!0),A++}!function(a,l){const d=l.directiveEnd,g=a.data,_=l.attrs,v=[];let w=null,S=null;for(let A=l.directiveStart;A<d;A++){const M=g[A],N=M.inputs,F=null===_||zb(l)?null:CR(N,_);v.push(F),w=iE(N,A,w),S=iE(M.outputs,A,S)}null!==w&&(w.hasOwnProperty("class")&&(l.flags|=16),w.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=v,l.inputs=w,l.outputs=S}(a,u)}v&&function(a,l,u){if(l){const d=a.localNames=[];for(let g=0;g<l.length;g+=2){const _=u[l[g+1]];if(null==_)throw new be("301",`Export of name '${l[g+1]}' not found!`);d.push(l[g],_)}}}(u,d,v)}return u.mergedAttrs=wd(u.mergedAttrs,u.attrs),g}function bS(a,l,u,d,g,_){const v=_.hostBindings;if(v){let w=a.hostBindingOpCodes;null===w&&(w=a.hostBindingOpCodes=[]);const S=~l.index;(function(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(w)!=S&&w.push(S),w.push(d,g,v)}}function eh(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function ES(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function E_(a,l,u){if(u){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)u[l.exportAs[d]]=a;yr(l)&&(u[""]=a)}}function w_(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function C_(a,l,u,d,g){a.data[d]=g;const _=g.factory||(g.factory=_a(g.type)),v=new wa(_,yr(g),null);a.blueprint[d]=v,u[d]=v,bS(a,l,0,d,hu(a,u,g.hostVars,dt),g)}function lE(a,l,u){const d=pi(l,a),g=eE(u),_=a[10],v=ur(a,Jd(a,g,null,u.onPush?64:16,d,l,_,_.createRenderer(d,u),null,null));a[l.index]=v}function Ps(a,l,u,d,g,_){const v=pi(a,l);!function(a,l,u,d,g,_,v){if(null==_)Tn(a)?a.removeAttribute(l,g,u):l.removeAttribute(g);else{const w=null==v?we(_):v(_,d||"",g);Tn(a)?a.setAttribute(l,g,w,u):u?l.setAttributeNS(u,g,w):l.setAttribute(g,w)}}(l[11],v,_,a.value,u,d,g)}function wS(a,l,u,d,g,_){const v=_[l];if(null!==v){const w=d.setInput;for(let S=0;S<v.length;){const A=v[S++],M=v[S++],N=v[S++];null!==w?d.setInput(u,N,A,M):u[M]=N}}}function CR(a,l){let u=null,d=0;for(;d<l.length;){const g=l[d];if(0!==g)if(5!==g){if("number"==typeof g)break;a.hasOwnProperty(g)&&(null===u&&(u=[]),u.push(g,a[g],l[d+1])),d+=2}else d+=2;else d+=4}return u}function cE(a,l,u,d){return new Array(a,!0,!1,l,null,0,d,u,null,null)}function SR(a,l){const u=ti(l,a);if(fd(u)){const d=u[1];80&u[2]?Ll(d,u,d.template,u[8]):u[5]>0&&Pp(u)}}function Pp(a){for(let d=t_(a);null!==d;d=qI(d))for(let g=10;g<d.length;g++){const _=d[g];if(1024&_[2]){const v=_[1];Ll(v,_,v.template,_[8])}else _[5]>0&&Pp(_)}const u=a[1].components;if(null!==u)for(let d=0;d<u.length;d++){const g=ti(u[d],a);fd(g)&&g[5]>0&&Pp(g)}}function dE(a,l){const u=ti(l,a),d=u[1];(function(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(d,u),kr(d,u,u[8])}function ur(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function Nr(a){for(;a;){a[2]|=64;const l=Ip(a);if(Oi(a)&&!l)return a;a=l}return null}function fE(a,l,u){const d=l[10];d.begin&&d.begin();try{Ll(a,l,a.template,u)}catch(g){throw AS(l,g),g}finally{d.end&&d.end()}}function IS(a){!function(a){for(let l=0;l<a.components.length;l++){const u=a.components[l],d=Mb(u),g=d[1];Gi(g,d,g.template,u)}}(a[8])}function pE(a,l,u){pl(0),l(a,u)}const gE=(()=>Promise.resolve(null))();function DS(a){return a[7]||(a[7]=[])}function T_(a){return a.cleanup||(a.cleanup=[])}function mE(a,l,u){return(null===a||yr(a))&&(u=function(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(u[l.index])),u[11]}function AS(a,l){const u=a[9],d=u?u.get(zd,null):null;d&&d.handleError(l)}function Lp(a,l,u,d,g){for(let _=0;_<u.length;){const v=u[_++],w=u[_++],S=l[v],A=a.data[v];null!==A.setInput?A.setInput(S,g,d,w):S[w]=g}}function oo(a,l,u){const d=ya(l,a);!function(a,l,u){Tn(a)?a.setValue(l,u):l.textContent=u}(a[11],d,u)}function th(a,l,u){let d=u?a.styles:null,g=u?a.classes:null,_=0;if(null!==l)for(let v=0;v<l.length;v++){const w=l[v];"number"==typeof w?_=w:1==_?g=W(g,w):2==_&&(d=W(d,w+": "+l[++v]+";"))}u?a.styles=d:a.stylesWithoutHost=d,u?a.classes=g:a.classesWithoutHost=g}const pu=new Pn("INJECTOR",-1);class _E{get(l,u=qc){if(u===qc){const d=new Error(`NullInjectorError: No provider for ${ee(l)}!`);throw d.name="NullInjectorError",d}return u}}const nh=new Pn("Set Injector scope."),Vl={},AR={};let yE;function gu(){return void 0===yE&&(yE=new _E),yE}function MS(a,l=null,u=null,d){return new mu(a,u,l||gu(),d)}class mu{constructor(l,u,d,g=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];u&&ns(u,w=>this.processProvider(w,l,u)),ns([l],w=>this.processInjectorType(w,[],_)),this.records.set(pu,_u(void 0,this));const v=this.records.get(nh);this.scope=null!=v?v.value:null,this.source=g||("object"==typeof l?null:ee(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,u=qc,d=tt.Default){this.assertNotDestroyed();const g=Ct(this),_=xr(void 0);try{if(!(d&tt.SkipSelf)){let w=this.records.get(l);if(void 0===w){const S=("function"==typeof(a=l)||"object"==typeof a&&a instanceof Pn)&&gr(l);w=S&&this.injectableDefInScope(S)?_u(A_(l),Vl):null,this.records.set(l,w)}if(null!=w)return this.hydrate(l,w)}return(d&tt.Self?gu():this.parent).get(l,u=d&tt.Optional&&u===qc?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Sl]=v[Sl]||[]).unshift(ee(l)),g)throw v;return _s(v,l,"R3InjectorError",this.source)}throw v}finally{xr(_),Ct(g)}var a}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((d,g)=>l.push(ee(g))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(l,u,d){if(!(l=H(l)))return!1;let g=Rs(l);const _=null==g&&l.ngModule||void 0,v=void 0===_?l:_,w=-1!==d.indexOf(v);if(void 0!==_&&(g=Rs(_)),null==g)return!1;if(null!=g.imports&&!w){let M;d.push(v);try{ns(g.imports,N=>{this.processInjectorType(N,u,d)&&(void 0===M&&(M=[]),M.push(N))})}finally{}if(void 0!==M)for(let N=0;N<M.length;N++){const{ngModule:F,providers:z}=M[N];ns(z,J=>this.processProvider(J,F,z||q))}}this.injectorDefTypes.add(v);const S=_a(v)||(()=>new v);this.records.set(v,_u(S,Vl));const A=g.providers;if(null!=A&&!w){const M=l;ns(A,N=>this.processProvider(N,M,A))}return void 0!==_&&void 0!==l.providers}processProvider(l,u,d){let g=Na(l=H(l))?l:H(l&&l.provide);const _=vi(a=l)?_u(void 0,a.useValue):_u(rh(a),Vl);var a;if(Na(l)||!0!==l.multi)this.records.get(g);else{let v=this.records.get(g);v||(v=_u(void 0,Vl,!0),v.factory=()=>Ta(v.multi),this.records.set(g,v)),g=l,v.multi.push(l)}this.records.set(g,_)}hydrate(l,u){return u.value===Vl&&(u.value=AR,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(a=u.value)&&"object"==typeof a&&"function"==typeof a.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var a}injectableDefInScope(l){if(!l.providedIn)return!1;const u=H(l.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function A_(a){const l=gr(a),u=null!==l?l.factory:_a(a);if(null!==u)return u;if(a instanceof Pn)throw new Error(`Token ${ee(a)} is missing a \u0275prov definition.`);if(a instanceof Function)return function(a){const l=a.length;if(l>0){const d=Vo(l,"?");throw new Error(`Can't resolve all parameters for ${ee(a)}: (${d.join(", ")}).`)}const u=function(a){const l=a&&(a[Zi]||a[Hs]);if(l){const u=function(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new Error("unreachable")}function rh(a,l,u){let d;if(Na(a)){const g=H(a);return _a(g)||A_(g)}if(vi(a))d=()=>H(a.useValue);else if(function(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...Ta(a.deps||[]));else if(function(a){return!(!a||!a.useExisting)}(a))d=()=>fn(H(a.useExisting));else{const g=H(a&&(a.useClass||a.provide));if(!function(a){return!!a.deps}(a))return _a(g)||A_(g);d=()=>new g(...Ta(a.deps))}return d}function _u(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function vi(a){return null!==a&&"object"==typeof a&&Kc in a}function Na(a){return"function"==typeof a}const R_=function(a,l,u){return function(a,l=null,u=null,d){const g=MS(a,l,u,d);return g._resolveInjectorDefTypes(),g}({name:u},l,a,u)};let Dn=(()=>{class a{static create(u,d){return Array.isArray(u)?R_(u,d,""):R_(u.providers,u.parent,u.name||"")}}return a.THROW_IF_NOT_FOUND=qc,a.NULL=new _E,a.\u0275prov=ht({token:a,providedIn:"any",factory:()=>fn(pu)}),a.__NG_ELEMENT_ID__=-1,a})();function jl(a,l){vd(Mb(a)[1],Rn())}function B_(a){let l=function(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const d=[a];for(;l;){let g;if(yr(a))g=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Error("Directives cannot inherit Components");g=l.\u0275dir}if(g){if(u){d.push(g);const v=a;v.inputs=AE(a.inputs),v.declaredInputs=AE(a.declaredInputs),v.outputs=AE(a.outputs);const w=g.hostBindings;w&&FR(a,w);const S=g.viewQuery,A=g.contentQueries;if(S&&PR(a,S),A&&$S(a,A),se(a.inputs,g.inputs),se(a.declaredInputs,g.declaredInputs),se(a.outputs,g.outputs),yr(g)&&g.data.animation){const M=a.data;M.animation=(M.animation||[]).concat(g.data.animation)}}const _=g.features;if(_)for(let v=0;v<_.length;v++){const w=_[v];w&&w.ngInherit&&w(a),w===B_&&(u=!1)}}l=Object.getPrototypeOf(l)}!function(a){let l=0,u=null;for(let d=a.length-1;d>=0;d--){const g=a[d];g.hostVars=l+=g.hostVars,g.hostAttrs=wd(g.hostAttrs,u=wd(u,g.hostAttrs))}}(d)}function AE(a){return a===Y?{}:a===q?[]:a}function PR(a,l){const u=a.viewQuery;a.viewQuery=u?(d,g)=>{l(d,g),u(d,g)}:l}function $S(a,l){const u=a.contentQueries;a.contentQueries=u?(d,g,_)=>{l(d,g,_),u(d,g,_)}:l}function FR(a,l){const u=a.hostBindings;a.hostBindings=u?(d,g)=>{l(d,g),u(d,g)}:l}let uh=null;function bu(){if(!uh){const a=rn.Symbol;if(a&&a.iterator)uh=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const d=l[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(uh=d)}}}return uh}class bs{constructor(l){this.wrapped=l}static wrap(l){return new bs(l)}static unwrap(l){return bs.isWrapped(l)?l.wrapped:l}static isWrapped(l){return l instanceof bs}}function jp(a){return!!dh(a)&&(Array.isArray(a)||!(a instanceof Map)&&bu()in a)}function dh(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function is(a,l,u){return a[l]=u}function Br(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Gl(a,l,u,d){const g=Br(a,l,u);return Br(a,l+1,d)||g}function RE(a,l,u,d){const g=Me();return Br(g,fs(),l)&&(Gt(),Ps(Yn(),g,a,l,u,d)),RE}function Eu(a,l,u,d){return Br(a,fs(),u)?l+we(u)+d:dt}function PE(a,l,u,d,g,_,v,w){const S=Me(),A=Gt(),M=a+20,N=A.firstCreatePass?function(a,l,u,d,g,_,v,w,S){const A=l.consts,M=Fl(l,a,4,v||null,qs(A,w));aE(l,u,M,qs(A,S)),vd(l,M);const N=M.tViews=Np(2,M,d,g,_,l.directiveRegistry,l.pipeRegistry,null,l.schemas,A);return null!==l.queries&&(l.queries.template(l,M),N.queries=l.queries.embeddedTView(M)),M}(M,A,S,l,u,d,g,_,v):A.data[M];Ji(N,!1);const F=S[11].createComment("");Wd(A,S,F,N),ii(F,S),ur(S,S[M]=cE(F,S,F,N)),Ao(N)&&kp(A,S,N),null!=v&&v_(S,N,w)}function Gp(a){return va(gt.lFrame.contextLView,20+a)}function zp(a,l=tt.Default){const u=Me();return null===u?fn(a,l):Hc(Rn(),u,H(a),l)}function GE(a,l,u){const d=Me();return Br(d,fs(),l)&&_i(Gt(),Yn(),d,a,l,d[11],u,!1),GE}function Q_(a,l,u,d,g){const v=g?"class":"style";Lp(a,u,l.inputs[v],v,d)}function Yl(a,l,u,d){const g=Me(),_=Gt(),v=20+a,w=g[11],S=g[v]=Vb(w,l,gt.lFrame.currentNamespace),A=_.firstCreatePass?function(a,l,u,d,g,_,v){const w=l.consts,A=Fl(l,a,2,g,qs(w,_));return aE(l,u,A,qs(w,v)),null!==A.attrs&&th(A,A.attrs,!1),null!==A.mergedAttrs&&th(A,A.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,A),A}(v,_,g,0,l,u,d):_.data[v];Ji(A,!0);const M=A.mergedAttrs;null!==M&&tp(w,S,M);const N=A.classes;null!==N&&Gb(w,S,N);const F=A.styles;null!==F&&tS(w,S,F),64!=(64&A.flags)&&Wd(_,g,S,A),0===gt.lFrame.elementDepthCount&&ii(S,g),gt.lFrame.elementDepthCount++,Ao(A)&&(kp(_,g,A),Xb(_,A,g)),null!==d&&v_(g,A)}function J_(){let a=Rn();hl()?gd():(a=a.parent,Ji(a,!1));const l=a;gt.lFrame.elementDepthCount--;const u=Gt();u.firstCreatePass&&(vd(u,a),Pf(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function(a){return 0!=(16&a.flags)}(l)&&Q_(u,l,Me(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function(a){return 0!=(32&a.flags)}(l)&&Q_(u,l,Me(),l.stylesWithoutHost,!1)}function Pr(a,l,u,d){Yl(a,l,u,d),J_()}function Fa(a,l,u){const d=Me(),g=Gt(),_=a+20,v=g.firstCreatePass?function(a,l,u,d,g){const _=l.consts,v=qs(_,d),w=Fl(l,a,8,"ng-container",v);return null!==v&&th(w,v,!0),aE(l,u,w,qs(_,g)),null!==l.queries&&l.queries.elementStart(l,w),w}(_,g,d,l,u):g.data[_];Ji(v,!0);const w=d[_]=d[11].createComment("");Wd(g,d,w,v),ii(w,d),Ao(v)&&(kp(g,d,v),Xb(g,v,d)),null!=u&&v_(d,v)}function X_(){let a=Rn();const l=Gt();hl()?gd():(a=a.parent,Ji(a,!1)),l.firstCreatePass&&(vd(l,a),Pf(a)&&l.queries.elementEnd(a))}function on(){return Me()}function $E(a){return!!a&&"function"==typeof a.then}function Ur(a){return!!a&&"function"==typeof a.subscribe}const Kl=Ur;function zE(a,l,u,d){const g=Me(),_=Gt(),v=Rn();return La(_,g,g[11],v,a,l,!!u,d),zE}function Er(a,l){const u=Rn(),d=Me(),g=Gt();return La(g,d,mE(Kf(g.data),u,d),u,a,l,!1),Er}function La(a,l,u,d,g,_,v,w){const S=Ao(d),M=a.firstCreatePass&&T_(a),N=l[8],F=DS(l);let z=!0;if(3&d.type||w){const oe=pi(d,l),Oe=w?w(oe):oe,Se=F.length,ot=w?wt=>w(In(wt[d.index])):d.index;if(Tn(u)){let wt=null;if(!w&&S&&(wt=function(a,l,u,d){const g=a.cleanup;if(null!=g)for(let _=0;_<g.length-1;_+=2){const v=g[_];if(v===u&&g[_+1]===d){const w=l[7],S=g[_+2];return w.length>S?w[S]:null}"string"==typeof v&&(_+=2)}return null}(a,l,g,d.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=_,wt.__ngLastListenerFn__=_,z=!1;else{_=Zl(d,l,N,_,!1);const Qt=u.listen(Oe,g,_);F.push(_,Qt),M&&M.push(g,ot,Se,Se+1)}}else _=Zl(d,l,N,_,!0),Oe.addEventListener(g,_,v),F.push(_),M&&M.push(g,ot,Se,v)}else _=Zl(d,l,N,_,!1);const J=d.outputs;let fe;if(z&&null!==J&&(fe=J[g])){const oe=fe.length;if(oe)for(let Oe=0;Oe<oe;Oe+=2){const Wr=l[fe[Oe]][fe[Oe+1]].subscribe(_),go=F.length;F.push(_,Wr),M&&M.push(g,d.index,go,-(go+1))}}}function hr(a,l,u,d){try{return!1!==u(d)}catch(g){return AS(a,g),!1}}function Zl(a,l,u,d,g){return function _(v){if(v===Function)return d;const w=2&a.flags?ti(a.index,l):l;0==(32&l[2])&&Nr(w);let S=hr(l,0,d,v),A=_.__ngNextListenerFn__;for(;A;)S=hr(l,0,A,v)&&S,A=A.__ngNextListenerFn__;return g&&!1===S&&(v.preventDefault(),v.returnValue=!1),S}}function ey(a=1){return function(a){return(gt.lFrame.contextLView=function(a,l){for(;a>0;)l=l[15],a--;return l}(a,gt.lFrame.contextLView))[8]}(a)}function rT(a,l){let u=null;const d=function(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let g=0;g<l.length;g++){const _=l[g];if("*"!==_){if(null===d?rS(a,_,!0):b1(d,_))return g}else u=g}return u}function yh(a){const l=Me()[16][6];if(!l.projection){const d=l.projection=Vo(a?a.length:1,null),g=d.slice();let _=l.child;for(;null!==_;){const v=a?rT(_,a):0;null!==v&&(g[v]?g[v].projectionNext=_:d[v]=_,g[v]=_),_=_.next}}}function Ql(a,l=0,u){const d=Me(),g=Gt(),_=Fl(g,20+a,16,null,u||null);null===_.projection&&(_.projection=l),gd(),64!=(64&_.flags)&&function(a,l,u){Ol(l[11],0,l,u,KI(a,u,l),au(u.parent||l[6],u,l))}(g,d,_)}function vh(a,l,u){return ty(a,"",l,"",u),vh}function ty(a,l,u,d,g){const _=Me(),v=Eu(_,l,u,d);return v!==dt&&_i(Gt(),Yn(),_,a,v,_[11],g,!1),ty}function ZE(a,l,u,d,g){const _=a[u+1],v=null===l;let w=d?ro(_):ka(_),S=!1;for(;0!==w&&(!1===S||v);){const M=a[w+1];iT(a[w],l)&&(S=!0,a[w+1]=d?Xt(M):Sp(M)),w=d?ro(M):ka(M)}S&&(a[u+1]=d?Sp(_):Xt(_))}function iT(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&bl(a,l)>=0}function JE(a,l,u){return $i(a,l,u,!1),JE}function oy(a,l){return $i(a,l,null,!0),oy}function $i(a,l,u,d){const g=Me(),_=Gt(),v=ps(2);_.firstUpdatePass&&function(a,l,u,d){const g=a.data;if(null===g[u+1]){const _=g[ni()],v=function(a,l){return l>=a.expandoStartIndex}(a,u);(function(a,l){return 0!=(a.flags&(l?16:32))})(_,d)&&null===l&&!v&&(l=!1),l=function(a,l,u,d){const g=Kf(a);let _=d?l.residualClasses:l.residualStyles;if(null===g)0===(d?l.classBindings:l.styleBindings)&&(u=ec(u=Xl(null,a,l,u,d),l.attrs,d),_=null);else{const v=l.directiveStylingLast;if(-1===v||a[v]!==g)if(u=Xl(g,a,l,u,d),null===_){let S=function(a,l,u){const d=u?l.classBindings:l.styleBindings;if(0!==ka(d))return a[ro(d)]}(a,l,d);void 0!==S&&Array.isArray(S)&&(S=Xl(null,a,l,S[1],d),S=ec(S,l.attrs,d),function(a,l,u,d){a[ro(u?l.classBindings:l.styleBindings)]=d}(a,l,d,S))}else _=function(a,l,u){let d;const g=l.directiveEnd;for(let _=1+l.directiveStylingLast;_<g;_++)d=ec(d,a[_].hostAttrs,u);return ec(d,l.attrs,u)}(a,l,d)}return void 0!==_&&(d?l.residualClasses=_:l.residualStyles=_),u}(g,_,l,d),function(a,l,u,d,g,_){let v=_?l.classBindings:l.styleBindings,w=ro(v),S=ka(v);a[d]=u;let M,A=!1;if(Array.isArray(u)){const N=u;M=N[1],(null===M||bl(N,M)>0)&&(A=!0)}else M=u;if(g)if(0!==S){const F=ro(a[w+1]);a[d+1]=d_(F,w),0!==F&&(a[F+1]=h_(a[F+1],d)),a[w+1]=function(a,l){return 131071&a|l<<17}(a[w+1],d)}else a[d+1]=d_(w,0),0!==w&&(a[w+1]=h_(a[w+1],d)),w=d;else a[d+1]=d_(S,0),0===w?w=d:a[S+1]=h_(a[S+1],d),S=d;A&&(a[d+1]=Sp(a[d+1])),ZE(a,M,d,!0),ZE(a,M,d,!1),function(a,l,u,d,g){const _=g?a.residualClasses:a.residualStyles;null!=_&&"string"==typeof l&&bl(_,l)>=0&&(u[d+1]=Xt(u[d+1]))}(l,M,a,d,_),v=d_(w,S),_?l.classBindings=v:l.styleBindings=v}(g,_,l,u,v,d)}}(_,a,v,d),l!==dt&&Br(g,v,l)&&function(a,l,u,d,g,_,v,w){if(!(3&l.type))return;const S=a.data,A=S[w+1];zi(function(a){return 1==(1&a)}(A)?Au(S,l,u,g,ka(A),v):void 0)||(zi(_)||function(a){return 2==(2&a)}(A)&&(_=Au(S,null,u,g,w,v)),function(a,l,u,d,g){const _=Tn(a);if(l)g?_?a.addClass(u,d):u.classList.add(d):_?a.removeClass(u,d):u.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:zo.DashCase;if(null==g)_?a.removeStyle(u,d,v):u.style.removeProperty(d);else{const w="string"==typeof g&&g.endsWith("!important");w&&(g=g.slice(0,-10),v|=zo.Important),_?a.setStyle(u,d,g,v):u.style.setProperty(d,g,w?"important":"")}}}(d,v,ya(ni(),u),g,_))}(_,_.data[ni()],g,g[11],a,g[v+1]=function(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ee(jo(a)))),a}(l,u),d,v)}function Xl(a,l,u,d,g){let _=null;const v=u.directiveEnd;let w=u.directiveStylingLast;for(-1===w?w=u.directiveStart:w++;w<v&&(_=l[w],d=ec(d,_.hostAttrs,g),_!==a);)w++;return null!==a&&(u.directiveStylingLast=w),d}function ec(a,l,u){const d=u?1:2;let g=-1;if(null!==l)for(let _=0;_<l.length;_++){const v=l[_];"number"==typeof v?g=v:g===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),cr(a,v,!!u||l[++_]))}return void 0===a?null:a}function Au(a,l,u,d,g,_){const v=null===l;let w;for(;g>0;){const S=a[g],A=Array.isArray(S),M=A?S[1]:S,N=null===M;let F=u[g+1];F===dt&&(F=N?q:void 0);let z=N?Gn(F,d):M===d?F:void 0;if(A&&!zi(z)&&(z=Gn(S,d)),zi(z)&&(w=z,v))return w;const J=a[g+1];g=v?ro(J):ka(J)}if(null!==l){let S=_?l.residualClasses:l.residualStyles;null!=S&&(w=Gn(S,d))}return w}function zi(a){return void 0!==a}function ew(a,l=""){const u=Me(),d=Gt(),g=a+20,_=d.firstCreatePass?Fl(d,g,1,l,null):d.data[g],v=u[g]=function(a,l){return Tn(a)?a.createText(l):a.createTextNode(l)}(u[11],l);Wd(d,u,v,_),Ji(_,!1)}function Wp(a){return tc("",a,""),Wp}function tc(a,l,u){const d=Me(),g=Eu(d,a,l,u);return g!==dt&&oo(d,ni(),g),tc}function uy(a,l,u,d,g){const _=Me(),v=function(a,l,u,d,g,_){const w=Gl(a,Li(),u,g);return ps(2),w?l+we(u)+d+we(g)+_:dt}(_,a,l,u,d,g);return v!==dt&&oo(_,ni(),v),uy}function uw(a,l,u){const d=Me();return Br(d,fs(),l)&&_i(Gt(),Yn(),d,a,l,d[11],u,!0),uw}function er(a,l,u){const d=Me();if(Br(d,fs(),l)){const _=Gt(),v=Yn();_i(_,v,d,a,l,mE(Kf(_.data),v,d),u,!0)}return er}const Vt=void 0;var ET=["en",[["a","p"],["AM","PM"],Vt],[["AM","PM"],Vt,Vt],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vt,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vt,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vt,"{1} 'at' {0}",Vt],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(a){const l=Math.floor(Math.abs(a)),u=a.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let Vn={};function Fr(a){const l=function(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=wT(l);if(u)return u;const d=l.split("-")[0];if(u=wT(d),u)return u;if("en"===d)return ET;throw new Error(`Missing locale data for the locale "${a}".`)}function hw(a){return Fr(a)[pt.PluralCase]}function wT(a){return a in Vn||(Vn[a]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[a]),Vn[a]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const py="en-US";let Zp=py;function _y(a){Je(a,"Expected localeId to be defined"),"string"==typeof a&&(Zp=a.toLowerCase().replace(/_/g,"-"))}function eg(a,l,u,d,g){if(a=H(a),Array.isArray(a))for(let _=0;_<a.length;_++)eg(a[_],l,u,d,g);else{const _=Gt(),v=Me();let w=Na(a)?a:H(a.provide),S=rh(a);const A=Rn(),M=1048575&A.providerIndexes,N=A.directiveStart,F=A.providerIndexes>>20;if(Na(a)||!a.multi){const z=new wa(S,g,zp),J=Iy(w,l,g?M:M+F,N);-1===J?(ct(No(A,v),_,w),wy(_,a,l.length),l.push(w),A.directiveStart++,A.directiveEnd++,g&&(A.providerIndexes+=1048576),u.push(z),v.push(z)):(u[J]=z,v[J]=z)}else{const z=Iy(w,l,M+F,N),J=Iy(w,l,M,M+F),fe=z>=0&&u[z],oe=J>=0&&u[J];if(g&&!oe||!g&&!fe){ct(No(A,v),_,w);const Oe=function(a,l,u,d,g){const _=new wa(a,u,zp);return _.multi=[],_.index=l,_.componentProviders=0,Cy(_,g,d&&!u),_}(g?Fh:Ph,u.length,g,d,S);!g&&oe&&(u[J].providerFactory=Oe),wy(_,a,l.length,0),l.push(w),A.directiveStart++,A.directiveEnd++,g&&(A.providerIndexes+=1048576),u.push(Oe),v.push(Oe)}else wy(_,a,z>-1?z:J,Cy(u[g?J:z],S,!g&&d));!g&&d&&oe&&u[J].componentProviders++}}}function wy(a,l,u,d){const g=Na(l);if(g||function(a){return!!a.useClass}(l)){const v=(l.useClass||l).prototype.ngOnDestroy;if(v){const w=a.destroyHooks||(a.destroyHooks=[]);if(!g&&l.multi){const S=w.indexOf(u);-1===S?w.push(u,[d,v]):w[S+1].push(d,v)}else w.push(u,v)}}}function Cy(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function Iy(a,l,u,d){for(let g=u;g<d;g++)if(l[g]===a)return g;return-1}function Ph(a,l,u,d){return sc(this.multi,[])}function Fh(a,l,u,d){const g=this.multi;let _;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=bn(u,u[1],this.providerFactory.index,d);_=w.slice(0,v),sc(g,_);for(let S=v;S<w.length;S++)_.push(w[S])}else _=[],sc(g,_);return _}function sc(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function Sw(a,l=[]){return u=>{u.providersResolver=(d,g)=>function(a,l,u){const d=Gt();if(d.firstCreatePass){const g=yr(a);eg(u,d.data,d.blueprint,g,!0),eg(l,d.data,d.blueprint,g,!1)}}(d,g?g(a):a,l)}}class jT{}const Aw="ngComponent";class xw{resolveComponentFactory(l){throw function(a){const l=Error(`No component factory found for ${ee(a)}. Did you add it to @NgModule.entryComponents?`);return l[Aw]=a,l}(l)}}let Lh=(()=>{class a{}return a.NULL=new xw,a})();function li(...a){}function $a(a,l){return new qi(pi(a,l))}const oc=function(){return $a(Rn(),Me())};let qi=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=oc,a})();function Rw(a){return a instanceof qi?a.nativeElement:a}class Ty{}let Bh=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>Fu(),a})();const Fu=function(){const a=Me(),u=ti(Rn().index,a);return function(a){return a[11]}($s(u)?u:a)};let Nw=(()=>{class a{}return a.\u0275prov=ht({token:a,providedIn:"root",factory:()=>null}),a})();class zT{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Ow=new zT("12.2.9");class qT{constructor(){}supports(l){return jp(l)}create(l){return new WT(l)}}const Dy=(a,l)=>l;class WT{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Dy}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,d=this._removalsHead,g=0,_=null;for(;u||d;){const v=!d||u&&u.currentIndex<za(d,g,_)?u:d,w=za(v,g,_),S=v.currentIndex;if(v===d)g--,d=d._nextRemoved;else if(u=u._next,null==v.previousIndex)g++;else{_||(_=[]);const A=w-g,M=S-g;if(A!=M){for(let F=0;F<A;F++){const z=F<_.length?_[F]:_[F]=0,J=z+F;M<=J&&J<A&&(_[F]=z+1)}_[v.previousIndex]=M-A}}w!==S&&l(v,w,S)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!jp(l))throw new Error(`Error trying to diff '${ee(l)}'. Only arrays and iterables are allowed`);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let g,_,v,u=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let w=0;w<this.length;w++)_=l[w],v=this._trackByFn(w,_),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,_,v,w)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,v,w),d=!0),u=u._next}else g=0,function(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[bu()]();let d;for(;!(d=u.next()).done;)l(d.value)}}(l,w=>{v=this._trackByFn(g,w),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,w,v,g)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,v,g),d=!0),u=u._next,g++}),this.length=g;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,d,g){let _;return null===l?_=this._itTail:(_=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,_,g)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,g))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,_,g)):l=this._addAfter(new bk(u,d),_,g),l}_verifyReinsertion(l,u,d,g){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?l=this._reinsertAfter(_,l._prev,g):l.currentIndex!=g&&(l.currentIndex=g,this._addToMoves(l,g)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const g=l._prevRemoved,_=l._nextRemoved;return null===g?this._removalsHead=_:g._nextRemoved=_,null===_?this._removalsTail=g:_._prevRemoved=g,this._insertAfter(l,u,d),this._addToMoves(l,d),l}_moveAfter(l,u,d){return this._unlink(l),this._insertAfter(l,u,d),this._addToMoves(l,d),l}_addAfter(l,u,d){return this._insertAfter(l,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,d){const g=null===u?this._itHead:u._next;return l._next=g,l._prev=u,null===g?this._itTail=l:g._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new Pw),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,d=l._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pw),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class bk{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ek{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const u=l._prevDup,d=l._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class Pw{constructor(){this.map=new Map}put(l){const u=l.trackById;let d=this.map.get(u);d||(d=new Ek,this.map.set(u,d)),d.add(l)}get(l,u){const g=this.map.get(l);return g?g.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function za(a,l,u){const d=a.previousIndex;if(null===d)return d;let g=0;return u&&d<u.length&&(g=u[d]),d+l+g}class rg{constructor(){}supports(l){return l instanceof Map||dh(l)}create(){return new wk}}class wk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||dh(l)))throw new Error(`Error trying to diff '${ee(l)}'. Only maps and objects are allowed`)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,g)=>{if(u&&u.key===g)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(g,d);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const d=l._prev;return u._next=l,u._prev=d,l._prev=u,d&&(d._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const g=this._records.get(l);this._maybeAddToChanges(g,u);const _=g._prev,v=g._next;return _&&(_._next=v),v&&(v._prev=_),g._next=null,g._prev=null,g}const d=new YT(l);return this._records.set(l,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(d=>u(l[d],d))}}class YT{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ay(){return new Uh([new qT])}let Uh=(()=>{class a{constructor(u){this.factories=u}static create(u,d){if(null!=d){const g=d.factories.slice();u=u.concat(g)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||Ay()),deps:[[a,new br,new Bo]]}}find(u){const d=this.factories.find(g=>g.supports(u));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(a){return a.name||typeof a}(u)}'`)}}return a.\u0275prov=ht({token:a,providedIn:"root",factory:Ay}),a})();function sg(){return new jh([new rg])}let jh=(()=>{class a{constructor(u){this.factories=u}static create(u,d){if(d){const g=d.factories.slice();u=u.concat(g)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||sg()),deps:[[a,new br,new Bo]]}}find(u){const d=this.factories.find(g=>g.supports(u));if(d)return d;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return a.\u0275prov=ht({token:a,providedIn:"root",factory:sg}),a})();function xy(a,l,u,d,g=!1){for(;null!==u;){const _=l[u.index];if(null!==_&&d.push(In(_)),fi(_))for(let w=10;w<_.length;w++){const S=_[w],A=S[1].firstChild;null!==A&&xy(S[1],S,A,d)}const v=u.type;if(8&v)xy(a,l,u.child,d);else if(32&v){const w=e_(u,l);let S;for(;S=w();)d.push(S)}else if(16&v){const w=Ub(l,u);if(Array.isArray(w))d.push(...w);else{const S=Ip(l[16]);xy(S[1],S,w,d,!0)}}u=g?u.projectionNext:u.next}return d}class Hh{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return xy(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(fi(l)){const u=l[8],d=u?u.indexOf(this):-1;d>-1&&(i_(l,d),Ia(u,d))}this._attachedToViewContainer=!1}YI(this._lView[1],this._lView)}onDestroy(l){nE(this._lView[1],this._lView,null,l)}markForCheck(){Nr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fE(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(a,l,u){fl(!0);try{fE(a,l,u)}finally{fl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var l;this._appRef=null,cu(this._lView[1],l=this._lView,l[11],2,null,null)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=l}}class Fw extends Hh{constructor(l){super(l),this._view=l}detectChanges(){IS(this._view)}checkNoChanges(){!function(a){fl(!0);try{IS(a)}finally{fl(!1)}}(this._view)}get context(){return null}}const ZT=function(a){return function(a,l,u){if(ma(a)&&!u){const d=ti(a.index,l);return new Hh(d,d)}return 47&a.type?new Hh(l[16],l):null}(Rn(),Me(),16==(16&a))};let QT=(()=>{class a{}return a.__NG_ELEMENT_ID__=ZT,a})();const JT=[new rg],XT=new Uh([new qT]),Sk=new jh(JT),Vw=function(){return $h(Rn(),Me())};let ac=(()=>{class a{}return a.__NG_ELEMENT_ID__=Vw,a})();const eD=ac,tD=class extends eD{constructor(l,u,d){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(l){const u=this._declarationTContainer.tViews,d=Jd(this._declarationLView,u,l,16,null,u.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(u)),kr(u,d,l),new Hh(d)}};function $h(a,l){return 4&a.type?new tD(l,a,$a(a,l)):null}class Lu{}class My{}const Ak=function(){return sD(Rn(),Me())};let zh=(()=>{class a{}return a.__NG_ELEMENT_ID__=Ak,a})();const xk=zh,rD=class extends xk{constructor(l,u,d){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=d}get element(){return $a(this._hostTNode,this._hostLView)}get injector(){return new Oo(this._hostTNode,this._hostLView)}get parentInjector(){const l=qe(this._hostTNode,this._hostLView);if(Cd(l)){const u=Ca(l,this._hostLView),d=Ys(l);return new Oo(u[1].data[d+8],u)}return new Oo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=iD(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,d){const g=l.createEmbeddedView(u||{});return this.insert(g,d),g}createComponent(l,u,d,g,_){const v=d||this.parentInjector;if(!_&&null==l.ngModule&&v){const S=v.get(Lu,null);S&&(_=S)}const w=l.create(v,g,void 0,_);return this.insert(w.hostView,u),w}insert(l,u){const d=l._lView,g=d[1];if(fi(d[3])){const M=this.indexOf(l);if(-1!==M)this.detach(M);else{const N=d[3],F=new rD(N,N[6],N[3]);F.detach(F.indexOf(l))}}const _=this._adjustIndex(u),v=this._lContainer;!function(a,l,u,d){const g=10+d,_=u.length;d>0&&(u[g-1][4]=l),d<_-10?(l[4]=u[g],vl(u,10+d,l)):(u.push(l),l[4]=null),l[3]=u;const v=l[17];null!==v&&u!==v&&function(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(v,l);const w=l[19];null!==w&&w.insertView(a),l[2]|=128}(g,d,v,_);const w=jb(_,v),S=d[11],A=s_(S,v[7]);return null!==A&&function(a,l,u,d,g,_){d[0]=g,d[6]=l,cu(a,d,u,1,g,_)}(g,v[6],S,d,A,w),l.attachToViewContainerRef(),vl(Bw(v),_,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=iD(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),d=i_(this._lContainer,u);d&&(Ia(Bw(this._lContainer),u),YI(d[1],d))}detach(l){const u=this._adjustIndex(l,-1),d=i_(this._lContainer,u);return d&&null!=Ia(Bw(this._lContainer),u)?new Hh(d):null}_adjustIndex(l,u=0){return null==l?this.length+u:l}};function iD(a){return a[8]}function Bw(a){return a[8]||(a[8]=[])}function sD(a,l){let u;const d=l[a.index];if(fi(d))u=d;else{let g;if(8&a.type)g=In(d);else{const _=l[11];g=_.createComment("");const v=pi(a,l);Nl(_,s_(_,v),g,function(a,l){return Tn(a)?a.nextSibling(l):l.nextSibling}(_,v),!1)}l[a.index]=u=cE(d,l,g,a),ur(l,u)}return new rD(u,a,l)}const hc={};class CD extends Lh{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=ln(l);return new SD(u,this.ngModule)}}function ID(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}const Yk=new Pn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>jI});class SD extends jT{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=l.selectors.map(P).join(","),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return ID(this.componentDef.inputs)}get outputs(){return ID(this.componentDef.outputs)}create(l,u,d,g){const _=(g=g||this.ngModule)?function(a,l){return{get:(u,d,g)=>{const _=a.get(u,hc,g);return _!==hc||d===hc?_:l.get(u,d,g)}}}(l,g.injector):l,v=_.get(Ty,Mo),w=_.get(Nw,null),S=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=d?function(a,l,u){if(Tn(a))return a.selectRootElement(l,u===Ve.ShadowDom);let d="string"==typeof l?a.querySelector(l):l;return d.textContent="",d}(S,d,this.componentDef.encapsulation):Vb(v.createRenderer(null,this.componentDef),A,function(a){const l=a.toLowerCase();return"svg"===l?ul:"math"===l?"http://www.w3.org/1998/MathML/":null}(A)),N=this.componentDef.onPush?576:528,F=function(a,l){return{components:[],scheduler:a||jI,clean:gE,playerHandler:l||null,flags:0}}(),z=Np(0,null,null,1,0,null,null,null,null,null),J=Jd(null,z,F,N,null,null,v,S,w,_);let fe,oe;Ws(J);try{const Oe=function(a,l,u,d,g,_){const v=u[1];u[20]=a;const S=Fl(v,20,2,"#host",null),A=S.mergedAttrs=l.hostAttrs;null!==A&&(th(S,A,!0),null!==a&&(tp(g,a,A),null!==S.classes&&Gb(g,a,S.classes),null!==S.styles&&tS(g,a,S.styles)));const M=d.createRenderer(a,l),N=Jd(u,eE(l),null,l.onPush?64:16,u[20],S,d,M,_||null,null);return v.firstCreatePass&&(ct(No(S,u),v,l.type),ES(v,S),w_(S,u.length,1)),ur(u,N),u[20]=N}(M,this.componentDef,J,v,S);if(M)if(d)tp(S,M,["ng-version",Ow.full]);else{const{attrs:Se,classes:ot}=function(a){const l=[],u=[];let d=1,g=2;for(;d<a.length;){let _=a[d];if("string"==typeof _)2===g?""!==_&&l.push(_,a[++d]):8===g&&u.push(_);else{if(!no(g))break;g=_}d++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);Se&&tp(S,M,Se),ot&&ot.length>0&&Gb(S,M,ot.join(" "))}if(oe=Oc(z,20),void 0!==u){const Se=oe.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const wt=u[ot];Se.push(null!=wt?Array.from(wt):null)}}fe=function(a,l,u,d,g){const _=u[1],v=function(a,l,u){const d=Rn();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),C_(a,d,l,hu(a,l,1,null),u));const g=bn(l,a,d.directiveStart,d);ii(g,l);const _=pi(d,l);return _&&ii(_,l),g}(_,u,l);if(d.components.push(v),a[8]=v,g&&g.forEach(S=>S(v,l)),l.contentQueries){const S=Rn();l.contentQueries(1,v,S.directiveStart)}const w=Rn();return!_.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(gl(w.index),bS(u[1],w,0,w.directiveStart,w.directiveEnd,l),eh(l,v)),v}(Oe,this.componentDef,J,F,[jl]),kr(z,J,null)}finally{Uc()}return new pC(this.componentType,fe,$a(oe,J),J,oe)}}class pC extends class{}{constructor(l,u,d,g,_){super(),this.location=d,this._rootLView=g,this._tNode=_,this.instance=u,this.hostView=this.changeDetectorRef=new Fw(g),this.componentType=l}get injector(){return new Oo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}const fc=new Map;class gC extends Lu{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new CD(this);const d=jn(l),g=l[ut]||null;g&&_y(g),this._bootstrapComponents=$o(d.bootstrap),this._r3Injector=MS(l,u,[{provide:Lu,useValue:this},{provide:Lh,useValue:this.componentFactoryResolver}],ee(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,u=Dn.THROW_IF_NOT_FOUND,d=tt.Default){return l===Dn||l===Lu||l===pu?this:this._r3Injector.get(l,u,d)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class mg extends My{constructor(l){super(),this.moduleType=l,null!==jn(l)&&function(a){const l=new Set;!function u(d){const g=jn(d,!0),_=g.id;null!==_&&(function(a,l,u){if(l&&l!==u)throw new Error(`Duplicate module registered for ${a} - ${ee(l)} vs ${ee(l.name)}`)}(_,fc.get(_),d),fc.set(_,d));const v=$o(g.imports);for(const w of v)l.has(w)||(l.add(w),u(w))}(a)}(l)}create(l){return new gC(this.moduleType,l)}}function $y(a,l,u){const d=vr()+a,g=Me();return g[d]===dt?is(g,d,u?l.call(u):l()):function(a,l){return a[l]}(g,d)}function _g(a,l){const u=a[l];return u===dt?void 0:u}function Yy(a,l){const u=Gt();let d;const g=a+20;u.firstCreatePass?(d=function(a,l){if(l)for(let u=l.length-1;u>=0;u--){const d=l[u];if(a===d.name)return d}throw new be("302",`The pipe '${a}' could not be found!`)}(l,u.pipeRegistry),u.data[g]=d,d.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(g,d.onDestroy)):d=u.data[g];const _=d.factory||(d.factory=_a(d.type)),v=xr(zp);try{const w=Id(!1),S=_();return Id(w),function(a,l,u,d){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=d}(u,Me(),g,S),S}finally{xr(v)}}function yg(a,l,u){const d=a+20,g=Me(),_=va(g,d);return ea(g,ju(g,d)?function(a,l,u,d,g,_){const v=l+u;return Br(a,v,g)?is(a,v+1,_?d.call(_,g):d(g)):_g(a,v+1)}(g,vr(),l,_.transform,u,_):_.transform(u))}function Ky(a,l,u,d){const g=a+20,_=Me(),v=va(_,g);return ea(_,ju(_,g)?function(a,l,u,d,g,_,v){const w=l+u;return Gl(a,w,g,_)?is(a,w+2,v?d.call(v,g,_):d(g,_)):_g(a,w+2)}(_,vr(),l,v.transform,u,d,v):v.transform(u,d))}function ju(a,l){return a[1].data[l].pure}function ea(a,l){return bs.isWrapped(l)&&(l=bs.unwrap(l),a[Li()]=dt),l}function wC(a){return l=>{setTimeout(a,void 0,l)}}const ta=class extends f.xQ{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,d){var g,_,v;let w=l,S=u||(()=>null),A=d;if(l&&"object"==typeof l){const N=l;w=null===(g=N.next)||void 0===g?void 0:g.bind(N),S=null===(_=N.error)||void 0===_?void 0:_.bind(N),A=null===(v=N.complete)||void 0===v?void 0:v.bind(N)}this.__isAsync&&(S=wC(S),w&&(w=wC(w)),A&&(A=wC(A)));const M=super.subscribe({next:w,error:S,complete:A});return l instanceof $.w&&l.add(M),M}};function tN(){return this._results[bu()]()}class nf{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=bu(),d=nf.prototype;d[u]||(d[u]=tN)}get changes(){return this._changes||(this._changes=new ta)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const d=this;d.dirty=!1;const g=ts(l);(this._changesDetected=!function(a,l,u){if(a.length!==l.length)return!1;for(let d=0;d<a.length;d++){let g=a[d],_=l[d];if(u&&(g=u(g),_=u(_)),_!==g)return!1}return!0}(d._results,g,u))&&(d._results=g,d.length=g.length,d.last=g[this.length-1],d.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class CC{constructor(l){this.queryList=l,this.matches=null}clone(){return new CC(this.queryList)}setDirty(){this.queryList.setDirty()}}class IC{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const d=null!==l.contentQueries?l.contentQueries[0]:u.length,g=[];for(let _=0;_<d;_++){const v=u.getByIndex(_);g.push(this.queries[v.indexInDeclarationView].clone())}return new IC(g)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==MC(l,u).matches&&this.queries[u].setDirty()}}class LD{constructor(l,u,d=null){this.predicate=l,this.flags=u,this.read=d}}class SC{constructor(l=[]){this.queries=l}elementStart(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let d=0;d<this.length;d++){const g=null!==u?u.length:0,_=this.getByIndex(d).embeddedTView(l,g);_&&(_.indexInDeclarationView=d,null!==u?u.push(_):u=[_])}return null!==u?new SC(u):null}template(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class pc{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new pc(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let g=0;g<d.length;g++){const _=d[g];this.matchTNodeWithReadOption(l,u,VD(u,_)),this.matchTNodeWithReadOption(l,u,Dd(u,l,_,!1,!1))}else d===ac?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Dd(u,l,d,!1,!1))}matchTNodeWithReadOption(l,u,d){if(null!==d){const g=this.metadata.read;if(null!==g)if(g===qi||g===zh||g===ac&&4&u.type)this.addMatch(u.index,-2);else{const _=Dd(u,l,g,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,d)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function VD(a,l){const u=a.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===l)return u[d+1];return null}function BD(a,l,u,d){return-1===u?function(a,l){return 11&a.type?$a(a,l):4&a.type?$h(a,l):null}(l,a):-2===u?function(a,l,u){return u===qi?$a(l,a):u===ac?$h(l,a):u===zh?sD(l,a):void 0}(a,l,d):bn(a,a[1],u,l)}function DC(a,l,u,d){const g=l[19].queries[d];if(null===g.matches){const _=a.data,v=u.matches,w=[];for(let S=0;S<v.length;S+=2){const A=v[S];w.push(A<0?null:BD(l,_[A],v[S+1],u.metadata.read))}g.matches=w}return g.matches}function rf(a,l,u,d){const g=a.queries.getByIndex(u),_=g.matches;if(null!==_){const v=DC(a,l,g,u);for(let w=0;w<_.length;w+=2){const S=_[w];if(S>0)d.push(v[w/2]);else{const A=_[w+1],M=l[-S];for(let N=10;N<M.length;N++){const F=M[N];F[17]===F[3]&&rf(F[1],F,A,d)}if(null!==M[9]){const N=M[9];for(let F=0;F<N.length;F++){const z=N[F];rf(z[1],z,A,d)}}}}}return d}function tn(a){const l=Me(),u=Gt(),d=Dm();pl(d+1);const g=MC(u,d);if(a.dirty&&Zv(l)===(2==(2&g.metadata.flags))){if(null===g.matches)a.reset([]);else{const _=g.crossesNgTemplate?rf(u,l,d,[]):DC(u,l,g,d);a.reset(_,Rw),a.notifyOnChanges()}return!0}return!1}function AC(a,l,u){const d=Gt();d.firstCreatePass&&(ci(d,new LD(a,l,u),-1),2==(2&l)&&(d.staticViewQueries=!0)),Mn(d,Me(),l)}function xC(a,l,u,d){const g=Gt();if(g.firstCreatePass){const _=Rn();ci(g,new LD(l,u,d),_.index),function(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(g,a),2==(2&u)&&(g.staticContentQueries=!0)}Mn(g,Me(),u)}function sf(){return a=Me(),l=Dm(),a[19].queries[l].queryList;var a,l}function Mn(a,l,u){const d=new nf(4==(4&u));nE(a,l,d,d.destroy),null===l[19]&&(l[19]=new IC),l[19].queries.push(new CC(d))}function ci(a,l,u){null===a.queries&&(a.queries=new SC),a.queries.track(new pc(l,u))}function MC(a,l){return a.queries.getByIndex(l)}function jD(a,l){return $h(a,l)}const rv=new Pn("Application Initializer");let zu=(()=>{class a{constructor(u){this.appInits=u,this.resolve=li,this.reject=li,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,g)=>{this.resolve=d,this.reject=g})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const _=this.appInits[g]();if($E(_))u.push(_);else if(Kl(_)){const v=new Promise((w,S)=>{_.subscribe({complete:w,error:S})});u.push(v)}}Promise.all(u).then(()=>{d()}).catch(g=>{this.reject(g)}),0===u.length&&d(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(fn(rv,8))},a.\u0275prov=ht({token:a,factory:a.\u0275fac}),a})();const $C=new Pn("AppId"),iv={provide:$C,useFactory:function(){return`${qC()}${qC()}${qC()}`},deps:[]};function qC(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const WC=new Pn("Platform Initializer"),Qa=new Pn("Platform ID"),rA=new Pn("appBootstrapListener");let iA=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=ht({token:a,factory:a.\u0275fac}),a})();const sv=new Pn("LocaleId"),sA=new Pn("DefaultCurrencyCode");class aA{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}const Ig=function(a){return new mg(a)},bN=Ig,EN=function(a){return Promise.resolve(Ig(a))},lA=function(a){const l=Ig(a),d=$o(jn(a).declarations).reduce((g,_)=>{const v=ln(_);return v&&g.push(new SD(v)),g},[]);return new aA(l,d)},wN=lA,CN=function(a){return Promise.resolve(lA(a))};let Sg=(()=>{class a{constructor(){this.compileModuleSync=bN,this.compileModuleAsync=EN,this.compileModuleAndAllComponentsSync=wN,this.compileModuleAndAllComponentsAsync=CN}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=ht({token:a,factory:a.\u0275fac}),a})();const uA=(()=>Promise.resolve(0))();function qu(a){"undefined"==typeof Zone?uA.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Cs{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ta(!1),this.onMicrotaskEmpty=new ta(!1),this.onStable=new ta(!1),this.onError=new ta(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!d&&u,g.shouldCoalesceRunChangeDetection=d,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function(){let a=rn.requestAnimationFrame,l=rn.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function(a){const l=()=>{!function(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(rn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,cv(a),a.isCheckStableRunning=!0,av(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),cv(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,g,_,v,w)=>{try{return ZC(a),u.invokeTask(g,_,v,w)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||a.shouldCoalesceRunChangeDetection)&&l(),yc(a)}},onInvoke:(u,d,g,_,v,w,S)=>{try{return ZC(a),u.invoke(g,_,v,w,S)}finally{a.shouldCoalesceRunChangeDetection&&l(),yc(a)}},onHasTask:(u,d,g,_)=>{u.hasTask(g,_),d===g&&("microTask"==_.change?(a._hasPendingMicrotasks=_.microTask,cv(a),av(a)):"macroTask"==_.change&&(a.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,d,g,_)=>(u.handleError(g,_),a.runOutsideAngular(()=>a.onError.emit(_)),!1)})}(g)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Cs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Cs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,u,d){return this._inner.run(l,u,d)}runTask(l,u,d,g){const _=this._inner,v=_.scheduleEventTask("NgZoneEvent: "+g,l,IN,li,li);try{return _.runTask(v,u,d)}finally{_.cancelTask(v)}}runGuarded(l,u,d){return this._inner.runGuarded(l,u,d)}runOutsideAngular(l){return this._outer.run(l)}}const IN={};function av(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function cv(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function ZC(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function yc(a){a._nesting--,av(a)}class Bs{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ta,this.onMicrotaskEmpty=new ta,this.onStable=new ta,this.onError=new ta}run(l,u,d){return l.apply(u,d)}runGuarded(l,u,d){return l.apply(u,d)}runOutsideAngular(l){return l()}runTask(l,u,d,g){return l.apply(u,d)}}let Di=(()=>{class a{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Cs.assertNotInAngularZone(),qu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qu(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,g){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==_),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:g})}whenStable(u,d,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,d,g){return[]}}return a.\u0275fac=function(u){return new(u||a)(fn(Cs))},a.\u0275prov=ht({token:a,factory:a.\u0275fac}),a})(),QC=(()=>{class a{constructor(){this._applications=new Map,Wu.addToWindow(this)}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Wu.findTestabilityInTree(this,u,d)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=ht({token:a,factory:a.\u0275fac}),a})();class dA{addToWindow(l){}findTestabilityInTree(l,u,d){return null}}function Tg(a){Wu=a}let Wu=new dA,Ai=!0,hA=!1;function Dg(){return hA=!0,Ai}function lf(){if(hA)throw new Error("Cannot enable prod mode after platform setup.");Ai=!1}let ui;const Ag=new Pn("AllowMultipleToken");class pA{constructor(l,u){this.name=l,this.token=u}}function uv(a,l,u=[]){const d=`Platform: ${l}`,g=new Pn(d);return(_=[])=>{let v=e0();if(!v||v.injector.get(Ag,!1))if(a)a(u.concat(_).concat({provide:g,useValue:!0}));else{const w=u.concat(_).concat({provide:g,useValue:!0},{provide:nh,useValue:"platform"});!function(a){if(ui&&!ui.destroyed&&!ui.injector.get(Ag,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ui=a.get(t0);const l=a.get(WC,null);l&&l.forEach(u=>u())}(Dn.create({providers:w,name:d}))}return function(a){const l=e0();if(!l)throw new Error("No platform exists!");if(!l.injector.get(a,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return l}(g)}}function e0(){return ui&&!ui.destroyed?ui:null}let t0=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const w=function(a,l){let u;return u="noop"===a?new Bs:("zone.js"===a?void 0:a)||new Cs({enableLongStackTrace:Dg(),shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),u}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),S=[{provide:Cs,useValue:w}];return w.run(()=>{const A=Dn.create({providers:S,parent:this.injector,name:u.moduleType.name}),M=u.create(A),N=M.injector.get(zd,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return w.runOutsideAngular(()=>{const F=w.onError.subscribe({next:z=>{N.handleError(z)}});M.onDestroy(()=>{r0(this._modules,M),F.unsubscribe()})}),function(a,l,u){try{const d=u();return $E(d)?d.catch(g=>{throw l.runOutsideAngular(()=>a.handleError(g)),g}):d}catch(d){throw l.runOutsideAngular(()=>a.handleError(d)),d}}(N,w,()=>{const F=M.injector.get(zu);return F.runInitializers(),F.donePromise.then(()=>(_y(M.injector.get(sv,py)||py),this._moduleDoBootstrap(M),M))})})}bootstrapModule(u,d=[]){const g=n0({},d);return function(a,l,u){const d=new mg(u);return Promise.resolve(d)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,g))}_moduleDoBootstrap(u){const d=u.injector.get(xg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(g=>d.bootstrap(g));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${ee(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(fn(Dn))},a.\u0275prov=ht({token:a,factory:a.\u0275fac}),a})();function n0(a,l){return Array.isArray(l)?l.reduce(n0,a):Object.assign(Object.assign({},a),l)}let xg=(()=>{class a{constructor(u,d,g,_,v){this._zone=u,this._injector=d,this._exceptionHandler=g,this._componentFactoryResolver=_,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new j.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),S=new j.y(A=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Cs.assertNotInAngularZone(),qu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{Cs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{M.unsubscribe(),N.unsubscribe()}});this.isStable=(0,he.T)(w,S.pipe((0,ye.B)()))}bootstrap(u,d){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let g;g=u instanceof jT?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(g.componentType);const _=function(a){return a.isBoundToModule}(g)?void 0:this._injector.get(Lu),w=g.create(Dn.NULL,[],d||g.selector,_),S=w.location.nativeElement,A=w.injector.get(Di,null),M=A&&w.injector.get(QC);return A&&M&&M.registerApplication(S,A),w.onDestroy(()=>{this.detachView(w.hostView),r0(this.components,w),M&&M.unregisterApplication(S)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;r0(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(rA,[]).concat(this._bootstrapListeners).forEach(g=>g(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(u){return new(u||a)(fn(Cs),fn(Dn),fn(zd),fn(Lh),fn(zu))},a.\u0275prov=ht({token:a,factory:a.\u0275fac}),a})();function r0(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}class NN{}class Ja{}const pL={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ON=(()=>{class a{constructor(u,d){this._compiler=u,this._config=d||pL}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[d,g]=u.split("#");return void 0===g&&(g="default"),B(8255)(d).then(_=>_[g]).then(_=>PN(_,d,g)).then(_=>this._compiler.compileModuleAsync(_))}loadFactory(u){let[d,g]=u.split("#"),_="NgFactory";return void 0===g&&(g="default",_=""),B(8255)(this._config.factoryPathPrefix+d+this._config.factoryPathSuffix).then(v=>v[g+_]).then(v=>PN(v,d,g))}}return a.\u0275fac=function(u){return new(u||a)(fn(Sg),fn(Ja,8))},a.\u0275prov=ht({token:a,factory:a.\u0275fac}),a})();function PN(a,l,u){if(!a)throw new Error(`Cannot find '${u}' in '${l}'`);return a}const kg=function(a){return null},mv=uv(null,"core",[{provide:Qa,useValue:"unknown"},{provide:t0,deps:[Dn]},{provide:QC,deps:[]},{provide:iA,deps:[]}]),jN=[{provide:xg,useClass:xg,deps:[Cs,Dn,zd,Lh,zu]},{provide:Yk,deps:[Cs],useFactory:function(a){let l=[];return a.onStable.subscribe(()=>{for(;l.length;)l.pop()()}),function(u){l.push(u)}}},{provide:zu,useClass:zu,deps:[[new Bo,rv]]},{provide:Sg,useClass:Sg,deps:[]},iv,{provide:Uh,useFactory:function(){return XT},deps:[]},{provide:jh,useFactory:function(){return Sk},deps:[]},{provide:sv,useFactory:function(a){return _y(a=a||"undefined"!=typeof $localize&&$localize.locale||py),a},deps:[[new Js(sv),new Bo,new br]]},{provide:sA,useValue:"USD"}];let uf=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(fn(xg))},a.\u0275mod=Ue({type:a}),a.\u0275inj=Cn({providers:jN}),a})()},8939:(Ye,Ie,B)=>{"use strict";B.d(Ie,{hO:()=>re,xv:()=>W,Dh:()=>ee,GT:()=>X,on:()=>L,pX:()=>ye});var f=B(7716),$=B(7841),j=B(9126);Ye=B.hmd(Ye);const he=["ngOnDestroy"],ye=(le,be,de,xe={})=>new Proxy(le,{get:(we,Pe)=>de.runOutsideAngular(()=>{var Qe;if(le[Pe])return(null===(Qe=null==xe?void 0:xe.spy)||void 0===Qe?void 0:Qe.get)&&xe.spy.get(Pe,le[Pe]),le[Pe];if(he.indexOf(Pe)>-1)return()=>{};const It=be.toPromise().then(Wt=>{const Bt=Wt&&Wt[Pe];return"function"==typeof Bt?Bt.bind(Wt):Bt&&Bt.then?Bt.then(Ut=>de.run(()=>Ut)):de.run(()=>Bt)});return new Proxy(()=>{},{get:(Wt,Bt)=>It[Bt],apply:(Wt,Bt,Ut)=>It.then(De=>{var Yt;const ue=De&&De(...Ut);return(null===(Yt=null==xe?void 0:xe.spy)||void 0===Yt?void 0:Yt.apply)&&xe.spy.apply(Pe,Ut,ue),ue})})})}),X=(le,be)=>{be.forEach(de=>{Object.getOwnPropertyNames(de.prototype||de).forEach(xe=>{Object.defineProperty(le.prototype,xe,Object.getOwnPropertyDescriptor(de.prototype||de,xe))})})};class se{constructor(be){return be}}const ee=new f.OlP("angularfire2.app.options"),W=new f.OlP("angularfire2.app.name");function L(le,be,de){const we="object"==typeof de&&de||{};we.name=we.name||"string"==typeof de&&de||"[DEFAULT]";const Qe=$.Z.apps.filter(It=>It&&It.name===we.name)[0]||be.runOutsideAngular(()=>$.Z.initializeApp(le,we));try{JSON.stringify(le)!==JSON.stringify(Qe.options)&&G("error",`${Qe.name} Firebase App already initialized with different options${Ye.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(It){}return new se(Qe)}const G=(le,...be)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[le](...be)},H={provide:se,useFactory:L,deps:[ee,f.R0b,[new f.FiY,W]]};let re=(()=>{class le{constructor(de){$.Z.registerVersion("angularfire",j.q4.full,"core"),$.Z.registerVersion("angularfire",j.q4.full,"app-compat"),$.Z.registerVersion("angular",f.q4F.full,de.toString())}static initializeApp(de,xe){return{ngModule:le,providers:[{provide:ee,useValue:de},{provide:W,useValue:xe}]}}}return le.\u0275fac=function(de){return new(de||le)(f.LFG(f.Lbi))},le.\u0275mod=f.oAB({type:le}),le.\u0275inj=f.cJS({providers:[H]}),le})()},9126:(Ye,Ie,B)=>{"use strict";B.d(Ie,{q4:()=>L,iC:()=>ue,fc:()=>De,HU:()=>It,cc:()=>re});var f=B(7716);(0,B(5452).registerVersion)("firebase","9.1.2","app");var ye=B(7771),X=B(3637),se=B(3342),ee=B(6136),W=B(9673);Ye=B.hmd(Ye);const L=new f.GfV("7.0.4"),G=!!Ye.hot,H=(ge,...ne)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[ge](...ne)};function re(ge,ne,Le,et,At){const[,at,Je]=globalThis.\u0275AngularfireInstanceCache.find(yt=>yt[0]===ge)||[];if(at)return function(ge,ne){try{return ge.toString()===ne.toString()}catch(Le){return ge===ne}}(At,Je)||(H("error",`${ne} was already initialized on the ${Le} Firebase App with different settings.${G?" You may need to reload as Firebase is not HMR aware.":""}`),H("warn",{is:At,was:Je})),at;{const yt=et();return globalThis.\u0275AngularfireInstanceCache.push([ge,yt,At]),yt}}function we(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class Pe{constructor(ne,Le=ye.N){this.zone=ne,this.delegate=Le}now(){return this.delegate.now()}schedule(ne,Le,et){const At=this.zone;return this.delegate.schedule(function(Je){At.runGuarded(()=>{ne.apply(this,[Je])})},Le,et)}}class Qe{constructor(ne){this.zone=ne,this.task=null}call(ne,Le){const et=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",we,{},we,we)),Le.pipe((0,se.b)({next:et,complete:et,error:et})).subscribe(ne).add(et)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let It=(()=>{class ge{constructor(Le){this.ngZone=Le,this.outsideAngular=Le.runOutsideAngular(()=>new Pe(Zone.current)),this.insideAngular=Le.run(()=>new Pe(Zone.current,X.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return ge.\u0275fac=function(Le){return new(Le||ge)(f.LFG(f.R0b))},ge.\u0275prov=f.Yz7({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge})();function Wt(){const ge=globalThis.\u0275AngularFireScheduler;if(!ge)throw new Error("AngularFireModule has not been provided");return ge}function De(ge){return ge.pipe((0,ee.QV)(Wt().outsideAngular))}function ue(ge){return Wt(),function(ge){return function(Le){return(Le=Le.lift(new Qe(ge.ngZone))).pipe((0,W.R)(ge.outsideAngular),(0,ee.QV)(ge.insideAngular))}}(Wt())(ge)}},4486:(Ye,Ie,B)=>{"use strict";B.d(Ie,{Z:()=>be});var f=B(3854),$=B(6034),j=B(5452),he=B(5601);class ye{constructor(xe,we){this._delegate=xe,this.firebase=we,(0,j._addComponent)(xe,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xe){this._delegate.automaticDataCollectionEnabled=xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(xe=>{this._delegate.checkDestroyed(),xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(xe,we=j._DEFAULT_ENTRY_NAME){var Pe;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(xe);return!Qe.isInitialized()&&"EXPLICIT"===(null===(Pe=Qe.getComponent())||void 0===Pe?void 0:Pe.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:we})}_removeServiceInstance(xe,we=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(xe).clearInstance(we)}_addComponent(xe){(0,j._addComponent)(this._delegate,xe)}_addOrOverwriteComponent(xe){(0,j._addOrOverwriteComponent)(this._delegate,xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function W(){const de=function(de){const xe={},we={__esModule:!0,initializeApp:function(De,Yt={}){const ue=j.initializeApp(De,Yt);if((0,f.r3)(xe,ue.name))return xe[ue.name];const me=new de(ue,we);return xe[ue.name]=me,me},app:Qe,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function(De){const Yt=De.name,ue=Yt.replace("-compat","");if(j._registerComponent(De)&&"PUBLIC"===De.type){const me=(ve=Qe())=>{if("function"!=typeof ve[ue])throw se.create("invalid-app-argument",{appName:Yt});return ve[ue]()};void 0!==De.serviceProps&&(0,f.ZB)(me,De.serviceProps),we[ue]=me,de.prototype[ue]=function(...ve){return this._getService.bind(this,Yt).apply(this,De.multipleInstances?ve:[])}}return"PUBLIC"===De.type?we[ue]:null},removeApp:function(De){delete xe[De]},useAsService:function(De,Yt){return"serverAuth"===Yt?null:Yt},modularAPIs:j}};function Qe(De){if(!(0,f.r3)(xe,De=De||j._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:De});return xe[De]}return we.default=we,Object.defineProperty(we,"apps",{get:function(){return Object.keys(xe).map(De=>xe[De])}}),Qe.App=de,we}(ye);return de.INTERNAL=Object.assign(Object.assign({},de.INTERNAL),{createFirebaseNamespace:W,extendNamespace:function(we){(0,f.ZB)(de,we)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),de}(),G=new he.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const de=self.firebase.SDK_VERSION;de&&de.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=L;(0,j.registerVersion)("@firebase/app-compat","0.1.4",undefined)},5452:(Ye,Ie,B)=>{"use strict";B.r(Ie),B.d(Ie,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>wo,_DEFAULT_ENTRY_NAME:()=>At,_addComponent:()=>Sn,_addOrOverwriteComponent:()=>Ki,_apps:()=>Je,_clearComponents:()=>Cn,_components:()=>yt,_getProvider:()=>ht,_registerComponent:()=>Kr,_removeServiceInstance:()=>mn,deleteApp:()=>Hs,getApp:()=>Zi,getApps:()=>Qr,initializeApp:()=>Rs,onLog:()=>Kt,registerVersion:()=>tt,setLogLevel:()=>Jr});var f=B(8239),$=B(6034),j=B(5601),he=B(3854);class ye{constructor(ft){this.container=ft}getPlatformInfoString(){return this.container.getProviders().map(Lt=>{if(function(lt){const ft=lt.getComponent();return"VERSION"===(null==ft?void 0:ft.type)}(Lt)){const Nt=Lt.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(Lt=>Lt).join(" ")}}const se="@firebase/app",W=new j.Yd("@firebase/app"),At="[DEFAULT]",at={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Je=new Map,yt=new Map;function Sn(lt,ft){try{lt.container.addComponent(ft)}catch(Lt){W.debug(`Component ${ft.name} failed to register with FirebaseApp ${lt.name}`,Lt)}}function Ki(lt,ft){lt.container.addOrOverwriteComponent(ft)}function Kr(lt){const ft=lt.name;if(yt.has(ft))return W.debug(`There were multiple attempts to register component ${ft}.`),!1;yt.set(ft,lt);for(const Lt of Je.values())Sn(Lt,lt);return!0}function ht(lt,ft){return lt.container.getProvider(ft)}function mn(lt,ft,Lt=At){ht(lt,ft).clearInstance(Lt)}function Cn(){yt.clear()}const hi=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Zr{constructor(ft,Lt,Nt){this._isDeleted=!1,this._options=Object.assign({},ft),this._config=Object.assign({},Lt),this._name=Lt.name,this._automaticDataCollectionEnabled=Lt.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ft){this.checkDestroyed(),this._automaticDataCollectionEnabled=ft}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ft){this._isDeleted=ft}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}}const wo="9.1.2";function Rs(lt,ft={}){"object"!=typeof ft&&(ft={name:ft});const Lt=Object.assign({name:At,automaticDataCollectionEnabled:!1},ft),Nt=Lt.name;if("string"!=typeof Nt||!Nt)throw hi.create("bad-app-name",{appName:String(Nt)});const ir=Je.get(Nt);if(ir){if((0,he.vZ)(lt,ir.options)&&(0,he.vZ)(Lt,ir.config))return ir;throw hi.create("duplicate-app",{appName:Nt})}const en=new $.H0(Nt);for(const Xe of yt.values())en.addComponent(Xe);const Ve=new Zr(lt,Lt,en);return Je.set(Nt,Ve),Ve}function Zi(lt=At){const ft=Je.get(lt);if(!ft)throw hi.create("no-app",{appName:lt});return ft}function Qr(){return Array.from(Je.values())}function Hs(lt){return ds.apply(this,arguments)}function ds(){return(ds=(0,f.Z)(function*(lt){const ft=lt.name;Je.has(ft)&&(Je.delete(ft),yield Promise.all(lt.container.getProviders().map(Lt=>Lt.delete())),lt.isDeleted=!0)})).apply(this,arguments)}function tt(lt,ft,Lt){var Nt;let ir=null!==(Nt=at[lt])&&void 0!==Nt?Nt:lt;Lt&&(ir+=`-${Lt}`);const en=ir.match(/\s|\//),Ve=ft.match(/\s|\//);if(en||Ve){const Xe=[`Unable to register library "${ir}" with version "${ft}":`];return en&&Xe.push(`library name "${ir}" contains illegal characters (whitespace or "/")`),en&&Ve&&Xe.push("and"),Ve&&Xe.push(`version name "${ft}" contains illegal characters (whitespace or "/")`),void W.warn(Xe.join(" "))}Kr(new $.wA(`${ir}-version`,()=>({library:ir,version:ft}),"VERSION"))}function Kt(lt,ft){if(null!==lt&&"function"!=typeof lt)throw hi.create("invalid-log-argument");(0,j.Am)(lt,ft)}function Jr(lt){(0,j.Ub)(lt)}Kr(new $.wA("platform-logger",ft=>new ye(ft),"PRIVATE")),tt(se,"0.7.3",undefined),tt("fire-js","")},1093:(Ye,Ie,B)=>{"use strict";B.d(Ie,{$:()=>Qv,A:()=>G,E:()=>_r,G:()=>vt,I:()=>Ns,K:()=>sr,L:()=>Lf,M:()=>Em,N:()=>wm,P:()=>lr,Q:()=>_a,R:()=>CI,T:()=>cd,V:()=>Yv,W:()=>mI,X:()=>ya,Y:()=>hd,Z:()=>va,_:()=>pd,a:()=>cb,a0:()=>Jv,a1:()=>Xv,a2:()=>dl,a3:()=>Gt,a4:()=>Rn,a5:()=>ba,a6:()=>Ji,a7:()=>gd,a8:()=>_I,a9:()=>vr,aA:()=>zm,aB:()=>Qs,aC:()=>dn,aG:()=>gi,aJ:()=>Rr,aa:()=>eb,ab:()=>ps,ae:()=>tb,af:()=>Kf,ag:()=>Dm,aj:()=>Kv,ak:()=>ib,am:()=>vd,an:()=>ko,ao:()=>xt,ap:()=>ue,aq:()=>yn,ar:()=>$t,as:()=>Qe,at:()=>Ld,au:()=>Tl,av:()=>It,aw:()=>De,ax:()=>ve,ay:()=>ie,az:()=>fn,b:()=>lb,c:()=>Vo,d:()=>TI,e:()=>Gm,f:()=>Cl,g:()=>Sl,h:()=>DI,i:()=>Fm,j:()=>hb,k:()=>xl,l:()=>ms,m:()=>xa,o:()=>ee,r:()=>SI,s:()=>II,u:()=>Gc,z:()=>le});var f=B(8239),$=B(3854),j=B(5452),he=B(4762),ye=B(5601),X=B(6034);const ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const le=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},be=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),we=new ye.Yd("@firebase/auth");function Pe(I,...b){we.logLevel<=ye.in.ERROR&&we.error(`Auth (${j.SDK_VERSION}): ${I}`,...b)}function Qe(I,...b){throw Ut(I,...b)}function It(I,...b){return Ut(I,...b)}function Wt(I,b,E){const D=Object.assign(Object.assign({},be()),{[b]:E});return new $.LL("auth","Firebase",D).create(b,{appName:I.name})}function Bt(I,b,E){if(!(b instanceof E))throw E.name!==b.constructor.name&&Qe(I,"argument-error"),Wt(I,"argument-error",`Type of ${b.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ut(I,...b){if("string"!=typeof I){const E=b[0],D=[...b.slice(1)];return D[0]&&(D[0].appName=I.name),I._errorFactory.create(E,...D)}return de.create(I,...b)}function De(I,b,...E){if(!I)throw Ut(b,...E)}function Yt(I){const b="INTERNAL ASSERTION FAILED: "+I;throw Pe(b),new Error(b)}function ue(I,b){I||Yt(b)}const me=new Map;function ve(I){ue(I instanceof Function,"Expected a class definition");let b=me.get(I);return b?(ue(b instanceof I,"Instance stored in cache mismatched with class"),b):(b=new I,me.set(I,b),b)}function ne(){var I;return"undefined"!=typeof self&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function Le(){return"http:"===et()||"https:"===et()}function et(){var I;return"undefined"!=typeof self&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class Je{constructor(b,E){this.shortDelay=b,this.longDelay=E,ue(E>b,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Le()||(0,$.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function yt(I,b){ue(I.emulator,"Emulator should always be set here");const{url:E}=I.emulator;return b?`${E}${b.startsWith("/")?b.slice(1):b}`:E}class Sn{static initialize(b,E,D){this.fetchImpl=b,E&&(this.headersImpl=E),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ki={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kr=new Je(3e4,6e4);function ht(I,b){return I.tenantId&&!b.tenantId?Object.assign(Object.assign({},b),{tenantId:I.tenantId}):b}function mn(I,b,E,D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,f.Z)(function*(I,b,E,D,k={}){return gr(I,k,()=>{let V={},ae={};D&&("GET"===b?ae=D:V={body:JSON.stringify(D)});const ke=(0,$.xO)(Object.assign({key:I.config.apiKey},ae)).slice(1),Ke=new(Sn.headers());return Ke.set("Content-Type","application/json"),Ke.set("X-Client-Version",I._getSdkClientVersion()),I.languageCode&&Ke.set("X-Firebase-Locale",I.languageCode),Sn.fetch()(Rs(I,I.config.apiHost,E,ke),Object.assign({method:b,headers:Ke,referrerPolicy:"no-referrer"},V))})})).apply(this,arguments)}function gr(I,b,E){return hi.apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(I,b,E){I._canInitEmulator=!1;const D=Object.assign(Object.assign({},Ki),b);try{const k=new Zi(I),V=yield Promise.race([E(),k.promise]);k.clearNetworkTimeout();const ae=yield V.json();if("needConfirmation"in ae)throw Qr(I,"account-exists-with-different-credential",ae);if(V.ok&&!("errorMessage"in ae))return ae;{const ke=V.ok?ae.errorMessage:ae.error.message,[Ke,mt]=ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ke)throw Qr(I,"credential-already-in-use",ae);if("EMAIL_EXISTS"===Ke)throw Qr(I,"email-already-in-use",ae);const Tt=D[Ke]||Ke.toLowerCase().replace(/[_\s]+/g,"-");if(mt)throw Wt(I,Tt,mt);Qe(I,Tt)}}catch(k){if(k instanceof $.ZR)throw k;Qe(I,"network-request-failed")}})).apply(this,arguments)}function Zr(I,b,E,D){return wo.apply(this,arguments)}function wo(){return(wo=(0,f.Z)(function*(I,b,E,D,k={}){const V=yield mn(I,b,E,D,k);return"mfaPendingCredential"in V&&Qe(I,"multi-factor-auth-required",{serverResponse:V}),V})).apply(this,arguments)}function Rs(I,b,E,D){const k=`${b}${E}?${D}`;return I.config.emulator?yt(I.config,k):`${I.config.apiScheme}://${k}`}class Zi{constructor(b){this.auth=b,this.timer=null,this.promise=new Promise((E,D)=>{this.timer=setTimeout(()=>D(It(this.auth,"timeout")),Kr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qr(I,b,E){const D={appName:I.name};E.email&&(D.email=E.email),E.phoneNumber&&(D.phoneNumber=E.phoneNumber);const k=It(I,b,D);return k.customData._tokenResponse=E,k}function ds(){return(ds=(0,f.Z)(function*(I,b){return mn(I,"POST","/v1/accounts:delete",b)})).apply(this,arguments)}function tt(I,b){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,f.Z)(function*(I,b){return mn(I,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function Jr(I,b){return xr.apply(this,arguments)}function xr(){return(xr=(0,f.Z)(function*(I,b){return mn(I,"POST","/v1/accounts:lookup",b)})).apply(this,arguments)}function lt(I){if(I)try{const b=new Date(Number(I));if(!isNaN(b.getTime()))return b.toUTCString()}catch(b){}}function Nt(){return(Nt=(0,f.Z)(function*(I,b=!1){const E=(0,$.m9)(I),D=yield E.getIdToken(b),k=en(D);De(k&&k.exp&&k.auth_time&&k.iat,E.auth,"internal-error");const V="object"==typeof k.firebase?k.firebase:void 0,ae=null==V?void 0:V.sign_in_provider;return{claims:k,token:D,authTime:lt(ir(k.auth_time)),issuedAtTime:lt(ir(k.iat)),expirationTime:lt(ir(k.exp)),signInProvider:ae||null,signInSecondFactor:(null==V?void 0:V.sign_in_second_factor)||null}})).apply(this,arguments)}function ir(I){return 1e3*Number(I)}function en(I){const[b,E,D]=I.split(".");if(void 0===b||void 0===E||void 0===D)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,$.tV)(E);return k?JSON.parse(k):(Pe("Failed to decode base64 JWT payload"),null)}catch(k){return Pe("Caught error parsing JWT payload as JSON",k),null}}function Xe(I,b){return fa.apply(this,arguments)}function fa(){return(fa=(0,f.Z)(function*(I,b,E=!1){if(E)return b;try{return yield b}catch(D){throw D instanceof $.ZR&&Co(D)&&I.auth.currentUser===I&&(yield I.auth.signOut()),D}})).apply(this,arguments)}function Co({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}class hs{constructor(b){this.user=b,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(b){var E;if(b){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const k=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(b=!1){var E=this;if(!this.isRunning)return;const D=this.getInterval(b);this.timerId=setTimeout((0,f.Z)(function*(){yield E.iteration()}),D)}iteration(){var b=this;return(0,f.Z)(function*(){try{yield b.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===E.code&&b.schedule(!0))}b.schedule()})()}}class rn{constructor(b,E){this.createdAt=b,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=lt(this.lastLoginAt),this.creationTime=lt(this.createdAt)}_copy(b){this.createdAt=b.createdAt,this.lastLoginAt=b.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nn(I){return Io.apply(this,arguments)}function Io(){return(Io=(0,f.Z)(function*(I){var b;const E=I.auth,D=yield I.getIdToken(),k=yield Xe(I,Jr(E,{idToken:D}));De(null==k?void 0:k.users.length,E,"internal-error");const V=k.users[0];I._notifyReloadListener(V);const ae=(null===(b=V.providerUserInfo)||void 0===b?void 0:b.length)?Te(V.providerUserInfo):[],ke=Q(I.providerData,ae),Tt=!!I.isAnonymous&&!(I.email&&V.passwordHash||(null==ke?void 0:ke.length)),Fn={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:ke,metadata:new rn(V.createdAt,V.lastLoginAt),isAnonymous:Tt};Object.assign(I,Fn)})).apply(this,arguments)}function q(){return(q=(0,f.Z)(function*(I){const b=(0,$.m9)(I);yield nn(b),yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)})).apply(this,arguments)}function Q(I,b){return[...I.filter(D=>!b.some(k=>k.providerId===D.providerId)),...b]}function Te(I){return I.map(b=>{var{providerId:E}=b,D=(0,he._T)(b,["providerId"]);return{providerId:E,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function ze(){return(ze=(0,f.Z)(function*(I,b){const E=yield gr(I,{},()=>{const D=(0,$.xO)({grant_type:"refresh_token",refresh_token:b}).slice(1),{tokenApiHost:k,apiKey:V}=I.config,ae=Rs(I,k,"/v1/token",`key=${V}`);return Sn.fetch()(ae,{method:"POST",headers:{"X-Client-Version":I._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:D})});return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(b){De(b.idToken,"internal-error"),De(void 0!==b.idToken,"internal-error"),De(void 0!==b.refreshToken,"internal-error");const E="expiresIn"in b&&void 0!==b.expiresIn?Number(b.expiresIn):function(I){const b=en(I);return De(b,"internal-error"),De(void 0!==b.exp,"internal-error"),De(void 0!==b.iat,"internal-error"),Number(b.exp)-Number(b.iat)}(b.idToken);this.updateTokensAndExpiration(b.idToken,b.refreshToken,E)}getToken(b,E=!1){var D=this;return(0,f.Z)(function*(){return De(!D.accessToken||D.refreshToken,b,"user-token-expired"),E||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(b,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(b,E){var D=this;return(0,f.Z)(function*(){const{accessToken:k,refreshToken:V,expiresIn:ae}=yield function(I,b){return ze.apply(this,arguments)}(b,E);D.updateTokensAndExpiration(k,V,Number(ae))})()}updateTokensAndExpiration(b,E,D){this.refreshToken=E||null,this.accessToken=b||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(b,E){const{refreshToken:D,accessToken:k,expirationTime:V}=E,ae=new ut;return D&&(De("string"==typeof D,"internal-error",{appName:b}),ae.refreshToken=D),k&&(De("string"==typeof k,"internal-error",{appName:b}),ae.accessToken=k),V&&(De("number"==typeof V,"internal-error",{appName:b}),ae.expirationTime=V),ae}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(b){this.accessToken=b.accessToken,this.refreshToken=b.refreshToken,this.expirationTime=b.expirationTime}_clone(){return Object.assign(new ut,this.toJSON())}_performRefresh(){return Yt("not implemented")}}function kt(I,b){De("string"==typeof I||void 0===I,"internal-error",{appName:b})}class _n{constructor(b){var{uid:E,auth:D,stsTokenManager:k}=b,V=(0,he._T)(b,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=D,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.metadata=new rn(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(b){var E=this;return(0,f.Z)(function*(){const D=yield Xe(E,E.stsTokenManager.getToken(E.auth,b));return De(D,E.auth,"internal-error"),E.accessToken!==D&&(E.accessToken=D,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),D})()}getIdTokenResult(b){return function(I){return Nt.apply(this,arguments)}(this,b)}reload(){return function(I){return q.apply(this,arguments)}(this)}_assign(b){this!==b&&(De(this.uid===b.uid,this.auth,"internal-error"),this.displayName=b.displayName,this.photoURL=b.photoURL,this.email=b.email,this.emailVerified=b.emailVerified,this.phoneNumber=b.phoneNumber,this.isAnonymous=b.isAnonymous,this.tenantId=b.tenantId,this.providerData=b.providerData.map(E=>Object.assign({},E)),this.metadata._copy(b.metadata),this.stsTokenManager._assign(b.stsTokenManager))}_clone(b){return new _n(Object.assign(Object.assign({},this),{auth:b,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(b){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=b,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(b){this.reloadListener?this.reloadListener(b):this.reloadUserInfo=b}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(b,E=!1){var D=this;return(0,f.Z)(function*(){let k=!1;b.idToken&&b.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(b),k=!0),E&&(yield nn(D)),yield D.auth._persistUserIfCurrent(D),k&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var b=this;return(0,f.Z)(function*(){const E=yield b.getIdToken();return yield Xe(b,function(I,b){return ds.apply(this,arguments)}(b.auth,{idToken:E})),b.stsTokenManager.clearRefreshToken(),b.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(b=>Object.assign({},b)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(b,E){var D,k,V,ae,ke,Ke,mt,Tt;const Fn=null!==(D=E.displayName)&&void 0!==D?D:void 0,eo=null!==(k=E.email)&&void 0!==k?k:void 0,ys=null!==(V=E.phoneNumber)&&void 0!==V?V:void 0,to=null!==(ae=E.photoURL)&&void 0!==ae?ae:void 0,ru=null!==(ke=E.tenantId)&&void 0!==ke?ke:void 0,Bi=null!==(Ke=E._redirectEventId)&&void 0!==Ke?Ke:void 0,Ho=null!==(mt=E.createdAt)&&void 0!==mt?mt:void 0,iu=null!==(Tt=E.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:Bd,emailVerified:Ml,isAnonymous:Ym,providerData:Km,stsTokenManager:wb}=E;De(Bd&&wb,b,"internal-error");const _p=ut.fromJSON(this.name,wb);De("string"==typeof Bd,b,"internal-error"),kt(Fn,b.name),kt(eo,b.name),De("boolean"==typeof Ml,b,"internal-error"),De("boolean"==typeof Ym,b,"internal-error"),kt(ys,b.name),kt(to,b.name),kt(ru,b.name),kt(Bi,b.name),kt(Ho,b.name),kt(iu,b.name);const Go=new _n({uid:Bd,auth:b,email:eo,emailVerified:Ml,displayName:Fn,isAnonymous:Ym,photoURL:to,phoneNumber:ys,tenantId:ru,stsTokenManager:_p,createdAt:Ho,lastLoginAt:iu});return Km&&Array.isArray(Km)&&(Go.providerData=Km.map(Ma=>Object.assign({},Ma))),Bi&&(Go._redirectEventId=Bi),Go}static _fromIdTokenResponse(b,E,D=!1){return(0,f.Z)(function*(){const k=new ut;k.updateFromServerResponse(E);const V=new _n({uid:E.localId,auth:b,stsTokenManager:k,isAnonymous:D});return yield nn(V),V})()}}const sr=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(E,D){var k=this;return(0,f.Z)(function*(){k.storage[E]=D})()}_get(E){var D=this;return(0,f.Z)(function*(){const k=D.storage[E];return void 0===k?null:k})()}_remove(E){var D=this;return(0,f.Z)(function*(){delete D.storage[E]})()}_addListener(E,D){}_removeListener(E,D){}}return I.type="NONE",I})();function ie(I,b,E){return`firebase:${I}:${b}:${E}`}class K{constructor(b,E,D){this.persistence=b,this.auth=E,this.userKey=D;const{config:k,name:V}=this.auth;this.fullUserKey=ie(this.userKey,k.apiKey,V),this.fullPersistenceKey=ie("persistence",k.apiKey,V),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(b){return this.persistence._set(this.fullUserKey,b.toJSON())}getCurrentUser(){var b=this;return(0,f.Z)(function*(){const E=yield b.persistence._get(b.fullUserKey);return E?_n._fromJSON(b.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(b){var E=this;return(0,f.Z)(function*(){if(E.persistence===b)return;const D=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=b,D?E.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(b,E,D="authUser"){return(0,f.Z)(function*(){if(!E.length)return new K(ve(sr),b,D);const k=(yield Promise.all(E.map(function(){var mt=(0,f.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return mt.apply(this,arguments)}}()))).filter(mt=>mt);let V=k[0]||ve(sr);const ae=ie(D,b.config.apiKey,b.name);let ke=null;for(const mt of E)try{const Tt=yield mt._get(ae);if(Tt){const Fn=_n._fromJSON(b,Tt);mt!==V&&(ke=Fn),V=mt;break}}catch(Tt){}const Ke=k.filter(mt=>mt._shouldAllowMigration);return V._shouldAllowMigration&&Ke.length?(V=Ke[0],ke&&(yield V._set(ae,ke.toJSON())),yield Promise.all(E.map(function(){var mt=(0,f.Z)(function*(Tt){if(Tt!==V)try{yield Tt._remove(ae)}catch(Fn){}});return function(Tt){return mt.apply(this,arguments)}}())),new K(V,b,D)):new K(V,b,D)})()}}function Z(I){const b=I.toLowerCase();if(b.includes("opera/")||b.includes("opr/")||b.includes("opios/"))return"Opera";if(Ht(b))return"IEMobile";if(b.includes("msie")||b.includes("trident/"))return"IE";if(b.includes("edge/"))return"Edge";if(Ae(b))return"Firefox";if(b.includes("silk/"))return"Silk";if(Wn(b))return"Blackberry";if(ln(b))return"Webos";if(Ue(b))return"Safari";if((b.includes("chrome/")||bt(b))&&!b.includes("edge/"))return"Chrome";if($t(b))return"Android";{const D=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function Ae(I=(0,$.z$)()){return/firefox\//i.test(I)}function Ue(I=(0,$.z$)()){const b=I.toLowerCase();return b.includes("safari/")&&!b.includes("chrome/")&&!b.includes("crios/")&&!b.includes("android")}function bt(I=(0,$.z$)()){return/crios\//i.test(I)}function Ht(I=(0,$.z$)()){return/iemobile/i.test(I)}function $t(I=(0,$.z$)()){return/android/i.test(I)}function Wn(I=(0,$.z$)()){return/blackberry/i.test(I)}function ln(I=(0,$.z$)()){return/webos/i.test(I)}function yn(I=(0,$.z$)()){return/iphone|ipad|ipod/i.test(I)}function xt(I=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}function Xr(I=(0,$.z$)()){return yn(I)||$t(I)||ln(I)||Wn(I)||/windows phone/i.test(I)||Ht(I)}function Ot(I,b=[]){let E;switch(I){case"Browser":E=Z((0,$.z$)());break;case"Worker":E=`${Z((0,$.z$)())}-${I}`;break;default:E=I}const D=b.length?b.join(","):"FirebaseCore-web";return`${E}/JsCore/${j.SDK_VERSION}/${D}`}class vn{constructor(b,E){this.app=b,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new So(this),this.idTokenSubscription=new So(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=b.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(b,E){var D=this;return E&&(this._popupRedirectResolver=ve(E)),this._initializationPromise=this.queue((0,f.Z)(function*(){var k;D._deleted||(D.persistenceManager=yield K.create(D,b),!D._deleted&&((null===(k=D._popupRedirectResolver)||void 0===k?void 0:k._shouldInitProactively)&&(yield D._popupRedirectResolver._initialize(D)),yield D.initializeCurrentUser(E),!D._deleted&&(D._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var b=this;return(0,f.Z)(function*(){if(b._deleted)return;const E=yield b.assertedPersistence.getCurrentUser();if(b.currentUser||E){if(b.currentUser&&E&&b.currentUser.uid===E.uid)return b._currentUser._assign(E),void(yield b.currentUser.getIdToken());yield b._updateCurrentUser(E)}})()}initializeCurrentUser(b){var E=this;return(0,f.Z)(function*(){var D;let k=yield E.assertedPersistence.getCurrentUser();if(b&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const V=null===(D=E.redirectUser)||void 0===D?void 0:D._redirectEventId,ae=null==k?void 0:k._redirectEventId,ke=yield E.tryRedirectSignIn(b);(!V||V===ae)&&(null==ke?void 0:ke.user)&&(k=ke.user)}return k?k._redirectEventId?(De(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===k._redirectEventId?E.directlySetCurrentUser(k):E.reloadAndSetCurrentUserOrClear(k)):E.reloadAndSetCurrentUserOrClear(k):E.directlySetCurrentUser(null)})()}tryRedirectSignIn(b){var E=this;return(0,f.Z)(function*(){let D=null;try{D=yield E._popupRedirectResolver._completeRedirectFn(E,b,!0)}catch(k){yield E._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(b){var E=this;return(0,f.Z)(function*(){try{yield nn(b)}catch(D){if("auth/network-request-failed"!==D.code)return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(b)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var b=this;return(0,f.Z)(function*(){b._deleted=!0})()}updateCurrentUser(b){var E=this;return(0,f.Z)(function*(){const D=b?(0,$.m9)(b):null;return D&&De(D.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(D&&D._clone(E))})()}_updateCurrentUser(b){var E=this;return(0,f.Z)(function*(){if(!E._deleted)return b&&De(E.tenantId===b.tenantId,E,"tenant-id-mismatch"),E.queue((0,f.Z)(function*(){yield E.directlySetCurrentUser(b),E.notifyAuthListeners()}))})()}signOut(){var b=this;return(0,f.Z)(function*(){return(b.redirectPersistenceManager||b._popupRedirectResolver)&&(yield b._setRedirectUser(null)),b._updateCurrentUser(null)})()}setPersistence(b){var E=this;return this.queue((0,f.Z)(function*(){yield E.assertedPersistence.setPersistence(ve(b))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(b){this._errorFactory=new $.LL("auth","Firebase",b())}onAuthStateChanged(b,E,D){return this.registerStateListener(this.authStateSubscription,b,E,D)}onIdTokenChanged(b,E,D){return this.registerStateListener(this.idTokenSubscription,b,E,D)}toJSON(){var b;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(b=this._currentUser)||void 0===b?void 0:b.toJSON()}}_setRedirectUser(b,E){var D=this;return(0,f.Z)(function*(){const k=yield D.getOrInitRedirectPersistenceManager(E);return null===b?k.removeCurrentUser():k.setCurrentUser(b)})()}getOrInitRedirectPersistenceManager(b){var E=this;return(0,f.Z)(function*(){if(!E.redirectPersistenceManager){const D=b&&ve(b)||E._popupRedirectResolver;De(D,E,"argument-error"),E.redirectPersistenceManager=yield K.create(E,[ve(D._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(b){var E=this;return(0,f.Z)(function*(){var D,k;return E._isInitialized&&(yield E.queue((0,f.Z)(function*(){}))),(null===(D=E._currentUser)||void 0===D?void 0:D._redirectEventId)===b?E._currentUser:(null===(k=E.redirectUser)||void 0===k?void 0:k._redirectEventId)===b?E.redirectUser:null})()}_persistUserIfCurrent(b){var E=this;return(0,f.Z)(function*(){if(b===E.currentUser)return E.queue((0,f.Z)(function*(){return E.directlySetCurrentUser(b)}))})()}_notifyListenersIfCurrent(b){b===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var b,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(E=null===(b=this.currentUser)||void 0===b?void 0:b.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(b,E,D,k){if(this._deleted)return()=>{};const V="function"==typeof E?E:E.next.bind(E),ae=this._isInitialized?Promise.resolve():this._initializationPromise;return De(ae,this,"internal-error"),ae.then(()=>V(this.currentUser)),"function"==typeof E?b.addObserver(E,D,k):b.addObserver(E)}directlySetCurrentUser(b){var E=this;return(0,f.Z)(function*(){E.currentUser&&E.currentUser!==b&&(E._currentUser._stopProactiveRefresh(),b&&E.isProactiveRefreshEnabled&&b._startProactiveRefresh()),E.currentUser=b,b?yield E.assertedPersistence.setCurrentUser(b):yield E.assertedPersistence.removeCurrentUser()})()}queue(b){return this.operations=this.operations.then(b,b),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(b){!b||this.frameworks.includes(b)||(this.frameworks.push(b),this.frameworks.sort(),this.clientVersion=Ot(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function dn(I){return(0,$.m9)(I)}class So{constructor(b){this.auth=b,this.observer=null,this.addObserver=(0,$.ne)(E=>this.observer=E)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _r(I,b,E){const D=dn(I);De(D._canInitEmulator,D,"emulator-config-failed"),De(/^https?:\/\//.test(b),D,"invalid-emulator-scheme");const k=!!(null==E?void 0:E.disableWarnings),V=ks(b),{host:ae,port:ke}=function(I){const b=ks(I),E=/(\/\/)?([^?#/]+)/.exec(I.substr(b.length));if(!E)return{host:"",port:null};const D=E[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(D);if(k){const V=k[1];return{host:V,port:sl(D.substr(V.length+1))}}{const[V,ae]=D.split(":");return{host:V,port:sl(ae)}}}(b);D.config.emulator={url:`${V}//${ae}${null===ke?"":`:${ke}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:ae,port:ke,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function(){function I(){const b=document.createElement("p"),E=b.style;b.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",b.classList.add("firebase-emulator-warning"),document.body.appendChild(b)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}function ks(I){const b=I.indexOf(":");return b<0?"":I.substr(0,b+1)}function sl(I){if(!I)return null;const b=Number(I);return isNaN(b)?null:b}class vt{constructor(b,E){this.providerId=b,this.signInMethod=E}toJSON(){return Yt("not implemented")}_getIdTokenResponse(b){return Yt("not implemented")}_linkToIdToken(b,E){return Yt("not implemented")}_getReauthenticationResolver(b){return Yt("not implemented")}}function To(I,b){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(I,b){return mn(I,"POST","/v1/accounts:resetPassword",ht(I,b))})).apply(this,arguments)}function od(I,b){return pa.apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(I,b){return mn(I,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function ei(I,b){return ga.apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(I,b){return mn(I,"POST","/v1/accounts:update",ht(I,b))})).apply(this,arguments)}function ki(){return(ki=(0,f.Z)(function*(I,b){return Zr(I,"POST","/v1/accounts:signInWithPassword",ht(I,b))})).apply(this,arguments)}function sn(I,b){return ad.apply(this,arguments)}function ad(){return(ad=(0,f.Z)(function*(I,b){return mn(I,"POST","/v1/accounts:sendOobCode",ht(I,b))})).apply(this,arguments)}function zv(I,b){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(I,b){return sn(I,b)})).apply(this,arguments)}function Nf(I,b){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(I,b){return sn(I,b)})).apply(this,arguments)}function ll(I,b){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,f.Z)(function*(I,b){return sn(I,b)})).apply(this,arguments)}function Mr(I,b){return Of.apply(this,arguments)}function Of(){return(Of=(0,f.Z)(function*(I,b){return sn(I,b)})).apply(this,arguments)}function fi(){return(fi=(0,f.Z)(function*(I,b){return Zr(I,"POST","/v1/accounts:signInWithEmailLink",ht(I,b))})).apply(this,arguments)}function ma(){return(ma=(0,f.Z)(function*(I,b){return Zr(I,"POST","/v1/accounts:signInWithEmailLink",ht(I,b))})).apply(this,arguments)}class Ao extends vt{constructor(b,E,D,k=null){super("password",D),this._email=b,this._password=E,this._tenantId=k}static _fromEmailAndPassword(b,E){return new Ao(b,E,"password")}static _fromEmailAndCode(b,E,D=null){return new Ao(b,E,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(b){const E="string"==typeof b?JSON.parse(b):b;if((null==E?void 0:E.email)&&(null==E?void 0:E.password)){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(b){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return function(I,b){return ki.apply(this,arguments)}(b,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(I,b){return fi.apply(this,arguments)}(b,{email:E._email,oobCode:E._password});default:Qe(b,"internal-error")}})()}_linkToIdToken(b,E){var D=this;return(0,f.Z)(function*(){switch(D.signInMethod){case"password":return od(b,{idToken:E,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function(I,b){return ma.apply(this,arguments)}(b,{idToken:E,email:D._email,oobCode:D._password});default:Qe(b,"internal-error")}})()}_getReauthenticationResolver(b){return this._getIdTokenResponse(b)}}function yr(I,b){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,f.Z)(function*(I,b){return Zr(I,"POST","/v1/accounts:signInWithIdp",ht(I,b))})).apply(this,arguments)}class Ns extends vt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(b){const E=new Ns(b.providerId,b.signInMethod);return b.idToken||b.accessToken?(b.idToken&&(E.idToken=b.idToken),b.accessToken&&(E.accessToken=b.accessToken),b.nonce&&!b.pendingToken&&(E.nonce=b.nonce),b.pendingToken&&(E.pendingToken=b.pendingToken)):b.oauthToken&&b.oauthTokenSecret?(E.accessToken=b.oauthToken,E.secret=b.oauthTokenSecret):Qe("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(b){const E="string"==typeof b?JSON.parse(b):b,{providerId:D,signInMethod:k}=E,V=(0,he._T)(E,["providerId","signInMethod"]);if(!D||!k)return null;const ae=new Ns(D,k);return ae.idToken=V.idToken||void 0,ae.accessToken=V.accessToken||void 0,ae.secret=V.secret,ae.nonce=V.nonce,ae.pendingToken=V.pendingToken||null,ae}_getIdTokenResponse(b){return yr(b,this.buildRequest())}_linkToIdToken(b,E){const D=this.buildRequest();return D.idToken=E,yr(b,D)}_getReauthenticationResolver(b){const E=this.buildRequest();return E.autoCreate=!1,yr(b,E)}buildRequest(){const b={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)b.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),b.postBody=(0,$.xO)(E)}return b}}function qv(I,b){return mm.apply(this,arguments)}function mm(){return(mm=(0,f.Z)(function*(I,b){return mn(I,"POST","/v1/accounts:sendVerificationCode",ht(I,b))})).apply(this,arguments)}function _m(){return(_m=(0,f.Z)(function*(I,b){return Zr(I,"POST","/v1/accounts:signInWithPhoneNumber",ht(I,b))})).apply(this,arguments)}function ym(){return(ym=(0,f.Z)(function*(I,b){const E=yield Zr(I,"POST","/v1/accounts:signInWithPhoneNumber",ht(I,b));if(E.temporaryProof)throw Qr(I,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const fI={USER_NOT_FOUND:"user-not-found"};function bm(){return(bm=(0,f.Z)(function*(I,b){return Zr(I,"POST","/v1/accounts:signInWithPhoneNumber",ht(I,Object.assign(Object.assign({},b),{operation:"REAUTH"})),fI)})).apply(this,arguments)}class cl extends vt{constructor(b){super("phone","phone"),this.params=b}static _fromVerification(b,E){return new cl({verificationId:b,verificationCode:E})}static _fromTokenResponse(b,E){return new cl({phoneNumber:b,temporaryProof:E})}_getIdTokenResponse(b){return function(I,b){return _m.apply(this,arguments)}(b,this._makeVerificationRequest())}_linkToIdToken(b,E){return function(I,b){return ym.apply(this,arguments)}(b,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(b){return function(I,b){return bm.apply(this,arguments)}(b,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:b,phoneNumber:E,verificationId:D,verificationCode:k}=this.params;return b&&E?{temporaryProof:b,phoneNumber:E}:{sessionInfo:D,code:k}}toJSON(){const b={providerId:this.providerId};return this.params.phoneNumber&&(b.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(b.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(b.verificationCode=this.params.verificationCode),this.params.verificationId&&(b.verificationId=this.params.verificationId),b}static fromJSON(b){"string"==typeof b&&(b=JSON.parse(b));const{verificationId:E,verificationCode:D,phoneNumber:k,temporaryProof:V}=b;return D||E||k||V?new cl({verificationId:E,verificationCode:D,phoneNumber:k,temporaryProof:V}):null}}class ld{constructor(b){var E,D,k,V,ae,ke;const Ke=(0,$.zd)((0,$.pd)(b)),mt=null!==(E=Ke.apiKey)&&void 0!==E?E:null,Tt=null!==(D=Ke.oobCode)&&void 0!==D?D:null,Fn=function(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=Ke.mode)&&void 0!==k?k:null);De(mt&&Tt&&Fn,"argument-error"),this.apiKey=mt,this.operation=Fn,this.code=Tt,this.continueUrl=null!==(V=Ke.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(ae=Ke.languageCode)&&void 0!==ae?ae:null,this.tenantId=null!==(ke=Ke.tenantId)&&void 0!==ke?ke:null}static parseLink(b){const E=function(I){const b=(0,$.zd)((0,$.pd)(I)).link,E=b?(0,$.zd)((0,$.pd)(b)).deep_link_id:null,D=(0,$.zd)((0,$.pd)(I)).deep_link_id;return(D?(0,$.zd)((0,$.pd)(D)).link:null)||D||E||b||I}(b);try{return new ld(E)}catch(D){return null}}}let Lf=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(E,D){return Ao._fromEmailAndPassword(E,D)}static credentialWithLink(E,D){const k=ld.parseLink(D);return De(k,"argument-error"),Ao._fromEmailAndCode(E,k.code,k.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class zs{constructor(b){this.providerId=b,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(b){this.defaultLanguageCode=b}setCustomParameters(b){return this.customParameters=b,this}getCustomParameters(){return this.customParameters}}class xo extends zs{constructor(){super(...arguments),this.scopes=[]}addScope(b){return this.scopes.includes(b)||this.scopes.push(b),this}getScopes(){return[...this.scopes]}}class cd extends xo{static credentialFromJSON(b){const E="string"==typeof b?JSON.parse(b):b;return De("providerId"in E&&"signInMethod"in E,"argument-error"),Ns._fromParams(E)}credential(b){return this._credential(Object.assign(Object.assign({},b),{nonce:b.rawNonce}))}_credential(b){return De(b.idToken||b.accessToken,"argument-error"),Ns._fromParams(Object.assign(Object.assign({},b),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(b){return cd.oauthCredentialFromTaggedObject(b)}static credentialFromError(b){return cd.oauthCredentialFromTaggedObject(b.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:E,oauthAccessToken:D,oauthTokenSecret:k,pendingToken:V,nonce:ae,providerId:ke}=b;if(!D&&!k&&!E&&!V||!ke)return null;try{return new cd(ke)._credential({idToken:E,accessToken:D,nonce:ae,pendingToken:V})}catch(Ke){return null}}}let Em=(()=>{class I extends xo{constructor(){super("facebook.com")}static credential(E){return Ns._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return I.credentialFromTaggedObject(E)}static credentialFromError(E){return I.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return I.credential(E.oauthAccessToken)}catch(D){return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),wm=(()=>{class I extends xo{constructor(){super("google.com"),this.addScope("profile")}static credential(E,D){return Ns._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:D})}static credentialFromResult(E){return I.credentialFromTaggedObject(E)}static credentialFromError(E){return I.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:D,oauthAccessToken:k}=E;if(!D&&!k)return null;try{return I.credential(D,k)}catch(V){return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),_a=(()=>{class I extends xo{constructor(){super("github.com")}static credential(E){return Ns._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return I.credentialFromTaggedObject(E)}static credentialFromError(E){return I.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return I.credential(E.oauthAccessToken)}catch(D){return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class Rr extends vt{constructor(b,E){super(b,b),this.pendingToken=E}_getIdTokenResponse(b){return yr(b,this.buildRequest())}_linkToIdToken(b,E){const D=this.buildRequest();return D.idToken=E,yr(b,D)}_getReauthenticationResolver(b){const E=this.buildRequest();return E.autoCreate=!1,yr(b,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(b){const E="string"==typeof b?JSON.parse(b):b,{providerId:D,signInMethod:k,pendingToken:V}=E;return D&&k&&V&&D===k?new Rr(D,V):null}static _create(b,E){return new Rr(b,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Yv=(()=>{class I extends xo{constructor(){super("twitter.com")}static credential(E,D){return Ns._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:D})}static credentialFromResult(E){return I.credentialFromTaggedObject(E)}static credentialFromError(E){return I.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:D,oauthTokenSecret:k}=E;if(!D||!k)return null;try{return I.credential(D,k)}catch(V){return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function Uf(I,b){return ud.apply(this,arguments)}function ud(){return(ud=(0,f.Z)(function*(I,b){return Zr(I,"POST","/v1/accounts:signUp",ht(I,b))})).apply(this,arguments)}class Pi{constructor(b){this.user=b.user,this.providerId=b.providerId,this._tokenResponse=b._tokenResponse,this.operationType=b.operationType}static _fromIdTokenResponse(b,E,D,k=!1){return(0,f.Z)(function*(){const V=yield _n._fromIdTokenResponse(b,D,k),ae=jf(D);return new Pi({user:V,providerId:ae,_tokenResponse:D,operationType:E})})()}static _forOperation(b,E,D){return(0,f.Z)(function*(){yield b._updateTokensIfNecessary(D,!0);const k=jf(D);return new Pi({user:b,providerId:k,_tokenResponse:D,operationType:E})})()}}function jf(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function mI(I){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(I){var b;const E=dn(I);if(yield E._initializationPromise,null===(b=E.currentUser)||void 0===b?void 0:b.isAnonymous)return new Pi({user:E.currentUser,providerId:null,operationType:"signIn"});const D=yield Uf(E,{returnSecureToken:!0}),k=yield Pi._fromIdTokenResponse(E,"signIn",D,!0);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}class ul extends $.ZR{constructor(b,E,D,k){var V;super(E.code,E.message),this.operationType=D,this.user=k,this.name="FirebaseError",Object.setPrototypeOf(this,ul.prototype),this.appName=b.name,this.code=E.code,this.tenantId=null!==(V=b.tenantId)&&void 0!==V?V:void 0,this.serverResponse=E.customData.serverResponse}static _fromErrorAndOperation(b,E,D,k){return new ul(b,E,D,k)}}function Hf(I,b,E,D){return("reauthenticate"===b?E._getReauthenticationResolver(I):E._getIdTokenResponse(I)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?ul._fromErrorAndOperation(I,V,b,D):V})}function kc(I){return new Set(I.map(({providerId:b})=>b).filter(b=>!!b))}function Kv(I,b){return dd.apply(this,arguments)}function dd(){return(dd=(0,f.Z)(function*(I,b){const E=(0,$.m9)(I);yield Nc(!0,E,b);const{providerUserInfo:D}=yield tt(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[b]}),k=kc(D||[]);return E.providerData=E.providerData.filter(V=>k.has(V.providerId)),k.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E})).apply(this,arguments)}function Gf(I,b){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,f.Z)(function*(I,b,E=!1){const D=yield Xe(I,b._linkToIdToken(I.auth,yield I.getIdToken()),E);return Pi._forOperation(I,"link",D)})).apply(this,arguments)}function Nc(I,b,E){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,f.Z)(function*(I,b,E){yield nn(b);const k=!1===I?"provider-already-linked":"no-such-provider";De(kc(b.providerData).has(E)===I,b.auth,k)})).apply(this,arguments)}function Cm(I,b){return In.apply(this,arguments)}function In(){return(In=(0,f.Z)(function*(I,b,E=!1){const{auth:D}=I,k="reauthenticate";try{const V=yield Xe(I,Hf(D,k,b,I),E);De(V.idToken,D,"internal-error");const ae=en(V.idToken);De(ae,D,"internal-error");const{sub:ke}=ae;return De(I.uid===ke,D,"user-mismatch"),Pi._forOperation(I,k,V)}catch(V){throw"auth/user-not-found"===(null==V?void 0:V.code)&&Qe(D,"user-mismatch"),V}})).apply(this,arguments)}function Im(I,b){return $f.apply(this,arguments)}function $f(){return($f=(0,f.Z)(function*(I,b,E=!1){const D="signIn",k=yield Hf(I,D,b),V=yield Pi._fromIdTokenResponse(I,D,k);return E||(yield I._updateCurrentUser(V.user)),V})).apply(this,arguments)}function ya(I,b){return pi.apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(I,b){return Im(dn(I),b)})).apply(this,arguments)}function hd(I,b){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,f.Z)(function*(I,b){const E=(0,$.m9)(I);return yield Nc(!1,E,b.providerId),Gf(E,b)})).apply(this,arguments)}function va(I,b){return ti.apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(I,b){return Cm((0,$.m9)(I),b)})).apply(this,arguments)}function Zv(I,b){return fd.apply(this,arguments)}function fd(){return(fd=(0,f.Z)(function*(I,b){return Zr(I,"POST","/v1/accounts:signInWithCustomToken",ht(I,b))})).apply(this,arguments)}function pd(I,b){return qs.apply(this,arguments)}function qs(){return(qs=(0,f.Z)(function*(I,b){const E=dn(I),D=yield Zv(E,{token:b,returnSecureToken:!0}),k=yield Pi._fromIdTokenResponse(E,"signIn",D);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}class Pc{constructor(b,E){this.factorId=b,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(b,E){return"phoneInfo"in E?Fc._fromServerResponse(b,E):Qe(b,"internal-error")}}class Fc extends Pc{constructor(b){super("phone",b),this.phoneNumber=b.phoneInfo}static _fromServerResponse(b,E){return new Fc(E)}}function gt(I,b,E){var D;De((null===(D=E.url)||void 0===D?void 0:D.length)>0,I,"invalid-continue-uri"),De(void 0===E.dynamicLinkDomain||E.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),b.continueUrl=E.url,b.dynamicLinkDomain=E.dynamicLinkDomain,b.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(De(E.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),b.iOSBundleId=E.iOS.bundleId),E.android&&(De(E.android.packageName.length>0,I,"missing-android-pkg-name"),b.androidInstallApp=E.android.installApp,b.androidMinimumVersionCode=E.android.minimumVersion,b.androidPackageName=E.android.packageName)}function Qv(I,b,E){return zf.apply(this,arguments)}function zf(){return(zf=(0,f.Z)(function*(I,b,E){const D=(0,$.m9)(I),k={requestType:"PASSWORD_RESET",email:b};E&&gt(D,k,E),yield Nf(D,k)})).apply(this,arguments)}function Jv(I,b,E){return qf.apply(this,arguments)}function qf(){return(qf=(0,f.Z)(function*(I,b,E){yield To((0,$.m9)(I),{oobCode:b,newPassword:E})})).apply(this,arguments)}function Xv(I,b){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,f.Z)(function*(I,b){yield ei((0,$.m9)(I),{oobCode:b})})).apply(this,arguments)}function dl(I,b){return Me.apply(this,arguments)}function Me(){return(Me=(0,f.Z)(function*(I,b){const E=(0,$.m9)(I),D=yield To(E,{oobCode:b}),k=D.requestType;switch(De(k,E,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(D.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(D.mfaInfo,E,"internal-error");default:De(D.email,E,"internal-error")}let V=null;return D.mfaInfo&&(V=Pc._fromServerResponse(dn(E),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:V},operation:k}})).apply(this,arguments)}function Gt(I,b){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,f.Z)(function*(I,b){const{data:E}=yield dl((0,$.m9)(I),b);return E.email})).apply(this,arguments)}function Rn(I,b,E){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,f.Z)(function*(I,b,E){const D=dn(I),k=yield Uf(D,{returnSecureToken:!0,email:b,password:E}),V=yield Pi._fromIdTokenResponse(D,"signIn",k);return yield D._updateCurrentUser(V.user),V})).apply(this,arguments)}function ba(I,b,E){return ya((0,$.m9)(I),Lf.credential(b,E))}function Ji(I,b,E){return hl.apply(this,arguments)}function hl(){return(hl=(0,f.Z)(function*(I,b,E){const D=(0,$.m9)(I),k={requestType:"EMAIL_SIGNIN",email:b};De(E.handleCodeInApp,D,"argument-error"),E&&gt(D,k,E),yield ll(D,k)})).apply(this,arguments)}function gd(I,b){const E=ld.parseLink(b);return"EMAIL_SIGNIN"===(null==E?void 0:E.operation)}function _I(I,b,E){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,f.Z)(function*(I,b,E){const D=(0,$.m9)(I),k=Lf.credentialWithLink(b,E||ne());return De(k._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),ya(D,k)})).apply(this,arguments)}function md(I,b){return fl.apply(this,arguments)}function fl(){return(fl=(0,f.Z)(function*(I,b){return mn(I,"POST","/v1/accounts:createAuthUri",ht(I,b))})).apply(this,arguments)}function vr(I,b){return Li.apply(this,arguments)}function Li(){return(Li=(0,f.Z)(function*(I,b){const D={identifier:b,continueUri:Le()?ne():"http://localhost"},{signinMethods:k}=yield md((0,$.m9)(I),D);return k||[]})).apply(this,arguments)}function eb(I,b){return fs.apply(this,arguments)}function fs(){return(fs=(0,f.Z)(function*(I,b){const E=(0,$.m9)(I),k={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};b&&gt(E.auth,k,b);const{email:V}=yield zv(E.auth,k);V!==I.email&&(yield I.reload())})).apply(this,arguments)}function ps(I,b,E){return Sm.apply(this,arguments)}function Sm(){return(Sm=(0,f.Z)(function*(I,b,E){const D=(0,$.m9)(I),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:b};E&&gt(D.auth,V,E);const{email:ae}=yield Mr(D.auth,V);ae!==I.email&&(yield I.reload())})).apply(this,arguments)}function Tm(I,b){return _d.apply(this,arguments)}function _d(){return(_d=(0,f.Z)(function*(I,b){return mn(I,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function tb(I,b){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,f.Z)(function*(I,{displayName:b,photoURL:E}){if(void 0===b&&void 0===E)return;const D=(0,$.m9)(I),V={idToken:yield D.getIdToken(),displayName:b,photoUrl:E,returnSecureToken:!0},ae=yield Xe(D,Tm(D.auth,V));D.displayName=ae.displayName||null,D.photoURL=ae.photoUrl||null;const ke=D.providerData.find(({providerId:Ke})=>"password"===Ke);ke&&(ke.displayName=D.displayName,ke.photoURL=D.photoURL),yield D._updateTokensIfNecessary(ae)})).apply(this,arguments)}function Kf(I,b){return pl((0,$.m9)(I),b,null)}function Dm(I,b){return pl((0,$.m9)(I),null,b)}function pl(I,b,E){return yd.apply(this,arguments)}function yd(){return(yd=(0,f.Z)(function*(I,b,E){const{auth:D}=I,V={idToken:yield I.getIdToken(),returnSecureToken:!0};b&&(V.email=b),E&&(V.password=E);const ae=yield Xe(I,od(D,V));yield I._updateTokensIfNecessary(ae,!0)})).apply(this,arguments)}class Ws{constructor(b,E,D={}){this.isNewUser=b,this.providerId=E,this.profile=D}}class Zf extends Ws{constructor(b,E,D,k){super(b,E,D),this.username=k}}class nb extends Ws{constructor(b,E){super(b,"facebook.com",E)}}class xm extends Zf{constructor(b,E){super(b,"github.com",E,"string"==typeof(null==E?void 0:E.login)?null==E?void 0:E.login:null)}}class rb extends Ws{constructor(b,E){super(b,"google.com",E)}}class Uc extends Zf{constructor(b,E,D){super(b,"twitter.com",E,D)}}function ib(I){const{user:b,_tokenResponse:E}=I;return b.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function(I){var b,E;if(!I)return null;const{providerId:D}=I,k=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},V=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!D&&(null==I?void 0:I.idToken)){const ae=null===(E=null===(b=en(I.idToken))||void 0===b?void 0:b.firebase)||void 0===E?void 0:E.sign_in_provider;if(ae)return new Ws(V,"anonymous"!==ae&&"custom"!==ae?ae:null)}if(!D)return null;switch(D){case"facebook.com":return new nb(V,k);case"github.com":return new xm(V,k);case"google.com":return new rb(V,k);case"twitter.com":return new Uc(V,k,I.screenName||null);case"custom":case"anonymous":return new Ws(V,null);default:return new Ws(V,D,k)}}(E)}class Ea{constructor(b,E){this.type=b,this.credential=E}static _fromIdtoken(b){return new Ea("enroll",b)}static _fromMfaPendingCredential(b){return new Ea("signin",b)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(b){var E,D;if(null==b?void 0:b.multiFactorSession){if(null===(E=b.multiFactorSession)||void 0===E?void 0:E.pendingCredential)return Ea._fromMfaPendingCredential(b.multiFactorSession.pendingCredential);if(null===(D=b.multiFactorSession)||void 0===D?void 0:D.idToken)return Ea._fromIdtoken(b.multiFactorSession.idToken)}return null}}class Ro{constructor(b,E,D){this.session=b,this.hints=E,this.signInResolver=D}static _fromError(b,E){const D=dn(b),k=(E.serverResponse.mfaInfo||[]).map(ae=>Pc._fromServerResponse(D,ae));De(E.serverResponse.mfaPendingCredential,D,"internal-error");const V=Ea._fromMfaPendingCredential(E.serverResponse.mfaPendingCredential);return new Ro(V,k,function(){var ae=(0,f.Z)(function*(ke){const Ke=yield ke._process(D,V);delete E.serverResponse.mfaInfo,delete E.serverResponse.mfaPendingCredential;const mt=Object.assign(Object.assign({},E.serverResponse),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(E.operationType){case"signIn":const Tt=yield Pi._fromIdTokenResponse(D,E.operationType,mt);return yield D._updateCurrentUser(Tt.user),Tt;case"reauthenticate":return De(E.user,D,"internal-error"),Pi._forOperation(E.user,E.operationType,mt);default:Qe(D,"internal-error")}});return function(ke){return ae.apply(this,arguments)}}())}resolveSignIn(b){var E=this;return(0,f.Z)(function*(){return E.signInResolver(b)})()}}function vd(I,b){var E;const D=(0,$.m9)(I),k=b;return De(b.operationType,D,"argument-error"),De(null===(E=k.serverResponse)||void 0===E?void 0:E.mfaPendingCredential,D,"argument-error"),Ro._fromError(D,k)}function ml(I,b){return mn(I,"POST","/v2/accounts/mfaEnrollment:start",ht(I,b))}class Ed{constructor(b){this.user=b,this.enrolledFactors=[],b._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(D=>Pc._fromServerResponse(b.auth,D)))})}static _fromUser(b){return new Ed(b)}getSession(){var b=this;return(0,f.Z)(function*(){return Ea._fromIdtoken(yield b.user.getIdToken())})()}enroll(b,E){var D=this;return(0,f.Z)(function*(){const k=b,V=yield D.getSession(),ae=yield Xe(D.user,k._process(D.user.auth,V,E));return yield D.user._updateTokensIfNecessary(ae),D.user.reload()})()}unenroll(b){var E=this;return(0,f.Z)(function*(){const D="string"==typeof b?b:b.uid,k=yield E.user.getIdToken(),V=yield Xe(E.user,function(I,b){return mn(I,"POST","/v2/accounts/mfaEnrollment:withdraw",ht(I,b))}(E.user.auth,{idToken:k,mfaEnrollmentId:D}));E.enrolledFactors=E.enrolledFactors.filter(({uid:ae})=>ae!==D),yield E.user._updateTokensIfNecessary(V);try{yield E.user.reload()}catch(ae){if("auth/user-token-expired"!==ae.code)throw ae}})()}}const Xf=new WeakMap;function ko(I){const b=(0,$.m9)(I);return Xf.has(b)||Xf.set(b,Ed._fromUser(b)),Xf.get(b)}const wa="__sak";class ob{constructor(b,E){this.storage=b,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(wa,"1"),this.storage.removeItem(wa),Promise.resolve(!0)):Promise.resolve(!1)}catch(b){return Promise.resolve(!1)}}_set(b,E){return this.storage.setItem(b,JSON.stringify(E)),Promise.resolve()}_get(b){const E=this.storage.getItem(b);return Promise.resolve(E?JSON.parse(E):null)}_remove(b){return this.storage.removeItem(b),Promise.resolve()}}const lb=(()=>{class I extends ob{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(E,D)=>this.onStorageEvent(E,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const I=(0,$.z$)();return Ue(I)||yn(I)}()&&function(){try{return!(!window||window===window.top)}catch(I){return!1}}(),this.fallbackToPolling=Xr(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const D of Object.keys(this.listeners)){const k=this.storage.getItem(D),V=this.localCache[D];k!==V&&E(D,V,k)}}onStorageEvent(E,D=!1){if(!E.key)return void this.forAllChangedKeys((ke,Ke,mt)=>{this.notifyListeners(ke,mt)});const k=E.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ke=this.storage.getItem(k);if(E.newValue!==ke)null!==E.newValue?this.storage.setItem(k,E.newValue):this.storage.removeItem(k);else if(this.localCache[k]===E.newValue&&!D)return}const V=()=>{const ke=this.storage.getItem(k);!D&&this.localCache[k]===ke||this.notifyListeners(k,ke)},ae=this.storage.getItem(k);(0,$.w1)()&&10===document.documentMode&&ae!==E.newValue&&E.newValue!==E.oldValue?setTimeout(V,10):V()}notifyListeners(E,D){this.localCache[E]=D;const k=this.listeners[E];if(k)for(const V of Array.from(k))V(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,D,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:D,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(D)}_removeListener(E,D){this.listeners[E]&&(this.listeners[E].delete(D),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,D){var k=()=>super._set,V=this;return(0,f.Z)(function*(){yield k().call(V,E,D),V.localCache[E]=JSON.stringify(D)})()}_get(E){var D=()=>super._get,k=this;return(0,f.Z)(function*(){const V=yield D().call(k,E);return k.localCache[E]=JSON.stringify(V),V})()}_remove(E){var D=()=>super._remove,k=this;return(0,f.Z)(function*(){yield D().call(k,E),delete k.localCache[E]})()}}return I.type="LOCAL",I})(),cb=(()=>{class I extends ob{constructor(){super(window.sessionStorage,"SESSION")}_addListener(E,D){}_removeListener(E,D){}}return I.type="SESSION",I})();let Rm=(()=>{class I{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const D=this.receivers.find(V=>V.isListeningto(E));if(D)return D;const k=new I(E);return this.receivers.push(k),k}isListeningto(E){return this.eventTarget===E}handleEvent(E){var D=this;return(0,f.Z)(function*(){const k=E,{eventId:V,eventType:ae,data:ke}=k.data,Ke=D.handlersMap[ae];if(!(null==Ke?void 0:Ke.size))return;k.ports[0].postMessage({status:"ack",eventId:V,eventType:ae});const mt=Array.from(Ke).map(function(){var Fn=(0,f.Z)(function*(eo){return eo(k.origin,ke)});return function(eo){return Fn.apply(this,arguments)}}()),Tt=yield function(I){return Promise.all(I.map(function(){var b=(0,f.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(D){return{fulfilled:!1,reason:D}}});return function(E){return b.apply(this,arguments)}}()))}(mt);k.ports[0].postMessage({status:"done",eventId:V,eventType:ae,response:Tt})})()}_subscribe(E,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(D)}_unsubscribe(E,D){this.handlersMap[E]&&D&&this.handlersMap[E].delete(D),(!D||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function gi(I="",b=10){let E="";for(let D=0;D<b;D++)E+=Math.floor(10*Math.random());return I+E}class wd{constructor(b){this.target=b,this.handlers=new Set}removeMessageHandler(b){b.messageChannel&&(b.messageChannel.port1.removeEventListener("message",b.onMessage),b.messageChannel.port1.close()),this.handlers.delete(b)}_send(b,E,D=50){var k=this;return(0,f.Z)(function*(){const V="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let ae,ke;return new Promise((Ke,mt)=>{const Tt=gi("",20);V.port1.start();const Fn=setTimeout(()=>{mt(new Error("unsupported_event"))},D);ke={messageChannel:V,onMessage(eo){const ys=eo;if(ys.data.eventId===Tt)switch(ys.data.status){case"ack":clearTimeout(Fn),ae=setTimeout(()=>{mt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ae),Ke(ys.data.response);break;default:clearTimeout(Fn),clearTimeout(ae),mt(new Error("invalid_response"))}}},k.handlers.add(ke),V.port1.addEventListener("message",ke.onMessage),k.target.postMessage({eventType:b,eventId:Tt,data:E},[V.port2])}).finally(()=>{ke&&k.removeMessageHandler(ke)})})()}}function Kn(){return window}function Ys(){return void 0!==Kn().WorkerGlobalScope&&"function"==typeof Kn().importScripts}function Ca(){return(Ca=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(I){return null}})).apply(this,arguments)}const EI="firebaseLocalStorageDb",Sd="firebaseLocalStorage",ub="fbase_key";class Td{constructor(b){this.request=b}toPromise(){return new Promise((b,E)=>{this.request.addEventListener("success",()=>{b(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function No(I,b){return I.transaction([Sd],b?"readwrite":"readonly").objectStore(Sd)}function cn(){const I=indexedDB.open(EI,1);return new Promise((b,E)=>{I.addEventListener("error",()=>{E(I.error)}),I.addEventListener("upgradeneeded",()=>{const D=I.result;try{D.createObjectStore(Sd,{keyPath:ub})}catch(k){E(k)}}),I.addEventListener("success",(0,f.Z)(function*(){const D=I.result;D.objectStoreNames.contains(Sd)?b(D):(D.close(),yield function(){const I=indexedDB.deleteDatabase(EI);return new Td(I).toPromise()}(),b(yield cn()))}))})}function qe(I,b,E){return ct.apply(this,arguments)}function ct(){return(ct=(0,f.Z)(function*(I,b,E){const D=No(I,!0).put({[ub]:b,value:E});return new Td(D).toPromise()})).apply(this,arguments)}function ri(){return(ri=(0,f.Z)(function*(I,b){const E=No(I,!1).get(b),D=yield new Td(E).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function _l(I,b){const E=No(I,!0).delete(b);return new Td(E).toPromise()}const Fm=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,f.Z)(function*(){return E.db||(E.db=yield cn()),E.db})()}_withRetries(E){var D=this;return(0,f.Z)(function*(){let k=0;for(;;)try{const V=yield D._openDb();return yield E(V)}catch(V){if(k++>3)throw V;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,f.Z)(function*(){return Ys()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,f.Z)(function*(){E.receiver=Rm._getInstance(Ys()?self:null),E.receiver._subscribe("keyChanged",function(){var D=(0,f.Z)(function*(k,V){return{keyProcessed:(yield E._poll()).includes(V.key)}});return function(k,V){return D.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var D=(0,f.Z)(function*(k,V){return["keyChanged"]});return function(k,V){return D.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,f.Z)(function*(){var D,k;if(E.activeServiceWorker=yield function(){return Ca.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new wd(E.activeServiceWorker);const V=yield E.sender._send("ping",{},800);!V||(null===(D=V[0])||void 0===D?void 0:D.fulfilled)&&(null===(k=V[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var D=this;return(0,f.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function(){var I;return(null===(I=null==navigator?void 0:navigator.serviceWorker)||void 0===I?void 0:I.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:E},D.serviceWorkerReceiverAvailable?800:50)}catch(k){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const E=yield cn();return yield qe(E,wa,"1"),yield _l(E,wa),!0}catch(E){}return!1})()}_withPendingWrite(E){var D=this;return(0,f.Z)(function*(){D.pendingWrites++;try{yield E()}finally{D.pendingWrites--}})()}_set(E,D){var k=this;return(0,f.Z)(function*(){return k._withPendingWrite((0,f.Z)(function*(){return yield k._withRetries(V=>qe(V,E,D)),k.localCache[E]=D,k.notifyServiceWorker(E)}))})()}_get(E){var D=this;return(0,f.Z)(function*(){const k=yield D._withRetries(V=>function(I,b){return ri.apply(this,arguments)}(V,E));return D.localCache[E]=k,k})()}_remove(E){var D=this;return(0,f.Z)(function*(){return D._withPendingWrite((0,f.Z)(function*(){return yield D._withRetries(k=>_l(k,E)),delete D.localCache[E],D.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,f.Z)(function*(){const D=yield E._withRetries(ae=>{const ke=No(ae,!1).getAll();return new Td(ke).toPromise()});if(!D)return[];if(0!==E.pendingWrites)return[];const k=[],V=new Set;for(const{fbase_key:ae,value:ke}of D)V.add(ae),JSON.stringify(E.localCache[ae])!==JSON.stringify(ke)&&(E.notifyListeners(ae,ke),k.push(ae));for(const ae of Object.keys(E.localCache))E.localCache[ae]&&!V.has(ae)&&(E.notifyListeners(ae,null),k.push(ae));return k})()}notifyListeners(E,D){this.localCache[E]=D;const k=this.listeners[E];if(k)for(const V of Array.from(k))V(D)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(D)}_removeListener(E,D){this.listeners[E]&&(this.listeners[E].delete(D),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})();function Dd(I,b){return mn(I,"POST","/v2/accounts/mfaSignIn:start",ht(I,b))}function Ad(){return(Ad=(0,f.Z)(function*(I){return(yield mn(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Oo(I){return new Promise((b,E)=>{const D=document.createElement("script");D.setAttribute("src",I),D.onload=b,D.onerror=k=>{const V=It("internal-error");V.customData=k,E(V)},D.type="text/javascript",D.charset="UTF-8",function(){var I,b;return null!==(b=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==b?b:document}().appendChild(D)})}function rp(I){return`__${I}${Math.floor(1e6*Math.random())}`}const Xi=1e12;class Ks{constructor(b){this.auth=b,this.counter=Xi,this._widgets=new Map}render(b,E){const D=this.counter;return this._widgets.set(D,new yl(b,this.auth.name,E||{})),this.counter++,D}reset(b){var E;const D=b||Xi;null===(E=this._widgets.get(D))||void 0===E||E.delete(),this._widgets.delete(D)}getResponse(b){var E;return(null===(E=this._widgets.get(b||Xi))||void 0===E?void 0:E.getResponse())||""}execute(b){var E=this;return(0,f.Z)(function*(){var D;return null===(D=E._widgets.get(b||Xi))||void 0===D||D.execute(),""})()}}class yl{constructor(b,E,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof b?document.getElementById(b):b;De(k,"argument-error",{appName:E}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(I){const b=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<50;D++)b.push(E.charAt(Math.floor(Math.random()*E.length)));return b.join("")}();const{callback:b,"expired-callback":E}=this.params;if(b)try{b(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mi=rp("rcb"),Fo=new Je(3e4,6e4);class it{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Kn().grecaptcha}load(b,E=""){return De((I=E).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I),b,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(Kn().grecaptcha):new Promise((D,k)=>{const V=Kn().setTimeout(()=>{k(It(b,"network-request-failed"))},Fo.get());Kn()[mi]=()=>{Kn().clearTimeout(V),delete Kn()[mi];const ke=Kn().grecaptcha;if(!ke)return void k(It(b,"internal-error"));const Ke=ke.render;ke.render=(mt,Tt)=>{const Fn=Ke(mt,Tt);return this.counter++,Fn},this.hostLanguage=E,D(ke)},Oo(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:mi,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(V),k(It(b,"internal-error"))})});var I}clearedOneInstance(){this.counter--}shouldResolveImmediately(b){return!!Kn().grecaptcha&&(b===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class or{load(b){return(0,f.Z)(function*(){return new Ks(b)})()}clearedOneInstance(){}}const Bm="recaptcha",Pn={theme:"light",type:"image"};class CI{constructor(b,E=Object.assign({},Pn),D){this.parameters=E,this.type=Bm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dn(D),this.isInvisible="invisible"===this.parameters.size,De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof b?document.getElementById(b):b;De(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new or:new it,this.validateStartingState()}verify(){var b=this;return(0,f.Z)(function*(){b.assertNotDestroyed();const E=yield b.render(),D=b.getAssertedRecaptcha();return D.getResponse(E)||new Promise(V=>{const ae=ke=>{!ke||(b.tokenChangeListeners.delete(ae),V(ke))};b.tokenChangeListeners.add(ae),b.isInvisible&&D.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(b){return Promise.reject(b)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(b=>{throw this.renderPromise=null,b})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(b=>{this.container.removeChild(b)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(b){return E=>{if(this.tokenChangeListeners.forEach(D=>D(E)),"function"==typeof b)b(E);else if("string"==typeof b){const D=Kn()[b];"function"==typeof D&&D(E)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var b=this;return(0,f.Z)(function*(){if(yield b.init(),!b.widgetId){let E=b.container;if(!b.isInvisible){const D=document.createElement("div");E.appendChild(D),E=D}b.widgetId=b.getAssertedRecaptcha().render(E,b.parameters)}return b.widgetId})()}init(){var b=this;return(0,f.Z)(function*(){De(Le()&&!Ys(),b.auth,"internal-error"),yield function(){let I=null;return new Promise(b=>{"complete"!==document.readyState?(I=()=>b(),window.addEventListener("load",I)):b()}).catch(b=>{throw I&&window.removeEventListener("load",I),b})}(),b.recaptcha=yield b._recaptchaLoader.load(b.auth,b.auth.languageCode||void 0);const E=yield function(I){return Ad.apply(this,arguments)}(b.auth);De(E,b.auth,"internal-error"),b.parameters.sitekey=E})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gs{constructor(b,E){this.verificationId=b,this.onConfirmation=E}confirm(b){const E=cl._fromVerification(this.verificationId,b);return this.onConfirmation(E)}}function II(I,b,E){return Um.apply(this,arguments)}function Um(){return(Um=(0,f.Z)(function*(I,b,E){const D=dn(I),k=yield ar(D,b,(0,$.m9)(E));return new gs(k,V=>ya(D,V))})).apply(this,arguments)}function ms(I,b,E){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(I,b,E){const D=(0,$.m9)(I);yield Nc(!1,D,"phone");const k=yield ar(D.auth,b,(0,$.m9)(E));return new gs(k,V=>hd(D,V))})).apply(this,arguments)}function SI(I,b,E){return jm.apply(this,arguments)}function jm(){return(jm=(0,f.Z)(function*(I,b,E){const D=(0,$.m9)(I),k=yield ar(D.auth,b,(0,$.m9)(E));return new gs(k,V=>va(D,V))})).apply(this,arguments)}function ar(I,b,E){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,f.Z)(function*(I,b,E){var D;const k=yield E.verify();try{let V;if(De("string"==typeof k,I,"argument-error"),De(E.type===Bm,I,"argument-error"),V="string"==typeof b?{phoneNumber:b}:b,"session"in V){const ae=V.session;if("phoneNumber"in V)return De("enroll"===ae.type,I,"internal-error"),(yield ml(I,{idToken:ae.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{De("signin"===ae.type,I,"internal-error");const ke=(null===(D=V.multiFactorHint)||void 0===D?void 0:D.uid)||V.multiFactorUid;return De(ke,I,"missing-multi-factor-info"),(yield Dd(I,{mfaPendingCredential:ae.credential,mfaEnrollmentId:ke,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ae}=yield qv(I,{phoneNumber:V.phoneNumber,recaptchaToken:k});return ae}}finally{E._reset()}})).apply(this,arguments)}function Gc(I,b){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(I,b){yield Gf((0,$.m9)(I),b)})).apply(this,arguments)}let lr=(()=>{class I{constructor(E){this.providerId=I.PROVIDER_ID,this.auth=dn(E)}verifyPhoneNumber(E,D){return ar(this.auth,E,(0,$.m9)(D))}static credential(E,D){return cl._fromVerification(E,D)}static credentialFromResult(E){return I.credentialFromTaggedObject(E)}static credentialFromError(E){return I.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:D,temporaryProof:k}=E;return D&&k?cl._fromTokenResponse(D,k):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function Os(I,b){return b?ve(b):(De(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Zn extends vt{constructor(b){super("custom","custom"),this.params=b}_getIdTokenResponse(b){return yr(b,this._buildIdpRequest())}_linkToIdToken(b,E){return yr(b,this._buildIdpRequest(E))}_getReauthenticationResolver(b){return yr(b,this._buildIdpRequest())}_buildIdpRequest(b){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return b&&(E.idToken=b),E}}function $c(I){return Im(I.auth,new Zn(I),I.bypassAuthState)}function op(I){const{auth:b,user:E}=I;return De(E,b,"internal-error"),Cm(E,new Zn(I),I.bypassAuthState)}function ts(I){return ns.apply(this,arguments)}function ns(){return(ns=(0,f.Z)(function*(I){const{auth:b,user:E}=I;return De(E,b,"internal-error"),Gf(E,new Zn(I),I.bypassAuthState)})).apply(this,arguments)}class vl{constructor(b,E,D,k,V=!1){this.auth=b,this.resolver=D,this.user=k,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var b=this;return new Promise(function(){var E=(0,f.Z)(function*(D,k){b.pendingPromise={resolve:D,reject:k};try{b.eventManager=yield b.resolver._initialize(b.auth),yield b.onExecution(),b.eventManager.registerConsumer(b)}catch(V){b.reject(V)}});return function(D,k){return E.apply(this,arguments)}}())}onAuthEvent(b){var E=this;return(0,f.Z)(function*(){const{urlResponse:D,sessionId:k,postBody:V,tenantId:ae,error:ke,type:Ke}=b;if(ke)return void E.reject(ke);const mt={auth:E.auth,requestUri:D,sessionId:k,tenantId:ae||void 0,postBody:V||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(Ke)(mt))}catch(Tt){E.reject(Tt)}})()}onError(b){this.reject(b)}getIdpTask(b){switch(b){case"signInViaPopup":case"signInViaRedirect":return $c;case"linkViaPopup":case"linkViaRedirect":return ts;case"reauthViaPopup":case"reauthViaRedirect":return op;default:Qe(this.auth,"internal-error")}}resolve(b){ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(b),this.unregisterAndCleanUp()}reject(b){ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(b),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ia=new Je(2e3,1e4);function Vo(I,b,E){return xd.apply(this,arguments)}function xd(){return(xd=(0,f.Z)(function*(I,b,E){const D=dn(I);Bt(I,b,zs);const k=Os(D,E);return new Md(D,"signInViaPopup",b,k).executeNotNull()})).apply(this,arguments)}function Gm(I,b,E){return ap.apply(this,arguments)}function ap(){return(ap=(0,f.Z)(function*(I,b,E){const D=(0,$.m9)(I);Bt(D.auth,b,zs);const k=Os(D.auth,E);return new Md(D.auth,"reauthViaPopup",b,k,D).executeNotNull()})).apply(this,arguments)}function TI(I,b,E){return lp.apply(this,arguments)}function lp(){return(lp=(0,f.Z)(function*(I,b,E){const D=(0,$.m9)(I);Bt(D.auth,b,zs);const k=Os(D.auth,E);return new Md(D.auth,"linkViaPopup",b,k,D).executeNotNull()})).apply(this,arguments)}let Md=(()=>{class I extends vl{constructor(E,D,k,V,ae){super(E,D,V,ae),this.provider=k,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var E=this;return(0,f.Z)(function*(){const D=yield E.execute();return De(D,E.auth,"internal-error"),D})()}onExecution(){var E=this;return(0,f.Z)(function*(){ue(1===E.filter.length,"Popup operations only handle one event");const D=gi();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],D),E.authWindow.associatedEvent=D,E.resolver._originValidation(E.auth).catch(k=>{E.reject(k)}),E.resolver._isIframeWebStorageSupported(E.auth,k=>{k||E.reject(It(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(It(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const E=()=>{var D,k;this.pollId=(null===(k=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===k?void 0:k.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(It(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,Ia.get())};E()}}return I.currentPopupAction=null,I})();const Gn=new Map;class bl extends vl{constructor(b,E,D=!1){super(b,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,D),this.eventId=null}execute(){var b=()=>super.execute,E=this;return(0,f.Z)(function*(){let D=Gn.get(E.auth._key());if(!D){try{const V=(yield function(I,b){return El.apply(this,arguments)}(E.resolver,E.auth))?yield b().call(E):null;D=()=>Promise.resolve(V)}catch(k){D=()=>Promise.reject(k)}Gn.set(E.auth._key(),D)}return D()})()}onAuthEvent(b){var E=()=>super.onAuthEvent,D=this;return(0,f.Z)(function*(){if("signInViaRedirect"===b.type)return E().call(D,b);if("unknown"!==b.type){if(b.eventId){const k=yield D.auth._redirectUserForId(b.eventId);if(k)return D.user=k,E().call(D,b);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function El(){return(El=(0,f.Z)(function*(I,b){const E=wl(b),D="true"===(yield zc(I)._get(E));return yield zc(I)._remove(E),D})).apply(this,arguments)}function cp(I,b){return up.apply(this,arguments)}function up(){return(up=(0,f.Z)(function*(I,b){return zc(I)._set(wl(b),"true")})).apply(this,arguments)}function Qs(){Gn.clear()}function zc(I){return ve(I._redirectPersistence)}function wl(I){return ie("pendingRedirect",I.config.apiKey,I.name)}function Cl(I,b,E){return function(I,b,E){return Il.apply(this,arguments)}(I,b,E)}function Il(){return(Il=(0,f.Z)(function*(I,b,E){const D=dn(I);Bt(I,b,zs);const k=Os(D,E);return yield cp(k,D),k._openRedirect(D,b,"signInViaRedirect")})).apply(this,arguments)}function DI(I,b,E){return function(I,b,E){return Wc.apply(this,arguments)}(I,b,E)}function Wc(){return(Wc=(0,f.Z)(function*(I,b,E){const D=(0,$.m9)(I);Bt(D.auth,b,zs);const k=Os(D.auth,E);yield cp(k,D.auth);const V=yield Sa(D);return k._openRedirect(D.auth,b,"reauthViaRedirect",V)})).apply(this,arguments)}function Sl(I,b,E){return function(I,b,E){return Rd.apply(this,arguments)}(I,b,E)}function Rd(){return(Rd=(0,f.Z)(function*(I,b,E){const D=(0,$.m9)(I);Bt(D.auth,b,zs);const k=Os(D.auth,E);yield Nc(!1,D,b.providerId),yield cp(k,D.auth);const V=yield Sa(D);return k._openRedirect(D.auth,b,"linkViaRedirect",V)})).apply(this,arguments)}function hb(I,b){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,f.Z)(function*(I,b){return yield dn(I)._initializationPromise,zm(I,b,!1)})).apply(this,arguments)}function zm(I,b){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,f.Z)(function*(I,b,E=!1){const D=dn(I),k=Os(D,b),ae=yield new bl(D,k,E).execute();return ae&&!E&&(delete ae.user._redirectEventId,yield D._persistUserIfCurrent(ae.user),yield D._setRedirectUser(null,b)),ae})).apply(this,arguments)}function Sa(I){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,f.Z)(function*(I){const b=gi(`${I.uid}:::`);return I._redirectEventId=b,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),b})).apply(this,arguments)}class fn{constructor(b){this.auth=b,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(b){this.consumers.add(b),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,b)&&(this.sendToConsumer(this.queuedRedirectEvent,b),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(b){this.consumers.delete(b)}onEvent(b){if(this.hasEventBeenHandled(b))return!1;let E=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(b,D)&&(E=!0,this.sendToConsumer(b,D),this.saveEventToCache(b))}),this.hasHandledPotentialRedirect||!function(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nd(I);default:return!1}}(b)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=b,E=!0)),E}sendToConsumer(b,E){var D;if(b.error&&!Nd(b)){const k=(null===(D=b.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";E.onError(It(this.auth,k))}else E.onAuthEvent(b)}isEventForConsumer(b,E){const D=null===E.eventId||!!b.eventId&&b.eventId===E.eventId;return E.filter.includes(b.type)&&D}hasEventBeenHandled(b){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kd(b))}saveEventToCache(b){this.cachedEventUids.add(kd(b)),this.lastProcessedEventTime=Date.now()}}function kd(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(b=>b).join("-")}function Nd({type:I,error:b}){return"unknown"===I&&"auth/no-auth-event"===(null==b?void 0:b.code)}function Tl(I){return hp.apply(this,arguments)}function hp(){return(hp=(0,f.Z)(function*(I,b={}){return mn(I,"GET","/v1/projects",b)})).apply(this,arguments)}const _s=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fp=/^https?/;function Js(){return(Js=(0,f.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:b}=yield Tl(I);for(const E of b)try{if(Bo(E))return}catch(D){}Qe(I,"unauthorized-domain")})).apply(this,arguments)}function Bo(I){const b=ne(),{protocol:E,hostname:D}=new URL(b);if(I.startsWith("chrome-extension://")){const ae=new URL(I);return""===ae.hostname&&""===D?"chrome-extension:"===E&&I.replace("chrome-extension://","")===b.replace("chrome-extension://",""):"chrome-extension:"===E&&ae.hostname===D}if(!fp.test(E))return!1;if(_s.test(I))return D===I;const k=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(D)}const Qn=new Je(3e4,6e4);function br(){const I=Kn().___jsl;if(null==I?void 0:I.H)for(const b of Object.keys(I.H))if(I.H[b].r=I.H[b].r||[],I.H[b].L=I.H[b].L||[],I.H[b].r=[...I.H[b].L],I.CP)for(let E=0;E<I.CP.length;E++)I.CP[E]=null}let Zc=null;function Od(I){return Zc=Zc||function(I){return new Promise((b,E)=>{var D,k,V;function ae(){br(),gapi.load("gapi.iframes",{callback:()=>{b(gapi.iframes.getContext())},ontimeout:()=>{br(),E(It(I,"network-request-failed"))},timeout:Qn.get()})}if(null===(k=null===(D=Kn().gapi)||void 0===D?void 0:D.iframes)||void 0===k?void 0:k.Iframe)b(gapi.iframes.getContext());else{if(!(null===(V=Kn().gapi)||void 0===V?void 0:V.load)){const ke=rp("iframefcb");return Kn()[ke]=()=>{gapi.load?ae():E(It(I,"network-request-failed"))},Oo(`https://apis.google.com/js/api.js?onload=${ke}`)}ae()}}).catch(b=>{throw Zc=null,b})}(I),Zc}const Qc=new Je(5e3,15e3),mb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Da=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dl(I){const b=I.config;De(b.authDomain,I,"auth-domain-config-required");const E=b.emulator?yt(b,"emulator/auth/iframe"):`https://${I.config.authDomain}/__/auth/iframe`,D={apiKey:b.apiKey,appName:I.name,v:j.SDK_VERSION},k=Da.get(I.config.apiHost);k&&(D.eid=k);const V=I._getFrameworks();return V.length&&(D.fw=V.join(",")),`${E}?${(0,$.xO)(D).slice(1)}`}function Uo(){return(Uo=(0,f.Z)(function*(I){const b=yield Od(I),E=Kn().gapi;return De(E,I,"internal-error"),b.open({where:document.body,url:Dl(I),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mb,dontclear:!0},D=>new Promise(function(){var k=(0,f.Z)(function*(V,ae){yield D.restyle({setHideOnLeave:!1});const ke=It(I,"network-request-failed"),Ke=Kn().setTimeout(()=>{ae(ke)},Qc.get());function mt(){Kn().clearTimeout(Ke),V(D)}D.ping(mt).then(mt,()=>{ae(ke)})});return function(V,ae){return k.apply(this,arguments)}}()))})).apply(this,arguments)}const jt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fd{constructor(b){this.window=b,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(b){}}}function Ld(I,b,E,D,k,V){De(I.config.authDomain,I,"auth-domain-config-required"),De(I.config.apiKey,I,"invalid-api-key");const ae={apiKey:I.config.apiKey,appName:I.name,authType:E,redirectUrl:D,v:j.SDK_VERSION,eventId:k};if(b instanceof zs){b.setDefaultLanguage(I.languageCode),ae.providerId=b.providerId||"",(0,$.xb)(b.getCustomParameters())||(ae.customParameters=JSON.stringify(b.getCustomParameters()));for(const[Ke,mt]of Object.entries(V||{}))ae[Ke]=mt}if(b instanceof xo){const Ke=b.getScopes().filter(mt=>""!==mt);Ke.length>0&&(ae.scopes=Ke.join(","))}I.tenantId&&(ae.tid=I.tenantId);const ke=ae;for(const Ke of Object.keys(ke))void 0===ke[Ke]&&delete ke[Ke];return`${function({config:I}){return I.emulator?yt(I,"emulator/auth/handler"):`https://${I.authDomain}/__/auth/handler`}(I)}?${(0,$.xO)(ke).slice(1)}`}const Al="webStorageSupport",xl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cb,this._completeRedirectFn=zm}_openPopup(b,E,D,k){var V=this;return(0,f.Z)(function*(){var ae;ue(null===(ae=V.eventManagers[b._key()])||void 0===ae?void 0:ae.manager,"_initialize() not called before _openPopup()");const ke=Ld(b,E,D,ne(),k);return function(I,b,E,D=500,k=600){const V=Math.max((window.screen.availHeight-k)/2,0).toString(),ae=Math.max((window.screen.availWidth-D)/2,0).toString();let ke="";const Ke=Object.assign(Object.assign({},jt),{width:D.toString(),height:k.toString(),top:V,left:ae}),mt=(0,$.z$)().toLowerCase();E&&(ke=bt(mt)?"_blank":E),Ae(mt)&&(b=b||"http://localhost",Ke.scrollbars="yes");const Tt=Object.entries(Ke).reduce((eo,[ys,to])=>`${eo}${ys}=${to},`,"");if(function(I=(0,$.z$)()){var b;return yn(I)&&!!(null===(b=window.navigator)||void 0===b?void 0:b.standalone)}(mt)&&"_self"!==ke)return function(I,b){const E=document.createElement("a");E.href=I,E.target=b;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(D)}(b||"",ke),new Fd(null);const Fn=window.open(b||"",ke,Tt);De(Fn,I,"popup-blocked");try{Fn.focus()}catch(eo){}return new Fd(Fn)}(b,ke,gi())})()}_openRedirect(b,E,D,k){var V=this;return(0,f.Z)(function*(){return yield V._originValidation(b),I=Ld(b,E,D,ne(),k),Kn().location.href=I,new Promise(()=>{});var I})()}_initialize(b){const E=b._key();if(this.eventManagers[E]){const{manager:k,promise:V}=this.eventManagers[E];return k?Promise.resolve(k):(ue(V,"If manager is not set, promise should be"),V)}const D=this.initAndGetManager(b);return this.eventManagers[E]={promise:D},D}initAndGetManager(b){var E=this;return(0,f.Z)(function*(){const D=yield function(I){return Uo.apply(this,arguments)}(b),k=new fn(b);return D.register("authEvent",V=>(De(null==V?void 0:V.authEvent,b,"invalid-auth-event"),{status:k.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[b._key()]={manager:k},E.iframes[b._key()]=D,k})()}_isIframeWebStorageSupported(b,E){this.iframes[b._key()].send(Al,{type:Al},k=>{var V;const ae=null===(V=null==k?void 0:k[0])||void 0===V?void 0:V[Al];void 0!==ae&&E(!!ae),Qe(b,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(b){const E=b._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function(I){return Js.apply(this,arguments)}(b)),this.originValidationPromises[E]}get _shouldInitProactively(){return Xr()||Ue()||yn()}};class nu extends class{constructor(b){this.factorId=b}_process(b,E,D){switch(E.type){case"enroll":return this._finalizeEnroll(b,E.credential,D);case"signin":return this._finalizeSignIn(b,E.credential);default:return Yt("unexpected MultiFactorSessionType")}}}{constructor(b){super("phone"),this.credential=b}static _fromCredential(b){return new nu(b)}_finalizeEnroll(b,E,D){return function(I,b){return mn(I,"POST","/v2/accounts/mfaEnrollment:finalize",ht(I,b))}(b,{idToken:E,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(b,E){return function(I,b){return mn(I,"POST","/v2/accounts/mfaSignIn:finalize",ht(I,b))}(b,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xa=(()=>{class I{constructor(){}static assertion(E){return nu._fromCredential(E)}}return I.FACTOR_ID="phone",I})();var I;class Vd{constructor(b){this.auth=b,this.internalListeners=new Map}getUid(){var b;return this.assertAuthConfigured(),(null===(b=this.auth.currentUser)||void 0===b?void 0:b.uid)||null}getToken(b){var E=this;return(0,f.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(b)}:null})()}addAuthTokenListener(b){if(this.assertAuthConfigured(),this.internalListeners.has(b))return;const E=this.auth.onIdTokenChanged(D=>{var k;b((null===(k=D)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(b,E),this.updateProactiveRefresh()}removeAuthTokenListener(b){this.assertAuthConfigured();const E=this.internalListeners.get(b);!E||(this.internalListeners.delete(b),E(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}I="Browser",(0,j._registerComponent)(new X.wA("auth",(b,{options:E})=>{const D=b.getProvider("app").getImmediate(),{apiKey:k,authDomain:V}=D.options;return(ae=>{De(k&&!k.includes(":"),"invalid-api-key",{appName:ae.name}),De(!(null==V?void 0:V.includes(":")),"argument-error",{appName:ae.name});const ke={apiKey:k,authDomain:V,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ot(I)},Ke=new vn(ae,ke);return function(I,b){const E=(null==b?void 0:b.persistence)||[],D=(Array.isArray(E)?E:[E]).map(ve);(null==b?void 0:b.errorMap)&&I._updateErrorMap(b.errorMap),I._initializeWithPersistence(D,null==b?void 0:b.popupRedirectResolver)}(Ke,E),Ke})(D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((b,E,D)=>{b.getProvider("auth-internal").initialize()})),(0,j._registerComponent)(new X.wA("auth-internal",b=>{const E=dn(b.getProvider("auth").getImmediate());return new Vd(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,j.registerVersion)("@firebase/auth","0.18.2",void 0)},6034:(Ye,Ie,B)=>{"use strict";B.d(Ie,{wA:()=>j,H0:()=>ee,zt:()=>ye});var f=B(4762),$=B(3854),j=function(){function W(L,G,H){this.name=L,this.instanceFactory=G,this.type=H,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return W.prototype.setInstantiationMode=function(L){return this.instantiationMode=L,this},W.prototype.setMultipleInstances=function(L){return this.multipleInstances=L,this},W.prototype.setServiceProps=function(L){return this.serviceProps=L,this},W.prototype.setInstanceCreatedCallback=function(L){return this.onInstanceCreated=L,this},W}(),he="[DEFAULT]",ye=function(){function W(L,G){this.name=L,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return W.prototype.get=function(L){var G=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(G)){var H=new $.BH;if(this.instancesDeferred.set(G,H),this.isInitialized(G)||this.shouldAutoInitialize())try{var re=this.getOrInitializeService({instanceIdentifier:G});re&&H.resolve(re)}catch(le){}}return this.instancesDeferred.get(G).promise},W.prototype.getImmediate=function(L){var G,H=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),re=null!==(G=null==L?void 0:L.optional)&&void 0!==G&&G;if(!this.isInitialized(H)&&!this.shouldAutoInitialize()){if(re)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:H})}catch(le){if(re)return null;throw le}},W.prototype.getComponent=function(){return this.component},W.prototype.setComponent=function(L){var G,H;if(L.name!==this.name)throw Error("Mismatching Component "+L.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=L,this.shouldAutoInitialize()){if(function(W){return"EAGER"===W.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:he})}catch(Qe){}try{for(var re=(0,f.XA)(this.instancesDeferred.entries()),le=re.next();!le.done;le=re.next()){var be=(0,f.CR)(le.value,2),xe=be[1],we=this.normalizeInstanceIdentifier(be[0]);try{var Pe=this.getOrInitializeService({instanceIdentifier:we});xe.resolve(Pe)}catch(Qe){}}}catch(Qe){G={error:Qe}}finally{try{le&&!le.done&&(H=re.return)&&H.call(re)}finally{if(G)throw G.error}}}},W.prototype.clearInstance=function(L){void 0===L&&(L=he),this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)},W.prototype.delete=function(){return(0,f.mG)(this,void 0,void 0,function(){var L;return(0,f.Jh)(this,function(G){switch(G.label){case 0:return L=Array.from(this.instances.values()),[4,Promise.all((0,f.ev)((0,f.ev)([],(0,f.CR)(L.filter(function(H){return"INTERNAL"in H}).map(function(H){return H.INTERNAL.delete()}))),(0,f.CR)(L.filter(function(H){return"_delete"in H}).map(function(H){return H._delete()}))))];case 1:return G.sent(),[2]}})})},W.prototype.isComponentSet=function(){return null!=this.component},W.prototype.isInitialized=function(L){return void 0===L&&(L=he),this.instances.has(L)},W.prototype.getOptions=function(L){return void 0===L&&(L=he),this.instancesOptions.get(L)||{}},W.prototype.initialize=function(L){var G,H;void 0===L&&(L={});var re=L.options,le=void 0===re?{}:re,be=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(be))throw Error(this.name+"("+be+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var de=this.getOrInitializeService({instanceIdentifier:be,options:le});try{for(var xe=(0,f.XA)(this.instancesDeferred.entries()),we=xe.next();!we.done;we=xe.next()){var Pe=(0,f.CR)(we.value,2),It=Pe[1];be===this.normalizeInstanceIdentifier(Pe[0])&&It.resolve(de)}}catch(Bt){G={error:Bt}}finally{try{we&&!we.done&&(H=xe.return)&&H.call(xe)}finally{if(G)throw G.error}}return de},W.prototype.onInit=function(L,G){var H,re=this.normalizeInstanceIdentifier(G),le=null!==(H=this.onInitCallbacks.get(re))&&void 0!==H?H:new Set;le.add(L),this.onInitCallbacks.set(re,le);var be=this.instances.get(re);return be&&L(be,re),function(){le.delete(L)}},W.prototype.invokeOnInitCallbacks=function(L,G){var H,re,le=this.onInitCallbacks.get(G);if(le)try{for(var be=(0,f.XA)(le),de=be.next();!de.done;de=be.next()){var xe=de.value;try{xe(L,G)}catch(we){}}}catch(we){H={error:we}}finally{try{de&&!de.done&&(re=be.return)&&re.call(be)}finally{if(H)throw H.error}}},W.prototype.getOrInitializeService=function(L){var G=L.instanceIdentifier,H=L.options,re=void 0===H?{}:H,le=this.instances.get(G);if(!le&&this.component&&(le=this.component.instanceFactory(this.container,{instanceIdentifier:X(G),options:re}),this.instances.set(G,le),this.instancesOptions.set(G,re),this.invokeOnInitCallbacks(le,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,le)}catch(be){}return le||null},W.prototype.normalizeInstanceIdentifier=function(L){return void 0===L&&(L=he),this.component?this.component.multipleInstances?L:he:L},W.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},W}();function X(W){return W===he?void 0:W}var ee=function(){function W(L){this.name=L,this.providers=new Map}return W.prototype.addComponent=function(L){var G=this.getProvider(L.name);if(G.isComponentSet())throw new Error("Component "+L.name+" has already been registered with "+this.name);G.setComponent(L)},W.prototype.addOrOverwriteComponent=function(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)},W.prototype.getProvider=function(L){if(this.providers.has(L))return this.providers.get(L);var G=new ye(L,this);return this.providers.set(L,G),G},W.prototype.getProviders=function(){return Array.from(this.providers.values())},W}()},5601:(Ye,Ie,B)=>{"use strict";B.d(Ie,{in:()=>$,Yd:()=>se,Ub:()=>ee,Am:()=>W});const f=[];var $=(()=>{return(L=$||($={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",$;var L})();const j={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},he=$.INFO,ye={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},X=(L,G,...H)=>{if(G<L.logLevel)return;const re=(new Date).toISOString(),le=ye[G];if(!le)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[le](`[${re}]  ${L.name}:`,...H)};class se{constructor(G){this.name=G,this._logLevel=he,this._logHandler=X,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in $))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?j[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...G),this._logHandler(this,$.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...G),this._logHandler(this,$.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,$.INFO,...G),this._logHandler(this,$.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,$.WARN,...G),this._logHandler(this,$.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...G),this._logHandler(this,$.ERROR,...G)}}function ee(L){f.forEach(G=>{G.setLogLevel(L)})}function W(L,G){for(const H of f){let re=null;G&&G.level&&(re=j[G.level]),H.userLogHandler=null===L?null:(le,be,...de)=>{const xe=de.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(Pe){return null}}).filter(we=>we).join(" ");be>=(null!=re?re:le.logLevel)&&L({level:$[be].toLowerCase(),message:xe,args:de,type:le.name})}}}},3854:(Ye,Ie,B)=>{"use strict";B.d(Ie,{BH:()=>re,LL:()=>ne,ZR:()=>ge,gQ:()=>Qr,hu:()=>$,g5:()=>j,US:()=>X,tV:()=>W,h$:()=>se,r3:()=>ht,Sg:()=>le,ne:()=>Hs,p$:()=>L,vZ:()=>hi,ZB:()=>G,gK:()=>lt,pd:()=>Zi,m9:()=>Io,z$:()=>be,GJ:()=>Kr,jU:()=>we,ru:()=>Pe,d:()=>It,xb:()=>Cn,w1:()=>Wt,hl:()=>Yt,uI:()=>de,UG:()=>xe,Yr:()=>Ut,b$:()=>Qe,G6:()=>De,Mn:()=>Bt,w9:()=>Ki,cI:()=>At,UI:()=>gr,xO:()=>wo,zd:()=>Rs,DV:()=>mn,ug:()=>en,dS:()=>ir,Pz:()=>at,Dv:()=>xr,Wj:()=>Lt,lb:()=>Nt});const $=function(Y,q){if(!Y)throw j(q)},j=function(Y){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Y)},he=function(Y){const q=[];let Q=0;for(let Te=0;Te<Y.length;Te++){let ce=Y.charCodeAt(Te);ce<128?q[Q++]=ce:ce<2048?(q[Q++]=ce>>6|192,q[Q++]=63&ce|128):55296==(64512&ce)&&Te+1<Y.length&&56320==(64512&Y.charCodeAt(Te+1))?(ce=65536+((1023&ce)<<10)+(1023&Y.charCodeAt(++Te)),q[Q++]=ce>>18|240,q[Q++]=ce>>12&63|128,q[Q++]=ce>>6&63|128,q[Q++]=63&ce|128):(q[Q++]=ce>>12|224,q[Q++]=ce>>6&63|128,q[Q++]=63&ce|128)}return q},X={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,q){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let ce=0;ce<Y.length;ce+=3){const ze=Y[ce],ut=ce+1<Y.length,kt=ut?Y[ce+1]:0,_n=ce+2<Y.length,mr=_n?Y[ce+2]:0;let K=(15&kt)<<2|mr>>6,Z=63&mr;_n||(Z=64,ut||(K=64)),Te.push(Q[ze>>2],Q[(3&ze)<<4|kt>>4],Q[K],Q[Z])}return Te.join("")},encodeString(Y,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(Y):this.encodeByteArray(he(Y),q)},decodeString(Y,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(Y):function(Y){const q=[];let Q=0,Te=0;for(;Q<Y.length;){const ce=Y[Q++];if(ce<128)q[Te++]=String.fromCharCode(ce);else if(ce>191&&ce<224){const ze=Y[Q++];q[Te++]=String.fromCharCode((31&ce)<<6|63&ze)}else if(ce>239&&ce<365){const _n=((7&ce)<<18|(63&Y[Q++])<<12|(63&Y[Q++])<<6|63&Y[Q++])-65536;q[Te++]=String.fromCharCode(55296+(_n>>10)),q[Te++]=String.fromCharCode(56320+(1023&_n))}else{const ze=Y[Q++],ut=Y[Q++];q[Te++]=String.fromCharCode((15&ce)<<12|(63&ze)<<6|63&ut)}}return q.join("")}(this.decodeStringToByteArray(Y,q))},decodeStringToByteArray(Y,q){this.init_();const Q=q?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let ce=0;ce<Y.length;){const ze=Q[Y.charAt(ce++)],kt=ce<Y.length?Q[Y.charAt(ce)]:0;++ce;const mr=ce<Y.length?Q[Y.charAt(ce)]:64;++ce;const ie=ce<Y.length?Q[Y.charAt(ce)]:64;if(++ce,null==ze||null==kt||null==mr||null==ie)throw Error();Te.push(ze<<2|kt>>4),64!==mr&&(Te.push(kt<<4&240|mr>>2),64!==ie&&Te.push(mr<<6&192|ie))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},se=function(Y){const q=he(Y);return X.encodeByteArray(q,!0)},ee=function(Y){return se(Y).replace(/\./g,"")},W=function(Y){try{return X.decodeString(Y,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function L(Y){return G(void 0,Y)}function G(Y,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return q}for(const Q in q)!q.hasOwnProperty(Q)||!H(Q)||(Y[Q]=G(Y[Q],q[Q]));return Y}function H(Y){return"__proto__"!==Y}class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,Q)=>{this.resolve=q,this.reject=Q})}wrapCallback(q){return(Q,Te)=>{Q?this.reject(Q):this.resolve(Te),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(Q):q(Q,Te))}}}function le(Y,q){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=q||"demo-project",ce=Y.iat||0,ze=Y.sub||Y.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:ce,exp:ce+3600,auth_time:ce,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[ee(JSON.stringify({alg:"none",type:"JWT"})),ee(JSON.stringify(ut)),""].join(".")}function be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function xe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Y){return!1}}function we(){return"object"==typeof self&&self.self===self}function Pe(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function Qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function It(){return be().indexOf("Electron/")>=0}function Wt(){const Y=be();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function Bt(){return be().indexOf("MSAppHost/")>=0}function Ut(){return!1}function De(){return!xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yt(){return"object"==typeof indexedDB}class ge extends Error{constructor(q,Q,Te){super(Q),this.code=q,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ne.prototype.create)}}class ne{constructor(q,Q,Te){this.service=q,this.serviceName=Q,this.errors=Te}create(q,...Q){const Te=Q[0]||{},ce=`${this.service}/${q}`,ze=this.errors[q],ut=ze?function(Y,q){return Y.replace(et,(Q,Te)=>{const ce=q[Te];return null!=ce?String(ce):`<${Te}?>`})}(ze,Te):"Error";return new ge(ce,`${this.serviceName}: ${ut} (${ce}).`,Te)}}const et=/\{\$([^}]+)}/g;function At(Y){return JSON.parse(Y)}function at(Y){return JSON.stringify(Y)}const Je=function(Y){let q={},Q={},Te={},ce="";try{const ze=Y.split(".");q=At(W(ze[0])||""),Q=At(W(ze[1])||""),ce=ze[2],Te=Q.d||{},delete Q.d}catch(ze){}return{header:q,claims:Q,data:Te,signature:ce}},Ki=function(Y){const Q=Je(Y).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Kr=function(Y){const q=Je(Y).claims;return"object"==typeof q&&!0===q.admin};function ht(Y,q){return Object.prototype.hasOwnProperty.call(Y,q)}function mn(Y,q){if(Object.prototype.hasOwnProperty.call(Y,q))return Y[q]}function Cn(Y){for(const q in Y)if(Object.prototype.hasOwnProperty.call(Y,q))return!1;return!0}function gr(Y,q,Q){const Te={};for(const ce in Y)Object.prototype.hasOwnProperty.call(Y,ce)&&(Te[ce]=q.call(Q,Y[ce],ce,Y));return Te}function hi(Y,q){if(Y===q)return!0;const Q=Object.keys(Y),Te=Object.keys(q);for(const ce of Q){if(!Te.includes(ce))return!1;const ze=Y[ce],ut=q[ce];if(Zr(ze)&&Zr(ut)){if(!hi(ze,ut))return!1}else if(ze!==ut)return!1}for(const ce of Te)if(!Q.includes(ce))return!1;return!0}function Zr(Y){return null!==Y&&"object"==typeof Y}function wo(Y){const q=[];for(const[Q,Te]of Object.entries(Y))Array.isArray(Te)?Te.forEach(ce=>{q.push(encodeURIComponent(Q)+"="+encodeURIComponent(ce))}):q.push(encodeURIComponent(Q)+"="+encodeURIComponent(Te));return q.length?"&"+q.join("&"):""}function Rs(Y){const q={};return Y.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[ce,ze]=Te.split("=");q[decodeURIComponent(ce)]=decodeURIComponent(ze)}}),q}function Zi(Y){const q=Y.indexOf("?");if(!q)return"";const Q=Y.indexOf("#",q);return Y.substring(q,Q>0?Q:void 0)}class Qr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,Q){Q||(Q=0);const Te=this.W_;if("string"==typeof q)for(let ie=0;ie<16;ie++)Te[ie]=q.charCodeAt(Q)<<24|q.charCodeAt(Q+1)<<16|q.charCodeAt(Q+2)<<8|q.charCodeAt(Q+3),Q+=4;else for(let ie=0;ie<16;ie++)Te[ie]=q[Q]<<24|q[Q+1]<<16|q[Q+2]<<8|q[Q+3],Q+=4;for(let ie=16;ie<80;ie++){const K=Te[ie-3]^Te[ie-8]^Te[ie-14]^Te[ie-16];Te[ie]=4294967295&(K<<1|K>>>31)}let mr,sr,ce=this.chain_[0],ze=this.chain_[1],ut=this.chain_[2],kt=this.chain_[3],_n=this.chain_[4];for(let ie=0;ie<80;ie++){ie<40?ie<20?(mr=kt^ze&(ut^kt),sr=1518500249):(mr=ze^ut^kt,sr=1859775393):ie<60?(mr=ze&ut|kt&(ze|ut),sr=2400959708):(mr=ze^ut^kt,sr=3395469782);const K=(ce<<5|ce>>>27)+mr+_n+sr+Te[ie]&4294967295;_n=kt,kt=ut,ut=4294967295&(ze<<30|ze>>>2),ze=ce,ce=K}this.chain_[0]=this.chain_[0]+ce&4294967295,this.chain_[1]=this.chain_[1]+ze&4294967295,this.chain_[2]=this.chain_[2]+ut&4294967295,this.chain_[3]=this.chain_[3]+kt&4294967295,this.chain_[4]=this.chain_[4]+_n&4294967295}update(q,Q){if(null==q)return;void 0===Q&&(Q=q.length);const Te=Q-this.blockSize;let ce=0;const ze=this.buf_;let ut=this.inbuf_;for(;ce<Q;){if(0===ut)for(;ce<=Te;)this.compress_(q,ce),ce+=this.blockSize;if("string"==typeof q){for(;ce<Q;)if(ze[ut]=q.charCodeAt(ce),++ut,++ce,ut===this.blockSize){this.compress_(ze),ut=0;break}}else for(;ce<Q;)if(ze[ut]=q[ce],++ut,++ce,ut===this.blockSize){this.compress_(ze),ut=0;break}}this.inbuf_=ut,this.total_+=Q}digest(){const q=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ce=this.blockSize-1;ce>=56;ce--)this.buf_[ce]=255&Q,Q/=256;this.compress_(this.buf_);let Te=0;for(let ce=0;ce<5;ce++)for(let ze=24;ze>=0;ze-=8)q[Te]=this.chain_[ce]>>ze&255,++Te;return q}}function Hs(Y,q){const Q=new ds(Y,q);return Q.subscribe.bind(Q)}class ds{constructor(q,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{q(this)}).catch(Te=>{this.error(Te)})}next(q){this.forEachObserver(Q=>{Q.next(q)})}error(q){this.forEachObserver(Q=>{Q.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,Q,Te){let ce;if(void 0===q&&void 0===Q&&void 0===Te)throw new Error("Missing Observer.");ce=function(Y,q){if("object"!=typeof Y||null===Y)return!1;for(const Q of["next","error","complete"])if(Q in Y&&"function"==typeof Y[Q])return!0;return!1}(q)?q:{next:q,error:Q,complete:Te},void 0===ce.next&&(ce.next=Jr),void 0===ce.error&&(ce.error=Jr),void 0===ce.complete&&(ce.complete=Jr);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ce.error(this.finalError):ce.complete()}catch(ut){}}),this.observers.push(ce),ze}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,q)}sendOne(q,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{Q(this.observers[q])}catch(Te){"undefined"!=typeof console&&console.error&&console.error(Te)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jr(){}const xr=function(Y,q,Q,Te){let ce;if(Te<q?ce="at least "+q:Te>Q&&(ce=0===Q?"none":"no more than "+Q),ce)throw new Error(Y+" failed: Was called with "+Te+(1===Te?" argument.":" arguments.")+" Expects "+ce+".")};function lt(Y,q){return`${Y} failed: ${q} argument `}function Lt(Y,q,Q,Te){if((!Te||Q)&&"function"!=typeof Q)throw new Error(lt(Y,q)+"must be a valid function.")}function Nt(Y,q,Q,Te){if((!Te||Q)&&("object"!=typeof Q||null===Q))throw new Error(lt(Y,q)+"must be a valid context object.")}const ir=function(Y){const q=[];let Q=0;for(let Te=0;Te<Y.length;Te++){let ce=Y.charCodeAt(Te);if(ce>=55296&&ce<=56319){const ze=ce-55296;Te++,$(Te<Y.length,"Surrogate pair missing trail surrogate."),ce=65536+(ze<<10)+(Y.charCodeAt(Te)-56320)}ce<128?q[Q++]=ce:ce<2048?(q[Q++]=ce>>6|192,q[Q++]=63&ce|128):ce<65536?(q[Q++]=ce>>12|224,q[Q++]=ce>>6&63|128,q[Q++]=63&ce|128):(q[Q++]=ce>>18|240,q[Q++]=ce>>12&63|128,q[Q++]=ce>>6&63|128,q[Q++]=63&ce|128)}return q},en=function(Y){let q=0;for(let Q=0;Q<Y.length;Q++){const Te=Y.charCodeAt(Q);Te<128?q++:Te<2048?q+=2:Te>=55296&&Te<=56319?(q+=4,Q++):q+=3}return q};function Io(Y){return Y&&Y._delegate?Y._delegate:Y}},7841:(Ye,Ie,B)=>{"use strict";B.d(Ie,{Z:()=>f.Z});var f=B(4486);f.Z.registerVersion("firebase","9.1.2","app-compat")},4828:(Ye,Ie,B)=>{"use strict";B.r(Ie);var f=B(8239),$=B(4486),j=B(1093),he=B(3854),se=(B(5452),B(5601),B(6034));function ee(){return window}function G(){return(G=(0,f.Z)(function*(ie,K,Z){var Ae;const{BuildInfo:Ue}=ee();(0,j.ap)(K.sessionId,"AuthEvent did not contain a session ID");const bt=yield we(K.sessionId),Ht={};return(0,j.aq)()?Ht.ibi=Ue.packageName:(0,j.ar)()?Ht.apn=Ue.packageName:(0,j.as)(ie,"operation-not-supported-in-this-environment"),Ue.displayName&&(Ht.appDisplayName=Ue.displayName),Ht.sessionId=bt,(0,j.at)(ie,Z,K.type,void 0,null!==(Ae=K.eventId)&&void 0!==Ae?Ae:void 0,Ht)})).apply(this,arguments)}function re(){return(re=(0,f.Z)(function*(ie){const{BuildInfo:K}=ee(),Z={};(0,j.aq)()?Z.iosBundleId=K.packageName:(0,j.ar)()?Z.androidPackageName=K.packageName:(0,j.as)(ie,"operation-not-supported-in-this-environment"),yield(0,j.au)(ie,Z)})).apply(this,arguments)}function de(){return(de=(0,f.Z)(function*(ie,K,Z){const{cordova:Ae}=ee();let Ue=()=>{};try{yield new Promise((bt,Ht)=>{let $t=null;function Wn(){var xt;bt();const jn=null===(xt=Ae.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof jn&&jn(),"function"==typeof(null==Z?void 0:Z.close)&&Z.close()}function ln(){$t||($t=window.setTimeout(()=>{Ht((0,j.av)(ie,"redirect-cancelled-by-user"))},2e3))}function yn(){"visible"===(null==document?void 0:document.visibilityState)&&ln()}K.addPassiveListener(Wn),document.addEventListener("resume",ln,!1),(0,j.ar)()&&document.addEventListener("visibilitychange",yn,!1),Ue=()=>{K.removePassiveListener(Wn),document.removeEventListener("resume",ln,!1),document.removeEventListener("visibilitychange",yn,!1),$t&&window.clearTimeout($t)}})}finally{Ue()}})).apply(this,arguments)}function we(ie){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,f.Z)(function*(ie){const K=Qe(ie),Z=yield crypto.subtle.digest("SHA-256",K);return Array.from(new Uint8Array(Z)).map(Ue=>Ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Qe(ie){if((0,j.ap)(/[0-9a-zA-Z]+/.test(ie),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ie);const K=new ArrayBuffer(ie.length),Z=new Uint8Array(K);for(let Ae=0;Ae<ie.length;Ae++)Z[Ae]=ie.charCodeAt(Ae);return Z}class Wt extends j.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(K=>{this.resolveInialized=K})}addPassiveListener(K){this.passiveListeners.add(K)}removePassiveListener(K){this.passiveListeners.delete(K)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(K){return this.resolveInialized(),this.passiveListeners.forEach(Z=>Z(K)),super.onEvent(K)}initialized(){var K=this;return(0,f.Z)(function*(){yield K.initPromise})()}}function De(ie){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,f.Z)(function*(ie){const K=yield ve()._get(Ee(ie));return K&&(yield ve()._remove(Ee(ie))),K})).apply(this,arguments)}function me(){const ie=[],K="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Z=0;Z<20;Z++){const Ae=Math.floor(Math.random()*K.length);ie.push(K.charAt(Ae))}return ie.join("")}function ve(){return(0,j.ax)(j.b)}function Ee(ie){return(0,j.ay)("authEvent",ie.config.apiKey,ie.name)}function Le(ie){if(!(null==ie?void 0:ie.includes("?")))return{};const[K,...Z]=ie.split("?");return(0,he.zd)(Z.join("?"))}function Je(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,j.av)("no-auth-event")}}function ht(){var ie;return(null===(ie=null==self?void 0:self.location)||void 0===ie?void 0:ie.protocol)||null}function Cn(ie=(0,he.z$)()){return!("file:"!==ht()&&"ionic:"!==ht()||!ie.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rs(){try{const ie=self.localStorage,K=j.aG();if(ie)return ie.setItem(K,"1"),ie.removeItem(K),!function(ie=(0,he.z$)()){return(0,he.w1)()&&11===(null==document?void 0:document.documentMode)||function(ie=(0,he.z$)()){return/Edge\/\d+/.test(ie)}(ie)}()||(0,he.hl)()}catch(ie){return Zi()&&(0,he.hl)()}return!1}function Zi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qr(){return("http:"===ht()||"https:"===ht()||(0,he.ru)()||Cn())&&!((0,he.b$)()||(0,he.UG)())&&Rs()&&!Zi()}function Hs(){return Cn()&&"undefined"!=typeof document}function tt(){return(tt=(0,f.Z)(function*(){return!!Hs()&&new Promise(ie=>{const K=setTimeout(()=>{ie(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(K),ie(!0)})})})).apply(this,arguments)}const Kt={LOCAL:"local",NONE:"none",SESSION:"session"},Jr=j.aw,xr="persistence";function ft(ie){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,f.Z)(function*(ie){yield ie._initializationPromise;const K=ir(),Z=j.ay(xr,ie.config.apiKey,ie.name);(null==K?void 0:K.sessionStorage)&&K.sessionStorage.setItem(Z,ie._getPersistence())})).apply(this,arguments)}function ir(){return"undefined"!=typeof window?window:null}const en=j.aw;class Ve{constructor(){this.browserResolver=j.ax(j.k),this.cordovaResolver=j.ax(class{constructor(){this._redirectPersistence=j.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=j.aA}_initialize(K){var Z=this;return(0,f.Z)(function*(){const Ae=K._key();let Ue=Z.eventManagers.get(Ae);return Ue||(Ue=new Wt(K),Z.eventManagers.set(Ae,Ue),Z.attachCallbackListeners(K,Ue)),Ue})()}_openPopup(K){(0,j.as)(K,"operation-not-supported-in-this-environment")}_openRedirect(K,Z,Ae,Ue){var bt=this;return(0,f.Z)(function*(){!function(ie){var K,Z,Ae,Ue,bt,Ht,$t,Wn,ln,yn;const xt=ee();(0,j.aw)("function"==typeof(null===(K=null==xt?void 0:xt.universalLinks)||void 0===K?void 0:K.subscribe),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,j.aw)(void 0!==(null===(Z=null==xt?void 0:xt.BuildInfo)||void 0===Z?void 0:Z.packageName),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,j.aw)("function"==typeof(null===(bt=null===(Ue=null===(Ae=null==xt?void 0:xt.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===Ue?void 0:Ue.browsertab)||void 0===bt?void 0:bt.openUrl),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.aw)("function"==typeof(null===(Wn=null===($t=null===(Ht=null==xt?void 0:xt.cordova)||void 0===Ht?void 0:Ht.plugins)||void 0===$t?void 0:$t.browsertab)||void 0===Wn?void 0:Wn.isAvailable),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.aw)("function"==typeof(null===(yn=null===(ln=null==xt?void 0:xt.cordova)||void 0===ln?void 0:ln.InAppBrowser)||void 0===yn?void 0:yn.open),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(K);const Ht=yield bt._initialize(K);yield Ht.initialized(),Ht.resetRedirect(),(0,j.aB)(),yield bt._originValidation(K);const $t=function(ie,K,Z=null){return{type:K,eventId:Z,urlResponse:null,sessionId:me(),postBody:null,tenantId:ie.tenantId,error:(0,j.av)(ie,"no-auth-event")}}(K,Ae,Ue);yield function(ie,K){return ve()._set(Ee(ie),K)}(K,$t);const Wn=yield function(ie,K,Z){return G.apply(this,arguments)}(K,$t,Z),ln=yield function(ie){const{cordova:K}=ee();return new Promise(Z=>{K.plugins.browsertab.isAvailable(Ae=>{let Ue=null;Ae?K.plugins.browsertab.openUrl(ie):Ue=K.InAppBrowser.open(ie,(0,j.ao)()?"_blank":"_system","location=yes"),Z(Ue)})})}(Wn);return function(ie,K,Z){return de.apply(this,arguments)}(K,Ht,ln)})()}_isIframeWebStorageSupported(K,Z){throw new Error("Method not implemented.")}_originValidation(K){const Z=K._key();return this.originValidationPromises[Z]||(this.originValidationPromises[Z]=function(ie){return re.apply(this,arguments)}(K)),this.originValidationPromises[Z]}attachCallbackListeners(K,Z){const{universalLinks:Ae,handleOpenURL:Ue,BuildInfo:bt}=ee(),Ht=setTimeout((0,f.Z)(function*(){yield De(K),Z.onEvent(Je())}),500),$t=function(){var yn=(0,f.Z)(function*(xt){clearTimeout(Ht);const jn=yield De(K);let sd=null;jn&&(null==xt?void 0:xt.url)&&(sd=function(ie,K){var Z,Ae;const Ue=function(ie){const K=Le(ie),Z=K.link?decodeURIComponent(K.link):void 0,Ae=Le(Z).link,Ue=K.deep_link_id?decodeURIComponent(K.deep_link_id):void 0;return Le(Ue).link||Ue||Ae||Z||ie}(K);if(Ue.includes("/__/auth/callback")){const bt=Le(Ue),Ht=bt.firebaseError?function(ie){try{return JSON.parse(ie)}catch(K){return null}}(decodeURIComponent(bt.firebaseError)):null,$t=null===(Ae=null===(Z=null==Ht?void 0:Ht.code)||void 0===Z?void 0:Z.split("auth/"))||void 0===Ae?void 0:Ae[1],Wn=$t?(0,j.av)($t):null;return Wn?{type:ie.type,eventId:ie.eventId,tenantId:ie.tenantId,error:Wn,urlResponse:null,sessionId:null,postBody:null}:{type:ie.type,eventId:ie.eventId,tenantId:ie.tenantId,sessionId:ie.sessionId,urlResponse:Ue,postBody:null}}return null}(jn,xt.url)),Z.onEvent(sd||Je())});return function(jn){return yn.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,$t);const Wn=Ue,ln=`${bt.packageName.toLowerCase()}://`;ee().handleOpenURL=function(){var yn=(0,f.Z)(function*(xt){if(xt.toLowerCase().startsWith(ln)&&$t({url:xt}),"function"==typeof Wn)try{Wn(xt)}catch(jn){console.error(jn)}});return function(xt){return yn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=j.a,this._completeRedirectFn=j.aA}_initialize(K){var Z=this;return(0,f.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._initialize(K)})()}_openPopup(K,Z,Ae,Ue){var bt=this;return(0,f.Z)(function*(){return yield bt.selectUnderlyingResolver(),bt.assertedUnderlyingResolver._openPopup(K,Z,Ae,Ue)})()}_openRedirect(K,Z,Ae,Ue){var bt=this;return(0,f.Z)(function*(){return yield bt.selectUnderlyingResolver(),bt.assertedUnderlyingResolver._openRedirect(K,Z,Ae,Ue)})()}_isIframeWebStorageSupported(K,Z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(K,Z)}_originValidation(K){return this.assertedUnderlyingResolver._originValidation(K)}get _shouldInitProactively(){return Hs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return en(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var K=this;return(0,f.Z)(function*(){if(K.underlyingResolver)return;const Z=yield function(){return tt.apply(this,arguments)}();K.underlyingResolver=Z?K.cordovaResolver:K.browserResolver})()}}function Xe(ie){return ie.unwrap()}function Co(ie){return rn(ie)}function rn(ie){const{_tokenResponse:K}=ie instanceof he.ZR?ie.customData:ie;if(!K)return null;if(!(ie instanceof he.ZR)&&"temporaryProof"in K&&"phoneNumber"in K)return j.P.credentialFromResult(ie);const Z=K.providerId;if(!Z||Z===j.o.PASSWORD)return null;let Ae;switch(Z){case j.o.GOOGLE:Ae=j.N;break;case j.o.FACEBOOK:Ae=j.M;break;case j.o.GITHUB:Ae=j.Q;break;case j.o.TWITTER:Ae=j.V;break;default:const{oauthIdToken:Ue,oauthAccessToken:bt,oauthTokenSecret:Ht,pendingToken:$t,nonce:Wn}=K;return bt||Ht||Ue||$t?$t?Z.startsWith("saml.")?j.aJ._create(Z,$t):j.I._fromParams({providerId:Z,signInMethod:Z,pendingToken:$t,idToken:Ue,accessToken:bt}):new j.T(Z).credential({idToken:Ue,accessToken:bt,rawNonce:Wn}):null}return ie instanceof he.ZR?Ae.credentialFromError(ie):Ae.credentialFromResult(ie)}function nn(ie,K){return K.catch(Z=>{throw Z instanceof he.ZR&&function(ie,K){var Z;const Ae=null===(Z=K.customData)||void 0===Z?void 0:Z._tokenResponse;if("auth/multi-factor-auth-required"===K.code)K.resolver=new q(ie,j.am(ie,K));else if(Ae){const Ue=rn(K),bt=K;Ue&&(bt.credential=Ue,bt.tenantId=Ae.tenantId||void 0,bt.email=Ae.email||void 0,bt.phoneNumber=Ae.phoneNumber||void 0)}}(ie,Z),Z}).then(Z=>{const Ue=Z.user;return{operationType:Z.operationType,credential:Co(Z),additionalUserInfo:j.ak(Z),user:Q.getOrCreate(Ue)}})}function Io(ie,K){return Y.apply(this,arguments)}function Y(){return(Y=(0,f.Z)(function*(ie,K){const Z=yield K;return{verificationId:Z.verificationId,confirm:Ae=>nn(ie,Z.confirm(Ae))}})).apply(this,arguments)}class q{constructor(K,Z){this.resolver=Z,this.auth=K.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(K){return nn(Xe(this.auth),this.resolver.resolveSignIn(K))}}class Q{constructor(K){this._delegate=K,this.multiFactor=j.an(K)}static getOrCreate(K){return Q.USER_MAP.has(K)||Q.USER_MAP.set(K,new Q(K)),Q.USER_MAP.get(K)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(K){return this._delegate.getIdTokenResult(K)}getIdToken(K){return this._delegate.getIdToken(K)}linkAndRetrieveDataWithCredential(K){return this.linkWithCredential(K)}linkWithCredential(K){var Z=this;return(0,f.Z)(function*(){return nn(Z.auth,j.Y(Z._delegate,K))})()}linkWithPhoneNumber(K,Z){var Ae=this;return(0,f.Z)(function*(){return Io(Ae.auth,j.l(Ae._delegate,K,Z))})()}linkWithPopup(K){var Z=this;return(0,f.Z)(function*(){return nn(Z.auth,j.d(Z._delegate,K,Ve))})()}linkWithRedirect(K){var Z=this;return(0,f.Z)(function*(){return yield ft(j.aC(Z.auth)),j.g(Z._delegate,K,Ve)})()}reauthenticateAndRetrieveDataWithCredential(K){return this.reauthenticateWithCredential(K)}reauthenticateWithCredential(K){var Z=this;return(0,f.Z)(function*(){return nn(Z.auth,j.Z(Z._delegate,K))})()}reauthenticateWithPhoneNumber(K,Z){return Io(this.auth,j.r(this._delegate,K,Z))}reauthenticateWithPopup(K){return nn(this.auth,j.e(this._delegate,K,Ve))}reauthenticateWithRedirect(K){var Z=this;return(0,f.Z)(function*(){return yield ft(j.aC(Z.auth)),j.h(Z._delegate,K,Ve)})()}sendEmailVerification(K){return j.aa(this._delegate,K)}unlink(K){var Z=this;return(0,f.Z)(function*(){return yield j.aj(Z._delegate,K),Z})()}updateEmail(K){return j.af(this._delegate,K)}updatePassword(K){return j.ag(this._delegate,K)}updatePhoneNumber(K){return j.u(this._delegate,K)}updateProfile(K){return j.ae(this._delegate,K)}verifyBeforeUpdateEmail(K,Z){return j.ab(this._delegate,K,Z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Q.USER_MAP=new WeakMap;const Te=j.aw;let ce=(()=>{class ie{constructor(Z,Ae){if(this.app=Z,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ue}=Z.options;Te(Ue,"invalid-api-key",{appName:Z.name});let bt=[j.K];if("undefined"!=typeof window){bt=function(ie,K){const Z=ir();if(!(null==Z?void 0:Z.sessionStorage))return[];const Ae=j.ay(xr,ie,K);switch(Z.sessionStorage.getItem(Ae)){case Kt.NONE:return[j.K];case Kt.LOCAL:return[j.i,j.a];case Kt.SESSION:return[j.a];default:return[]}}(Ue,Z.name);for(const $t of[j.i,j.b,j.a])bt.includes($t)||bt.push($t)}Te(Ue,"invalid-api-key",{appName:Z.name});const Ht="undefined"!=typeof window?Ve:void 0;this._delegate=Ae.initialize({options:{persistence:bt,popupRedirectResolver:Ht}}),this._delegate._updateErrorMap(j.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Q.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Z){this._delegate.languageCode=Z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Z){this._delegate.tenantId=Z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Z,Ae){j.E(this._delegate,Z,Ae)}applyActionCode(Z){return j.a1(this._delegate,Z)}checkActionCode(Z){return j.a2(this._delegate,Z)}confirmPasswordReset(Z,Ae){return j.a0(this._delegate,Z,Ae)}createUserWithEmailAndPassword(Z,Ae){var Ue=this;return(0,f.Z)(function*(){return nn(Ue._delegate,j.a4(Ue._delegate,Z,Ae))})()}fetchProvidersForEmail(Z){return this.fetchSignInMethodsForEmail(Z)}fetchSignInMethodsForEmail(Z){return j.a9(this._delegate,Z)}isSignInWithEmailLink(Z){return j.a7(this._delegate,Z)}getRedirectResult(){var Z=this;return(0,f.Z)(function*(){Te(Qr(),Z._delegate,"operation-not-supported-in-this-environment");const Ae=yield j.j(Z._delegate,Ve);return Ae?nn(Z._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(Z){!function(ie,K){(0,j.aC)(ie)._logFramework(K)}(this._delegate,Z)}onAuthStateChanged(Z,Ae,Ue){const{next:bt,error:Ht,complete:$t}=ze(Z,Ae,Ue);return this._delegate.onAuthStateChanged(bt,Ht,$t)}onIdTokenChanged(Z,Ae,Ue){const{next:bt,error:Ht,complete:$t}=ze(Z,Ae,Ue);return this._delegate.onIdTokenChanged(bt,Ht,$t)}sendSignInLinkToEmail(Z,Ae){return j.a6(this._delegate,Z,Ae)}sendPasswordResetEmail(Z,Ae){return j.$(this._delegate,Z,Ae||void 0)}setPersistence(Z){var Ae=this;return(0,f.Z)(function*(){let Ue;switch(function(ie,K){Jr(Object.values(Kt).includes(K),ie,"invalid-persistence-type"),(0,he.b$)()?Jr(K!==Kt.SESSION,ie,"unsupported-persistence-type"):(0,he.UG)()?Jr(K===Kt.NONE,ie,"unsupported-persistence-type"):Zi()?Jr(K===Kt.NONE||K===Kt.LOCAL&&(0,he.hl)(),ie,"unsupported-persistence-type"):Jr(K===Kt.NONE||Rs(),ie,"unsupported-persistence-type")}(Ae._delegate,Z),Z){case Kt.SESSION:Ue=j.a;break;case Kt.LOCAL:Ue=(yield j.ax(j.i)._isAvailable())?j.i:j.b;break;case Kt.NONE:Ue=j.K;break;default:return j.as("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(Ue)})()}signInAndRetrieveDataWithCredential(Z){return this.signInWithCredential(Z)}signInAnonymously(){return nn(this._delegate,j.W(this._delegate))}signInWithCredential(Z){return nn(this._delegate,j.X(this._delegate,Z))}signInWithCustomToken(Z){return nn(this._delegate,j._(this._delegate,Z))}signInWithEmailAndPassword(Z,Ae){return nn(this._delegate,j.a5(this._delegate,Z,Ae))}signInWithEmailLink(Z,Ae){return nn(this._delegate,j.a8(this._delegate,Z,Ae))}signInWithPhoneNumber(Z,Ae){return Io(this._delegate,j.s(this._delegate,Z,Ae))}signInWithPopup(Z){var Ae=this;return(0,f.Z)(function*(){return Te(Qr(),Ae._delegate,"operation-not-supported-in-this-environment"),nn(Ae._delegate,j.c(Ae._delegate,Z,Ve))})()}signInWithRedirect(Z){var Ae=this;return(0,f.Z)(function*(){return Te(Qr(),Ae._delegate,"operation-not-supported-in-this-environment"),yield ft(Ae._delegate),j.f(Ae._delegate,Z,Ve)})()}updateCurrentUser(Z){return this._delegate.updateCurrentUser(Z)}verifyPasswordResetCode(Z){return j.a3(this._delegate,Z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ie.Persistence=Kt,ie})();function ze(ie,K,Z){let Ae=ie;"function"!=typeof ie&&({next:Ae,error:K,complete:Z}=ie);const Ue=Ae;return{next:Ht=>Ue(Ht&&Q.getOrCreate(Ht)),error:K,complete:Z}}class ut{constructor(){this.providerId="phone",this._delegate=new j.P(Xe($.Z.auth()))}static credential(K,Z){return j.P.credential(K,Z)}verifyPhoneNumber(K,Z){return this._delegate.verifyPhoneNumber(K,Z)}unwrap(){return this._delegate}}ut.PHONE_SIGN_IN_METHOD=j.P.PHONE_SIGN_IN_METHOD,ut.PROVIDER_ID=j.P.PROVIDER_ID;const kt=j.aw;var ie;(ie=$.Z).INTERNAL.registerComponent(new se.wA("auth-compat",K=>{const Z=K.getProvider("app-compat").getImmediate(),Ae=K.getProvider("auth");return new ce(Z,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:j.A.EMAIL_SIGNIN,PASSWORD_RESET:j.A.PASSWORD_RESET,RECOVER_EMAIL:j.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:j.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:j.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:j.A.VERIFY_EMAIL}},EmailAuthProvider:j.L,FacebookAuthProvider:j.M,GithubAuthProvider:j.Q,GoogleAuthProvider:j.N,OAuthProvider:j.T,PhoneAuthProvider:ut,PhoneMultiFactorGenerator:j.m,RecaptchaVerifier:class{constructor(K,Z,Ae=$.Z.app()){var Ue;kt(null===(Ue=Ae.options)||void 0===Ue?void 0:Ue.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new j.R(K,Z,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:j.V,Auth:ce,AuthCredential:j.G,Error:he.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ie.registerVersion("@firebase/auth-compat","0.1.5")},7574:(Ye,Ie,B)=>{"use strict";B.d(Ie,{y:()=>G});var f=B(7393),j=B(9181),he=B(6490),X=B(6554),se=B(4487);var L=B(2494);let G=(()=>{class re{constructor(be){this._isScalar=!1,be&&(this._subscribe=be)}lift(be){const de=new re;return de.source=this,de.operator=be,de}subscribe(be,de,xe){const{operator:we}=this,Pe=function(re,le,be){if(re){if(re instanceof f.L)return re;if(re[j.b])return re[j.b]()}return re||le||be?new f.L(re,le,be):new f.L(he.c)}(be,de,xe);if(Pe.add(we?we.call(Pe,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!Pe.syncErrorThrowable?this._subscribe(Pe):this._trySubscribe(Pe)),L.v.useDeprecatedSynchronousErrorHandling&&Pe.syncErrorThrowable&&(Pe.syncErrorThrowable=!1,Pe.syncErrorThrown))throw Pe.syncErrorValue;return Pe}_trySubscribe(be){try{return this._subscribe(be)}catch(de){L.v.useDeprecatedSynchronousErrorHandling&&(be.syncErrorThrown=!0,be.syncErrorValue=de),function(re){for(;re;){const{closed:le,destination:be,isStopped:de}=re;if(le||de)return!1;re=be&&be instanceof f.L?be:null}return!0}(be)?be.error(de):console.warn(de)}}forEach(be,de){return new(de=H(de))((xe,we)=>{let Pe;Pe=this.subscribe(Qe=>{try{be(Qe)}catch(It){we(It),Pe&&Pe.unsubscribe()}},we,xe)})}_subscribe(be){const{source:de}=this;return de&&de.subscribe(be)}[X.L](){return this}pipe(...be){return 0===be.length?this:function(re){return 0===re.length?se.y:1===re.length?re[0]:function(be){return re.reduce((de,xe)=>xe(de),be)}}(be)(this)}toPromise(be){return new(be=H(be))((de,xe)=>{let we;this.subscribe(Pe=>we=Pe,Pe=>xe(Pe),()=>de(we))})}}return re.create=le=>new re(le),re})();function H(re){if(re||(re=L.v.Promise||Promise),!re)throw new Error("no Promise impl found");return re}},6490:(Ye,Ie,B)=>{"use strict";B.d(Ie,{c:()=>j});var f=B(2494),$=B(4449);const j={closed:!0,next(he){},error(he){if(f.v.useDeprecatedSynchronousErrorHandling)throw he;(0,$.z)(he)},complete(){}}},9765:(Ye,Ie,B)=>{"use strict";B.d(Ie,{Yc:()=>se,xQ:()=>ee});var f=B(7574),$=B(7393),j=B(5319),he=B(7971),ye=B(8858),X=B(9181);class se extends $.L{constructor(G){super(G),this.destination=G}}let ee=(()=>{class L extends f.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[X.b](){return new se(this)}lift(H){const re=new W(this,this);return re.operator=H,re}next(H){if(this.closed)throw new he.N;if(!this.isStopped){const{observers:re}=this,le=re.length,be=re.slice();for(let de=0;de<le;de++)be[de].next(H)}}error(H){if(this.closed)throw new he.N;this.hasError=!0,this.thrownError=H,this.isStopped=!0;const{observers:re}=this,le=re.length,be=re.slice();for(let de=0;de<le;de++)be[de].error(H);this.observers.length=0}complete(){if(this.closed)throw new he.N;this.isStopped=!0;const{observers:H}=this,re=H.length,le=H.slice();for(let be=0;be<re;be++)le[be].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(H){if(this.closed)throw new he.N;return super._trySubscribe(H)}_subscribe(H){if(this.closed)throw new he.N;return this.hasError?(H.error(this.thrownError),j.w.EMPTY):this.isStopped?(H.complete(),j.w.EMPTY):(this.observers.push(H),new ye.W(this,H))}asObservable(){const H=new f.y;return H.source=this,H}}return L.create=(G,H)=>new W(G,H),L})();class W extends ee{constructor(G,H){super(),this.destination=G,this.source=H}next(G){const{destination:H}=this;H&&H.next&&H.next(G)}error(G){const{destination:H}=this;H&&H.error&&this.destination.error(G)}complete(){const{destination:G}=this;G&&G.complete&&this.destination.complete()}_subscribe(G){const{source:H}=this;return H?this.source.subscribe(G):j.w.EMPTY}}},8858:(Ye,Ie,B)=>{"use strict";B.d(Ie,{W:()=>$});var f=B(5319);class $ extends f.w{constructor(he,ye){super(),this.subject=he,this.subscriber=ye,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const he=this.subject,ye=he.observers;if(this.subject=null,!ye||0===ye.length||he.isStopped||he.closed)return;const X=ye.indexOf(this.subscriber);-1!==X&&ye.splice(X,1)}}},7393:(Ye,Ie,B)=>{"use strict";B.d(Ie,{L:()=>se});var f=B(9105),$=B(6490),j=B(5319),he=B(9181),ye=B(2494),X=B(4449);class se extends j.w{constructor(L,G,H){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=$.c;break;case 1:if(!L){this.destination=$.c;break}if("object"==typeof L){L instanceof se?(this.syncErrorThrowable=L.syncErrorThrowable,this.destination=L,L.add(this)):(this.syncErrorThrowable=!0,this.destination=new ee(this,L));break}default:this.syncErrorThrowable=!0,this.destination=new ee(this,L,G,H)}}[he.b](){return this}static create(L,G,H){const re=new se(L,G,H);return re.syncErrorThrowable=!1,re}next(L){this.isStopped||this._next(L)}error(L){this.isStopped||(this.isStopped=!0,this._error(L))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(L){this.destination.next(L)}_error(L){this.destination.error(L),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:L}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=L,this}}class ee extends se{constructor(L,G,H,re){super(),this._parentSubscriber=L;let le,be=this;(0,f.m)(G)?le=G:G&&(le=G.next,H=G.error,re=G.complete,G!==$.c&&(be=Object.create(G),(0,f.m)(be.unsubscribe)&&this.add(be.unsubscribe.bind(be)),be.unsubscribe=this.unsubscribe.bind(this))),this._context=be,this._next=le,this._error=H,this._complete=re}next(L){if(!this.isStopped&&this._next){const{_parentSubscriber:G}=this;ye.v.useDeprecatedSynchronousErrorHandling&&G.syncErrorThrowable?this.__tryOrSetError(G,this._next,L)&&this.unsubscribe():this.__tryOrUnsub(this._next,L)}}error(L){if(!this.isStopped){const{_parentSubscriber:G}=this,{useDeprecatedSynchronousErrorHandling:H}=ye.v;if(this._error)H&&G.syncErrorThrowable?(this.__tryOrSetError(G,this._error,L),this.unsubscribe()):(this.__tryOrUnsub(this._error,L),this.unsubscribe());else if(G.syncErrorThrowable)H?(G.syncErrorValue=L,G.syncErrorThrown=!0):(0,X.z)(L),this.unsubscribe();else{if(this.unsubscribe(),H)throw L;(0,X.z)(L)}}}complete(){if(!this.isStopped){const{_parentSubscriber:L}=this;if(this._complete){const G=()=>this._complete.call(this._context);ye.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?(this.__tryOrSetError(L,G),this.unsubscribe()):(this.__tryOrUnsub(G),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(L,G){try{L.call(this._context,G)}catch(H){if(this.unsubscribe(),ye.v.useDeprecatedSynchronousErrorHandling)throw H;(0,X.z)(H)}}__tryOrSetError(L,G,H){if(!ye.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{G.call(this._context,H)}catch(re){return ye.v.useDeprecatedSynchronousErrorHandling?(L.syncErrorValue=re,L.syncErrorThrown=!0,!0):((0,X.z)(re),!0)}return!1}_unsubscribe(){const{_parentSubscriber:L}=this;this._context=null,this._parentSubscriber=null,L.unsubscribe()}}},5319:(Ye,Ie,B)=>{"use strict";B.d(Ie,{w:()=>X});var f=B(9796),$=B(1555),j=B(9105);const ye=(()=>{function ee(W){return Error.call(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((L,G)=>`${G+1}) ${L.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W,this}return ee.prototype=Object.create(Error.prototype),ee})();class X{constructor(W){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,W&&(this._ctorUnsubscribe=!0,this._unsubscribe=W)}unsubscribe(){let W;if(this.closed)return;let{_parentOrParents:L,_ctorUnsubscribe:G,_unsubscribe:H,_subscriptions:re}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,L instanceof X)L.remove(this);else if(null!==L)for(let le=0;le<L.length;++le)L[le].remove(this);if((0,j.m)(H)){G&&(this._unsubscribe=void 0);try{H.call(this)}catch(le){W=le instanceof ye?se(le.errors):[le]}}if((0,f.k)(re)){let le=-1,be=re.length;for(;++le<be;){const de=re[le];if((0,$.K)(de))try{de.unsubscribe()}catch(xe){W=W||[],xe instanceof ye?W=W.concat(se(xe.errors)):W.push(xe)}}}if(W)throw new ye(W)}add(W){let L=W;if(!W)return X.EMPTY;switch(typeof W){case"function":L=new X(W);case"object":if(L===this||L.closed||"function"!=typeof L.unsubscribe)return L;if(this.closed)return L.unsubscribe(),L;if(!(L instanceof X)){const re=L;L=new X,L._subscriptions=[re]}break;default:throw new Error("unrecognized teardown "+W+" added to Subscription.")}let{_parentOrParents:G}=L;if(null===G)L._parentOrParents=this;else if(G instanceof X){if(G===this)return L;L._parentOrParents=[G,this]}else{if(-1!==G.indexOf(this))return L;G.push(this)}const H=this._subscriptions;return null===H?this._subscriptions=[L]:H.push(L),L}remove(W){const L=this._subscriptions;if(L){const G=L.indexOf(W);-1!==G&&L.splice(G,1)}}}var ee;function se(ee){return ee.reduce((W,L)=>W.concat(L instanceof ye?L.errors:L),[])}X.EMPTY=((ee=new X).closed=!0,ee)},2494:(Ye,Ie,B)=>{"use strict";B.d(Ie,{v:()=>$});let f=!1;const $={Promise:void 0,set useDeprecatedSynchronousErrorHandling(j){if(j){const he=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+he.stack)}else f&&console.log("RxJS: Back to a better error behavior. Thank you. <3");f=j},get useDeprecatedSynchronousErrorHandling(){return f}}},5345:(Ye,Ie,B)=>{"use strict";B.d(Ie,{IY:()=>he,Ds:()=>X,ft:()=>ee});var f=B(7393),$=B(7574),j=B(7444);class he extends f.L{constructor(L){super(),this.parent=L}_next(L){this.parent.notifyNext(L)}_error(L){this.parent.notifyError(L),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class X extends f.L{notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.destination.complete()}}function ee(W,L){if(L.closed)return;if(W instanceof $.y)return W.subscribe(L);let G;try{G=(0,j.s)(W)(L)}catch(H){L.error(H)}return G}},2441:(Ye,Ie,B)=>{"use strict";B.d(Ie,{c:()=>ye,N:()=>X});var f=B(9765),$=B(7574),j=B(5319),he=B(1307);class ye extends $.y{constructor(G,H){super(),this.source=G,this.subjectFactory=H,this._refCount=0,this._isComplete=!1}_subscribe(G){return this.getSubject().subscribe(G)}getSubject(){const G=this._subject;return(!G||G.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let G=this._connection;return G||(this._isComplete=!1,G=this._connection=new j.w,G.add(this.source.subscribe(new se(this.getSubject(),this))),G.closed&&(this._connection=null,G=j.w.EMPTY)),G}refCount(){return(0,he.x)()(this)}}const X=(()=>{const L=ye.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:L._subscribe},_isComplete:{value:L._isComplete,writable:!0},getSubject:{value:L.getSubject},connect:{value:L.connect},refCount:{value:L.refCount}}})();class se extends f.Yc{constructor(G,H){super(G),this.connectable=H}_error(G){this._unsubscribe(),super._error(G)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const G=this.connectable;if(G){this.connectable=null;const H=G._connection;G._refCount=0,G._subject=null,G._connection=null,H&&H.unsubscribe()}}}},9193:(Ye,Ie,B)=>{"use strict";B.d(Ie,{E:()=>$,c:()=>j});var f=B(7574);const $=new f.y(ye=>ye.complete());function j(ye){return ye?function(ye){return new f.y(X=>ye.schedule(()=>X.complete()))}(ye):$}},4402:(Ye,Ie,B)=>{"use strict";B.d(Ie,{D:()=>be});var f=B(7574),$=B(7444),j=B(5319),he=B(6554),se=B(4087),ee=B(377),G=B(4072),H=B(9489);function be(de,xe){return xe?function(de,xe){if(null!=de){if(function(de){return de&&"function"==typeof de[he.L]}(de))return function(de,xe){return new f.y(we=>{const Pe=new j.w;return Pe.add(xe.schedule(()=>{const Qe=de[he.L]();Pe.add(Qe.subscribe({next(It){Pe.add(xe.schedule(()=>we.next(It)))},error(It){Pe.add(xe.schedule(()=>we.error(It)))},complete(){Pe.add(xe.schedule(()=>we.complete()))}}))})),Pe})}(de,xe);if((0,G.t)(de))return function(de,xe){return new f.y(we=>{const Pe=new j.w;return Pe.add(xe.schedule(()=>de.then(Qe=>{Pe.add(xe.schedule(()=>{we.next(Qe),Pe.add(xe.schedule(()=>we.complete()))}))},Qe=>{Pe.add(xe.schedule(()=>we.error(Qe)))}))),Pe})}(de,xe);if((0,H.z)(de))return(0,se.r)(de,xe);if(function(de){return de&&"function"==typeof de[ee.hZ]}(de)||"string"==typeof de)return function(de,xe){if(!de)throw new Error("Iterable cannot be null");return new f.y(we=>{const Pe=new j.w;let Qe;return Pe.add(()=>{Qe&&"function"==typeof Qe.return&&Qe.return()}),Pe.add(xe.schedule(()=>{Qe=de[ee.hZ](),Pe.add(xe.schedule(function(){if(we.closed)return;let It,Wt;try{const Bt=Qe.next();It=Bt.value,Wt=Bt.done}catch(Bt){return void we.error(Bt)}Wt?we.complete():(we.next(It),this.schedule())}))})),Pe})}(de,xe)}throw new TypeError((null!==de&&typeof de||de)+" is not observable")}(de,xe):de instanceof f.y?de:new f.y((0,$.s)(de))}},6693:(Ye,Ie,B)=>{"use strict";B.d(Ie,{n:()=>he});var f=B(7574),$=B(5015),j=B(4087);function he(ye,X){return X?(0,j.r)(ye,X):new f.y((0,$.V)(ye))}},6682:(Ye,Ie,B)=>{"use strict";B.d(Ie,{T:()=>ye});var f=B(7574),$=B(4869),j=B(3282),he=B(6693);function ye(...X){let se=Number.POSITIVE_INFINITY,ee=null,W=X[X.length-1];return(0,$.K)(W)?(ee=X.pop(),X.length>1&&"number"==typeof X[X.length-1]&&(se=X.pop())):"number"==typeof W&&(se=X.pop()),null===ee&&1===X.length&&X[0]instanceof f.y?X[0]:(0,j.J)(se)((0,he.n)(X,ee))}},5917:(Ye,Ie,B)=>{"use strict";B.d(Ie,{of:()=>he});var f=B(4869),$=B(6693),j=B(4087);function he(...ye){let X=ye[ye.length-1];return(0,f.K)(X)?(ye.pop(),(0,j.r)(ye,X)):(0,$.n)(ye)}},205:(Ye,Ie,B)=>{"use strict";B.d(Ie,{_:()=>$});var f=B(7574);function $(he,ye){return new f.y(ye?X=>ye.schedule(j,0,{error:he,subscriber:X}):X=>X.error(he))}function j({error:he,subscriber:ye}){ye.error(he)}},8002:(Ye,Ie,B)=>{"use strict";B.d(Ie,{U:()=>$});var f=B(7393);function $(ye,X){return function(ee){if("function"!=typeof ye)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ee.lift(new j(ye,X))}}class j{constructor(X,se){this.project=X,this.thisArg=se}call(X,se){return se.subscribe(new he(X,this.project,this.thisArg))}}class he extends f.L{constructor(X,se,ee){super(X),this.project=se,this.count=0,this.thisArg=ee||this}_next(X){let se;try{se=this.project.call(this.thisArg,X,this.count++)}catch(ee){return void this.destination.error(ee)}this.destination.next(se)}}},3282:(Ye,Ie,B)=>{"use strict";B.d(Ie,{J:()=>j});var f=B(9773),$=B(4487);function j(he=Number.POSITIVE_INFINITY){return(0,f.zg)($.y,he)}},9773:(Ye,Ie,B)=>{"use strict";B.d(Ie,{zg:()=>he});var f=B(8002),$=B(4402),j=B(5345);function he(ee,W,L=Number.POSITIVE_INFINITY){return"function"==typeof W?G=>G.pipe(he((H,re)=>(0,$.D)(ee(H,re)).pipe((0,f.U)((le,be)=>W(H,le,re,be))),L)):("number"==typeof W&&(L=W),G=>G.lift(new ye(ee,L)))}class ye{constructor(W,L=Number.POSITIVE_INFINITY){this.project=W,this.concurrent=L}call(W,L){return L.subscribe(new X(W,this.project,this.concurrent))}}class X extends j.Ds{constructor(W,L,G=Number.POSITIVE_INFINITY){super(W),this.project=L,this.concurrent=G,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(W){this.active<this.concurrent?this._tryNext(W):this.buffer.push(W)}_tryNext(W){let L;const G=this.index++;try{L=this.project(W,G)}catch(H){return void this.destination.error(H)}this.active++,this._innerSub(L)}_innerSub(W){const L=new j.IY(this),G=this.destination;G.add(L);const H=(0,j.ft)(W,L);H!==L&&G.add(H)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(W){this.destination.next(W)}notifyComplete(){const W=this.buffer;this.active--,W.length>0?this._next(W.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:(Ye,Ie,B)=>{"use strict";B.d(Ie,{ht:()=>W,QV:()=>se});var f=B(7393),$=B(9193),j=B(5917),he=B(205);class X{constructor(H,re,le){this.kind=H,this.value=re,this.error=le,this.hasValue="N"===H}observe(H){switch(this.kind){case"N":return H.next&&H.next(this.value);case"E":return H.error&&H.error(this.error);case"C":return H.complete&&H.complete()}}do(H,re,le){switch(this.kind){case"N":return H&&H(this.value);case"E":return re&&re(this.error);case"C":return le&&le()}}accept(H,re,le){return H&&"function"==typeof H.next?this.observe(H):this.do(H,re,le)}toObservable(){switch(this.kind){case"N":return(0,j.of)(this.value);case"E":return(0,he._)(this.error);case"C":return(0,$.c)()}throw new Error("unexpected notification kind value")}static createNext(H){return void 0!==H?new X("N",H):X.undefinedValueNotification}static createError(H){return new X("E",void 0,H)}static createComplete(){return X.completeNotification}}function se(G,H=0){return function(le){return le.lift(new ee(G,H))}}X.completeNotification=new X("C"),X.undefinedValueNotification=new X("N",void 0);class ee{constructor(H,re=0){this.scheduler=H,this.delay=re}call(H,re){return re.subscribe(new W(H,this.scheduler,this.delay))}}class W extends f.L{constructor(H,re,le=0){super(H),this.scheduler=re,this.delay=le}static dispatch(H){const{notification:re,destination:le}=H;re.observe(le),this.unsubscribe()}scheduleMessage(H){this.destination.add(this.scheduler.schedule(W.dispatch,this.delay,new L(H,this.destination)))}_next(H){this.scheduleMessage(X.createNext(H))}_error(H){this.scheduleMessage(X.createError(H)),this.unsubscribe()}_complete(){this.scheduleMessage(X.createComplete()),this.unsubscribe()}}class L{constructor(H,re){this.notification=H,this.destination=re}}},1307:(Ye,Ie,B)=>{"use strict";B.d(Ie,{x:()=>$});var f=B(7393);function $(){return function(X){return X.lift(new j(X))}}class j{constructor(X){this.connectable=X}call(X,se){const{connectable:ee}=this;ee._refCount++;const W=new he(X,ee),L=se.subscribe(W);return W.closed||(W.connection=ee.connect()),L}}class he extends f.L{constructor(X,se){super(X),this.connectable=se}_unsubscribe(){const{connectable:X}=this;if(!X)return void(this.connection=null);this.connectable=null;const se=X._refCount;if(se<=0)return void(this.connection=null);if(X._refCount=se-1,se>1)return void(this.connection=null);const{connection:ee}=this,W=X._connection;this.connection=null,W&&(!ee||W===ee)&&W.unsubscribe()}}},8819:(Ye,Ie,B)=>{"use strict";B.d(Ie,{B:()=>se});var f=B(2441);var he=B(1307),ye=B(9765);function X(){return new ye.xQ}function se(){return ee=>(0,he.x)()(function(ee,W){return function(G){let H;H="function"==typeof ee?ee:function(){return ee};const re=Object.create(G,f.N);return re.source=G,re.subjectFactory=H,re}}(X)(ee))}},9673:(Ye,Ie,B)=>{"use strict";B.d(Ie,{R:()=>ye});var f=B(7574),$=B(4581),j=B(6561);class he extends f.y{constructor(ee,W=0,L=$.e){super(),this.source=ee,this.delayTime=W,this.scheduler=L,(!(0,j.k)(W)||W<0)&&(this.delayTime=0),(!L||"function"!=typeof L.schedule)&&(this.scheduler=$.e)}static create(ee,W=0,L=$.e){return new he(ee,W,L)}static dispatch(ee){const{source:W,subscriber:L}=ee;return this.add(W.subscribe(L))}_subscribe(ee){return this.scheduler.schedule(he.dispatch,this.delayTime,{source:this.source,subscriber:ee})}}function ye(se,ee=0){return function(L){return L.lift(new X(se,ee))}}class X{constructor(ee,W){this.scheduler=ee,this.delay=W}call(ee,W){return new he(W,this.delay,this.scheduler).subscribe(ee)}}},3342:(Ye,Ie,B)=>{"use strict";B.d(Ie,{b:()=>he});var f=B(7393);function $(){}var j=B(9105);function he(se,ee,W){return function(G){return G.lift(new ye(se,ee,W))}}class ye{constructor(ee,W,L){this.nextOrObserver=ee,this.error=W,this.complete=L}call(ee,W){return W.subscribe(new X(ee,this.nextOrObserver,this.error,this.complete))}}class X extends f.L{constructor(ee,W,L,G){super(ee),this._tapNext=$,this._tapError=$,this._tapComplete=$,this._tapError=L||$,this._tapComplete=G||$,(0,j.m)(W)?(this._context=this,this._tapNext=W):W&&(this._context=W,this._tapNext=W.next||$,this._tapError=W.error||$,this._tapComplete=W.complete||$)}_next(ee){try{this._tapNext.call(this._context,ee)}catch(W){return void this.destination.error(W)}this.destination.next(ee)}_error(ee){try{this._tapError.call(this._context,ee)}catch(W){return void this.destination.error(W)}this.destination.error(ee)}_complete(){try{this._tapComplete.call(this._context)}catch(ee){return void this.destination.error(ee)}return this.destination.complete()}}},4087:(Ye,Ie,B)=>{"use strict";B.d(Ie,{r:()=>j});var f=B(7574),$=B(5319);function j(he,ye){return new f.y(X=>{const se=new $.w;let ee=0;return se.add(ye.schedule(function(){ee!==he.length?(X.next(he[ee++]),X.closed||se.add(this.schedule())):X.complete()})),se})}},6465:(Ye,Ie,B)=>{"use strict";B.d(Ie,{o:()=>j});var f=B(5319);class $ extends f.w{constructor(ye,X){super()}schedule(ye,X=0){return this}}class j extends ${constructor(ye,X){super(ye,X),this.scheduler=ye,this.work=X,this.pending=!1}schedule(ye,X=0){if(this.closed)return this;this.state=ye;const se=this.id,ee=this.scheduler;return null!=se&&(this.id=this.recycleAsyncId(ee,se,X)),this.pending=!0,this.delay=X,this.id=this.id||this.requestAsyncId(ee,this.id,X),this}requestAsyncId(ye,X,se=0){return setInterval(ye.flush.bind(ye,this),se)}recycleAsyncId(ye,X,se=0){if(null!==se&&this.delay===se&&!1===this.pending)return X;clearInterval(X)}execute(ye,X){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const se=this._execute(ye,X);if(se)return se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,X){let ee,se=!1;try{this.work(ye)}catch(W){se=!0,ee=!!W&&W||new Error(W)}if(se)return this.unsubscribe(),ee}_unsubscribe(){const ye=this.id,X=this.scheduler,se=X.actions,ee=se.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ee&&se.splice(ee,1),null!=ye&&(this.id=this.recycleAsyncId(X,ye,null)),this.delay=null}}},6102:(Ye,Ie,B)=>{"use strict";B.d(Ie,{v:()=>$});let f=(()=>{class j{constructor(ye,X=j.now){this.SchedulerAction=ye,this.now=X}schedule(ye,X=0,se){return new this.SchedulerAction(this,ye).schedule(se,X)}}return j.now=()=>Date.now(),j})();class $ extends f{constructor(he,ye=f.now){super(he,()=>$.delegate&&$.delegate!==this?$.delegate.now():ye()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(he,ye=0,X){return $.delegate&&$.delegate!==this?$.delegate.schedule(he,ye,X):super.schedule(he,ye,X)}flush(he){const{actions:ye}=this;if(this.active)return void ye.push(he);let X;this.active=!0;do{if(X=he.execute(he.state,he.delay))break}while(he=ye.shift());if(this.active=!1,X){for(;he=ye.shift();)he.unsubscribe();throw X}}}},4581:(Ye,Ie,B)=>{"use strict";B.d(Ie,{e:()=>H,E:()=>G});let f=1;const $=Promise.resolve(),j={};function he(re){return re in j&&(delete j[re],!0)}const ye={setImmediate(re){const le=f++;return j[le]=!0,$.then(()=>he(le)&&re()),le},clearImmediate(re){he(re)}};var se=B(6465),W=B(6102);const G=new class extends W.v{flush(le){this.active=!0,this.scheduled=void 0;const{actions:be}=this;let de,xe=-1,we=be.length;le=le||be.shift();do{if(de=le.execute(le.state,le.delay))break}while(++xe<we&&(le=be.shift()));if(this.active=!1,de){for(;++xe<we&&(le=be.shift());)le.unsubscribe();throw de}}}(class extends se.o{constructor(le,be){super(le,be),this.scheduler=le,this.work=be}requestAsyncId(le,be,de=0){return null!==de&&de>0?super.requestAsyncId(le,be,de):(le.actions.push(this),le.scheduled||(le.scheduled=ye.setImmediate(le.flush.bind(le,null))))}recycleAsyncId(le,be,de=0){if(null!==de&&de>0||null===de&&this.delay>0)return super.recycleAsyncId(le,be,de);0===le.actions.length&&(ye.clearImmediate(be),le.scheduled=void 0)}}),H=G},3637:(Ye,Ie,B)=>{"use strict";B.d(Ie,{z:()=>j,P:()=>he});var f=B(6465);const j=new(B(6102).v)(f.o),he=j},7771:(Ye,Ie,B)=>{"use strict";B.d(Ie,{c:()=>X,N:()=>ye});var f=B(6465),j=B(6102);const ye=new class extends j.v{}(class extends f.o{constructor(ee,W){super(ee,W),this.scheduler=ee,this.work=W}schedule(ee,W=0){return W>0?super.schedule(ee,W):(this.delay=W,this.state=ee,this.scheduler.flush(this),this)}execute(ee,W){return W>0||this.closed?super.execute(ee,W):this._execute(ee,W)}requestAsyncId(ee,W,L=0){return null!==L&&L>0||null===L&&this.delay>0?super.requestAsyncId(ee,W,L):ee.flush(this)}}),X=ye},377:(Ye,Ie,B)=>{"use strict";B.d(Ie,{hZ:()=>$});const $="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ye,Ie,B)=>{"use strict";B.d(Ie,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ye,Ie,B)=>{"use strict";B.d(Ie,{b:()=>f});const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ye,Ie,B)=>{"use strict";B.d(Ie,{N:()=>$});const $=(()=>{function j(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return j.prototype=Object.create(Error.prototype),j})()},4449:(Ye,Ie,B)=>{"use strict";function f($){setTimeout(()=>{throw $},0)}B.d(Ie,{z:()=>f})},4487:(Ye,Ie,B)=>{"use strict";function f($){return $}B.d(Ie,{y:()=>f})},9796:(Ye,Ie,B)=>{"use strict";B.d(Ie,{k:()=>f});const f=Array.isArray||($=>$&&"number"==typeof $.length)},9489:(Ye,Ie,B)=>{"use strict";B.d(Ie,{z:()=>f});const f=$=>$&&"number"==typeof $.length&&"function"!=typeof $},9105:(Ye,Ie,B)=>{"use strict";function f($){return"function"==typeof $}B.d(Ie,{m:()=>f})},6561:(Ye,Ie,B)=>{"use strict";B.d(Ie,{k:()=>$});var f=B(9796);function $(j){return!(0,f.k)(j)&&j-parseFloat(j)+1>=0}},1555:(Ye,Ie,B)=>{"use strict";function f($){return null!==$&&"object"==typeof $}B.d(Ie,{K:()=>f})},4072:(Ye,Ie,B)=>{"use strict";function f($){return!!$&&"function"!=typeof $.subscribe&&"function"==typeof $.then}B.d(Ie,{t:()=>f})},4869:(Ye,Ie,B)=>{"use strict";function f($){return $&&"function"==typeof $.schedule}B.d(Ie,{K:()=>f})},7444:(Ye,Ie,B)=>{"use strict";B.d(Ie,{s:()=>G});var f=B(5015),$=B(4449),he=B(377),X=B(6554),ee=B(9489),W=B(4072),L=B(1555);const G=H=>{if(H&&"function"==typeof H[X.L])return(H=>re=>{const le=H[X.L]();if("function"!=typeof le.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return le.subscribe(re)})(H);if((0,ee.z)(H))return(0,f.V)(H);if((0,W.t)(H))return(H=>re=>(H.then(le=>{re.closed||(re.next(le),re.complete())},le=>re.error(le)).then(null,$.z),re))(H);if(H&&"function"==typeof H[he.hZ])return(H=>re=>{const le=H[he.hZ]();for(;;){let be;try{be=le.next()}catch(de){return re.error(de),re}if(be.done){re.complete();break}if(re.next(be.value),re.closed)break}return"function"==typeof le.return&&re.add(()=>{le.return&&le.return()}),re})(H);{const le=`You provided ${(0,L.K)(H)?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(le)}}},5015:(Ye,Ie,B)=>{"use strict";B.d(Ie,{V:()=>f});const f=$=>j=>{for(let he=0,ye=$.length;he<ye&&!j.closed;he++)j.next($[he]);j.complete()}},1833:(Ye,Ie,B)=>{"use strict";var f=B(7716);let $=null;function j(){return $}const se=new f.OlP("DocumentToken");let ee=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,f.Yz7)({factory:W,token:i,providedIn:"platform"}),i})();function W(){return(0,f.LFG)(G)}const L=new f.OlP("Location Initialized");let G=(()=>{class i extends ee{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(r){const s=j().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",r,!1),()=>s.removeEventListener("popstate",r)}onHashChange(r){const s=j().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",r,!1),()=>s.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,s,o){H()?this._history.pushState(r,s,o):this.location.hash=o}replaceState(r,s,o){H()?this._history.replaceState(r,s,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(se))},i.\u0275prov=(0,f.Yz7)({factory:re,token:i,providedIn:"platform"}),i})();function H(){return!!window.history.pushState}function re(){return new G((0,f.LFG)(se))}function le(i,n){if(0==i.length)return n;if(0==n.length)return i;let r=0;return i.endsWith("/")&&r++,n.startsWith("/")&&r++,2==r?i+n.substring(1):1==r?i+n:i+"/"+n}function be(i){const n=i.match(/#|\?|$/),r=n&&n.index||i.length;return i.slice(0,r-("/"===i[r-1]?1:0))+i.slice(r)}function de(i){return i&&"?"!==i[0]?"?"+i:i}let xe=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,f.Yz7)({factory:we,token:i,providedIn:"root"}),i})();function we(i){const n=(0,f.LFG)(se).location;return new Qe((0,f.LFG)(ee),n&&n.origin||"")}const Pe=new f.OlP("appBaseHref");let Qe=(()=>{class i extends xe{constructor(r,s){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return le(this._baseHref,r)}path(r=!1){const s=this._platformLocation.pathname+de(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${s}${o}`:s}pushState(r,s,o,c){const h=this.prepareExternalUrl(o+de(c));this._platformLocation.pushState(r,s,h)}replaceState(r,s,o,c){const h=this.prepareExternalUrl(o+de(c));this._platformLocation.replaceState(r,s,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var s,o;null===(o=(s=this._platformLocation).historyGo)||void 0===o||o.call(s,r)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(ee),f.LFG(Pe,8))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})(),It=(()=>{class i extends xe{constructor(r,s){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(r){const s=le(this._baseHref,r);return s.length>0?"#"+s:s}pushState(r,s,o,c){let h=this.prepareExternalUrl(o+de(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(r,s,h)}replaceState(r,s,o,c){let h=this.prepareExternalUrl(o+de(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(r,s,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var s,o;null===(o=(s=this._platformLocation).historyGo)||void 0===o||o.call(s,r)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(ee),f.LFG(Pe,8))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})(),Wt=(()=>{class i{constructor(r,s){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=r;const o=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=be(De(o)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,s=""){return this.path()==this.normalize(r+de(s))}normalize(r){return i.stripTrailingSlash(function(i,n){return i&&n.startsWith(i)?n.substring(i.length):n}(this._baseHref,De(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,s="",o=null){this._platformStrategy.pushState(o,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+de(s)),o)}replaceState(r,s="",o=null){this._platformStrategy.replaceState(o,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+de(s)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var s,o;null===(o=(s=this._platformStrategy).historyGo)||void 0===o||o.call(s,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(r="",s){this._urlChangeListeners.forEach(o=>o(r,s))}subscribe(r,s,o){return this._subject.subscribe({next:r,error:s,complete:o})}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(xe),f.LFG(ee))},i.normalizeQueryParams=de,i.joinWithSlash=le,i.stripTrailingSlash=be,i.\u0275prov=(0,f.Yz7)({factory:Bt,token:i,providedIn:"root"}),i})();function Bt(){return new Wt((0,f.LFG)(xe),(0,f.LFG)(ee))}function De(i){return i.replace(/\/index.html$/,"")}var me=(()=>((me=me||{})[me.Zero=0]="Zero",me[me.One=1]="One",me[me.Two=2]="Two",me[me.Few=3]="Few",me[me.Many=4]="Many",me[me.Other=5]="Other",me))(),ve=(()=>((ve=ve||{})[ve.Format=0]="Format",ve[ve.Standalone=1]="Standalone",ve))(),Ee=(()=>((Ee=Ee||{})[Ee.Narrow=0]="Narrow",Ee[Ee.Abbreviated=1]="Abbreviated",Ee[Ee.Wide=2]="Wide",Ee[Ee.Short=3]="Short",Ee))(),ge=(()=>((ge=ge||{})[ge.Short=0]="Short",ge[ge.Medium=1]="Medium",ge[ge.Long=2]="Long",ge[ge.Full=3]="Full",ge))(),ne=(()=>((ne=ne||{})[ne.Decimal=0]="Decimal",ne[ne.Group=1]="Group",ne[ne.List=2]="List",ne[ne.PercentSign=3]="PercentSign",ne[ne.PlusSign=4]="PlusSign",ne[ne.MinusSign=5]="MinusSign",ne[ne.Exponential=6]="Exponential",ne[ne.SuperscriptingExponent=7]="SuperscriptingExponent",ne[ne.PerMille=8]="PerMille",ne[ne.Infinity=9]="Infinity",ne[ne.NaN=10]="NaN",ne[ne.TimeSeparator=11]="TimeSeparator",ne[ne.CurrencyDecimal=12]="CurrencyDecimal",ne[ne.CurrencyGroup=13]="CurrencyGroup",ne))();function Kr(i,n){return Kt((0,f.cg1)(i)[f.wAp.DateFormat],n)}function ht(i,n){return Kt((0,f.cg1)(i)[f.wAp.TimeFormat],n)}function mn(i,n){return Kt((0,f.cg1)(i)[f.wAp.DateTimeFormat],n)}function Cn(i,n){const r=(0,f.cg1)(i),s=r[f.wAp.NumberSymbols][n];if(void 0===s){if(n===ne.CurrencyDecimal)return r[f.wAp.NumberSymbols][ne.Decimal];if(n===ne.CurrencyGroup)return r[f.wAp.NumberSymbols][ne.Group]}return s}const Zi=f.kL8;function Qr(i){if(!i[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Kt(i,n){for(let r=n;r>-1;r--)if(void 0!==i[r])return i[r];throw new Error("Locale data API: locale data undefined")}function Jr(i){const[n,r]=i.split(":");return{hours:+n,minutes:+r}}const Lt=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Nt={},ir=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var en=(()=>((en=en||{})[en.Short=0]="Short",en[en.ShortGMT=1]="ShortGMT",en[en.Long=2]="Long",en[en.Extended=3]="Extended",en))(),Ve=(()=>((Ve=Ve||{})[Ve.FullYear=0]="FullYear",Ve[Ve.Month=1]="Month",Ve[Ve.Date=2]="Date",Ve[Ve.Hours=3]="Hours",Ve[Ve.Minutes=4]="Minutes",Ve[Ve.Seconds=5]="Seconds",Ve[Ve.FractionalSeconds=6]="FractionalSeconds",Ve[Ve.Day=7]="Day",Ve))(),Xe=(()=>((Xe=Xe||{})[Xe.DayPeriods=0]="DayPeriods",Xe[Xe.Days=1]="Days",Xe[Xe.Months=2]="Months",Xe[Xe.Eras=3]="Eras",Xe))();function fa(i,n,r,s){let o=function(i){if($t(i))return i;if("number"==typeof i&&!isNaN(i))return new Date(i);if("string"==typeof i){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){const[o,c=1,h=1]=i.split("-").map(m=>+m);return Co(o,c-1,h)}const r=parseFloat(i);if(!isNaN(i-r))return new Date(r);let s;if(s=i.match(Lt))return function(i){const n=new Date(0);let r=0,s=0;const o=i[8]?n.setUTCFullYear:n.setFullYear,c=i[8]?n.setUTCHours:n.setHours;i[9]&&(r=Number(i[9]+i[10]),s=Number(i[9]+i[11])),o.call(n,Number(i[1]),Number(i[2])-1,Number(i[3]));const h=Number(i[4]||0)-r,m=Number(i[5]||0)-s,y=Number(i[6]||0),C=Math.floor(1e3*parseFloat("0."+(i[7]||0)));return c.call(n,h,m,y,C),n}(s)}const n=new Date(i);if(!$t(n))throw new Error(`Unable to convert "${i}" into a date`);return n}(i);n=hs(r,n)||n;let m,h=[];for(;n;){if(m=ir.exec(n),!m){h.push(n);break}{h=h.concat(m.slice(1));const T=h.pop();if(!T)break;n=T}}let y=o.getTimezoneOffset();s&&(y=Z(s,y),o=function(i,n,r){const o=i.getTimezoneOffset();return function(i,n){return(i=new Date(i.getTime())).setMinutes(i.getMinutes()+n),i}(i,-1*(Z(n,o)-o))}(o,s));let C="";return h.forEach(T=>{const x=function(i){if(ie[i])return ie[i];let n;switch(i){case"G":case"GG":case"GGG":n=Q(Xe.Eras,Ee.Abbreviated);break;case"GGGG":n=Q(Xe.Eras,Ee.Wide);break;case"GGGGG":n=Q(Xe.Eras,Ee.Narrow);break;case"y":n=Y(Ve.FullYear,1,0,!1,!0);break;case"yy":n=Y(Ve.FullYear,2,0,!0,!0);break;case"yyy":n=Y(Ve.FullYear,3,0,!1,!0);break;case"yyyy":n=Y(Ve.FullYear,4,0,!1,!0);break;case"Y":n=sr(1);break;case"YY":n=sr(2,!0);break;case"YYY":n=sr(3);break;case"YYYY":n=sr(4);break;case"M":case"L":n=Y(Ve.Month,1,1);break;case"MM":case"LL":n=Y(Ve.Month,2,1);break;case"MMM":n=Q(Xe.Months,Ee.Abbreviated);break;case"MMMM":n=Q(Xe.Months,Ee.Wide);break;case"MMMMM":n=Q(Xe.Months,Ee.Narrow);break;case"LLL":n=Q(Xe.Months,Ee.Abbreviated,ve.Standalone);break;case"LLLL":n=Q(Xe.Months,Ee.Wide,ve.Standalone);break;case"LLLLL":n=Q(Xe.Months,Ee.Narrow,ve.Standalone);break;case"w":n=mr(1);break;case"ww":n=mr(2);break;case"W":n=mr(1,!0);break;case"d":n=Y(Ve.Date,1);break;case"dd":n=Y(Ve.Date,2);break;case"c":case"cc":n=Y(Ve.Day,1);break;case"ccc":n=Q(Xe.Days,Ee.Abbreviated,ve.Standalone);break;case"cccc":n=Q(Xe.Days,Ee.Wide,ve.Standalone);break;case"ccccc":n=Q(Xe.Days,Ee.Narrow,ve.Standalone);break;case"cccccc":n=Q(Xe.Days,Ee.Short,ve.Standalone);break;case"E":case"EE":case"EEE":n=Q(Xe.Days,Ee.Abbreviated);break;case"EEEE":n=Q(Xe.Days,Ee.Wide);break;case"EEEEE":n=Q(Xe.Days,Ee.Narrow);break;case"EEEEEE":n=Q(Xe.Days,Ee.Short);break;case"a":case"aa":case"aaa":n=Q(Xe.DayPeriods,Ee.Abbreviated);break;case"aaaa":n=Q(Xe.DayPeriods,Ee.Wide);break;case"aaaaa":n=Q(Xe.DayPeriods,Ee.Narrow);break;case"b":case"bb":case"bbb":n=Q(Xe.DayPeriods,Ee.Abbreviated,ve.Standalone,!0);break;case"bbbb":n=Q(Xe.DayPeriods,Ee.Wide,ve.Standalone,!0);break;case"bbbbb":n=Q(Xe.DayPeriods,Ee.Narrow,ve.Standalone,!0);break;case"B":case"BB":case"BBB":n=Q(Xe.DayPeriods,Ee.Abbreviated,ve.Format,!0);break;case"BBBB":n=Q(Xe.DayPeriods,Ee.Wide,ve.Format,!0);break;case"BBBBB":n=Q(Xe.DayPeriods,Ee.Narrow,ve.Format,!0);break;case"h":n=Y(Ve.Hours,1,-12);break;case"hh":n=Y(Ve.Hours,2,-12);break;case"H":n=Y(Ve.Hours,1);break;case"HH":n=Y(Ve.Hours,2);break;case"m":n=Y(Ve.Minutes,1);break;case"mm":n=Y(Ve.Minutes,2);break;case"s":n=Y(Ve.Seconds,1);break;case"ss":n=Y(Ve.Seconds,2);break;case"S":n=Y(Ve.FractionalSeconds,1);break;case"SS":n=Y(Ve.FractionalSeconds,2);break;case"SSS":n=Y(Ve.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=ce(en.Short);break;case"ZZZZZ":n=ce(en.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=ce(en.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=ce(en.Long);break;default:return null}return ie[i]=n,n}(T);C+=x?x(o,r,y):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),C}function Co(i,n,r){const s=new Date(0);return s.setFullYear(i,n,r),s.setHours(0,0,0),s}function hs(i,n){const r=function(i){return(0,f.cg1)(i)[f.wAp.LocaleId]}(i);if(Nt[r]=Nt[r]||{},Nt[r][n])return Nt[r][n];let s="";switch(n){case"shortDate":s=Kr(i,ge.Short);break;case"mediumDate":s=Kr(i,ge.Medium);break;case"longDate":s=Kr(i,ge.Long);break;case"fullDate":s=Kr(i,ge.Full);break;case"shortTime":s=ht(i,ge.Short);break;case"mediumTime":s=ht(i,ge.Medium);break;case"longTime":s=ht(i,ge.Long);break;case"fullTime":s=ht(i,ge.Full);break;case"short":const o=hs(i,"shortTime"),c=hs(i,"shortDate");s=rn(mn(i,ge.Short),[o,c]);break;case"medium":const h=hs(i,"mediumTime"),m=hs(i,"mediumDate");s=rn(mn(i,ge.Medium),[h,m]);break;case"long":const y=hs(i,"longTime"),C=hs(i,"longDate");s=rn(mn(i,ge.Long),[y,C]);break;case"full":const T=hs(i,"fullTime"),x=hs(i,"fullDate");s=rn(mn(i,ge.Full),[T,x])}return s&&(Nt[r][n]=s),s}function rn(i,n){return n&&(i=i.replace(/\{([^}]+)}/g,function(r,s){return null!=n&&s in n?n[s]:r})),i}function nn(i,n,r="-",s,o){let c="";(i<0||o&&i<=0)&&(o?i=1-i:(i=-i,c=r));let h=String(i);for(;h.length<n;)h="0"+h;return s&&(h=h.substr(h.length-n)),c+h}function Y(i,n,r=0,s=!1,o=!1){return function(c,h){let m=function(i,n){switch(i){case Ve.FullYear:return n.getFullYear();case Ve.Month:return n.getMonth();case Ve.Date:return n.getDate();case Ve.Hours:return n.getHours();case Ve.Minutes:return n.getMinutes();case Ve.Seconds:return n.getSeconds();case Ve.FractionalSeconds:return n.getMilliseconds();case Ve.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}(i,c);if((r>0||m>-r)&&(m+=r),i===Ve.Hours)0===m&&-12===r&&(m=12);else if(i===Ve.FractionalSeconds)return function(i,n){return nn(i,3).substr(0,n)}(m,n);const y=Cn(h,ne.MinusSign);return nn(m,n,y,s,o)}}function Q(i,n,r=ve.Format,s=!1){return function(o,c){return function(i,n,r,s,o,c){switch(r){case Xe.Months:return function(i,n,r){const s=(0,f.cg1)(i),c=Kt([s[f.wAp.MonthsFormat],s[f.wAp.MonthsStandalone]],n);return Kt(c,r)}(n,o,s)[i.getMonth()];case Xe.Days:return function(i,n,r){const s=(0,f.cg1)(i),c=Kt([s[f.wAp.DaysFormat],s[f.wAp.DaysStandalone]],n);return Kt(c,r)}(n,o,s)[i.getDay()];case Xe.DayPeriods:const h=i.getHours(),m=i.getMinutes();if(c){const C=function(i){const n=(0,f.cg1)(i);return Qr(n),(n[f.wAp.ExtraData][2]||[]).map(s=>"string"==typeof s?Jr(s):[Jr(s[0]),Jr(s[1])])}(n),T=function(i,n,r){const s=(0,f.cg1)(i);Qr(s);const c=Kt([s[f.wAp.ExtraData][0],s[f.wAp.ExtraData][1]],n)||[];return Kt(c,r)||[]}(n,o,s),x=C.findIndex(R=>{if(Array.isArray(R)){const[O,U]=R,te=h>=O.hours&&m>=O.minutes,pe=h<U.hours||h===U.hours&&m<U.minutes;if(O.hours<U.hours){if(te&&pe)return!0}else if(te||pe)return!0}else if(R.hours===h&&R.minutes===m)return!0;return!1});if(-1!==x)return T[x]}return function(i,n,r){const s=(0,f.cg1)(i),c=Kt([s[f.wAp.DayPeriodsFormat],s[f.wAp.DayPeriodsStandalone]],n);return Kt(c,r)}(n,o,s)[h<12?0:1];case Xe.Eras:return function(i,n){return Kt((0,f.cg1)(i)[f.wAp.Eras],n)}(n,s)[i.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${r}`)}}(o,c,i,n,r,s)}}function ce(i){return function(n,r,s){const o=-1*s,c=Cn(r,ne.MinusSign),h=o>0?Math.floor(o/60):Math.ceil(o/60);switch(i){case en.Short:return(o>=0?"+":"")+nn(h,2,c)+nn(Math.abs(o%60),2,c);case en.ShortGMT:return"GMT"+(o>=0?"+":"")+nn(h,1,c);case en.Long:return"GMT"+(o>=0?"+":"")+nn(h,2,c)+":"+nn(Math.abs(o%60),2,c);case en.Extended:return 0===s?"Z":(o>=0?"+":"")+nn(h,2,c)+":"+nn(Math.abs(o%60),2,c);default:throw new Error(`Unknown zone width "${i}"`)}}}function _n(i){return Co(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay()))}function mr(i,n=!1){return function(r,s){let o;if(n){const c=new Date(r.getFullYear(),r.getMonth(),1).getDay()-1,h=r.getDate();o=1+Math.floor((h+c)/7)}else{const c=_n(r),h=function(i){const n=Co(i,0,1).getDay();return Co(i,0,1+(n<=4?4:11)-n)}(c.getFullYear()),m=c.getTime()-h.getTime();o=1+Math.round(m/6048e5)}return nn(o,i,Cn(s,ne.MinusSign))}}function sr(i,n=!1){return function(r,s){return nn(_n(r).getFullYear(),i,Cn(s,ne.MinusSign),n)}}const ie={};function Z(i,n){i=i.replace(/:/g,"");const r=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(r)?n:r}function $t(i){return i instanceof Date&&!isNaN(i.valueOf())}class To{}let od=(()=>{class i extends To{constructor(r){super(),this.locale=r}getPluralCategory(r,s){switch(Zi(s||this.locale)(r)){case me.Zero:return"zero";case me.One:return"one";case me.Two:return"two";case me.Few:return"few";case me.Many:return"many";default:return"other"}}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(f.soG))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();class ki{constructor(n,r,s,o){this.$implicit=n,this.ngForOf=r,this.index=s,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sn=(()=>{class i{constructor(r,s,o){this._viewContainer=r,this._template=s,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(i){return i.name||typeof i}(r)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const s=[];r.forEachOperation((o,c,h)=>{if(null==o.previousIndex){const m=this._viewContainer.createEmbeddedView(this._template,new ki(null,this._ngForOf,-1,-1),null===h?void 0:h),y=new ad(o,m);s.push(y)}else if(null==h)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const m=this._viewContainer.get(c);this._viewContainer.move(m,h);const y=new ad(o,m);s.push(y)}});for(let o=0;o<s.length;o++)this._perViewChange(s[o].view,s[o].record);for(let o=0,c=this._viewContainer.length;o<c;o++){const h=this._viewContainer.get(o);h.context.index=o,h.context.count=c,h.context.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(r,s){r.context.$implicit=s.item}static ngTemplateContextGuard(r,s){return!0}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},i.\u0275dir=f.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();class ad{constructor(n,r){this.record=n,this.view=r}}let Ni=(()=>{class i{constructor(r,s){this._viewContainer=r,this._context=new Nf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Do("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Do("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,s){return!0}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.s_b),f.Y36(f.Rgc))},i.\u0275dir=f.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class Nf{constructor(){this.$implicit=null,this.ngIf=null}}function Do(i,n){if(n&&!n.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,f.AaK)(n)}'.`)}class ll{constructor(n,r){this._viewContainerRef=n,this._templateRef=r,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let Qi=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(r){this._ngSwitch=r,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(r){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(r)}_matchCase(r){const s=r==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||s,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),s}_updateDefaultCases(r){if(this._defaultViews&&r!==this._defaultUsed){this._defaultUsed=r;for(let s=0;s<this._defaultViews.length;s++)this._defaultViews[s].enforceState(r)}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),i})(),Mr=(()=>{class i{constructor(r,s,o){this.ngSwitch=o,o._addCase(),this._view=new ll(r,s)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(Qi,9))},i.\u0275dir=f.lG2({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),i})(),ma=(()=>{class i{constructor(r,s,o){this._ngEl=r,this._differs=s,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){const r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,s){const[o,c]=r.split(".");null!=(s=null!=s&&c?`${s}${c}`:s)?this._renderer.setStyle(this._ngEl.nativeElement,o,s):this._renderer.removeStyle(this._ngEl.nativeElement,o)}_applyChanges(r){r.forEachRemovedItem(s=>this._setStyle(s.key,null)),r.forEachAddedItem(s=>this._setStyle(s.key,s.currentValue)),r.forEachChangedItem(s=>this._setStyle(s.key,s.currentValue))}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.SBq),f.Y36(f.aQg),f.Y36(f.Qsj))},i.\u0275dir=f.lG2({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),i})();function Oi(i,n){return Error(`InvalidPipeArgument: '${n}' for pipe '${(0,f.AaK)(i)}'`)}class dI{createSubscription(n,r){return n.subscribe({next:r,error:s=>{throw s}})}dispose(n){n.unsubscribe()}onDestroy(n){n.unsubscribe()}}class Ns{createSubscription(n,r){return n.then(r,s=>{throw s})}dispose(n){}onDestroy(n){}}const qv=new Ns,mm=new dI;let Ff=(()=>{class i{constructor(r){this._ref=r,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(r){return this._obj?r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue:(r&&this._subscribe(r),this._latestValue)}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,s=>this._updateLatestValue(r,s))}_selectStrategy(r){if((0,f.QGY)(r))return qv;if((0,f.F4k)(r))return mm;throw Oi(i,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,s){r===this._obj&&(this._latestValue=s,this._ref.markForCheck())}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.sBO,16))},i.\u0275pipe=f.Yjl({name:"async",type:i,pure:!1}),i})(),vm=(()=>{class i{constructor(r){this.locale=r}transform(r,s="mediumDate",o,c){if(null==r||""===r||r!=r)return null;try{return fa(r,s,c||this.locale,o)}catch(h){throw Oi(i,h.message)}}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.soG,16))},i.\u0275pipe=f.Yjl({name:"date",type:i,pure:!0}),i})(),Rr=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[{provide:To,useClass:od}]}),i})();function Pi(i){return"server"===i}let ul=(()=>{class i{}return i.\u0275prov=(0,f.Yz7)({token:i,providedIn:"root",factory:()=>new Hf((0,f.LFG)(se),window)}),i})();class Hf{constructor(n,r){this.document=n,this.window=r,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const r=function(i,n){const r=i.getElementById(n)||i.getElementsByName(n)[0];if(r)return r;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const s=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let o=s.currentNode;for(;o;){const c=o.shadowRoot;if(c){const h=c.getElementById(n)||c.querySelector(`[name="${n}"]`);if(h)return h}o=s.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r),this.attemptFocus(r))}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=n)}}scrollToElement(n){const r=n.getBoundingClientRect(),s=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(s-c[0],o-c[1])}attemptFocus(n){return n.focus(),this.document.activeElement===n}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=kc(this.window.history)||kc(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function kc(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class Nc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new Nc,$||($=i)}onAndCancel(n,r,s){return n.addEventListener(r,s,!1),()=>{n.removeEventListener(r,s,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(Mo=Mo||document.querySelector("base"),Mo?Mo.getAttribute("href"):null);return null==r?null:function(i){In=In||document.createElement("a"),In.setAttribute("href",i);const n=In.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){Mo=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(i,n){n=encodeURIComponent(n);for(const r of i.split(";")){const s=r.indexOf("="),[o,c]=-1==s?[r,""]:[r.slice(0,s),r.slice(s+1)];if(o.trim()===n)return decodeURIComponent(c)}return null}(document.cookie,n)}}let In,Mo=null;const $f=new f.OlP("TRANSITION_ID"),pi=[{provide:f.ip1,useFactory:function(i,n,r){return()=>{r.get(f.CZH).donePromise.then(()=>{const s=j(),o=n.querySelectorAll(`style[ng-transition="${i}"]`);for(let c=0;c<o.length;c++)s.remove(o[c])})}},deps:[$f,se,f.zs3],multi:!0}];class hd{static init(){(0,f.VLi)(new hd)}addToWindow(n){f.dqk.getAngularTestability=(s,o=!0)=>{const c=n.findTestabilityInTree(s,o);if(null==c)throw new Error("Could not find testability for element.");return c},f.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(s=>{const o=f.dqk.getAllAngularTestabilities();let c=o.length,h=!1;const m=function(y){h=h||y,c--,0==c&&s(h)};o.forEach(function(y){y.whenStable(m)})})}findTestabilityInTree(n,r,s){if(null==r)return null;const o=n.getTestability(r);return null!=o?o:s?j().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let Oc=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();const dl=new f.OlP("EventManagerPlugins");let Me=(()=>{class i{constructor(r,s){this._zone=s,this._eventNameToPlugin=new Map,r.forEach(o=>o.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,s,o){return this._findPluginFor(s).addEventListener(r,s,o)}addGlobalEventListener(r,s,o){return this._findPluginFor(s).addGlobalEventListener(r,s,o)}getZone(){return this._zone}_findPluginFor(r){const s=this._eventNameToPlugin.get(r);if(s)return s;const o=this._plugins;for(let c=0;c<o.length;c++){const h=o[c];if(h.supports(r))return this._eventNameToPlugin.set(r,h),h}throw new Error(`No event manager plugin found for event ${r}`)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(dl),f.LFG(f.R0b))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();class Gt{constructor(n){this._doc=n}addGlobalEventListener(n,r,s){const o=j().getGlobalEventTarget(this._doc,n);if(!o)throw new Error(`Unsupported event target ${o} for event ${r}`);return this.addEventListener(o,r,s)}}let Lc=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(r){const s=new Set;r.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),s.add(o))}),this.onStylesAdded(s)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})(),Rn=(()=>{class i extends Lc{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,s,o){r.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,o.push(s.appendChild(h))})}addHost(r){const s=[];this._addStylesToHost(this._stylesSet,r,s),this._hostNodes.set(r,s)}removeHost(r){const s=this._hostNodes.get(r);s&&s.forEach(Vc),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((s,o)=>{this._addStylesToHost(r,o,s)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(Vc))}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(se))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();function Vc(i){j().remove(i)}const ba={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ji=/%COMP%/g;function vr(i,n,r){for(let s=0;s<n.length;s++){let o=n[s];Array.isArray(o)?vr(i,o,r):(o=o.replace(Ji,i),r.push(o))}return r}function Li(i){return n=>{if("__ngUnwrap__"===n)return i;!1===i(n)&&(n.preventDefault(),n.returnValue=!1)}}let fs=(()=>{class i{constructor(r,s,o){this.eventManager=r,this.sharedStylesHost=s,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new ps(r)}createRenderer(r,s){if(!r||!s)return this.defaultRenderer;switch(s.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(s.id);return o||(o=new tb(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,o)),o.applyToHost(r),o}case 1:case f.ifc.ShadowDom:return new Bc(this.eventManager,this.sharedStylesHost,r,s);default:if(!this.rendererByCompId.has(s.id)){const o=vr(s.id,s.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(Me),f.LFG(Rn),f.LFG(f.AFp))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();class ps{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,r){return r?document.createElementNS(ba[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,s){n&&n.insertBefore(r,s)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let s="string"==typeof n?document.querySelector(n):n;if(!s)throw new Error(`The selector "${n}" did not match any elements`);return r||(s.textContent=""),s}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,s,o){if(o){r=o+":"+r;const c=ba[o];c?n.setAttributeNS(c,r,s):n.setAttribute(r,s)}else n.setAttribute(r,s)}removeAttribute(n,r,s){if(s){const o=ba[s];o?n.removeAttributeNS(o,r):n.removeAttribute(`${s}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,s,o){o&(f.JOm.DashCase|f.JOm.Important)?n.style.setProperty(r,s,o&f.JOm.Important?"important":""):n.style[r]=s}removeStyle(n,r,s){s&f.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,s){n[r]=s}setValue(n,r){n.nodeValue=r}listen(n,r,s){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,Li(s)):this.eventManager.addEventListener(n,r,Li(s))}}class tb extends ps{constructor(n,r,s,o){super(n),this.component=s;const c=vr(o+"-"+s.id,s.styles,[]);r.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Ji,o+"-"+s.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(Ji,i)}(o+"-"+s.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const s=super.createElement(n,r);return super.setAttribute(s,this.contentAttr,""),s}}class Bc extends ps{constructor(n,r,s,o){super(n),this.sharedStylesHost=r,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=vr(o.id,o.styles,[]);for(let h=0;h<c.length;h++){const m=document.createElement("style");m.textContent=c[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,s){return super.insertBefore(this.nodeOrShadowRoot(n),r,s)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let Kf=(()=>{class i extends Gt{constructor(r){super(r)}supports(r){return!0}addEventListener(r,s,o){return r.addEventListener(s,o,!1),()=>this.removeEventListener(r,s,o)}removeEventListener(r,s,o){return r.removeEventListener(s,o)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(se))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();const Uc=["alt","control","meta","shift"],yI={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ni={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},sb={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Qf=(()=>{class i extends Gt{constructor(r){super(r)}supports(r){return null!=i.parseEventName(r)}addEventListener(r,s,o){const c=i.parseEventName(s),h=i.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>j().onAndCancel(r,c.domEventName,h))}static parseEventName(r){const s=r.toLowerCase().split("."),o=s.shift();if(0===s.length||"keydown"!==o&&"keyup"!==o)return null;const c=i._normalizeKey(s.pop());let h="";if(Uc.forEach(y=>{const C=s.indexOf(y);C>-1&&(s.splice(C,1),h+=y+".")}),h+=c,0!=s.length||0===c.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(r){let s="",o=function(i){let n=i.key;if(null==n){if(n=i.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===i.location&&ni.hasOwnProperty(n)&&(n=ni[n]))}return yI[n]||n}(r);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Uc.forEach(c=>{c!=o&&sb[c](r)&&(s+=c+".")}),s+=o,s}static eventCallback(r,s,o){return c=>{i.getEventFullKey(c)===r&&o.runGuarded(()=>s(c))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(se))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})(),Ro=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,f.Yz7)({factory:function(){return(0,f.LFG)(ml)},token:i,providedIn:"root"}),i})(),ml=(()=>{class i extends Ro{constructor(r){super(),this._doc=r}sanitize(r,s){if(null==s)return null;switch(r){case f.q3G.NONE:return s;case f.q3G.HTML:return(0,f.qzn)(s,"HTML")?(0,f.z3N)(s):(0,f.EiD)(this._doc,String(s)).toString();case f.q3G.STYLE:return(0,f.qzn)(s,"Style")?(0,f.z3N)(s):s;case f.q3G.SCRIPT:if((0,f.qzn)(s,"Script"))return(0,f.z3N)(s);throw new Error("unsafe value used in a script context");case f.q3G.URL:return(0,f.yhl)(s),(0,f.qzn)(s,"URL")?(0,f.z3N)(s):(0,f.mCW)(String(s));case f.q3G.RESOURCE_URL:if((0,f.qzn)(s,"ResourceURL"))return(0,f.z3N)(s);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${r} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(r){return(0,f.JVY)(r)}bypassSecurityTrustStyle(r){return(0,f.L6k)(r)}bypassSecurityTrustScript(r){return(0,f.eBb)(r)}bypassSecurityTrustUrl(r){return(0,f.LAX)(r)}bypassSecurityTrustResourceUrl(r){return(0,f.pB0)(r)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(se))},i.\u0275prov=(0,f.Yz7)({factory:function(){return function(i){return new ml(i.get(se))}((0,f.LFG)(f.gxx))},token:i,providedIn:"root"}),i})();const jc=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function(){Nc.makeCurrent(),hd.init()},multi:!0},{provide:se,useFactory:function(){return(0,f.RDi)(document),document},deps:[]}]),ep=[[],{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function(){return new f.qLn},deps:[]},{provide:dl,useClass:Kf,multi:!0,deps:[se,f.R0b,f.Lbi]},{provide:dl,useClass:Qf,multi:!0,deps:[se]},[],{provide:fs,useClass:fs,deps:[Me,Rn,f.AFp]},{provide:f.FYo,useExisting:fs},{provide:Lc,useExisting:Rn},{provide:Rn,useClass:Rn,deps:[se]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Me,useClass:Me,deps:[dl,f.R0b]},{provide:class{},useClass:Oc,deps:[]},[]];let Mm=(()=>{class i{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:i,providers:[{provide:f.AFp,useValue:r.appId},{provide:$f,useExisting:f.AFp},pi]}}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(i,12))},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:ep,imports:[Rr,f.hGG]}),i})();"undefined"!=typeof window&&window;var cn=B(4402),qe=B(5917),ct=B(9765),Pm=B(7971);class ri extends ct.xQ{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const r=super._subscribe(n);return r&&!r.closed&&n.next(this._value),r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Pm.N;return this._value}next(n){super.next(this._value=n)}}var _l=B(4869),Hc=B(9796),Vr=B(7393);class db extends Vr.L{notifyNext(n,r,s,o,c){this.destination.next(r)}notifyError(n,r){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class Fm extends Vr.L{constructor(n,r,s){super(),this.parent=n,this.outerValue=r,this.outerIndex=s,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Dd=B(7444),bn=B(7574);function Lm(i,n,r,s,o=new Fm(i,r,s)){if(!o.closed)return n instanceof bn.y?n.subscribe(o):(0,Dd.s)(n)(o)}var Ad=B(6693);const np={};function Oo(...i){let n,r;return(0,_l.K)(i[i.length-1])&&(r=i.pop()),"function"==typeof i[i.length-1]&&(n=i.pop()),1===i.length&&(0,Hc.k)(i[0])&&(i=i[0]),(0,Ad.n)(i,r).lift(new rp(n))}class rp{constructor(n){this.resultSelector=n}call(n,r){return r.subscribe(new ip(n,this.resultSelector))}}class ip extends db{constructor(n,r){super(n),this.resultSelector=r,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(np),this.observables.push(n)}_complete(){const n=this.observables,r=n.length;if(0===r)this.destination.complete();else{this.active=r,this.toRespond=r;for(let s=0;s<r;s++)this.add(Lm(this,n[s],void 0,s))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,r,s){const o=this.values,h=this.toRespond?o[s]===np?--this.toRespond:this.toRespond:0;o[s]=r,0===h&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(n){let r;try{r=this.resultSelector.apply(this,n)}catch(s){return void this.destination.error(s)}this.destination.next(r)}}const Xi=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})();var Ks=B(3282);function Po(...i){return(0,Ks.J)(1)((0,qe.of)(...i))}var mi=B(9193);function Fo(i){return new bn.y(n=>{let r;try{r=i()}catch(o){return void n.error(o)}return(r?(0,cn.D)(r):(0,mi.c)()).subscribe(n)})}var wI=B(2441),it=B(8002),es=B(5345);function or(i,n){return"function"==typeof n?r=>r.pipe(or((s,o)=>(0,cn.D)(i(s,o)).pipe((0,it.U)((c,h)=>n(s,c,o,h))))):r=>r.lift(new Bm(i))}class Bm{constructor(n){this.project=n}call(n,r){return r.subscribe(new Pn(n,this.project))}}class Pn extends es.Ds{constructor(n,r){super(n),this.project=r,this.index=0}_next(n){let r;const s=this.index++;try{r=this.project(n,s)}catch(o){return void this.destination.error(o)}this._innerSub(r)}_innerSub(n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new es.IY(this),o=this.destination;o.add(s),this.innerSubscription=(0,es.ft)(n,s),this.innerSubscription!==s&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}const sp=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();function gs(i){return n=>0===i?(0,mi.c)():n.lift(new II(i))}class II{constructor(n){if(this.total=n,this.total<0)throw new sp}call(n,r){return r.subscribe(new Um(n,this.total))}}class Um extends Vr.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){const r=this.total,s=++this.count;s<=r&&(this.destination.next(n),s===r&&(this.destination.complete(),this.unsubscribe()))}}function ms(...i){const n=i[i.length-1];return(0,_l.K)(n)?(i.pop(),r=>Po(i,r,n)):r=>Po(i,r)}function Lo(i,n){let r=!1;return arguments.length>=2&&(r=!0),function(o){return o.lift(new SI(i,n,r))}}class SI{constructor(n,r,s=!1){this.accumulator=n,this.seed=r,this.hasSeed=s}call(n,r){return r.subscribe(new jm(n,this.accumulator,this.seed,this.hasSeed))}}class jm extends Vr.L{constructor(n,r,s,o){super(n),this.accumulator=r,this._seed=s,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const r=this.index++;let s;try{s=this.accumulator(this.seed,n,r)}catch(o){this.destination.error(o)}this.seed=s,this.destination.next(s)}}function ar(i,n){return function(s){return s.lift(new Hm(i,n))}}class Hm{constructor(n,r){this.predicate=n,this.thisArg=r}call(n,r){return r.subscribe(new Gc(n,this.predicate,this.thisArg))}}class Gc extends Vr.L{constructor(n,r,s){super(n),this.predicate=r,this.thisArg=s,this.count=0}_next(n){let r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(s){return void this.destination.error(s)}r&&this.destination.next(n)}}function Zs(i){return function(r){const s=new lr(i),o=r.lift(s);return s.caught=o}}class lr{constructor(n){this.selector=n}call(n,r){return r.subscribe(new Os(n,this.selector,this.caught))}}class Os extends es.Ds{constructor(n,r,s){super(n),this.selector=r,this.caught=s}error(n){if(!this.isStopped){let r;try{r=this.selector(n,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const s=new es.IY(this);this.add(s);const o=(0,es.ft)(r,s);o!==s&&this.add(o)}}}var Zn=B(9773);function $c(i,n){return(0,Zn.zg)(i,n,1)}function op(i){return function(r){return 0===i?(0,mi.c)():r.lift(new ts(i))}}class ts{constructor(n){if(this.total=n,this.total<0)throw new sp}call(n,r){return r.subscribe(new ns(n,this.total))}}class ns extends Vr.L{constructor(n,r){super(n),this.total=r,this.ring=new Array,this.count=0}_next(n){const r=this.ring,s=this.total,o=this.count++;r.length<s?r.push(n):r[o%s]=n}_complete(){const n=this.destination;let r=this.count;if(r>0){const s=this.count>=this.total?this.total:this.count,o=this.ring;for(let c=0;c<s;c++){const h=r++%s;n.next(o[h])}}n.complete()}}function vl(i=xd){return n=>n.lift(new Ia(i))}class Ia{constructor(n){this.errorFactory=n}call(n,r){return r.subscribe(new Vo(n,this.errorFactory))}}class Vo extends Vr.L{constructor(n,r){super(n),this.errorFactory=r,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)}}}function xd(){return new Xi}function Gm(i=null){return n=>n.lift(new ap(i))}class ap{constructor(n){this.defaultValue=n}call(n,r){return r.subscribe(new TI(n,this.defaultValue))}}class TI extends Vr.L{constructor(n,r){super(n),this.defaultValue=r,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var lp=B(4487);function cr(i,n){const r=arguments.length>=2;return s=>s.pipe(i?ar((o,c)=>i(o,c,s)):lp.y,gs(1),r?Gm(n):vl(()=>new Xi))}var Gn=B(3342),bl=B(1307),Vi=B(5319);function El(i){return n=>n.lift(new cp(i))}class cp{constructor(n){this.callback=n}call(n,r){return r.subscribe(new up(n,this.callback))}}class up extends Vr.L{constructor(n,r){super(n),this.add(new Vi.w(r))}}class Qs{constructor(n,r){this.id=n,this.url=r}}class zc extends Qs{constructor(n,r,s="imperative",o=null){super(n,r),this.navigationTrigger=s,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wl extends Qs{constructor(n,r,s){super(n,r),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cl extends Qs{constructor(n,r,s){super(n,r),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dp extends Qs{constructor(n,r,s){super(n,r),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Il extends Qs{constructor(n,r,s,o){super(n,r),this.urlAfterRedirects=s,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DI extends Qs{constructor(n,r,s,o){super(n,r),this.urlAfterRedirects=s,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qc extends Qs{constructor(n,r,s,o,c){super(n,r),this.urlAfterRedirects=s,this.state=o,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wc extends Qs{constructor(n,r,s,o){super(n,r),this.urlAfterRedirects=s,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sl extends Qs{constructor(n,r,s,o){super(n,r),this.urlAfterRedirects=s,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $m{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Rd{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hb{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yc{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zm{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kc{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sa{constructor(n,r,s){this.routerEvent=n,this.position=r,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ct="primary";class fb{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r[0]:r}return null}getAll(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function fn(i){return new fb(i)}const kd="ngNavigationCancelingError";function Nd(i){const n=Error("NavigationCancelingError: "+i);return n[kd]=!0,n}function Tl(i,n,r){const s=r.path.split("/");if(s.length>i.length||"full"===r.pathMatch&&(n.hasChildren()||s.length<i.length))return null;const o={};for(let c=0;c<s.length;c++){const h=s[c],m=i[c];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:i.slice(0,s.length),posParams:o}}function _s(i,n){const r=i?Object.keys(i):void 0,s=n?Object.keys(n):void 0;if(!r||!s||r.length!=s.length)return!1;let o;for(let c=0;c<r.length;c++)if(o=r[c],!fp(i[o],n[o]))return!1;return!0}function fp(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;const r=[...i].sort(),s=[...n].sort();return r.every((o,c)=>s[c]===o)}return i===n}function pb(i){return Array.prototype.concat.apply([],i)}function Js(i){return i.length>0?i[i.length-1]:null}function Qn(i,n){for(const r in i)i.hasOwnProperty(r)&&n(i[r],r)}function br(i){return(0,f.CqO)(i)?i:(0,f.QGY)(i)?(0,cn.D)(Promise.resolve(i)):(0,qe.of)(i)}const Zc={exact:function Wm(i,n,r){if(!Aa(i.segments,n.segments)||!Pd(i.segments,n.segments,r)||i.numberOfChildren!==n.numberOfChildren)return!1;for(const s in n.children)if(!i.children[s]||!Wm(i.children[s],n.children[s],r))return!1;return!0},subset:Da},Od={exact:function(i,n){return _s(i,n)},subset:function(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(r=>fp(i[r],n[r]))},ignored:()=>!0};function Qc(i,n,r){return Zc[r.paths](i.root,n.root,r.matrixParams)&&Od[r.queryParams](i.queryParams,n.queryParams)&&!("exact"===r.fragment&&i.fragment!==n.fragment)}function Da(i,n,r){return Dl(i,n,n.segments,r)}function Dl(i,n,r,s){if(i.segments.length>r.length){const o=i.segments.slice(0,r.length);return!(!Aa(o,r)||n.hasChildren()||!Pd(o,r,s))}if(i.segments.length===r.length){if(!Aa(i.segments,r)||!Pd(i.segments,r,s))return!1;for(const o in n.children)if(!i.children[o]||!Da(i.children[o],n.children[o],s))return!1;return!0}{const o=r.slice(0,i.segments.length),c=r.slice(i.segments.length);return!!(Aa(i.segments,o)&&Pd(i.segments,o,s)&&i.children[Ct])&&Dl(i.children[Ct],n,c,s)}}function Pd(i,n,r){return n.every((s,o)=>Od[r](i[o].parameters,s.parameters))}class Uo{constructor(n,r,s){this.root=n,this.queryParams=r,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fn(this.queryParams)),this._queryParamMap}toString(){return pp.serialize(this)}}class jt{constructor(n,r){this.segments=n,this.children=r,this.parent=null,Qn(r,(s,o)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xs(this)}}class Jc{constructor(n,r){this.path=n,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=fn(this.parameters)),this._parameterMap}toString(){return nu(this)}}function Aa(i,n){return i.length===n.length&&i.every((r,s)=>r.path===n[s].path)}class Fd{}class Xc{parse(n){const r=new b(n);return new Uo(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(n){var i;return`${`/${eu(n.root,!0)}`}${function(i){const n=Object.keys(i).map(r=>{const s=i[r];return Array.isArray(s)?s.map(o=>`${gp(r)}=${gp(o)}`).join("&"):`${gp(r)}=${gp(s)}`}).filter(r=>!!r);return n.length?`?${n.join("&")}`:""}(n.queryParams)}${"string"==typeof n.fragment?`#${i=n.fragment,encodeURI(i)}`:""}`}}const pp=new Xc;function Xs(i){return i.segments.map(n=>nu(n)).join("/")}function eu(i,n){if(!i.hasChildren())return Xs(i);if(n){const r=i.children[Ct]?eu(i.children[Ct],!1):"",s=[];return Qn(i.children,(o,c)=>{c!==Ct&&s.push(`${c}:${eu(o,!1)}`)}),s.length>0?`${r}(${s.join("//")})`:r}{const r=function(i,n){let r=[];return Qn(i.children,(s,o)=>{o===Ct&&(r=r.concat(n(s,o)))}),Qn(i.children,(s,o)=>{o!==Ct&&(r=r.concat(n(s,o)))}),r}(i,(s,o)=>o===Ct?[eu(i.children[Ct],!1)]:[`${o}:${eu(s,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Ct]?`${Xs(i)}/${r[0]}`:`${Xs(i)}/(${r.join("//")})`}}function Ld(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gp(i){return Ld(i).replace(/%3B/gi,";")}function tu(i){return Ld(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xl(i){return decodeURIComponent(i)}function mp(i){return xl(i.replace(/\+/g,"%20"))}function nu(i){return`${tu(i.path)}${function(i){return Object.keys(i).map(n=>`;${tu(n)}=${tu(i[n])}`).join("")}(i.parameters)}`}const vb=/^[^\/()?;=#]+/;function Vd(i){const n=i.match(vb);return n?n[0]:""}const bb=/^[^=?&#]+/,jo=/^[^?&#]+/;class b{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(s[Ct]=new jt(n,r)),s}parseSegment(){const n=Vd(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new Jc(xl(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const r=Vd(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const o=Vd(this.remaining);o&&(s=o,this.capture(s))}n[xl(r)]=xl(s)}parseQueryParam(n){const r=function(i){const n=i.match(bb);return n?n[0]:""}(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const h=function(i){const n=i.match(jo);return n?n[0]:""}(this.remaining);h&&(s=h,this.capture(s))}const o=mp(r),c=mp(s);if(n.hasOwnProperty(o)){let h=n[o];Array.isArray(h)||(h=[h],n[o]=h),h.push(c)}else n[o]=c}parseParens(n){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=Vd(this.remaining),o=this.remaining[s.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let c;s.indexOf(":")>-1?(c=s.substr(0,s.indexOf(":")),this.capture(c),this.capture(":")):n&&(c=Ct);const h=this.parseChildren();r[c]=1===Object.keys(h).length?h[Ct]:new jt([],h),this.consumeOptional("//")}return r}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class E{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}children(n){const r=D(n,this._root);return r?r.children.map(s=>s.value):[]}firstChild(n){const r=D(n,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(n){const r=k(n,this._root);return r.length<2?[]:r[r.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return k(n,this._root).map(r=>r.value)}}function D(i,n){if(i===n.value)return n;for(const r of n.children){const s=D(i,r);if(s)return s}return null}function k(i,n){if(i===n.value)return[n];for(const r of n.children){const s=k(i,r);if(s.length)return s.unshift(n),s}return[]}class V{constructor(n,r){this.value=n,this.children=r}toString(){return`TreeNode(${this.value})`}}function ae(i){const n={};return i&&i.children.forEach(r=>n[r.value.outlet]=r),n}class ke extends E{constructor(n,r){super(n),this.snapshot=r,ru(this,n)}toString(){return this.snapshot.toString()}}function Ke(i,n){const r=function(i,n){const h=new ys([],{},{},"",{},Ct,n,null,i.root,-1,{});return new to("",new V(h,[]))}(i,n),s=new ri([new Jc("",{})]),o=new ri({}),c=new ri({}),h=new ri({}),m=new ri(""),y=new Tt(s,o,h,m,c,Ct,n,r.root);return y.snapshot=r.root,new ke(new V(y,[]),r)}class Tt{constructor(n,r,s,o,c,h,m,y){this.url=n,this.params=r,this.queryParams=s,this.fragment=o,this.data=c,this.outlet=h,this.component=m,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(n=>fn(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(n=>fn(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fn(i,n="emptyOnly"){const r=i.pathFromRoot;let s=0;if("always"!==n)for(s=r.length-1;s>=1;){const o=r[s],c=r[s-1];if(o.routeConfig&&""===o.routeConfig.path)s--;else{if(c.component)break;s--}}return function(i){return i.reduce((n,r)=>({params:Object.assign(Object.assign({},n.params),r.params),data:Object.assign(Object.assign({},n.data),r.data),resolve:Object.assign(Object.assign({},n.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(s))}class ys{constructor(n,r,s,o,c,h,m,y,C,T,x){this.url=n,this.params=r,this.queryParams=s,this.fragment=o,this.data=c,this.outlet=h,this.component=m,this.routeConfig=y,this._urlSegment=C,this._lastPathIndex=T,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class to extends E{constructor(n,r){super(r),this.url=n,ru(this,r)}toString(){return Bi(this._root)}}function ru(i,n){n.value._routerState=i,n.children.forEach(r=>ru(i,r))}function Bi(i){const n=i.children.length>0?` { ${i.children.map(Bi).join(", ")} } `:"";return`${i.value}${n}`}function Ho(i){if(i.snapshot){const n=i.snapshot,r=i._futureSnapshot;i.snapshot=r,_s(n.queryParams,r.queryParams)||i.queryParams.next(r.queryParams),n.fragment!==r.fragment&&i.fragment.next(r.fragment),_s(n.params,r.params)||i.params.next(r.params),function(i,n){if(i.length!==n.length)return!1;for(let r=0;r<i.length;++r)if(!_s(i[r],n[r]))return!1;return!0}(n.url,r.url)||i.url.next(r.url),_s(n.data,r.data)||i.data.next(r.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function iu(i,n){return _s(i.params,n.params)&&function(i,n){return Aa(i,n)&&i.every((r,s)=>_s(r.parameters,n[s].parameters))}(i.url,n.url)&&!(!i.parent!=!n.parent)&&(!i.parent||iu(i.parent,n.parent))}function Ml(i,n,r){if(r&&i.shouldReuseRoute(n.value,r.value.snapshot)){const s=r.value;s._futureSnapshot=n.value;const o=function(i,n,r){return n.children.map(s=>{for(const o of r.children)if(i.shouldReuseRoute(s.value,o.value.snapshot))return Ml(i,s,o);return Ml(i,s)})}(i,n,r);return new V(s,o)}{if(i.shouldAttach(n.value)){const c=i.retrieve(n.value);if(null!==c){const h=c.route;return Ym(n,h),h}}const s=function(i){return new Tt(new ri(i.url),new ri(i.params),new ri(i.queryParams),new ri(i.fragment),new ri(i.data),i.outlet,i.component,i)}(n.value),o=n.children.map(c=>Ml(i,c));return new V(s,o)}}function Ym(i,n){if(i.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=i.value;for(let r=0;r<i.children.length;++r)Ym(i.children[r],n.children[r])}function Go(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Ma(i){return"object"==typeof i&&null!=i&&i.outlets}function xI(i,n,r,s,o){let c={};return s&&Qn(s,(h,m)=>{c[m]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),new Uo(r.root===i?n:PM(r.root,i,n),c,o)}function PM(i,n,r){const s={};return Qn(i.children,(o,c)=>{s[c]=o===n?r:PM(o,n,r)}),new jt(i.segments,s)}class Cb{constructor(n,r,s){if(this.isAbsolute=n,this.numberOfDoubleDots=r,this.commands=s,n&&s.length>0&&Go(s[0]))throw new Error("Root segment cannot have matrix parameters");const o=s.find(Ma);if(o&&o!==Js(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ib{constructor(n,r,s){this.segmentGroup=n,this.processChildren=r,this.index=s}}function yp(i,n,r){if(i||(i=new jt([],{})),0===i.segments.length&&i.hasChildren())return vp(i,n,r);const s=function(i,n,r){let s=0,o=n;const c={match:!1,pathIndex:0,commandIndex:0};for(;o<i.segments.length;){if(s>=r.length)return c;const h=i.segments[o],m=r[s];if(Ma(m))break;const y=`${m}`,C=s<r.length-1?r[s+1]:null;if(o>0&&void 0===y)break;if(y&&C&&"object"==typeof C&&void 0===C.outlets){if(!kI(y,C,h))return c;s+=2}else{if(!kI(y,{},h))return c;s++}o++}return{match:!0,pathIndex:o,commandIndex:s}}(i,n,r),o=r.slice(s.commandIndex);if(s.match&&s.pathIndex<i.segments.length){const c=new jt(i.segments.slice(0,s.pathIndex),{});return c.children[Ct]=new jt(i.segments.slice(s.pathIndex),i.children),vp(c,0,o)}return s.match&&0===o.length?new jt(i.segments,{}):s.match&&!i.hasChildren()?Tb(i,n,r):s.match?vp(i,0,o):Tb(i,n,r)}function vp(i,n,r){if(0===r.length)return new jt(i.segments,{});{const s=function(i){return Ma(i[0])?i[0].outlets:{[Ct]:i}}(r),o={};return Qn(s,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(o[h]=yp(i.children[h],n,c))}),Qn(i.children,(c,h)=>{void 0===s[h]&&(o[h]=c)}),new jt(i.segments,o)}}function Tb(i,n,r){const s=i.segments.slice(0,n);let o=0;for(;o<r.length;){const c=r[o];if(Ma(c)){const y=Jn(c.outlets);return new jt(s,y)}if(0===o&&Go(r[0])){s.push(new Jc(i.segments[n].path,RI(r[0]))),o++;continue}const h=Ma(c)?c.outlets[Ct]:`${c}`,m=o<r.length-1?r[o+1]:null;h&&m&&Go(m)?(s.push(new Jc(h,RI(m))),o+=2):(s.push(new Jc(h,{})),o++)}return new jt(s,{})}function Jn(i){const n={};return Qn(i,(r,s)=>{"string"==typeof r&&(r=[r]),null!==r&&(n[s]=Tb(new jt([],{}),0,r))}),n}function RI(i){const n={};return Qn(i,(r,s)=>n[s]=`${r}`),n}function kI(i,n,r){return i==r.path&&_s(n,r.parameters)}class NI{constructor(n,r,s,o){this.routeReuseStrategy=n,this.futureState=r,this.currState=s,this.forwardEvent=o}activate(n){const r=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,s,n),Ho(this.futureState.root),this.activateChildRoutes(r,s,n)}deactivateChildRoutes(n,r,s){const o=ae(r);n.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,o[h],s),delete o[h]}),Qn(o,(c,h)=>{this.deactivateRouteAndItsChildren(c,s)})}deactivateRoutes(n,r,s){const o=n.value,c=r?r.value:null;if(o===c)if(o.component){const h=s.getContext(o.outlet);h&&this.deactivateChildRoutes(n,r,h.children)}else this.deactivateChildRoutes(n,r,s);else c&&this.deactivateRouteAndItsChildren(r,s)}deactivateRouteAndItsChildren(n,r){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}detachAndStoreRouteSubtree(n,r){const s=r.getContext(n.value.outlet);if(s&&s.outlet){const o=s.outlet.detach(),c=s.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:c})}}deactivateRouteAndOutlet(n,r){const s=r.getContext(n.value.outlet),o=s&&n.value.component?s.children:r,c=ae(n);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],o);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(n,r,s){const o=ae(r);n.children.forEach(c=>{this.activateRoutes(c,o[c.value.outlet],s),this.forwardEvent(new Kc(c.value.snapshot))}),n.children.length&&this.forwardEvent(new Yc(n.value.snapshot))}activateRoutes(n,r,s){const o=n.value,c=r?r.value:null;if(Ho(o),o===c)if(o.component){const h=s.getOrCreateContext(o.outlet);this.activateChildRoutes(n,r,h.children)}else this.activateChildRoutes(n,r,s);else if(o.component){const h=s.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),OI(m.route)}else{const m=function(i){for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(o.snapshot),y=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=y,h.outlet&&h.outlet.activateWith(o,y),this.activateChildRoutes(n,null,h.children)}}else this.activateChildRoutes(n,null,s)}}function OI(i){Ho(i.value),i.children.forEach(OI)}class Ab{constructor(n,r){this.routes=n,this.module=r}}function Rl(i){return"function"==typeof i}function Ud(i){return i instanceof Uo}const jd=Symbol("INITIAL_VALUE");function Hd(){return or(i=>Oo(i.map(n=>n.pipe(gs(1),ms(jd)))).pipe(Lo((n,r)=>{let s=!1;return r.reduce((o,c,h)=>o!==jd?o:(c===jd&&(s=!0),s||!1!==c&&h!==r.length-1&&!Ud(c)?o:c),n)},jd),ar(n=>n!==jd),(0,it.U)(n=>Ud(n)?n:!0===n),gs(1)))}let ii=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=f.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,s){1&r&&f._UZ(0,"router-outlet")},directives:function(){return[Wd]},encapsulation:2}),i})();function Gd(i,n=""){for(let r=0;r<i.length;r++){const s=i[r];Mb(s,jM(n,s))}}function Mb(i,n){i.children&&Gd(i.children,n)}function jM(i,n){return n?i||n.path?i&&!n.path?`${i}/`:!i&&n.path?n.path:`${i}/${n.path}`:"":i}function Rb(i){const n=i.children&&i.children.map(Rb),r=n?Object.assign(Object.assign({},i),{children:n}):Object.assign({},i);return!r.component&&(n||r.loadChildren)&&r.outlet&&r.outlet!==Ct&&(r.component=ii),r}function vs(i){return i.outlet||Ct}function PI(i,n){const r=i.filter(s=>vs(s)===n);return r.push(...i.filter(s=>vs(s)!==n)),r}const kb={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Zm(i,n,r){var s;if(""===n.path)return"full"===n.pathMatch&&(i.hasChildren()||r.length>0)?Object.assign({},kb):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(n.matcher||Tl)(r,i,n);if(!c)return Object.assign({},kb);const h={};Qn(c.posParams,(y,C)=>{h[C]=y.path});const m=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:m,positionalParamSegments:null!==(s=c.posParams)&&void 0!==s?s:{}}}function Ep(i,n,r,s,o="corrected"){if(r.length>0&&function(i,n,r){return r.some(s=>$d(i,n,s)&&vs(s)!==Ct)}(i,r,s)){const h=new jt(n,function(i,n,r,s){const o={};o[Ct]=s,s._sourceSegment=i,s._segmentIndexShift=n.length;for(const c of r)if(""===c.path&&vs(c)!==Ct){const h=new jt([],{});h._sourceSegment=i,h._segmentIndexShift=n.length,o[vs(c)]=h}return o}(i,n,s,new jt(r,i.children)));return h._sourceSegment=i,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:[]}}if(0===r.length&&function(i,n,r){return r.some(s=>$d(i,n,s))}(i,r,s)){const h=new jt(i.segments,function(i,n,r,s,o,c){const h={};for(const m of s)if($d(i,r,m)&&!o[vs(m)]){const y=new jt([],{});y._sourceSegment=i,y._segmentIndexShift="legacy"===c?i.segments.length:n.length,h[vs(m)]=y}return Object.assign(Object.assign({},o),h)}(i,n,r,s,i.children,o));return h._sourceSegment=i,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:r}}const c=new jt(i.segments,i.children);return c._sourceSegment=i,c._segmentIndexShift=n.length,{segmentGroup:c,slicedSegments:r}}function $d(i,n,r){return(!(i.hasChildren()||n.length>0)||"full"!==r.pathMatch)&&""===r.path}function Nb(i,n,r,s){return!!(vs(i)===s||s!==Ct&&$d(n,r,i))&&("**"===i.path||Zm(n,i,r).matched)}function LI(i,n,r){return 0===n.length&&!i.children[r]}class Qm{constructor(n){this.segmentGroup=n||null}}class Ob{constructor(n){this.urlTree=n}}function su(i){return new bn.y(n=>n.error(new Qm(i)))}function VI(i){return new bn.y(n=>n.error(new Ob(i)))}function zM(i){return new bn.y(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class WM{constructor(n,r,s,o,c){this.configLoader=r,this.urlSerializer=s,this.urlTree=o,this.config=c,this.allowRedirects=!0,this.ngModule=n.get(f.h0i)}apply(){const n=Ep(this.urlTree.root,[],[],this.config).segmentGroup,r=new jt(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,r,Ct).pipe((0,it.U)(c=>this.createUrlTree(Pb(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zs(c=>{if(c instanceof Ob)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Qm?this.noMatchError(c):c}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,Ct).pipe((0,it.U)(o=>this.createUrlTree(Pb(o),n.queryParams,n.fragment))).pipe(Zs(o=>{throw o instanceof Qm?this.noMatchError(o):o}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,r,s){const o=n.segments.length>0?new jt([],{[Ct]:n}):n;return new Uo(o,r,s)}expandSegmentGroup(n,r,s,o){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(n,r,s).pipe((0,it.U)(c=>new jt([],c))):this.expandSegment(n,s,r,s.segments,o,!0)}expandChildren(n,r,s){const o=[];for(const c of Object.keys(s.children))"primary"===c?o.unshift(c):o.push(c);return(0,cn.D)(o).pipe($c(c=>{const h=s.children[c],m=PI(r,c);return this.expandSegmentGroup(n,m,h,c).pipe((0,it.U)(y=>({segment:y,outlet:c})))}),Lo((c,h)=>(c[h.outlet]=h.segment,c),{}),function(i,n){const r=arguments.length>=2;return s=>s.pipe(i?ar((o,c)=>i(o,c,s)):lp.y,op(1),r?Gm(n):vl(()=>new Xi))}())}expandSegment(n,r,s,o,c,h){return(0,cn.D)(s).pipe($c(m=>this.expandSegmentAgainstRoute(n,r,s,m,o,c,h).pipe(Zs(C=>{if(C instanceof Qm)return(0,qe.of)(null);throw C}))),cr(m=>!!m),Zs((m,y)=>{if(m instanceof Xi||"EmptyError"===m.name){if(LI(r,o,c))return(0,qe.of)(new jt([],{}));throw new Qm(r)}throw m}))}expandSegmentAgainstRoute(n,r,s,o,c,h,m){return Nb(o,r,c,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(n,r,o,c,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,s,o,c,h):su(r):su(r)}expandSegmentAgainstRouteUsingRedirect(n,r,s,o,c,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,s,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,s,o,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,s,o){const c=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?VI(c):this.lineralizeSegments(s,c).pipe((0,Zn.zg)(h=>{const m=new jt(h,{});return this.expandSegment(n,m,r,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,r,s,o,c,h){const{matched:m,consumedSegments:y,lastChild:C,positionalParamSegments:T}=Zm(r,o,c);if(!m)return su(r);const x=this.applyRedirectCommands(y,o.redirectTo,T);return o.redirectTo.startsWith("/")?VI(x):this.lineralizeSegments(o,x).pipe((0,Zn.zg)(R=>this.expandSegment(n,r,s,R.concat(c.slice(C)),h,!1)))}matchSegmentAgainstRoute(n,r,s,o,c){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,qe.of)(s._loadedConfig):this.configLoader.load(n.injector,s)).pipe((0,it.U)(R=>(s._loadedConfig=R,new jt(o,{})))):(0,qe.of)(new jt(o,{}));const{matched:h,consumedSegments:m,lastChild:y}=Zm(r,s,o);if(!h)return su(r);const C=o.slice(y);return this.getChildConfig(n,s,o).pipe((0,Zn.zg)(x=>{const R=x.module,O=x.routes,{segmentGroup:U,slicedSegments:te}=Ep(r,m,C,O),pe=new jt(U.segments,U.children);if(0===te.length&&pe.hasChildren())return this.expandChildren(R,O,pe).pipe((0,it.U)(We=>new jt(m,We)));if(0===O.length&&0===te.length)return(0,qe.of)(new jt(m,{}));const Fe=vs(s)===c;return this.expandSegment(R,pe,O,te,Fe?Ct:c,!0).pipe((0,it.U)($e=>new jt(m.concat($e.segments),$e.children)))}))}getChildConfig(n,r,s){return r.children?(0,qe.of)(new Ab(r.children,n)):r.loadChildren?void 0!==r._loadedConfig?(0,qe.of)(r._loadedConfig):this.runCanLoadGuards(n.injector,r,s).pipe((0,Zn.zg)(o=>{return o?this.configLoader.load(n.injector,r).pipe((0,it.U)(c=>(r._loadedConfig=c,c))):(i=r,new bn.y(n=>n.error(Nd(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`))));var i})):(0,qe.of)(new Ab([],n))}runCanLoadGuards(n,r,s){const o=r.canLoad;if(!o||0===o.length)return(0,qe.of)(!0);const c=o.map(h=>{const m=n.get(h);let y;if((i=m)&&Rl(i.canLoad))y=m.canLoad(r,s);else{if(!Rl(m))throw new Error("Invalid CanLoad guard");y=m(r,s)}var i;return br(y)});return(0,qe.of)(c).pipe(Hd(),(0,Gn.b)(h=>{if(!Ud(h))return;const m=Nd(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,it.U)(h=>!0===h))}lineralizeSegments(n,r){let s=[],o=r.root;for(;;){if(s=s.concat(o.segments),0===o.numberOfChildren)return(0,qe.of)(s);if(o.numberOfChildren>1||!o.children[Ct])return zM(n.redirectTo);o=o.children[Ct]}}applyRedirectCommands(n,r,s){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),n,s)}applyRedirectCreatreUrlTree(n,r,s,o){const c=this.createSegmentGroup(n,r.root,s,o);return new Uo(c,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(n,r){const s={};return Qn(n,(o,c)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);s[c]=r[m]}else s[c]=o}),s}createSegmentGroup(n,r,s,o){const c=this.createSegments(n,r.segments,s,o);let h={};return Qn(r.children,(m,y)=>{h[y]=this.createSegmentGroup(n,m,s,o)}),new jt(c,h)}createSegments(n,r,s,o){return r.map(c=>c.path.startsWith(":")?this.findPosParam(n,c,o):this.findOrReturn(c,s))}findPosParam(n,r,s){const o=s[r.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${n}'. Cannot find '${r.path}'.`);return o}findOrReturn(n,r){let s=0;for(const o of r){if(o.path===n.path)return r.splice(s),o;s++}return n}}function Pb(i){const n={};for(const s of Object.keys(i.children)){const c=Pb(i.children[s]);(c.segments.length>0||c.hasChildren())&&(n[s]=c)}return function(i){if(1===i.numberOfChildren&&i.children[Ct]){const n=i.children[Ct];return new jt(i.segments.concat(n.segments),n.children)}return i}(new jt(i.segments,n))}class wp{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class ji{constructor(n,r){this.component=n,this.route=r}}function BI(i,n,r){const s=i._root;return Xm(s,n?n._root:null,r,[s.value])}function Jm(i,n,r){const s=function(i){if(!i)return null;for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(n);return(s?s.module.injector:r).get(i)}function Xm(i,n,r,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=ae(n);return i.children.forEach(h=>{(function(i,n,r,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=i.value,h=n?n.value:null,m=r?r.getContext(i.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const y=function(i,n,r){if("function"==typeof r)return r(i,n);switch(r){case"pathParamsChange":return!Aa(i.url,n.url);case"pathParamsOrQueryParamsChange":return!Aa(i.url,n.url)||!_s(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iu(i,n)||!_s(i.queryParams,n.queryParams);case"paramsChange":default:return!iu(i,n)}}(h,c,c.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new wp(s)):(c.data=h.data,c._resolvedData=h._resolvedData),Xm(i,n,c.component?m?m.children:null:r,s,o),y&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new ji(m.outlet.component,h))}else h&&Cp(n,m,o),o.canActivateChecks.push(new wp(s)),Xm(i,null,c.component?m?m.children:null:r,s,o)})(h,c[h.value.outlet],r,s.concat([h.value]),o),delete c[h.value.outlet]}),Qn(c,(h,m)=>Cp(h,r.getContext(m),o)),o}function Cp(i,n,r){const s=ae(i),o=i.value;Qn(s,(c,h)=>{Cp(c,o.component?n?n.children.getContext(h):null:n,r)}),r.canDeactivateChecks.push(new ji(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}class Fb{}function e_(i){return new bn.y(n=>n.error(i))}class GI{constructor(n,r,s,o,c,h){this.rootComponentType=n,this.config=r,this.urlTree=s,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const n=Ep(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,n,Ct);if(null===r)return null;const s=new ys([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ct,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new V(s,r),c=new to(this.url,o);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(n){const r=n.value,s=Fn(r,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,r):this.processSegment(n,r,r.segments,s)}processChildren(n,r){const s=[];for(const c of Object.keys(r.children)){const h=r.children[c],m=PI(n,c),y=this.processSegmentGroup(m,h,c);if(null===y)return null;s.push(...y)}const o=t_(s);return o.sort((n,r)=>n.value.outlet===Ct?-1:r.value.outlet===Ct?1:n.value.outlet.localeCompare(r.value.outlet)),o}processSegment(n,r,s,o){for(const c of n){const h=this.processSegmentAgainstRoute(c,r,s,o);if(null!==h)return h}return LI(r,s,o)?[]:null}processSegmentAgainstRoute(n,r,s,o){if(n.redirectTo||!Nb(n,r,s,o))return null;let c,h=[],m=[];if("**"===n.path){const O=s.length>0?Js(s).parameters:{};c=new ys(s,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ou(n),vs(n),n.component,n,Lb(r),eR(r)+s.length,n_(n))}else{const O=Zm(r,n,s);if(!O.matched)return null;h=O.consumedSegments,m=s.slice(O.lastChild),c=new ys(h,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ou(n),vs(n),n.component,n,Lb(r),eR(r)+h.length,n_(n))}const y=(i=n).children?i.children:i.loadChildren?i._loadedConfig.routes:[],{segmentGroup:C,slicedSegments:T}=Ep(r,h,m,y.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);var i;if(0===T.length&&C.hasChildren()){const O=this.processChildren(y,C);return null===O?null:[new V(c,O)]}if(0===y.length&&0===T.length)return[new V(c,[])];const x=vs(n)===o,R=this.processSegment(y,C,T,x?Ct:o);return null===R?null:[new V(c,R)]}}function zI(i){const n=i.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function t_(i){const n=[],r=new Set;for(const s of i){if(!zI(s)){n.push(s);continue}const o=n.find(c=>s.value.routeConfig===c.value.routeConfig);void 0!==o?(o.children.push(...s.children),r.add(o)):n.push(s)}for(const s of r){const o=t_(s.children);n.push(new V(s.value,o))}return n.filter(s=>!r.has(s))}function Lb(i){let n=i;for(;n._sourceSegment;)n=n._sourceSegment;return n}function eR(i){let n=i,r=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,r+=n._segmentIndexShift?n._segmentIndexShift:0;return r-1}function ou(i){return i.data||{}}function n_(i){return i.resolve||{}}function Bb(i){return or(n=>{const r=i(n);return r?(0,cn.D)(r).pipe((0,it.U)(()=>n)):(0,qe.of)(n)})}class oR extends class{shouldDetach(n){return!1}store(n,r){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,r){return n.routeConfig===r.routeConfig}}{}const r_=new f.OlP("ROUTES");class i_{constructor(n,r,s,o){this.loader=n,this.compiler=r,this.onLoadStartListener=s,this.onLoadEndListener=o}load(n,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactory(r.loadChildren).pipe((0,it.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);const h=c.create(n);return new Ab(pb(h.injector.get(r_,void 0,f.XFs.Self|f.XFs.Optional)).map(Rb),h)}),Zs(c=>{throw r._loader$=void 0,c}));return r._loader$=new wI.c(o,()=>new ct.xQ).pipe((0,bl.x)()),r._loader$}loadModuleFactory(n){return"string"==typeof n?(0,cn.D)(this.loader.load(n)):br(n()).pipe((0,Zn.zg)(r=>r instanceof f.YKP?(0,qe.of)(r):(0,cn.D)(this.compiler.compileModuleAsync(r))))}}class YI{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new kl,this.attachRef=null}}class kl{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new YI,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}class lR{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}function KI(i){throw i}function ZI(i,n,r){return n.parse("/")}function Nl(i,n){return(0,qe.of)(null)}const QI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hi=(()=>{class i{constructor(r,s,o,c,h,m,y,C){this.rootComponentType=r,this.urlSerializer=s,this.rootContexts=o,this.location=c,this.config=C,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ct.xQ,this.errorHandler=KI,this.malformedUriErrorHandler=ZI,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Nl,afterPreactivation:Nl},this.urlHandlingStrategy=new lR,this.routeReuseStrategy=new oR,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(f.h0i),this.console=h.get(f.c2e);const R=h.get(f.R0b);this.isNgZoneEnabled=R instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(C),this.currentUrlTree=new Uo(new jt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new i_(m,y,O=>this.triggerEvent(new $m(O)),O=>this.triggerEvent(new Rd(O))),this.routerState=Ke(this.currentUrlTree,this.rootComponentType),this.transitions=new ri({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const s=this.events;return r.pipe(ar(o=>0!==o.id),(0,it.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),or(o=>{let c=!1,h=!1;return(0,qe.of)(o).pipe((0,Gn.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),or(m=>{const y=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return o_(m.source)&&(this.browserUrlTree=m.extractedUrl),(0,qe.of)(m).pipe(or(x=>{const R=this.transitions.getValue();return s.next(new zc(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),R!==this.transitions.getValue()?mi.E:Promise.resolve(x)}),function(i,n,r,s){return or(o=>function(i,n,r,s,o){return new WM(i,n,r,s,o).apply()}(i,n,r,o.extractedUrl,s).pipe((0,it.U)(c=>Object.assign(Object.assign({},o),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Gn.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(i,n,r,s,o){return(0,Zn.zg)(c=>function(i,n,r,s,o="emptyOnly",c="legacy"){try{const h=new GI(i,n,r,s,o,c).recognize();return null===h?e_(new Fb):(0,qe.of)(h)}catch(h){return e_(h)}}(i,n,c.urlAfterRedirects,r(c.urlAfterRedirects),s,o).pipe((0,it.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Gn.b)(x=>{"eager"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(x.urlAfterRedirects,x),this.browserUrlTree=x.urlAfterRedirects);const R=new Il(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);s.next(R)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:O,source:U,restoredState:te,extras:pe}=m,Fe=new zc(R,this.serializeUrl(O),U,te);s.next(Fe);const Ge=Ke(O,this.rootComponentType).snapshot;return(0,qe.of)(Object.assign(Object.assign({},m),{targetSnapshot:Ge,urlAfterRedirects:O,extras:Object.assign(Object.assign({},pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,this.browserUrlTree=m.urlAfterRedirects,m.resolve(null),mi.E}),Bb(m=>{const{targetSnapshot:y,id:C,extractedUrl:T,rawUrl:x,extras:{skipLocationChange:R,replaceUrl:O}}=m;return this.hooks.beforePreactivation(y,{navigationId:C,appliedUrlTree:T,rawUrlTree:x,skipLocationChange:!!R,replaceUrl:!!O})}),(0,Gn.b)(m=>{const y=new DI(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}),(0,it.U)(m=>Object.assign(Object.assign({},m),{guards:BI(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function(i,n){return(0,Zn.zg)(r=>{const{targetSnapshot:s,currentSnapshot:o,guards:{canActivateChecks:c,canDeactivateChecks:h}}=r;return 0===h.length&&0===c.length?(0,qe.of)(Object.assign(Object.assign({},r),{guardsResult:!0})):function(i,n,r,s){return(0,cn.D)(i).pipe((0,Zn.zg)(o=>function(i,n,r,s,o){const c=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,qe.of)(!0);const h=c.map(m=>{const y=Jm(m,n,o);let C;if(function(i){return i&&Rl(i.canDeactivate)}(y))C=br(y.canDeactivate(i,n,r,s));else{if(!Rl(y))throw new Error("Invalid CanDeactivate guard");C=br(y(i,n,r,s))}return C.pipe(cr())});return(0,qe.of)(h).pipe(Hd())}(o.component,o.route,r,n,s)),cr(o=>!0!==o,!0))}(h,s,o,i).pipe((0,Zn.zg)(m=>m&&function(i){return"boolean"==typeof i}(m)?function(i,n,r,s){return(0,cn.D)(n).pipe($c(o=>Po(function(i,n){return null!==i&&n&&n(new hb(i)),(0,qe.of)(!0)}(o.route.parent,s),function(i,n){return null!==i&&n&&n(new zm(i)),(0,qe.of)(!0)}(o.route,s),function(i,n,r){const s=n[n.length-1],c=n.slice(0,n.length-1).reverse().map(h=>function(i){const n=i.routeConfig?i.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:i,guards:n}:null}(h)).filter(h=>null!==h).map(h=>Fo(()=>{const m=h.guards.map(y=>{const C=Jm(y,h.node,r);let T;if(function(i){return i&&Rl(i.canActivateChild)}(C))T=br(C.canActivateChild(s,i));else{if(!Rl(C))throw new Error("Invalid CanActivateChild guard");T=br(C(s,i))}return T.pipe(cr())});return(0,qe.of)(m).pipe(Hd())}));return(0,qe.of)(c).pipe(Hd())}(i,o.path,r),function(i,n,r){const s=n.routeConfig?n.routeConfig.canActivate:null;if(!s||0===s.length)return(0,qe.of)(!0);const o=s.map(c=>Fo(()=>{const h=Jm(c,n,r);let m;if(function(i){return i&&Rl(i.canActivate)}(h))m=br(h.canActivate(n,i));else{if(!Rl(h))throw new Error("Invalid CanActivate guard");m=br(h(n,i))}return m.pipe(cr())}));return(0,qe.of)(o).pipe(Hd())}(i,o.route,r))),cr(o=>!0!==o,!0))}(s,c,i,n):(0,qe.of)(m)),(0,it.U)(m=>Object.assign(Object.assign({},r),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Gn.b)(m=>{if(Ud(m.guardsResult)){const C=Nd(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const y=new qc(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(y)}),ar(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Bb(m=>{if(m.guards.canActivateChecks.length)return(0,qe.of)(m).pipe((0,Gn.b)(y=>{const C=new Wc(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}),or(y=>{let C=!1;return(0,qe.of)(y).pipe(function(i,n){return(0,Zn.zg)(r=>{const{targetSnapshot:s,guards:{canActivateChecks:o}}=r;if(!o.length)return(0,qe.of)(r);let c=0;return(0,cn.D)(o).pipe($c(h=>function(i,n,r,s){return function(i,n,r,s){const o=Object.keys(i);if(0===o.length)return(0,qe.of)({});const c={};return(0,cn.D)(o).pipe((0,Zn.zg)(h=>function(i,n,r,s){const o=Jm(i,n,s);return br(o.resolve?o.resolve(n,r):o(n,r))}(i[h],n,r,s).pipe((0,Gn.b)(m=>{c[h]=m}))),op(1),(0,Zn.zg)(()=>Object.keys(c).length===o.length?(0,qe.of)(c):mi.E))}(i._resolve,i,n,s).pipe((0,it.U)(c=>(i._resolvedData=c,i.data=Object.assign(Object.assign({},i.data),Fn(i,r).resolve),null)))}(h.route,s,i,n)),(0,Gn.b)(()=>c++),op(1),(0,Zn.zg)(h=>c===o.length?(0,qe.of)(r):mi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Gn.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,Gn.b)(y=>{const C=new Sl(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}))}),Bb(m=>{const{targetSnapshot:y,id:C,extractedUrl:T,rawUrl:x,extras:{skipLocationChange:R,replaceUrl:O}}=m;return this.hooks.afterPreactivation(y,{navigationId:C,appliedUrlTree:T,rawUrlTree:x,skipLocationChange:!!R,replaceUrl:!!O})}),(0,it.U)(m=>{const y=function(i,n,r){const s=Ml(i,n._root,r?r._root:void 0);return new ke(s,n)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:y})}),(0,Gn.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((i,n,r)=>(0,it.U)(s=>(new NI(n,s.targetRouterState,s.currentRouterState,r).activate(i),s)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Gn.b)({next(){c=!0},complete(){c=!0}}),El(()=>{if(!c&&!h){const m=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,m)):this.cancelNavigationTransition(o,m)}this.currentNavigation=null}),Zs(m=>{if(h=!0,function(i){return i&&i[kd]}(m)){const y=Ud(m.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const C=new Cl(o.id,this.serializeUrl(o.extractedUrl),m.message);s.next(C),y?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),x={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||o_(o.source)};this.scheduleNavigation(T,"imperative",null,x,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new dp(o.id,this.serializeUrl(o.extractedUrl),m);s.next(y);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return mi.E}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}getTransition(){const r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const s=this.extractLocationChangeInfoFromEvent(r);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:o,state:c,urlTree:h}=s,m={replaceUrl:!0};if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(m.state=y)}this.scheduleNavigation(h,o,c,m)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(r){var s;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(s=r.state)||void 0===s?void 0:s.navigationId)?r.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(r,s){if(!r)return!0;const o=s.urlTree.toString()===r.urlTree.toString();return s.transitionId!==r.transitionId||!o||!("hashchange"===s.source&&"popstate"===r.source||"popstate"===s.source&&"hashchange"===r.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){Gd(r),this.config=r.map(Rb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,s={}){const{relativeTo:o,queryParams:c,fragment:h,queryParamsHandling:m,preserveFragment:y}=s,C=o||this.routerState.root,T=y?this.currentUrlTree.fragment:h;let x=null;switch(m){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=c||null}return null!==x&&(x=this.removeEmptyProps(x)),function(i,n,r,s,o){if(0===r.length)return xI(n.root,n.root,n,s,o);const c=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new Cb(!0,0,i);let n=0,r=!1;const s=i.reduce((o,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const m={};return Qn(c.outlets,(y,C)=>{m[C]="string"==typeof y?y.split("/"):y}),[...o,{outlets:m}]}if(c.segmentPath)return[...o,c.segmentPath]}return"string"!=typeof c?[...o,c]:0===h?(c.split("/").forEach((m,y)=>{0==y&&"."===m||(0==y&&""===m?r=!0:".."===m?n++:""!=m&&o.push(m))}),o):[...o,c]},[]);return new Cb(r,n,s)}(r);if(c.toRoot())return xI(n.root,new jt([],{}),n,s,o);const h=function(i,n,r){if(i.isAbsolute)return new Ib(n.root,!0,0);if(-1===r.snapshot._lastPathIndex){const c=r.snapshot._urlSegment;return new Ib(c,c===n.root,0)}const s=Go(i.commands[0])?0:1;return function(i,n,r){let s=i,o=n,c=r;for(;c>o;){if(c-=o,s=s.parent,!s)throw new Error("Invalid number of '../'");o=s.segments.length}return new Ib(s,!1,o-c)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+s,i.numberOfDoubleDots)}(c,n,i),m=h.processChildren?vp(h.segmentGroup,h.index,c.commands):yp(h.segmentGroup,h.index,c.commands);return xI(h.segmentGroup,m,n,s,o)}(C,this.currentUrlTree,r,x,null!=T?T:null)}navigateByUrl(r,s={skipLocationChange:!1}){const o=Ud(r)?r:this.parseUrl(r),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,s)}navigate(r,s={skipLocationChange:!1}){return function(i){for(let n=0;n<i.length;n++){const r=i[n];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${n}`)}}(r),this.navigateByUrl(this.createUrlTree(r,s),s)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let s;try{s=this.urlSerializer.parse(r)}catch(o){s=this.malformedUriErrorHandler(o,this.urlSerializer,r)}return s}isActive(r,s){let o;if(o=!0===s?Object.assign({},QI):!1===s?Object.assign({},JI):s,Ud(r))return Qc(this.currentUrlTree,r,o);const c=this.parseUrl(r);return Qc(this.currentUrlTree,c,o)}removeEmptyProps(r){return Object.keys(r).reduce((s,o)=>{const c=r[o];return null!=c&&(s[o]=c),s},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new wl(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,s,o,c,h){var m,y;if(this.disposed)return Promise.resolve(!1);const C=this.getTransition(),T=o_(s)&&C&&!o_(C.source),O=(this.lastSuccessfulId===C.id||this.currentNavigation?C.rawUrl:C.urlAfterRedirects).toString()===r.toString();if(T&&O)return Promise.resolve(!0);let U,te,pe;h?(U=h.resolve,te=h.reject,pe=h.promise):pe=new Promise(($e,We)=>{U=$e,te=We});const Fe=++this.navigationId;let Ge;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Ge=o&&o.\u0275routerPageId?o.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):Ge=0,this.setTransition({id:Fe,targetPageId:Ge,source:s,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:c,resolve:U,reject:te,promise:pe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),pe.catch($e=>Promise.reject($e))}setBrowserUrl(r,s){const o=this.urlSerializer.serialize(r),c=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(o)||s.extras.replaceUrl?this.location.replaceState(o,"",c):this.location.go(o,"",c)}restoreHistory(r,s=!1){var o,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,s){const o=new Cl(r.id,this.serializeUrl(r.extractedUrl),s);this.triggerEvent(o),r.resolve(!1)}generateNgRouterState(r,s){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:s}:{navigationId:r}}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(f.DyG),f.LFG(Fd),f.LFG(kl),f.LFG(Wt),f.LFG(f.zs3),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(void 0))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();function o_(i){return"imperative"!==i}let au=(()=>{class i{constructor(r,s,o,c,h){this.router=r,this.route=s,this.commands=[],this.onChanges=new ct.xQ,null==o&&c.setAttribute(h.nativeElement,"tabindex","0")}ngOnChanges(r){this.onChanges.next(this)}set routerLink(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}onClick(){const r={skipLocationChange:lu(this.skipLocationChange),replaceUrl:lu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:lu(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(Hi),f.Y36(Tt),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},i.\u0275dir=f.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(r,s){1&r&&f.NdJ("click",function(){return s.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),i})(),a_=(()=>{class i{constructor(r,s,o){this.router=r,this.route=s,this.locationStrategy=o,this.commands=[],this.onChanges=new ct.xQ,this.subscription=r.events.subscribe(c=>{c instanceof wl&&this.updateTargetUrlAndHref()})}set routerLink(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}ngOnChanges(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(r,s,o,c,h){if(0!==r||s||o||c||h||"string"==typeof this.target&&"_self"!=this.target)return!0;const m={skipLocationChange:lu(this.skipLocationChange),replaceUrl:lu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:lu(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(Hi),f.Y36(Tt),f.Y36(xe))},i.\u0275dir=f.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(r,s){1&r&&f.NdJ("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&r&&(f.Ikx("href",s.href,f.LSH),f.uIk("target",s.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),i})();function lu(i){return""===i||!!i}let l_=(()=>{class i{constructor(r,s,o,c,h,m){this.router=r,this.element=s,this.renderer=o,this.cdr=c,this.link=h,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=r.events.subscribe(y=>{y instanceof wl&&this.update()})}ngAfterContentInit(){(0,qe.of)(this.links.changes,this.linksWithHrefs.changes,(0,qe.of)(null)).pipe((0,Ks.J)()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var r;null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe();const s=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,cn.D)(s).pipe((0,Ks.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(r){const s=Array.isArray(r)?r:r.split(" ");this.classes=s.filter(o=>!!o)}ngOnChanges(r){this.update()}ngOnDestroy(){var r;this.routerEventsSubscription.unsubscribe(),null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const r=this.hasActiveLinks();this.isActive!==r&&(this.isActive=r,this.cdr.markForCheck(),this.classes.forEach(s=>{r?this.renderer.addClass(this.element.nativeElement,s):this.renderer.removeClass(this.element.nativeElement,s)}))})}isLinkActive(r){const s=function(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>r.isActive(o.urlTree,s)}hasActiveLinks(){const r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.linkWithHref&&r(this.linkWithHref)||this.links.some(r)||this.linksWithHrefs.some(r)}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(Hi),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(au,8),f.Y36(a_,8))},i.\u0275dir=f.lG2({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(r,s,o){if(1&r&&(f.Suo(o,au,5),f.Suo(o,a_,5)),2&r){let c;f.iGM(c=f.CRH())&&(s.links=c),f.iGM(c=f.CRH())&&(s.linksWithHrefs=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[f.TTD]}),i})(),Wd=(()=>{class i{constructor(r,s,o,c,h){this.parentContexts=r,this.location=s,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.name=c||Ct,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,r}attach(r,s){this.activated=r,this._activatedRoute=s,this.location.insert(r.hostView)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const h=(s=s||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,y=new c_(r,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(kl),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},i.\u0275dir=f.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class c_{constructor(n,r,s){this.route=n,this.childContexts=r,this.parent=s}get(n,r){return n===Tt?this.route:n===kl?this.childContexts:this.parent.get(n,r)}}class Ub{}class Hb{preload(n,r){return(0,qe.of)(null)}}let u_=(()=>{class i{constructor(r,s,o,c,h){this.router=r,this.injector=c,this.preloadingStrategy=h,this.loader=new i_(s,o,C=>r.triggerEvent(new $m(C)),C=>r.triggerEvent(new Rd(C)))}setUpPreloading(){this.subscription=this.router.events.pipe(ar(r=>r instanceof wl),$c(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(f.h0i);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,s){const o=[];for(const c of s)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?o.push(this.preloadConfig(r,c)):c.children&&o.push(this.processRoutes(r,c.children));return(0,cn.D)(o).pipe((0,Ks.J)(),(0,it.U)(c=>{}))}preloadConfig(r,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,qe.of)(s._loadedConfig):this.loader.load(r.injector,s)).pipe((0,Zn.zg)(c=>(s._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(Hi),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Ub))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})(),cu=(()=>{class i{constructor(r,s,o={}){this.router=r,this.viewportScroller=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof zc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof wl&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof Sa&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,s){this.router.triggerEvent(new Sa(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(Hi),f.LFG(ul),f.LFG(void 0))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();const Ol=new f.OlP("ROUTER_CONFIGURATION"),eS=new f.OlP("ROUTER_FORROOT_GUARD"),tS=[Wt,{provide:Fd,useClass:Xc},{provide:Hi,useFactory:function(i,n,r,s,o,c,h,m={},y,C){const T=new Hi(null,i,n,r,s,o,c,pb(h));return y&&(T.urlHandlingStrategy=y),C&&(T.routeReuseStrategy=C),function(i,n){i.errorHandler&&(n.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(n.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(n.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(n.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(n.urlUpdateStrategy=i.urlUpdateStrategy)}(m,T),m.enableTracing&&T.events.subscribe(x=>{var R,O;null===(R=console.group)||void 0===R||R.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(O=console.groupEnd)||void 0===O||O.call(console)}),T},deps:[Fd,kl,Wt,f.zs3,f.v3s,f.Sil,r_,Ol,[class{},new f.FiY],[class{},new f.FiY]]},kl,{provide:Tt,useFactory:function(i){return i.routerState.root},deps:[Hi]},{provide:f.v3s,useClass:f.EAV},u_,Hb,class{preload(n,r){return r().pipe(Zs(()=>(0,qe.of)(null)))}},{provide:Ol,useValue:{enableTracing:!1}}];function Gb(){return new f.PXZ("Router",Hi)}let $b=(()=>{class i{constructor(r,s){}static forRoot(r,s){return{ngModule:i,providers:[tS,zb(r),{provide:eS,useFactory:uR,deps:[[Hi,new f.FiY,new f.tp0]]},{provide:Ol,useValue:s||{}},{provide:xe,useFactory:nS,deps:[ee,[new f.tBr(Pe),new f.FiY],Ol]},{provide:cu,useFactory:v1,deps:[Hi,ul,Ol]},{provide:Ub,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:Hb},{provide:f.PXZ,multi:!0,useFactory:Gb},[qb,{provide:f.ip1,multi:!0,useFactory:rS,deps:[qb]},{provide:iS,useFactory:fR,deps:[qb]},{provide:f.tb,multi:!0,useExisting:iS}]]}}static forChild(r){return{ngModule:i,providers:[zb(r)]}}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(eS,8),f.LFG(Hi,8))},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({}),i})();function v1(i,n,r){return r.scrollOffset&&n.setOffset(r.scrollOffset),new cu(i,n,r)}function nS(i,n,r={}){return r.useHash?new It(i,n):new Qe(i,n)}function uR(i){return"guarded"}function zb(i){return[{provide:f.deG,multi:!0,useValue:i},{provide:r_,multi:!0,useValue:i}]}let qb=(()=>{class i{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ct.xQ}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const o=new Promise(m=>s=m),c=this.injector.get(Hi),h=this.injector.get(Ol);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),s(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,qe.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),c.initialNavigation()):s(!0),o})}bootstrapListener(r){const s=this.injector.get(Ol),o=this.injector.get(u_),c=this.injector.get(cu),h=this.injector.get(Hi),m=this.injector.get(f.z2F);r===m.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),c.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(f.zs3))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();function rS(i){return i.appInitializer.bind(i)}function fR(i){return i.bootstrapListener.bind(i)}const iS=new f.OlP("Router Initializer");var sS=B(1093),P=B(3854),Ra=B(5452),qo=B(5601),dt=B(6034),uu=B(6682),Yd=B(6136),d_=B(7771),ro=B(8858);class oS extends ct.xQ{constructor(n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new gR(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const r=this._infiniteTimeWindow,s=r?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,c=s.length;let h;if(this.closed)throw new Pm.N;if(this.isStopped||this.hasError?h=Vi.w.EMPTY:(this.observers.push(n),h=new ro.W(this,n)),o&&n.add(n=new Yd.ht(n,o)),r)for(let m=0;m<c&&!n.closed;m++)n.next(s[m]);else for(let m=0;m<c&&!n.closed;m++)n.next(s[m].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),h}_getNow(){return(this.scheduler||d_.c).now()}_trimBufferThenGetEvents(){const n=this._getNow(),r=this._bufferSize,s=this._windowTime,o=this._events,c=o.length;let h=0;for(;h<c&&!(n-o[h].time<s);)h++;return c>r&&(h=Math.max(h,c-r)),h>0&&o.splice(0,h),o}}class gR{constructor(n,r){this.time=n,this.value=r}}function Sp(i,n,r){let s;return s=i&&"object"==typeof i?i:{bufferSize:i,windowTime:n,refCount:!1,scheduler:r},o=>o.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:r,scheduler:s}){let o,h,c=0,m=!1,y=!1;return function(T){let x;c++,!o||m?(m=!1,o=new oS(i,n,s),x=o.subscribe(this),h=T.subscribe({next(R){o.next(R)},error(R){m=!0,o.error(R)},complete(){y=!0,h=void 0,o.complete()}}),y&&(h=void 0)):x=o.subscribe(this),this.add(()=>{c--,x.unsubscribe(),x=void 0,h&&!y&&r&&0===c&&(h.unsubscribe(),h=void 0,o=void 0)})}}(s))}function h_(i,n){return n?or(()=>i,n):or(()=>i)}var f_=B(9673),Xt=B(9126),rs=B(8939),p_=B(7841);const io=new f.OlP("angularfire2.auth.use-emulator"),Kd=new f.OlP("angularfire2.auth.settings"),Zd=new f.OlP("angularfire2.auth.tenant-id"),Tp=new f.OlP("angularfire2.auth.langugage-code"),aS=new f.OlP("angularfire2.auth.use-device-language"),Wb=new f.OlP("angularfire.auth.persistence"),g_=(i,n,r,s,o,c,h,m)=>(0,Xt.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const y=n.runOutsideAngular(()=>i.auth());if(r&&y.useEmulator(...r),s&&(y.tenantId=s),y.languageCode=o,c&&y.useDeviceLanguage(),h)for(const[C,T]of Object.entries(h))y.settings[C]=T;return m&&y.setPersistence(m),y},[r,s,o,c,h,m]);let m_=(()=>{class i{constructor(r,s,o,c,h,m,y,C,T,x,R){const O=new ct.xQ,U=(0,qe.of)(void 0).pipe((0,Yd.QV)(h.outsideAngular),or(()=>c.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,4828)))),(0,it.U)(()=>(0,rs.on)(r,c,s)),(0,it.U)(te=>g_(te,c,m,C,T,x,y,R)),Sp({bufferSize:1,refCount:!1}));if(Pi(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,qe.of)(null);else{U.pipe(cr()).subscribe();const pe=U.pipe(or($e=>$e.getRedirectResult().then(We=>We,()=>null)),Xt.iC,Sp({bufferSize:1,refCount:!1})),Fe=U.pipe(or($e=>new bn.y(We=>({unsubscribe:c.runOutsideAngular(()=>$e.onAuthStateChanged(wn=>We.next(wn),wn=>We.error(wn),()=>We.complete()))})))),Ge=U.pipe(or($e=>new bn.y(We=>({unsubscribe:c.runOutsideAngular(()=>$e.onIdTokenChanged(wn=>We.next(wn),wn=>We.error(wn),()=>We.complete()))}))));this.authState=pe.pipe(h_(Fe),(0,f_.R)(h.outsideAngular),(0,Yd.QV)(h.insideAngular)),this.user=pe.pipe(h_(Ge),(0,f_.R)(h.outsideAngular),(0,Yd.QV)(h.insideAngular)),this.idToken=this.user.pipe(or($e=>$e?(0,cn.D)($e.getIdToken()):(0,qe.of)(null))),this.idTokenResult=this.user.pipe(or($e=>$e?(0,cn.D)($e.getIdTokenResult()):(0,qe.of)(null))),this.credential=(0,uu.T)(pe,O,this.authState.pipe(ar($e=>!$e))).pipe((0,it.U)($e=>(null==$e?void 0:$e.user)?$e:null),(0,f_.R)(h.outsideAngular),(0,Yd.QV)(h.insideAngular))}return(0,rs.pX)(this,U,c,{spy:{apply:(te,pe,Fe)=>{(te.startsWith("signIn")||te.startsWith("createUser"))&&Fe.then(Ge=>O.next(Ge))}}})}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(rs.Dh),f.LFG(rs.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Xt.HU),f.LFG(io,8),f.LFG(Kd,8),f.LFG(Zd,8),f.LFG(Tp,8),f.LFG(aS,8),f.LFG(Wb,8))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),lS=(()=>{class i{constructor(){p_.Z.registerVersion("angularfire",Xt.q4.full,"auth-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[m_]}),i})(),__=(()=>{class i{constructor(r){this.afAuth=r,this.authState=null,this.afAuth.authState.subscribe(s=>this.authState=s)}get authenticated(){return null!==this.authState}get currentUserId(){return this.authenticated?this.authState.uid:null}login(){this.afAuth.signInWithPopup(new sS.N)}logout(){this.afAuth.signOut()}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(m_))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Qd=B(3637);function Dp(){return i=>i.lift(new mR)}class mR{call(n,r){return r.subscribe(new Yb(n))}}class Yb extends Vr.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let r;this.hasPrev?r=[this.prev,n]:this.hasPrev=!0,this.prev=n,r&&this.destination.next(r)}}function y_(i,n){return r=>r.lift(new w1(i,n))}class w1{constructor(n,r){this.compare=n,this.keySelector=r}call(n,r){return r.subscribe(new C1(n,this.compare,this.keySelector))}}class C1 extends Vr.L{constructor(n,r,s){super(n),this.keySelector=s,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(n,r){return n===r}_next(n){let r;try{const{keySelector:o}=this;r=o?o(n):n}catch(o){return this.destination.error(o)}let s=!1;if(this.hasKey)try{const{compare:o}=this;s=o(this.key,r)}catch(o){return this.destination.error(o)}else this.hasKey=!0;s||(this.key=r,this.destination.next(n))}}B(4828);var Ze,cS=B(4486),Ce=B(8239),I1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Pl={},uS=uS||{},Mt=I1||self;function so(){}function Ap(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function xp(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var Mp="closure_uid_"+(1e9*Math.random()>>>0),hS=0;function Kb(i,n,r){return i.call.apply(i.bind,arguments)}function _R(i,n,r){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,s),i.apply(n,o)}}return function(){return i.apply(n,arguments)}}function Ln(i,n,r){return(Ln=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kb:_R).apply(null,arguments)}function Rp(i,n){var r=Array.prototype.slice.call(arguments,1);return function(){var s=r.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function si(i,n){function r(){}r.prototype=n.prototype,i.Z=n.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(s,o,c){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return n.prototype[o].apply(s,h)}}function du(){this.s=this.s,this.o=this.o}var yR={};du.prototype.s=!1,du.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,Mp)&&i[Mp]||(i[Mp]=++hS)}(this);delete yR[i]}},du.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qb=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===n)return r;return-1},fS=Array.prototype.forEach?function(i,n,r){Array.prototype.forEach.call(i,n,r)}:function(i,n,r){const s=i.length,o="string"==typeof i?i.split(""):i;for(let c=0;c<s;c++)c in o&&n.call(r,o[c],c,i)};function Jd(i){return Array.prototype.concat.apply([],arguments)}function Fl(i){const n=i.length;if(0<n){const r=Array(n);for(let s=0;s<n;s++)r[s]=i[s];return r}return[]}function Xd(i){return/^[\s\xa0]*$/.test(i)}var Gi,hu=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function kr(i,n){return-1!=i.indexOf(n)}function Ll(i,n){return i<n?-1:i>n?1:0}e:{var Jb=Mt.navigator;if(Jb){var Xb=Jb.userAgent;if(Xb){Gi=Xb;break e}}Gi=""}function kp(i,n,r){for(const s in i)n.call(r,i[s],s,i)}function v_(i){const n={};for(const r in i)n[r]=i[r];return n}var eE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Np(i,n){let r,s;for(let o=1;o<arguments.length;o++){for(r in s=arguments[o],s)i[r]=s[r];for(let c=0;c<eE.length;c++)r=eE[c],Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}}function tE(i){return tE[" "](i),i}tE[" "]=so;var _i,i,S1=kr(Gi,"Opera"),fu=kr(Gi,"Trident")||kr(Gi,"MSIE"),nE=kr(Gi,"Edge"),rE=nE||fu,iE=kr(Gi,"Gecko")&&!(kr(Gi.toLowerCase(),"webkit")&&!kr(Gi,"Edge"))&&!(kr(Gi,"Trident")||kr(Gi,"MSIE"))&&!kr(Gi,"Edge"),bR=kr(Gi.toLowerCase(),"webkit")&&!kr(Gi,"Edge");function gS(){var i=Mt.document;return i?i.documentMode:void 0}e:{var sE="",oE=(i=Gi,iE?/rv:([^\);]+)(\)|;)/.exec(i):nE?/Edge\/([\d\.]+)/.exec(i):fu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):bR?/WebKit\/(\S+)/.exec(i):S1?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(oE&&(sE=oE?oE[1]:""),fu){var mS=gS();if(null!=mS&&mS>parseFloat(sE)){_i=String(mS);break e}}_i=sE}var T1={};function _S(){return n=T1,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let i=0;const n=hu(String(_i)).split("."),r=hu("9").split("."),s=Math.max(n.length,r.length);for(let h=0;0==i&&h<s;h++){var o=n[h]||"",c=r[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;i=Ll(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||Ll(0==o[2].length,0==c[2].length)||Ll(o[2],c[2]),o=o[3],c=c[3]}while(0==i)}return 0<=i}();var n}var aE=Mt.document&&fu&&(gS()||parseInt(_i,10))||void 0,bS=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Mt.addEventListener("test",so,n),Mt.removeEventListener("test",so,n)}catch(r){}return i}();function yi(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}function Op(i,n){if(yi.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(iE){e:{try{tE(n.nodeName);var o=!0;break e}catch(c){}o=!1}o||(n=null)}}else"mouseover"==r?n=i.fromElement:"mouseout"==r&&(n=i.toElement);this.relatedTarget=n,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ER[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Op.Z.h.call(this)}}yi.prototype.h=function(){this.defaultPrevented=!0},si(Op,yi);var ER={2:"touch",3:"pen",4:"mouse"};Op.prototype.h=function(){Op.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var eh="closure_listenable_"+(1e6*Math.random()|0),wR=0;function ES(i,n,r,s,o){this.listener=i,this.proxy=null,this.src=n,this.type=r,this.capture=!!s,this.ia=o,this.key=++wR,this.ca=this.fa=!1}function b_(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function E_(i){this.src=i,this.g={},this.h=0}function w_(i,n){var r=n.type;if(r in i.g){var c,s=i.g[r],o=Qb(s,n);(c=0<=o)&&Array.prototype.splice.call(s,o,1),c&&(b_(n),0==i.g[r].length&&(delete i.g[r],i.h--))}}function C_(i,n,r,s){for(var o=0;o<i.length;++o){var c=i[o];if(!c.ca&&c.listener==n&&c.capture==!!r&&c.ia==s)return o}return-1}E_.prototype.add=function(i,n,r,s,o){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var h=C_(i,n,s,o);return-1<h?(n=i[h],r||(n.fa=!1)):((n=new ES(n,this.src,c,!!s,o)).fa=r,i.push(n)),n};var lE="closure_lm_"+(1e6*Math.random()|0),Ps={};function I_(i,n,r,s,o){if(s&&s.once)return IR(i,n,r,s,o);if(Array.isArray(n)){for(var c=0;c<n.length;c++)I_(i,n[c],r,s,o);return null}return r=hE(r),i&&i[eh]?i.N(n,r,xp(s)?!!s.capture:!!s,o):wS(i,n,r,!1,s,o)}function wS(i,n,r,s,o,c){if(!n)throw Error("Invalid event type");var h=xp(o)?!!o.capture:!!o,m=Pp(i);if(m||(i[lE]=m=new E_(i)),(r=m.add(n,r,s,h,c)).proxy)return r;if(s=function(){var n=SR;return function i(r){return n.call(i.src,i.listener,r)}}(),r.proxy=s,s.src=i,s.listener=r,i.addEventListener)bS||(o=h),void 0===o&&(o=!1),i.addEventListener(n.toString(),s,o);else if(i.attachEvent)i.attachEvent(CS(n.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return r}function IR(i,n,r,s,o){if(Array.isArray(n)){for(var c=0;c<n.length;c++)IR(i,n[c],r,s,o);return null}return r=hE(r),i&&i[eh]?i.O(n,r,xp(s)?!!s.capture:!!s,o):wS(i,n,r,!0,s,o)}function cE(i,n,r,s,o){if(Array.isArray(n))for(var c=0;c<n.length;c++)cE(i,n[c],r,s,o);else s=xp(s)?!!s.capture:!!s,r=hE(r),i&&i[eh]?(i=i.i,(n=String(n).toString())in i.g&&-1<(r=C_(c=i.g[n],r,s,o))&&(b_(c[r]),Array.prototype.splice.call(c,r,1),0==c.length&&(delete i.g[n],i.h--))):i&&(i=Pp(i))&&(n=i.g[n.toString()],i=-1,n&&(i=C_(n,r,s,o)),(r=-1<i?n[i]:null)&&uE(r))}function uE(i){if("number"!=typeof i&&i&&!i.ca){var n=i.src;if(n&&n[eh])w_(n.i,i);else{var r=i.type,s=i.proxy;n.removeEventListener?n.removeEventListener(r,s,i.capture):n.detachEvent?n.detachEvent(CS(r),s):n.addListener&&n.removeListener&&n.removeListener(s),(r=Pp(n))?(w_(r,i),0==r.h&&(r.src=null,n[lE]=null)):b_(i)}}}function CS(i){return i in Ps?Ps[i]:Ps[i]="on"+i}function SR(i,n){if(i.ca)i=!0;else{n=new Op(n,this);var r=i.listener,s=i.ia||i.src;i.fa&&uE(i),i=r.call(s,n)}return i}function Pp(i){return(i=i[lE])instanceof E_?i:null}var dE="__closure_events_fn_"+(1e9*Math.random()>>>0);function hE(i){return"function"==typeof i?i:(i[dE]||(i[dE]=function(n){return i.handleEvent(n)}),i[dE])}function ur(){du.call(this),this.i=new E_(this),this.P=this,this.I=null}function Nr(i,n){var r,s=i.I;if(s)for(r=[];s;s=s.I)r.push(s);if(i=i.P,s=n.type||n,"string"==typeof n)n=new yi(n,i);else if(n instanceof yi)n.target=n.target||i;else{var o=n;Np(n=new yi(s,i),o)}if(o=!0,r)for(var c=r.length-1;0<=c;c--){var h=n.g=r[c];o=S_(h,s,!0,n)&&o}if(o=S_(h=n.g=i,s,!0,n)&&o,o=S_(h,s,!1,n)&&o,r)for(c=0;c<r.length;c++)o=S_(h=n.g=r[c],s,!1,n)&&o}function S_(i,n,r,s){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var o=!0,c=0;c<n.length;++c){var h=n[c];if(h&&!h.ca&&h.capture==r){var m=h.listener,y=h.ia||h.src;h.fa&&w_(i.i,h),o=!1!==m.call(y,s)&&o}}return o&&!s.defaultPrevented}si(ur,du),ur.prototype[eh]=!0,ur.prototype.removeEventListener=function(i,n,r,s){cE(this,i,n,r,s)},ur.prototype.M=function(){if(ur.Z.M.call(this),this.i){var n,i=this.i;for(n in i.g){for(var r=i.g[n],s=0;s<r.length;s++)b_(r[s]);delete i.g[n],i.h--}}this.I=null},ur.prototype.N=function(i,n,r,s){return this.i.add(String(i),n,!1,r,s)},ur.prototype.O=function(i,n,r,s){return this.i.add(String(i),n,!0,r,s)};var Fp=Mt.JSON.stringify;function fE(){var i=mE;let n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var gE,SS=new class{constructor(i,n){this.i=i,this.j=n,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new TR,i=>i.reset());class TR{constructor(){this.next=this.g=this.h=null}set(n,r){this.h=n,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function pE(i){Mt.setTimeout(()=>{throw i},0)}function TS(i,n){gE||function(){var i=Mt.Promise.resolve(void 0);gE=function(){i.then(AS)}}(),T_||(gE(),T_=!0),mE.add(i,n)}var T_=!1,mE=new class{constructor(){this.h=this.g=null}add(n,r){const s=SS.get();s.set(n,r),this.h?this.h.next=s:this.g=s,this.h=s}};function AS(){for(var i;i=fE();){try{i.h.call(i.g)}catch(r){pE(r)}var n=SS;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}T_=!1}function Lp(i,n){ur.call(this),this.h=i||1,this.g=n||Mt,this.j=Ln(this.kb,this),this.l=Date.now()}function oo(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function th(i,n,r){if("function"==typeof i)r&&(i=Ln(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ln(i.handleEvent,i)}return 2147483647<Number(n)?-1:Mt.setTimeout(i,n||0)}function xS(i){i.g=th(()=>{i.g=null,i.i&&(i.i=!1,xS(i))},i.j);const n=i.h;i.h=null,i.m.apply(null,n)}si(Lp,ur),(Ze=Lp.prototype).da=!1,Ze.S=null,Ze.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Nr(this,"tick"),this.da&&(oo(this),this.start()))}},Ze.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.M=function(){Lp.Z.M.call(this),oo(this),delete this.g};class DR extends du{constructor(n,r){super(),this.m=n,this.j=r,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:xS(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function D_(i){du.call(this),this.h=i,this.g={}}si(D_,du);var pu=[];function _E(i,n,r,s){Array.isArray(r)||(r&&(pu[0]=r.toString()),r=pu);for(var o=0;o<r.length;o++){var c=I_(n,r[o],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function nh(i){kp(i.g,function(n,r){this.g.hasOwnProperty(r)&&uE(n)},i),i.g={}}function Vl(){this.g=!0}function gu(i,n,r,s){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(i,n){if(!i.g)return n;if(!n)return null;try{var r=JSON.parse(n);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var s=r[i];if(!(2>s.length)){var o=s[1];if(Array.isArray(o)&&!(1>o.length)){var c=o[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<o.length;h++)o[h]=""}}}return Fp(r)}catch(m){return n}}(i,r)+(s?" "+s:"")})}D_.prototype.M=function(){D_.Z.M.call(this),nh(this)},D_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vl.prototype.Aa=function(){this.g=!1},Vl.prototype.info=function(){};var mu={},A_=null;function x_(){return A_=A_||new ur}function RS(i){yi.call(this,mu.Ma,i)}function rh(i){const n=x_();Nr(n,new RS(n,i))}function _u(i,n){yi.call(this,mu.STAT_EVENT,i),this.stat=n}function vi(i){const n=x_();Nr(n,new _u(n,i))}function kS(i,n){yi.call(this,mu.Na,i),this.size=n}function Vp(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){i()},n)}mu.Ma="serverreachability",si(RS,yi),mu.STAT_EVENT="statevent",si(_u,yi),mu.Na="timingevent",si(kS,yi);var Na={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},NS={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function vE(){}function PS(){}vE.prototype.h=null;var Dn,M_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bE(){yi.call(this,"d")}function R_(){yi.call(this,"c")}function ih(){}function k_(i,n,r,s){this.l=i,this.j=n,this.m=r,this.X=s||1,this.V=new D_(this),this.P=EE,this.W=new Lp(i=rE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Wo}function Wo(){this.i=null,this.g="",this.h=!1}si(bE,yi),si(R_,yi),si(ih,vE),ih.prototype.g=function(){return new XMLHttpRequest},ih.prototype.i=function(){return{}},Dn=new ih;var EE=45e3,Bp={},wE={};function CE(i,n,r){i.K=1,i.v=oh(Ul(n)),i.s=r,i.U=!0,FS(i,null)}function FS(i,n){i.F=Date.now(),sh(i),i.A=Ul(i.v);var r=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),B_(r.h,"t",s),i.C=0,r=i.l.H,i.h=new Wo,i.g=HR(i.l,r?n:null,!i.s),0<i.O&&(i.L=new DR(Ln(i.Ia,i,i.g),i.O)),_E(i.V,i.g,"readystatechange",i.gb),n=i.H?v_(i.H):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,n)):(i.u="GET",i.g.ea(i.A,i.u,null,n)),rh(1),function(i,n,r,s,o,c){i.info(function(){if(i.g)if(c)for(var h="",m=c.split("&"),y=0;y<m.length;y++){var C=m[y].split("=");if(1<C.length){var T=C[0];C=C[1];var x=T.split("_");h=2<=x.length&&"type"==x[1]?h+(T+"=")+C+"&":h+(T+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+s+") [attempt "+o+"]: "+n+"\n"+r+"\n"+h})}(i.j,i.u,i.A,i.m,i.X,i.s)}function IE(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function SE(i,n,r){let o,s=!0;for(;!i.I&&i.C<r.length;){if(o=LS(i,r),o==wE){4==n&&(i.o=4,vi(14),s=!1),gu(i.j,i.m,null,"[Incomplete Response]");break}if(o==Bp){i.o=4,vi(15),gu(i.j,i.m,r,"[Invalid Chunk]"),s=!1;break}gu(i.j,i.m,o,null),O_(i,o)}IE(i)&&o!=wE&&o!=Bp&&(i.h.g="",i.C=0),4!=n||0!=r.length||i.h.h||(i.o=1,vi(16),s=!1),i.i=i.i&&s,s?0<r.length&&!i.aa&&(i.aa=!0,(n=i.l).g==i&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),$_(n),n.L=!0,vi(11))):(gu(i.j,i.m,r,"[Invalid Chunked Response]"),Pa(i),Oa(i))}function LS(i,n){var r=i.C,s=n.indexOf("\n",r);return-1==s?wE:(r=Number(n.substring(r,s)),isNaN(r)?Bp:(s+=1)+r>n.length?wE:(n=n.substr(s,r),i.C=s+r,n))}function sh(i){i.Y=Date.now()+i.P,VS(i,i.P)}function VS(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Vp(Ln(i.eb,i),n)}function N_(i){i.B&&(Mt.clearTimeout(i.B),i.B=null)}function Oa(i){0==i.l.G||i.I||BR(i.l,i)}function Pa(i){N_(i);var n=i.L;n&&"function"==typeof n.na&&n.na(),i.L=null,oo(i.W),nh(i.V),i.g&&(n=i.g,i.g=null,n.abort(),n.na())}function O_(i,n){try{var r=i.l;if(0!=r.G&&(r.g==i||xE(r.i,i)))if(r.I=i.N,!i.J&&xE(r.i,i)&&3==r.G){try{var s=r.Ca.g.parse(n)}catch(C){s=null}if(Array.isArray(s)&&3==s.length){var o=s;if(0==o[0])e:if(r.u)r.ta=o[1],0<r.ta-r.U&&37500>o[2]&&r.N&&0==r.A&&!r.v&&(r.v=Vp(Ln(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;z_(r),H_(r)}VE(r),vi(18)}if(1>=qS(r.i)&&r.ka){try{r.ka()}catch(C){}r.ka=void 0}}else zl(r,11)}else if((i.J||r.g==i)&&z_(r),!Xd(n))for(o=r.Ca.g.parse(n),n=0;n<o.length;n++){let C=o[n];if(r.U=C[0],C=C[1],2==r.G)if("c"==C[0]){r.J=C[1],r.la=C[2];const T=C[3];null!=T&&(r.ma=T,r.h.info("VER="+r.ma));const x=C[4];null!=x&&(r.za=x,r.h.info("SVER="+r.za));const R=C[5];null!=R&&"number"==typeof R&&0<R&&(r.K=s=1.5*R,r.h.info("backChannelRequestTimeoutMs_="+s)),s=r;const O=i.g;if(O){const U=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var c=s.i;!c.g&&(kr(U,"spdy")||kr(U,"quic")||kr(U,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(uh(c,c.h),c.h=null))}if(s.D){const te=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(s.sa=te,$n(s.F,s.D,te))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var h=i;if((s=r).oa=jR(s,s.H?s.la:null,s.W),h.J){bu(s.i,h);var m=h,y=s.K;y&&m.setTimeout(y),m.B&&(N_(m),sh(m)),s.g=h}else LE(s);0<r.l.length&&Gp(r)}else"stop"!=C[0]&&"close"!=C[0]||zl(r,7);else 3==r.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?zl(r,7):j_(r):"noop"!=C[0]&&r.j&&r.j.wa(C),r.A=0)}rh(4)}catch(C){}}function P_(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(Ap(i)||"string"==typeof i)fS(i,n,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(Ap(i)||"string"==typeof i){r=[];for(var s=i.length,o=0;o<s;o++)r.push(o)}else for(o in r=[],s=0,i)r[s++]=o;o=(s=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ap(i)){for(var n=[],r=i.length,s=0;s<r;s++)n.push(i[s]);return n}for(s in n=[],r=0,i)n[r++]=i[s];return n}(i)).length;for(var c=0;c<o;c++)n.call(void 0,s[c],r&&r[c],i)}}function yu(i,n){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var s=0;s<r;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof yu)for(r=i.T(),s=0;s<r.length;s++)this.set(r[s],i.get(r[s]));else for(s in i)this.set(s,i[s])}function TE(i){if(i.i!=i.g.length){for(var n=0,r=0;n<i.g.length;){var s=i.g[n];vu(i.h,s)&&(i.g[r++]=s),n++}i.g.length=r}if(i.i!=i.g.length){var o={};for(r=n=0;n<i.g.length;)vu(o,s=i.g[n])||(i.g[r++]=s,o[s]=1),n++;i.g.length=r}}function vu(i,n){return Object.prototype.hasOwnProperty.call(i,n)}(Ze=k_.prototype).setTimeout=function(i){this.P=i},Ze.gb=function(i){i=i.target;const n=this.L;n&&3==Yo(i)?n.l():this.Ia(i)},Ze.Ia=function(i){try{if(i==this.g)e:{const T=Yo(this.g);var n=this.g.Da();const x=this.g.ba();if(!(3>T)&&(3!=T||rE||this.g&&(this.h.h||this.g.ga()||NE(this.g)))){this.I||4!=T||7==n||rh(8==n||0>=x?3:2),N_(this);var r=this.g.ba();this.N=r;t:if(IE(this)){var s=NE(this.g);i="";var o=s.length,c=4==Yo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Pa(this),Oa(this);var h="";break t}this.h.i=new Mt.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,i+=this.h.i.decode(s[n],{stream:c&&n==o-1});s.splice(0,o),this.h.g+=i,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==r,function(i,n,r,s,o,c,h){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+o+"]: "+n+"\n"+r+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.X,T,r),this.i){if(this.$&&!this.J){t:{if(this.g){var m,y=this.g;if((m=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xd(m)){var C=m;break t}}C=null}if(!(r=C)){this.i=!1,this.o=3,vi(12),Pa(this),Oa(this);break e}gu(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,O_(this,r)}this.U?(SE(this,T,h),rE&&this.i&&3==T&&(_E(this.V,this.W,"tick",this.fb),this.W.start())):(gu(this.j,this.m,h,null),O_(this,h)),4==T&&Pa(this),this.i&&!this.I&&(4==T?BR(this.l,this):(this.i=!1,sh(this)))}else 400==r&&0<h.indexOf("Unknown SID")?(this.o=3,vi(12)):(this.o=0,vi(13)),Pa(this),Oa(this)}}}catch(T){}},Ze.fb=function(){if(this.g){var i=Yo(this.g),n=this.g.ga();this.C<n.length&&(N_(this),SE(this,i,n),this.i&&4!=i&&sh(this))}},Ze.cancel=function(){this.I=!0,Pa(this)},Ze.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(rh(3),vi(17)),Pa(this),this.o=2,Oa(this)):VS(this,this.Y-i)},(Ze=yu.prototype).R=function(){TE(this);for(var i=[],n=0;n<this.g.length;n++)i.push(this.h[this.g[n]]);return i},Ze.T=function(){return TE(this),this.g.concat()},Ze.get=function(i,n){return vu(this.h,i)?this.h[i]:n},Ze.set=function(i,n){vu(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=n},Ze.forEach=function(i,n){for(var r=this.T(),s=0;s<r.length;s++){var o=r[s],c=this.get(o);i.call(n,c,o,this)}};var US=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bl(i,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Bl){this.g=void 0!==n?n:i.g,Up(this,i.j),this.s=i.s,F_(this,i.i),L_(this,i.m),this.l=i.l,n=i.h;var r=new lh;r.i=n.i,n.g&&(r.g=new yu(n.g),r.h=n.h),RR(this,r),this.o=i.o}else i&&(r=String(i).match(US))?(this.g=!!n,Up(this,r[1]||"",!0),this.s=ah(r[2]||""),F_(this,r[3]||"",!0),L_(this,r[4]),this.l=ah(r[5]||"",!0),RR(this,r[6]||"",!0),this.o=ah(r[7]||"")):(this.g=!!n,this.h=new lh(null,this.g))}function Ul(i){return new Bl(i)}function Up(i,n,r){i.j=r?ah(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function F_(i,n,r){i.i=r?ah(n,!0):n}function L_(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function RR(i,n,r){n instanceof lh?(i.h=n,function(i,n){n&&!i.j&&(jl(i),i.i=null,i.g.forEach(function(r,s){var o=s.toLowerCase();s!=o&&(OR(this,s),B_(this,o,r))},i)),i.j=n}(i.h,i.g)):(r||(n=V_(n,HS)),i.h=new lh(n,i.g))}function $n(i,n,r){i.h.set(n,r)}function oh(i){return $n(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ah(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function V_(i,n,r){return"string"==typeof i?(i=encodeURI(i).replace(n,ao),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ao(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Bl.prototype.toString=function(){var i=[],n=this.j;n&&i.push(V_(n,NR,!0),":");var r=this.i;return(r||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(V_(n,NR,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(V_(r,"/"==r.charAt(0)?A1:D1,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",V_(r,GS)),i.join("")};var NR=/[#\/\?@]/g,D1=/[#\?:]/g,A1=/[#\?]/g,HS=/[#\?@]/g,GS=/#/g;function lh(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function jl(i){i.g||(i.g=new yu,i.h=0,i.i&&function(i,n){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var s=i[r].indexOf("="),o=null;if(0<=s){var c=i[r].substring(0,s);o=i[r].substring(s+1)}else c=i[r];n(c,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(i.i,function(n,r){i.add(decodeURIComponent(n.replace(/\+/g," ")),r)}))}function OR(i,n){jl(i),n=ch(i,n),vu(i.g.h,n)&&(i.i=null,i.h-=i.g.get(n).length,vu((i=i.g).h,n)&&(delete i.h[n],i.i--,i.g.length>2*i.i&&TE(i)))}function DE(i,n){return jl(i),n=ch(i,n),vu(i.g.h,n)}function B_(i,n,r){OR(i,n),0<r.length&&(i.i=null,i.g.set(ch(i,n),Fl(r)),i.h+=r.length)}function ch(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}function $S(i){this.l=i||FR,i=Mt.PerformanceNavigationTiming?0<(i=Mt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ea&&Mt.g.Ea()&&Mt.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=lh.prototype).add=function(i,n){jl(this),this.i=null,i=ch(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(n),this.h+=1,this},Ze.forEach=function(i,n){jl(this),this.g.forEach(function(r,s){fS(r,function(o){i.call(n,o,s,this)},this)},this)},Ze.T=function(){jl(this);for(var i=this.g.R(),n=this.g.T(),r=[],s=0;s<n.length;s++)for(var o=i[s],c=0;c<o.length;c++)r.push(n[s]);return r},Ze.R=function(i){jl(this);var n=[];if("string"==typeof i)DE(this,i)&&(n=Jd(n,this.g.get(ch(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)n=Jd(n,i[r])}return n},Ze.set=function(i,n){return jl(this),this.i=null,DE(this,i=ch(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},Ze.get=function(i,n){return i&&0<(i=this.R(i)).length?String(i[0]):n},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],n=this.g.T(),r=0;r<n.length;r++){var s=n[r],o=encodeURIComponent(String(s));s=this.R(s);for(var c=0;c<s.length;c++){var h=o;""!==s[c]&&(h+="="+encodeURIComponent(String(s[c]))),i.push(h)}}return this.i=i.join("&")};var FR=10;function zS(i){return!!i.h||!!i.g&&i.g.size>=i.j}function qS(i){return i.h?1:i.g?i.g.size:0}function xE(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function uh(i,n){i.g?i.g.add(n):i.h=n}function bu(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function ME(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let n=i.i;for(const r of i.g.values())n=n.concat(r.D);return n}return Fl(i.i)}function bs(){}function jp(){this.g=new bs}function LR(i,n,r){const s=r||"";try{P_(i,function(o,c){let h=o;xp(o)&&(h=Fp(o)),n.push(s+c+"="+encodeURIComponent(h))})}catch(o){throw n.push(s+"type="+encodeURIComponent("_badmap")),o}}function dh(i,n,r,s,o){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,o(s)}catch(c){}}function is(i){this.l=i.$b||null,this.j=i.ib||!1}function Hl(i,n){ur.call(this),this.D=i,this.u=n,this.m=void 0,this.readyState=Br,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$S.prototype.cancel=function(){if(this.i=ME(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},bs.prototype.stringify=function(i){return Mt.JSON.stringify(i,void 0)},bs.prototype.parse=function(i){return Mt.JSON.parse(i,void 0)},si(is,vE),is.prototype.g=function(){return new Hl(this.l,this.j)},is.prototype.i=function(i){return function(){return i}}({}),si(Hl,ur);var Br=0;function Gl(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function $l(i){i.readyState=4,i.l=null,i.j=null,i.A=null,bi(i)}function bi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Ze=Hl.prototype).open=function(i,n){if(this.readyState!=Br)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,bi(this)},Ze.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.D||Mt).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$l(this)),this.readyState=Br},Ze.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Mt.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gl(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Ze.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?$l(this):bi(this),3==this.readyState&&Gl(this)}},Ze.Ua=function(i){this.g&&(this.response=this.responseText=i,$l(this))},Ze.Ta=function(i){this.g&&(this.response=i,$l(this))},Ze.ha=function(){this.g&&$l(this)},Ze.setRequestHeader=function(i,n){this.v.append(i,n)},Ze.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],n=this.h.entries();for(var r=n.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=n.next();return i.join("\r\n")},Object.defineProperty(Hl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var RE=Mt.JSON.parse;function kn(i){ur.call(this),this.headers=new yu,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Eu,this.K=this.L=!1}si(kn,ur);var Eu="",hh=/^https?$/i,fh=["POST","PUT"];function gh(i){return"content-type"==i.toLowerCase()}function wu(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,Cu(i),Hp(i)}function Cu(i){i.D||(i.D=!0,Nr(i,"complete"),Nr(i,"error"))}function Iu(i){if(i.h&&void 0!==uS&&(!i.C[1]||4!=Yo(i)||2!=i.ba()))if(i.v&&4==Yo(i))th(i.Fa,0,i);else if(Nr(i,"readystatechange"),4==Yo(i)){i.h=!1;try{const m=i.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var s;if(s=0===m){var o=String(i.H).match(US)[1]||null;if(!o&&Mt.self&&Mt.self.location){var c=Mt.self.location.protocol;o=c.substr(0,c.length-1)}s=!hh.test(o?o.toLowerCase():"")}r=s}if(r)Nr(i,"complete"),Nr(i,"success");else{i.m=6;try{var h=2<Yo(i)?i.g.statusText:""}catch(y){h=""}i.j=h+" ["+i.ba()+"]",Cu(i)}}finally{Hp(i)}}}function Hp(i,n){if(i.g){kE(i);const r=i.g,s=i.C[0]?so:null;i.g=null,i.C=null,n||Nr(i,"ready");try{r.onreadystatechange=s}catch(o){}}}function kE(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Mt.clearTimeout(i.A),i.A=null)}function Yo(i){return i.g?i.g.readyState:0}function NE(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Eu:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(n){return null}}function U_(i,n,r){e:{for(s in r){var s=!1;break e}s=!0}s||(r=function(i){let n="";return kp(i,function(r,s){n+=s,n+=":",n+=r,n+="\r\n"}),n}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):$n(i,n,r))}function mh(i,n,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||n}function OE(i){this.za=0,this.l=[],this.h=new Vl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=mh("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=mh("baseRetryDelayMs",5e3,i),this.$a=mh("retryDelaySeedMs",1e4,i),this.Ya=mh("forwardChannelMaxRetries",2,i),this.ra=mh("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new $S(i&&i.concurrentRequestLimit),this.Ca=new jp,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function j_(i){if(PE(i),3==i.G){var n=i.V++,r=Ul(i.F);$n(r,"SID",i.J),$n(r,"RID",n),$n(r,"TYPE","terminate"),G_(i,r),(n=new k_(i,i.h,n,void 0)).K=2,n.v=oh(Ul(r)),r=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(r=Mt.navigator.sendBeacon(n.v.toString(),"")),!r&&Mt.Image&&((new Image).src=n.v,r=!0),r||(n.g=HR(n.l,null),n.g.ea(n.v)),n.F=Date.now(),sh(n)}UR(i)}function H_(i){i.g&&($_(i),i.g.cancel(),i.g=null)}function PE(i){H_(i),i.u&&(Mt.clearTimeout(i.u),i.u=null),z_(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Mt.clearTimeout(i.m),i.m=null)}function FE(i,n){i.l.push(new class{constructor(i,n){this.h=i,this.g=n}}(i.Za++,n)),3==i.G&&Gp(i)}function Gp(i){zS(i.i)||i.m||(i.m=!0,TS(i.Ha,i),i.C=0)}function KS(i,n){var r;r=n?n.m:i.V++;const s=Ul(i.F);$n(s,"SID",i.J),$n(s,"RID",r),$n(s,"AID",i.U),G_(i,s),i.o&&i.s&&U_(s,i.o,i.s),r=new k_(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),n&&(i.l=n.D.concat(i.l)),n=ZS(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),uh(i.i,r),CE(r,s,n)}function G_(i,n){i.j&&P_({},function(r,s){$n(n,s,r)})}function ZS(i,n,r){r=Math.min(i.l.length,r);var s=i.j?Ln(i.j.Oa,i.j,i):null;e:{var o=i.l;let c=-1;for(;;){const h=["count="+r];-1==c?0<r?(c=o[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let m=!0;for(let y=0;y<r;y++){let C=o[y].h;const T=o[y].g;if(C-=c,0>C)c=Math.max(0,o[y].h-100),m=!1;else try{LR(T,h,"req"+C+"_")}catch(x){s&&s(T)}}if(m){s=h.join("&");break e}}}return i=i.l.splice(0,r),n.D=i,s}function LE(i){i.g||i.u||(i.Y=1,TS(i.Ga,i),i.A=0)}function VE(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Vp(Ln(i.Ga,i),JS(i,i.A)),i.A++,0))}function $_(i){null!=i.B&&(Mt.clearTimeout(i.B),i.B=null)}function QS(i){i.g=new k_(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var n=Ul(i.oa);$n(n,"RID","rpc"),$n(n,"SID",i.J),$n(n,"CI",i.N?"0":"1"),$n(n,"AID",i.U),G_(i,n),$n(n,"TYPE","xmlhttp"),i.o&&i.s&&U_(n,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=oh(Ul(n)),r.s=null,r.U=!0,FS(r,i)}function z_(i){null!=i.v&&(Mt.clearTimeout(i.v),i.v=null)}function BR(i,n){var r=null;if(i.g==n){z_(i),$_(i),i.g=null;var s=2}else{if(!xE(i.i,n))return;r=n.D,bu(i.i,n),s=1}if(i.I=n.N,0!=i.G)if(n.i)if(1==s){r=n.s?n.s.length:0,n=Date.now()-n.F;var o=i.C;Nr(s=x_(),new kS(s,r,n,o)),Gp(i)}else LE(i);else if(3==(o=n.o)||0==o&&0<i.I||!(1==s&&function(i,n){return!(qS(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=n.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Vp(Ln(i.Ha,i,n),JS(i,i.C)),i.C++,0)))}(i,n)||2==s&&VE(i)))switch(r&&0<r.length&&(n=i.i,n.i=n.i.concat(r)),o){case 1:zl(i,5);break;case 4:zl(i,10);break;case 3:zl(i,6);break;default:zl(i,2)}}function JS(i,n){let r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*n}function zl(i,n){if(i.h.info("Error code "+n),2==n){var r=null;i.j&&(r=null);var s=Ln(i.jb,i);r||(r=new Bl("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||Up(r,"https"),oh(r)),function(i,n){const r=new Vl;if(Mt.Image){const s=new Image;s.onload=Rp(dh,r,s,"TestLoadImage: loaded",!0,n),s.onerror=Rp(dh,r,s,"TestLoadImage: error",!1,n),s.onabort=Rp(dh,r,s,"TestLoadImage: abort",!1,n),s.ontimeout=Rp(dh,r,s,"TestLoadImage: timeout",!1,n),Mt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else n(!1)}(r.toString(),s)}else vi(2);i.G=0,i.j&&i.j.va(n),UR(i),PE(i)}function UR(i){i.G=0,i.I=-1,i.j&&((0!=ME(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Fl(i.l),i.l.length=0),i.j.ua())}function jR(i,n,r){let s=function(i){return i instanceof Bl?Ul(i):new Bl(i,void 0)}(r);if(""!=s.i)n&&F_(s,n+"."+s.i),L_(s,s.m);else{const o=Mt.location;s=function(i,n,r,s){var o=new Bl(null,void 0);return i&&Up(o,i),n&&F_(o,n),r&&L_(o,r),s&&(o.l=s),o}(o.protocol,n?n+"."+o.hostname:o.hostname,+o.port,r)}return i.aa&&kp(i.aa,function(o,c){$n(s,c,o)}),r=i.sa,(n=i.D)&&r&&$n(s,n,r),$n(s,"VER",i.ma),G_(i,s),s}function HR(i,n,r){if(n&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new kn(r&&i.Ba&&!i.qa?new is({ib:!0}):i.qa)).L=i.H,n}function XS(){}function BE(){if(fu&&!(10<=Number(aE)))throw Error("Environmental error: no available transport.")}function Es(i,n){ur.call(this),this.g=new OE(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(i?i["X-WebChannel-Client-Profile"]=n.ya:i={"X-WebChannel-Client-Profile":n.ya}),this.g.P=i,(i=n&&n.httpHeadersOverwriteParam)&&!Xd(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!Xd(n)&&(this.g.D=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new ql(this)}function eT(i){bE.call(this);var n=i.__sm__;if(n){e:{for(const r in n){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function q_(){R_.call(this),this.status=1}function ql(i){this.g=i}(Ze=kn.prototype).ea=function(i,n,r,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);n=n?n.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Dn.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:Dn),this.g.onreadystatechange=Ln(this.Fa,this);try{this.F=!0,this.g.open(n,String(i),!0),this.F=!1}catch(c){return void wu(this,c)}i=r||"";const o=new yu(this.headers);s&&P_(s,function(c,h){o.set(h,c)}),s=function(i){e:{var n=gh;const r=i.length,s="string"==typeof i?i.split(""):i;for(let o=0;o<r;o++)if(o in s&&n.call(void 0,s[o],o,i)){n=o;break e}n=-1}return 0>n?null:"string"==typeof i?i.charAt(n):i[n]}(o.T()),r=Mt.FormData&&i instanceof Mt.FormData,!(0<=Qb(fh,n))||s||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(c,h){this.g.setRequestHeader(h,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kE(this),0<this.B&&((this.K=function(i){return fu&&_S()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ln(this.pa,this)):this.A=th(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){wu(this,c)}},Ze.pa=function(){void 0!==uS&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},Ze.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Nr(this,"complete"),Nr(this,"abort"),Hp(this))},Ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hp(this,!0)),kn.Z.M.call(this)},Ze.Fa=function(){this.s||(this.F||this.v||this.l?Iu(this):this.cb())},Ze.cb=function(){Iu(this)},Ze.ba=function(){try{return 2<Yo(this)?this.g.status:-1}catch(i){return-1}},Ze.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Ze.Qa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),RE(n)}},Ze.Da=function(){return this.m},Ze.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=OE.prototype).ma=8,Ze.G=1,Ze.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(n){}},Ze.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const o=new k_(this,this.h,i,void 0);let c=this.s;if(this.P&&(c?(c=v_(c),Np(c,this.P)):c=this.P),null===this.o&&(o.H=c),this.ja)e:{for(var n=0,r=0;r<this.l.length;r++){var s=this.l[r];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(n+=s)){n=r;break e}if(4096===n||r===this.l.length-1){n=r+1;break e}}n=1e3}else n=1e3;n=ZS(this,o,n),$n(r=Ul(this.F),"RID",i),$n(r,"CVER",22),this.D&&$n(r,"X-HTTP-Session-Id",this.D),G_(this,r),this.o&&c&&U_(r,this.o,c),uh(this.i,o),this.Ra&&$n(r,"TYPE","init"),this.ja?($n(r,"$req",n),$n(r,"SID","null"),o.$=!0,CE(o,r,null)):CE(o,r,n),this.G=2}}else 3==this.G&&(i?KS(this,i):0==this.l.length||zS(this.i)||KS(this))},Ze.Ga=function(){if(this.u=null,QS(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Vp(Ln(this.bb,this),i)}},Ze.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,vi(10),H_(this),QS(this))},Ze.ab=function(){null!=this.v&&(this.v=null,H_(this),VE(this),vi(19))},Ze.jb=function(i){i?(this.h.info("Successfully pinged google.com"),vi(2)):(this.h.info("Failed to ping google.com"),vi(1))},(Ze=XS.prototype).xa=function(){},Ze.wa=function(){},Ze.va=function(){},Ze.ua=function(){},Ze.Oa=function(){},BE.prototype.g=function(i,n){return new Es(i,n)},si(Es,ur),Es.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,n=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),TS(Ln(i.hb,i,n))),vi(0),i.W=n,i.aa=r||{},i.N=i.X,i.F=jR(i,null,i.W),Gp(i)},Es.prototype.close=function(){j_(this.g)},Es.prototype.u=function(i){if("string"==typeof i){var n={};n.__data__=i,FE(this.g,n)}else this.v?((n={}).__data__=Fp(i),FE(this.g,n)):FE(this.g,i)},Es.prototype.M=function(){this.g.j=null,delete this.j,j_(this.g),delete this.g,Es.Z.M.call(this)},si(eT,bE),si(q_,R_),si(ql,XS),ql.prototype.xa=function(){Nr(this.g,"a")},ql.prototype.wa=function(i){Nr(this.g,new eT(i))},ql.prototype.va=function(i){Nr(this.g,new q_(i))},ql.prototype.ua=function(){Nr(this.g,"b")},BE.prototype.createWebChannel=BE.prototype.g,Es.prototype.send=Es.prototype.u,Es.prototype.open=Es.prototype.m,Es.prototype.close=Es.prototype.close,Na.NO_ERROR=0,Na.TIMEOUT=8,Na.HTTP_ERROR=6,NS.COMPLETE="complete",PS.EventType=M_,M_.OPEN="a",M_.CLOSE="b",M_.ERROR="c",M_.MESSAGE="d",ur.prototype.listen=ur.prototype.N,kn.prototype.listenOnce=kn.prototype.O,kn.prototype.getLastError=kn.prototype.La,kn.prototype.getLastErrorCode=kn.prototype.Da,kn.prototype.getStatus=kn.prototype.ba,kn.prototype.getResponseJson=kn.prototype.Qa,kn.prototype.getResponseText=kn.prototype.ga,kn.prototype.send=kn.prototype.ea;var GR=Pl.createWebChannelTransport=function(){return new BE},x1=Pl.getStatEventTarget=function(){return x_()},tT=Pl.ErrorCode=Na,M1=Pl.EventType=NS,$R=Pl.Event=mu,UE=Pl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},R1=Pl.FetchXmlHttpFactory=is,W_=Pl.WebChannel=PS,_h=Pl.XhrIo=kn;class oi{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let Su="9.1.0";const Wl=new qo.Yd("@firebase/firestore");function Y_(){return Wl.logLevel}function Be(i,...n){if(Wl.logLevel<=qo.in.DEBUG){const r=n.map(jE);Wl.debug(`Firestore (${Su}): ${i}`,...r)}}function dr(i,...n){if(Wl.logLevel<=qo.in.ERROR){const r=n.map(jE);Wl.error(`Firestore (${Su}): ${i}`,...r)}}function $p(i,...n){if(Wl.logLevel<=qo.in.WARN){const r=n.map(jE);Wl.warn(`Firestore (${Su}): ${i}`,...r)}}function jE(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function st(i="Unexpected state"){const n=`FIRESTORE (${Su}) INTERNAL ASSERTION FAILED: `+i;throw dr(n),new Error(n)}function Et(i,n){i||st()}function je(i,n){return i}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Error{constructor(n,r){super(r),this.code=n,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}class Z_{constructor(n,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class k1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,r){n.enqueueRetryable(()=>r(oi.UNAUTHENTICATED))}shutdown(){}}class HE{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,r){this.changeListener=r,n.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class qR{constructor(n){this.t=n,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,r){var s=this;let o=this.i;const c=C=>this.i!==o?(o=this.i,r(C)):Promise.resolve();let h=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Or,n.enqueueRetryable(()=>c(this.currentUser))};const m=()=>{const C=h;n.enqueueRetryable((0,Ce.Z)(function*(){yield C.promise,yield c(s.currentUser)}))},y=C=>{Be("FirebaseCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>y(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?y(C):(Be("FirebaseCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Or)}},0),m()}getToken(){const n=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==n?(Be("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Et("string"==typeof s.accessToken),new Z_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return Et(null===n||"string"==typeof n),new oi(n)}}class N1{constructor(n,r,s){this.h=n,this.l=r,this.m=s,this.type="FirstParty",this.user=oi.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class zp{constructor(n,r,s){this.h=n,this.l=r,this.m=s}getToken(){return Promise.resolve(new N1(this.h,this.l,this.m))}start(n,r){n.enqueueRetryable(()=>r(oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ws{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=s=>this.g(s),this.p=s=>r.writeSequenceNumber(s))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function GE(i){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(r);else for(let s=0;s<i;s++)r[s]=Math.floor(256*Math.random());return r}ws.T=-1;class Q_{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length;let s="";for(;s.length<20;){const o=GE(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<r&&(s+=n.charAt(o[c]%n.length))}return s}}function Zt(i,n){return i<n?-1:i>n?1:0}function Yl(i,n,r){return i.length===n.length&&i.every((s,o)=>r(s,n[o]))}function J_(i){return i+"\0"}class Pr{constructor(n,r){if(this.seconds=n,this.nanoseconds=r,r<0)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return Pr.fromMillis(Date.now())}static fromDate(n){return Pr.fromMillis(n.getTime())}static fromMillis(n){const r=Math.floor(n/1e3),s=Math.floor(1e6*(n-1e3*r));return new Pr(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?Zt(this.nanoseconds,n.nanoseconds):Zt(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Pt{constructor(n){this.timestamp=n}static fromTimestamp(n){return new Pt(n)}static min(){return new Pt(new Pr(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function nT(i){let n=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n++;return n}function Fa(i,n){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n(r,i[r])}function X_(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class qp{constructor(n,r,s){void 0===r?r=0:r>n.length&&st(),void 0===s?s=n.length-r:s>n.length-r&&st(),this.segments=n,this.offset=r,this.len=s}get length(){return this.len}isEqual(n){return 0===qp.comparator(this,n)}child(n){const r=this.segments.slice(this.offset,this.limit());return n instanceof qp?n.forEach(s=>{r.push(s)}):r.push(n),this.construct(r)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}forEach(n){for(let r=this.offset,s=this.limit();r<s;r++)n(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,r){const s=Math.min(n.length,r.length);for(let o=0;o<s;o++){const c=n.get(o),h=r.get(o);if(c<h)return-1;if(c>h)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}class on extends qp{construct(n,r,s){return new on(n,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const r=[];for(const s of n){if(s.indexOf("//")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(o=>o.length>0))}return new on(r)}static emptyPath(){return new on([])}}const $E=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends qp{construct(n,r,s){return new Ur(n,r,s)}static isValidIdentifier(n){return $E.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ur(["__name__"])}static fromServerFormat(n){const r=[];let s="",o=0;const c=()=>{if(0===s.length)throw new Ne(_e.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let h=!1;for(;o<n.length;){const m=n[o];if("\\"===m){if(o+1===n.length)throw new Ne(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const y=n[o+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Ne(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);s+=y,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(s+=m,o++):(c(),o++)}if(c(),h)throw new Ne(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new Ur(r)}static emptyPath(){return new Ur([])}}class Kl{constructor(n){this.fields=n,n.sort(Ur.comparator)}covers(n){for(const r of this.fields)if(r.isPrefixOf(n))return!0;return!1}isEqual(n){return Yl(this.fields,n.fields,(r,s)=>r.isEqual(s))}}class Er{constructor(n){this.binaryString=n}static fromBase64String(n){const r=atob(n);return new Er(r)}static fromUint8Array(n){const r=function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o}(n);return new Er(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return Zt(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const WR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function La(i){if(Et(!!i),"string"==typeof i){let n=0;const r=WR.exec(i);if(Et(!!r),r[1]){let o=r[1];o=(o+"000000000").substr(0,9),n=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:n}}return{seconds:hr(i.seconds),nanos:hr(i.nanos)}}function hr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Zl(i){return"string"==typeof i?Er.fromBase64String(i):Er.fromUint8Array(i)}function ey(i){var n,r;return"server_timestamp"===(null===(r=((null===(n=null==i?void 0:i.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function rT(i){const n=i.mapValue.fields.__previous_value__;return ey(n)?rT(n):n}function yh(i){const n=La(i.mapValue.fields.__local_write_time__.timestampValue);return new Pr(n.seconds,n.nanos)}function Ql(i){return null==i}function vh(i){return 0===i&&1/i==-1/0}function ty(i){return"number"==typeof i&&Number.isInteger(i)&&!vh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class nt{constructor(n){this.path=n}static fromPath(n){return new nt(on.fromString(n))}static fromName(n){return new nt(on.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===on.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,r){return on.comparator(n.path,r.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new nt(new on(n.slice()))}}function Jl(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ey(i)?4:10:st()}function lo(i,n){const r=Jl(i);if(r!==Jl(n))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return yh(i).isEqual(yh(n));case 3:return function(s,o){if("string"==typeof s.timestampValue&&"string"==typeof o.timestampValue&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=La(s.timestampValue),h=La(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return o=n,Zl(i.bytesValue).isEqual(Zl(o.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(s,o){return hr(s.geoPointValue.latitude)===hr(o.geoPointValue.latitude)&&hr(s.geoPointValue.longitude)===hr(o.geoPointValue.longitude)}(i,n);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return hr(s.integerValue)===hr(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=hr(s.doubleValue),h=hr(o.doubleValue);return c===h?vh(c)===vh(h):isNaN(c)&&isNaN(h)}return!1}(i,n);case 9:return Yl(i.arrayValue.values||[],n.arrayValue.values||[],lo);case 10:return function(s,o){const c=s.mapValue.fields||{},h=o.mapValue.fields||{};if(nT(c)!==nT(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(void 0===h[m]||!lo(c[m],h[m])))return!1;return!0}(i,n);default:return st()}var o}function bh(i,n){return void 0!==(i.values||[]).find(r=>lo(r,n))}function Tu(i,n){const r=Jl(i),s=Jl(n);if(r!==s)return Zt(r,s);switch(r){case 0:return 0;case 1:return Zt(i.booleanValue,n.booleanValue);case 2:return function(o,c){const h=hr(o.integerValue||o.doubleValue),m=hr(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(i,n);case 3:return qE(i.timestampValue,n.timestampValue);case 4:return qE(yh(i),yh(n));case 5:return Zt(i.stringValue,n.stringValue);case 6:return function(o,c){const h=Zl(o),m=Zl(c);return h.compareTo(m)}(i.bytesValue,n.bytesValue);case 7:return function(o,c){const h=o.split("/"),m=c.split("/");for(let y=0;y<h.length&&y<m.length;y++){const C=Zt(h[y],m[y]);if(0!==C)return C}return Zt(h.length,m.length)}(i.referenceValue,n.referenceValue);case 8:return function(o,c){const h=Zt(hr(o.latitude),hr(c.latitude));return 0!==h?h:Zt(hr(o.longitude),hr(c.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(o,c){const h=o.values||[],m=c.values||[];for(let y=0;y<h.length&&y<m.length;++y){const C=Tu(h[y],m[y]);if(C)return C}return Zt(h.length,m.length)}(i.arrayValue,n.arrayValue);case 10:return function(o,c){const h=o.fields||{},m=Object.keys(h),y=c.fields||{},C=Object.keys(y);m.sort(),C.sort();for(let T=0;T<m.length&&T<C.length;++T){const x=Zt(m[T],C[T]);if(0!==x)return x;const R=Tu(h[m[T]],y[C[T]]);if(0!==R)return R}return Zt(m.length,C.length)}(i.mapValue,n.mapValue);default:throw st()}}function qE(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return Zt(i,n);const r=La(i),s=La(n),o=Zt(r.seconds,s.seconds);return 0!==o?o:Zt(r.nanos,s.nanos)}function ny(i){return ry(i)}function ry(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const o=La(s);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Zl(i.bytesValue).toBase64():"referenceValue"in i?nt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(s){let o="[",c=!0;for(const h of s.values||[])c?c=!1:o+=",",o+=ry(h);return o+"]"}(i.arrayValue):"mapValue"in i?function(s){const o=Object.keys(s.fields||{}).sort();let c="{",h=!0;for(const m of o)h?h=!1:c+=",",c+=`${m}:${ry(s.fields[m])}`;return c+"}"}(i.mapValue):st();var n}function WE(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function YE(i){return!!i&&"integerValue"in i}function KE(i){return!!i&&"arrayValue"in i}function ZE(i){return!!i&&"nullValue"in i}function iT(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Xn(i){return!!i&&"mapValue"in i}function Eh(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return Fa(i.mapValue.fields,(r,s)=>n.mapValue.fields[r]=Eh(s)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Eh(i.arrayValue.values[r]);return n}return Object.assign({},i)}class Ei{constructor(n){this.value=n}static empty(){return new Ei({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let r=this.value;for(let s=0;s<n.length-1;++s)if(r=(r.mapValue.fields||{})[n.get(s)],!Xn(r))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}set(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=Eh(r)}setAll(n){let r=Ur.emptyPath(),s={},o=[];n.forEach((h,m)=>{if(!r.isImmediateParentOf(m)){const y=this.getFieldsMap(r);this.applyChanges(y,s,o),s={},o=[],r=m.popLast()}h?s[m.lastSegment()]=Eh(h):o.push(m.lastSegment())});const c=this.getFieldsMap(r);this.applyChanges(c,s,o)}delete(n){const r=this.field(n.popLast());Xn(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}isEqual(n){return lo(this.value,n.value)}getFieldsMap(n){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<n.length;++s){let o=r.mapValue.fields[n.get(s)];Xn(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},r.mapValue.fields[n.get(s)]=o),r=o}return r.mapValue.fields}applyChanges(n,r,s){Fa(r,(o,c)=>n[o]=c);for(const o of s)delete n[o]}clone(){return new Ei(Eh(this.value))}}function sT(i){const n=[];return Fa(i.fields,(r,s)=>{const o=new Ur([r]);if(Xn(s)){const c=sT(s.mapValue).fields;if(0===c.length)n.push(o);else for(const h of c)n.push(o.child(h))}else n.push(o)}),new Kl(n)}class Nn{constructor(n,r,s,o,c){this.key=n,this.documentType=r,this.version=s,this.data=o,this.documentState=c}static newInvalidDocument(n){return new Nn(n,0,Pt.min(),Ei.empty(),0)}static newFoundDocument(n,r,s){return new Nn(n,1,r,s,0)}static newNoDocument(n,r){return new Nn(n,2,r,Ei.empty(),0)}static newUnknownDocument(n,r){return new Nn(n,3,r,Ei.empty(),2)}convertToFoundDocument(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof Nn&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new Nn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class YR{constructor(n,r=null,s=[],o=[],c=null,h=null,m=null){this.path=n,this.collectionGroup=r,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.A=null}}function QE(i,n=null,r=[],s=[],o=null,c=null,h=null){return new YR(i,n,r,s,o,c,h)}function wh(i){const n=je(i);if(null===n.A){let r=n.path.canonicalString();null!==n.collectionGroup&&(r+="|cg:"+n.collectionGroup),r+="|f:",r+=n.filters.map(s=>function(i){return i.field.canonicalString()+i.op.toString()+ny(i.value)}(s)).join(","),r+="|ob:",r+=n.orderBy.map(s=>{return(o=s).field.canonicalString()+o.dir;var o}).join(","),Ql(n.limit)||(r+="|l:",r+=n.limit),n.startAt&&(r+="|lb:",r+=ss(n.startAt)),n.endAt&&(r+="|ub:",r+=ss(n.endAt)),n.A=r}return n.A}function iy(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let o=0;o<i.orderBy.length;o++)if(!aT(i.orderBy[o],n.orderBy[o]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let o=0;o<i.filters.length;o++)if((r=i.filters[o]).op!==(s=n.filters[o]).op||!r.field.isEqual(s.field)||!lo(r.value,s.value))return!1;var r,s;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!cT(i.startAt,n.startAt)&&cT(i.endAt,n.endAt)}function sy(i){return nt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class wi extends class{}{constructor(n,r,s){super(),this.field=n,this.op=r,this.value=s}static create(n,r,s){return n.isKeyField()?"in"===r||"not-in"===r?this.R(n,r,s):new oT(n,r,s):"array-contains"===r?new Ko(n,s):"in"===r?new ZR(n,s):"not-in"===r?new QR(n,s):"array-contains-any"===r?new Zo(n,s):new wi(n,r,s)}static R(n,r,s){return"in"===r?new O1(n,s):new JE(n,s)}matches(n){const r=n.data.field(this.field);return"!="===this.op?null!==r&&this.P(Tu(r,this.value)):null!==r&&Jl(this.value)===Jl(r)&&this.P(Tu(r,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return st()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class oT extends wi{constructor(n,r,s){super(n,r,s),this.key=nt.fromName(s.referenceValue)}matches(n){const r=nt.comparator(n.key,this.key);return this.P(r)}}class O1 extends wi{constructor(n,r){super(n,"in",r),this.keys=oy(0,r)}matches(n){return this.keys.some(r=>r.isEqual(n.key))}}class JE extends wi{constructor(n,r){super(n,"not-in",r),this.keys=oy(0,r)}matches(n){return!this.keys.some(r=>r.isEqual(n.key))}}function oy(i,n){var r;return((null===(r=n.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>nt.fromName(s.referenceValue))}class Ko extends wi{constructor(n,r){super(n,"array-contains",r)}matches(n){const r=n.data.field(this.field);return KE(r)&&bh(r.arrayValue,this.value)}}class ZR extends wi{constructor(n,r){super(n,"in",r)}matches(n){const r=n.data.field(this.field);return null!==r&&bh(this.value.arrayValue,r)}}class QR extends wi{constructor(n,r){super(n,"not-in",r)}matches(n){if(bh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=n.data.field(this.field);return null!==r&&!bh(this.value.arrayValue,r)}}class Zo extends wi{constructor(n,r){super(n,"array-contains-any",r)}matches(n){const r=n.data.field(this.field);return!(!KE(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>bh(this.value.arrayValue,s))}}class $i{constructor(n,r){this.position=n,this.before=r}}function ss(i){return`${i.before?"b":"a"}:${i.position.map(n=>ny(n)).join(",")}`}class Du{constructor(n,r="asc"){this.field=n,this.dir=r}}function aT(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}function lT(i,n,r){let s=0;for(let o=0;o<i.position.length;o++){const c=n[o],h=i.position[o];if(s=c.field.isKeyField()?nt.comparator(nt.fromName(h.referenceValue),r.key):Tu(h,r.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return i.before?s<=0:s<0}function cT(i,n){if(null===i)return null===n;if(null===n||i.before!==n.before||i.position.length!==n.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!lo(i.position[r],n.position[r]))return!1;return!0}class Va{constructor(n,r=null,s=[],o=[],c=null,h="F",m=null,y=null){this.path=n,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=y,this.V=null,this.S=null}}function uT(i,n,r,s,o,c,h,m){return new Va(i,n,r,s,o,c,h,m)}function Xl(i){return new Va(i)}function ec(i){return!Ql(i.limit)&&"F"===i.limitType}function ay(i){return!Ql(i.limit)&&"L"===i.limitType}function ly(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function XE(i){for(const n of i.filters)if(n.v())return n.field;return null}function cy(i){return null!==i.collectionGroup}function Au(i){const n=je(i);if(null===n.V){n.V=[];const r=XE(n),s=ly(n);if(null!==r&&null===s)r.isKeyField()||n.V.push(new Du(r)),n.V.push(new Du(Ur.keyField(),"asc"));else{let o=!1;for(const c of n.explicitOrderBy)n.V.push(c),c.field.isKeyField()&&(o=!0);if(!o){const c=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new Du(Ur.keyField(),c))}}}return n.V}function zi(i){const n=je(i);if(!n.S)if("F"===n.limitType)n.S=QE(n.path,n.collectionGroup,Au(n),n.filters,n.limit,n.startAt,n.endAt);else{const r=[];for(const c of Au(n))r.push(new Du(c.field,"desc"===c.dir?"asc":"desc"));const s=n.endAt?new $i(n.endAt.position,!n.endAt.before):null,o=n.startAt?new $i(n.startAt.position,!n.startAt.before):null;n.S=QE(n.path,n.collectionGroup,r,n.filters,n.limit,s,o)}return n.S}function dT(i,n,r){return new Va(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,r,i.startAt,i.endAt)}function Ih(i,n){return iy(zi(i),zi(n))&&i.limitType===n.limitType}function ew(i){return`${wh(zi(i))}|lt:${i.limitType}`}function Wp(i){return`Query(target=${function(i){let n=i.path.canonicalString();return null!==i.collectionGroup&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>{return`${(s=r).field.canonicalString()} ${s.op} ${ny(s.value)}`;var s}).join(", ")}]`),Ql(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(n+=", startAt: "+ss(i.startAt)),i.endAt&&(n+=", endAt: "+ss(i.endAt)),`Target(${n})`}(zi(i))}; limitType=${i.limitType})`}function tc(i,n){return n.isFoundDocument()&&function(r,s){const o=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):nt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(i,n)&&function(r,s){for(const o of r.explicitOrderBy)if(!o.field.isKeyField()&&null===s.data.field(o.field))return!1;return!0}(i,n)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(i,n)&&(s=n,!((r=i).startAt&&!lT(r.startAt,Au(r),s)||r.endAt&&lT(r.endAt,Au(r),s)));var r,s}function uy(i){return(n,r)=>{let s=!1;for(const o of Au(i)){const c=hT(o,n,r);if(0!==c)return c;s=s||o.field.isKeyField()}return 0}}function hT(i,n,r){const s=i.field.isKeyField()?nt.comparator(n.key,r.key):function(o,c,h){const m=c.data.field(o),y=h.data.field(o);return null!==m&&null!==y?Tu(m,y):st()}(i.field,n,r);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return st()}}function tw(i,n){if(i.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(n)?"-0":n}}function nw(i){return{integerValue:""+i}}function rw(i,n){return ty(n)?nw(n):tw(i,n)}class Yp{constructor(){this._=void 0}}function fT(i,n,r){return i instanceof Sh?function(s,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&(c.fields.__previous_value__=o),{mapValue:c}}(r,n):i instanceof xu?mT(i,n):i instanceof Mu?_T(i,n):function(s,o){const c=gT(s,o),h=yT(c)+yT(s.C);return YE(c)&&YE(s.C)?nw(h):tw(s.N,h)}(i,n)}function pT(i,n,r){return i instanceof xu?mT(i,n):i instanceof Mu?_T(i,n):r}function gT(i,n){return i instanceof Th?YE(r=n)||(s=r)&&"doubleValue"in s?n:{integerValue:0}:null;var s,r}class Sh extends Yp{}class xu extends Yp{constructor(n){super(),this.elements=n}}function mT(i,n){const r=vT(n);for(const s of i.elements)r.some(o=>lo(o,s))||r.push(s);return{arrayValue:{values:r}}}class Mu extends Yp{constructor(n){super(),this.elements=n}}function _T(i,n){let r=vT(n);for(const s of i.elements)r=r.filter(o=>!lo(o,s));return{arrayValue:{values:r}}}class Th extends Yp{constructor(n,r){super(),this.N=n,this.C=r}}function yT(i){return hr(i.integerValue||i.doubleValue)}function vT(i){return KE(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Kp{constructor(n,r){this.field=n,this.transform=r}}class XR{constructor(n,r){this.version=n,this.transformResults=r}}class wr{constructor(n,r){this.updateTime=n,this.exists=r}static none(){return new wr}static exists(n){return new wr(void 0,n)}static updateTime(n){return new wr(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function dy(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class hy{}function ek(i,n,r){i instanceof Dh?function(s,o,c){const h=s.value.clone(),m=lw(s.fieldTransforms,o,c.transformResults);h.setAll(m),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(i,n,r):i instanceof Ba?function(s,o,c){if(!dy(s.precondition,o))return void o.convertToUnknownDocument(c.version);const h=lw(s.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(aw(s)),m.setAll(h),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(i,n,r):n.convertToNoDocument(r.version).setHasCommittedMutations()}function iw(i,n,r){var o;i instanceof Dh?function(s,o,c){if(!dy(s.precondition,o))return;const h=s.value.clone(),m=cw(s.fieldTransforms,c,o);h.setAll(m),o.convertToFoundDocument(ow(o),h).setHasLocalMutations()}(i,n,r):i instanceof Ba?function(s,o,c){if(!dy(s.precondition,o))return;const h=cw(s.fieldTransforms,c,o),m=o.data;m.setAll(aw(s)),m.setAll(h),o.convertToFoundDocument(ow(o),m).setHasLocalMutations()}(i,n,r):dy(i.precondition,o=n)&&o.convertToNoDocument(Pt.min())}function tk(i,n){let r=null;for(const s of i.fieldTransforms){const o=n.data.field(s.field),c=gT(s.transform,o||null);null!=c&&(null==r&&(r=Ei.empty()),r.set(s.field,c))}return r||null}function sw(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(s=n.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===s||r&&s&&Yl(r,s,(o,c)=>function(i,n){return i.field.isEqual(n.field)&&(s=n.transform,(r=i.transform)instanceof xu&&s instanceof xu||r instanceof Mu&&s instanceof Mu?Yl(r.elements,s.elements,lo):r instanceof Th&&s instanceof Th?lo(r.C,s.C):r instanceof Sh&&s instanceof Sh);var r,s}(o,c))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var r,s}function ow(i){return i.isFoundDocument()?i.version:Pt.min()}class Dh extends hy{constructor(n,r,s,o=[]){super(),this.key=n,this.value=r,this.precondition=s,this.fieldTransforms=o,this.type=0}}class Ba extends hy{constructor(n,r,s,o,c=[]){super(),this.key=n,this.data=r,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}}function aw(i){const n=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=i.data.field(r);n.set(r,s)}}),n}function lw(i,n,r){const s=new Map;Et(i.length===r.length);for(let o=0;o<r.length;o++){const c=i[o],h=c.transform,m=n.data.field(c.field);s.set(c.field,pT(h,m,r[o]))}return s}function cw(i,n,r){const s=new Map;for(const o of i){const c=o.transform,h=r.data.field(o.field);s.set(o.field,fT(c,h,n))}return s}class Ah extends hy{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class fy extends hy{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class uw{constructor(n){this.count=n}}var er,Vt;function bT(i){switch(i){case _e.OK:return st();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return st()}}function ET(i){if(void 0===i)return dr("GRPC error has no .code"),_e.UNKNOWN;switch(i){case er.OK:return _e.OK;case er.CANCELLED:return _e.CANCELLED;case er.UNKNOWN:return _e.UNKNOWN;case er.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case er.INTERNAL:return _e.INTERNAL;case er.UNAVAILABLE:return _e.UNAVAILABLE;case er.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case er.NOT_FOUND:return _e.NOT_FOUND;case er.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case er.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case er.ABORTED:return _e.ABORTED;case er.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case er.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case er.DATA_LOSS:return _e.DATA_LOSS;default:return st()}}(Vt=er||(er={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";class Vn{constructor(n,r){this.comparator=n,this.root=r||Fr.EMPTY}insert(n,r){return new Vn(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,Fr.BLACK,null,null))}remove(n){return new Vn(this.comparator,this.root.remove(n,this.comparator).copy(null,null,Fr.BLACK,null,null))}get(n){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(n,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(n){let r=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(n,s.key);if(0===o)return r+s.left.size;o<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((r,s)=>(n(r,s),!1))}toString(){const n=[];return this.inorderTraversal((r,s)=>(n.push(`${r}:${s}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new dw(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new dw(this.root,n,this.comparator,!1)}getReverseIterator(){return new dw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new dw(this.root,n,this.comparator,!0)}}class dw{constructor(n,r,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!n.isEmpty();)if(c=r?s(n.key,r):1,o&&(c*=-1),c<0)n=this.isReverse?n.left:n.right;else{if(0===c){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class Fr{constructor(n,r,s,o,c){this.key=n,this.value=r,this.color=null!=s?s:Fr.RED,this.left=null!=o?o:Fr.EMPTY,this.right=null!=c?c:Fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,s,o,c){return new Fr(null!=n?n:this.key,null!=r?r:this.value,null!=s?s:this.color,null!=o?o:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,s){let o=this;const c=s(n,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(n,r,s),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Fr.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let s,o=this;if(r(n,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(n,r),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===r(n,o.key)){if(o.right.isEmpty())return Fr.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(n,r))}return o.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,Fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,Fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const n=this.left.check();if(n!==this.right.check())throw st();return n+(this.isRed()?0:1)}}Fr.EMPTY=null,Fr.RED=!0,Fr.BLACK=!1,Fr.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(i,n,r,s,o){return this}insert(i,n,r){return new Fr(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(n){this.comparator=n,this.data=new Vn(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((r,s)=>(n(r),!1))}forEachInRange(n,r){const s=this.data.getIteratorFrom(n[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,n[1])>=0)return;r(o.key)}}forEachWhile(n,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!n(s.getNext().key))return}firstAfterOrEqual(n){const r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}getIterator(){return new hw(this.data.getIterator())}getIteratorFrom(n){return new hw(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let r=this;return r.size<n.size&&(r=n,n=this),n.forEach(s=>{r=r.add(s)}),r}isEqual(n){if(!(n instanceof fr)||this.size!==n.size)return!1;const r=this.data.getIterator(),s=n.data.getIterator();for(;r.hasNext();){const o=r.getNext().key,c=s.getNext().key;if(0!==this.comparator(o,c))return!1}return!0}toArray(){const n=[];return this.forEach(r=>{n.push(r)}),n}toString(){const n=[];return this.forEach(r=>n.push(r)),"SortedSet("+n.toString()+")"}copy(n){const r=new fr(this.comparator);return r.data=n,r}}class hw{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const wT=new Vn(nt.comparator);function co(){return wT}const pt=new Vn(nt.comparator);function fw(){return pt}const nk=new Vn(nt.comparator);function CT(){return nk}const py=new fr(nt.comparator);function pn(...i){let n=py;for(const r of i)n=n.add(r);return n}const gy=new fr(Zt);function Ru(){return gy}class An{constructor(n,r,s,o,c){this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(n,r){const s=new Map;return s.set(n,my.createSynthesizedTargetChangeForCurrentChange(n,r)),new An(Pt.min(),s,Ru(),co(),pn())}}class my{constructor(n,r,s,o,c){this.resumeToken=n,this.current=r,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(n,r){return new my(Er.EMPTY_BYTE_STRING,r,pn(),pn(),pn())}}class Zp{constructor(n,r,s,o){this.k=n,this.removedTargetIds=r,this.key=s,this.$=o}}class _y{constructor(n,r){this.targetId=n,this.O=r}}class IT{constructor(n,r,s=Er.EMPTY_BYTE_STRING,o=null){this.state=n,this.targetIds=r,this.resumeToken=s,this.cause=o}}class pw{constructor(){this.F=0,this.M=mw(),this.L=Er.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=pn(),r=pn(),s=pn();return this.M.forEach((o,c)=>{switch(c){case 0:n=n.add(o);break;case 2:r=r.add(o);break;case 1:s=s.add(o);break;default:st()}}),new my(this.L,this.B,n,r,s)}G(){this.U=!1,this.M=mw()}H(n,r){this.U=!0,this.M=this.M.insert(n,r)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class ST{constructor(n){this.tt=n,this.et=new Map,this.nt=co(),this.st=gw(),this.it=new fr(Zt)}rt(n){for(const r of n.k)n.$&&n.$.isFoundDocument()?this.ot(r,n.$):this.at(r,n.key,n.$);for(const r of n.removedTargetIds)this.at(r,n.key,n.$)}ct(n){this.forEachTarget(n,r=>{const s=this.ut(r);switch(n.state){case 0:this.ht(r)&&s.j(n.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(n.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(r);break;case 3:this.ht(r)&&(s.Z(),s.j(n.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),s.j(n.resumeToken));break;default:st()}})}forEachTarget(n,r){n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach((s,o)=>{this.ht(o)&&r(o)})}ft(n){const r=n.targetId,s=n.O.count,o=this.dt(r);if(o){const c=o.target;if(sy(c))if(0===s){const h=new nt(c.path);this.at(r,h,Nn.newNoDocument(h,Pt.min()))}else Et(1===s);else this.wt(r)!==s&&(this.lt(r),this.it=this.it.add(r))}}_t(n){const r=new Map;this.et.forEach((c,h)=>{const m=this.dt(h);if(m){if(c.current&&sy(m.target)){const y=new nt(m.target.path);null!==this.nt.get(y)||this.gt(h,y)||this.at(h,y,Nn.newNoDocument(y,n))}c.K&&(r.set(h,c.W()),c.G())}});let s=pn();this.st.forEach((c,h)=>{let m=!0;h.forEachWhile(y=>{const C=this.dt(y);return!C||2===C.purpose||(m=!1,!1)}),m&&(s=s.add(c))});const o=new An(n,r,this.it,this.nt,s);return this.nt=co(),this.st=gw(),this.it=new fr(Zt),o}ot(n,r){if(!this.ht(n))return;const s=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,s),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}at(n,r,s){if(!this.ht(n))return;const o=this.ut(n);this.gt(n,r)?o.H(r,1):o.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),s&&(this.nt=this.nt.insert(r,s))}removeTarget(n){this.et.delete(n)}wt(n){const r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let r=this.et.get(n);return r||(r=new pw,this.et.set(n,r)),r}yt(n){let r=this.st.get(n);return r||(r=new fr(Zt),this.st=this.st.insert(n,r)),r}ht(n){const r=null!==this.dt(n);return r||Be("WatchChangeAggregator","Detected inactive target",n),r}dt(n){const r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new pw),this.tt.getRemoteKeysForTarget(n).forEach(r=>{this.at(n,r,null)})}gt(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}function gw(){return new Vn(nt.comparator)}function mw(){return new Vn(nt.comparator)}const rk={asc:"ASCENDING",desc:"DESCENDING"},ik={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class sk{constructor(n,r){this.databaseId=n,this.D=r}}function Ua(i,n){return i.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function TT(i,n){return i.D?n.toBase64():n.toUint8Array()}function ok(i,n){return Ua(i,n.toTimestamp())}function jr(i){return Et(!!i),Pt.fromTimestamp(function(n){const r=La(n);return new Pr(r.seconds,r.nanos)}(i))}function xh(i,n){return(r=i,new on(["projects",r.projectId,"databases",r.database])).child("documents").child(n).canonicalString();var r}function _w(i){const n=on.fromString(i);return Et(FT(n)),n}function Mh(i,n){return xh(i.databaseId,n.path)}function uo(i,n){const r=_w(n);if(r.get(1)!==i.databaseId.projectId)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new nt(DT(r))}function yw(i,n){return xh(i.databaseId,n)}function Rh(i){const n=_w(i);return 4===n.length?on.emptyPath():DT(n)}function ja(i){return new on(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function DT(i){return Et(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function AT(i,n,r){return{name:Mh(i,n),fields:r.value.mapValue.fields}}function xT(i,n,r){const s=uo(i,n.name),o=jr(n.updateTime),c=new Ei({mapValue:{fields:n.fields}}),h=Nn.newFoundDocument(s,o,c);return r&&h.setHasCommittedMutations(),r?h.setHasCommittedMutations():h}function Qp(i,n){let r;if(n instanceof Dh)r={update:AT(i,n.key,n.value)};else if(n instanceof Ah)r={delete:Mh(i,n.key)};else if(n instanceof Ba)r={update:AT(i,n.key,n.data),updateMask:hk(n.fieldMask)};else{if(!(n instanceof fy))return st();r={verify:Mh(i,n.key)}}return n.fieldTransforms.length>0&&(r.updateTransforms=n.fieldTransforms.map(s=>function(o,c){const h=c.transform;if(h instanceof Sh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof xu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Mu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Th)return{fieldPath:c.field.canonicalString(),increment:h.C};throw st()}(0,s))),n.precondition.isNone||(r.currentDocument=void 0!==(o=n.precondition).updateTime?{updateTime:ok(i,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),r;var o}function kT(i,n){const r=n.currentDocument?void 0!==(o=n.currentDocument).updateTime?wr.updateTime(jr(o.updateTime)):void 0!==o.exists?wr.exists(o.exists):wr.none():wr.none(),s=n.updateTransforms?n.updateTransforms.map(o=>function(c,h){let m=null;"setToServerValue"in h?(Et("REQUEST_TIME"===h.setToServerValue),m=new Sh):"appendMissingElements"in h?m=new xu(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new Mu(h.removeAllFromArray.values||[]):"increment"in h?m=new Th(c,h.increment):st();const y=Ur.fromServerFormat(h.fieldPath);return new Kp(y,m)}(i,o)):[];var o;if(n.update){const o=uo(i,n.update.name),c=new Ei({mapValue:{fields:n.update.fields}});if(n.updateMask){const h=new Kl((n.updateMask.fieldPaths||[]).map(C=>Ur.fromServerFormat(C)));return new Ba(o,c,h,r,s)}return new Dh(o,c,r,s)}if(n.delete){const o=uo(i,n.delete);return new Ah(o,r)}if(n.verify){const o=uo(i,n.verify);return new fy(o,r)}return st()}function OT(i,n){return{documents:[yw(i,n.path)]}}function PT(i,n){const r={structuredQuery:{}},s=n.path;null!==n.collectionGroup?(r.parent=yw(i,s),r.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(r.parent=yw(i,s.popLast()),r.structuredQuery.from=[{collectionId:s.lastSegment()}]);const o=function(m){if(0===m.length)return;const y=m.map(C=>function(T){if("=="===T.op){if(iT(T.value))return{unaryFilter:{field:kh(T.field),op:"IS_NAN"}};if(ZE(T.value))return{unaryFilter:{field:kh(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(iT(T.value))return{unaryFilter:{field:kh(T.field),op:"IS_NOT_NAN"}};if(ZE(T.value))return{unaryFilter:{field:kh(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kh(T.field),op:uk(T.op),value:T.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(n.filters);o&&(r.structuredQuery.where=o);const c=function(m){if(0!==m.length)return m.map(y=>{return{field:kh((C=y).field),direction:yy(C.dir)};var C})}(n.orderBy);c&&(r.structuredQuery.orderBy=c);const h=(y=n.limit,i.D||Ql(y)?y:{value:y});var y;return null!==h&&(r.structuredQuery.limit=h),n.startAt&&(r.structuredQuery.startAt=ck(n.startAt)),n.endAt&&(r.structuredQuery.endAt=ck(n.endAt)),r}function ak(i){let n=Rh(i.parent);const r=i.structuredQuery,s=r.from?r.from.length:0;let o=null;if(s>0){Et(1===s);const T=r.from[0];T.allDescendants?o=T.collectionId:n=n.child(T.collectionId)}let c=[];r.where&&(c=lk(r.where));let h=[];r.orderBy&&(h=r.orderBy.map(T=>{return new Du(ku((x=T).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let m=null;r.limit&&(m=function(T){let x;return x="object"==typeof T?T.value:T,Ql(x)?null:x}(r.limit));let y=null;r.startAt&&(y=vw(r.startAt));let C=null;return r.endAt&&(C=vw(r.endAt)),uT(n,o,h,c,m,"F",y,C)}function lk(i){return i?void 0!==i.unaryFilter?[dk(i)]:void 0!==i.fieldFilter?[Jp(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(n=>lk(n)).reduce((n,r)=>n.concat(r)):st():[]}function ck(i){return{before:i.before,values:i.position}}function vw(i){return new $i(i.values||[],!!i.before)}function yy(i){return rk[i]}function uk(i){return ik[i]}function kh(i){return{fieldPath:i.canonicalString()}}function ku(i){return Ur.fromServerFormat(i.fieldPath)}function Jp(i){return wi.create(ku(i.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return st()}}(i.fieldFilter.op),i.fieldFilter.value)}function dk(i){switch(i.unaryFilter.op){case"IS_NAN":const n=ku(i.unaryFilter.field);return wi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=ku(i.unaryFilter.field);return wi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ku(i.unaryFilter.field);return wi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ku(i.unaryFilter.field);return wi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return st()}}function hk(i){const n=[];return i.fields.forEach(r=>n.push(r.canonicalString())),{fieldPaths:n}}function FT(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function ho(i){let n="";for(let r=0;r<i.length;r++)n.length>0&&(n=bw(n)),n=fk(i.get(r),n);return bw(n)}function fk(i,n){let r=n;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=c}}return r}function bw(i){return i+"\x01\x01"}function Ha(i){const n=i.length;if(Et(n>=2),2===n)return Et("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),on.emptyPath();const r=n-2,s=[];let o="";for(let c=0;c<n;){const h=i.indexOf("\x01",c);switch((h<0||h>r)&&st(),i.charAt(h+1)){case"\x01":const m=i.substring(c,h);let y;0===o.length?y=m:(o+=m,y=o,o=""),s.push(y);break;case"\x10":o+=i.substring(c,h),o+="\0";break;case"\x11":o+=i.substring(c,h+1);break;default:st()}c=h+2}return new on(s)}class pk{constructor(n,r){this.seconds=n,this.nanoseconds=r}}class Hr{constructor(n,r,s){this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=s}}Hr.store="owner",Hr.key="owner";class nc{constructor(n,r,s){this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=s}}nc.store="mutationQueues",nc.keyPath="userId";class xn{constructor(n,r,s,o,c){this.userId=n,this.batchId=r,this.localWriteTimeMs=s,this.baseMutations=o,this.mutations=c}}xn.store="mutations",xn.keyPath="batchId",xn.userMutationsIndex="userMutationsIndex",xn.userMutationsKeyPath=["userId","batchId"];class Ci{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,r){return[n,ho(r)]}static key(n,r,s){return[n,ho(r),s]}}Ci.store="documentMutations",Ci.PLACEHOLDER=new Ci;class LT{constructor(n,r){this.path=n,this.readTime=r}}class gk{constructor(n,r){this.path=n,this.version=r}}class zn{constructor(n,r,s,o,c,h){this.unknownDocument=n,this.noDocument=r,this.document=s,this.hasCommittedMutations=o,this.readTime=c,this.parentPath=h}}zn.store="remoteDocuments",zn.readTimeIndex="readTimeIndex",zn.readTimeIndexPath="readTime",zn.collectionReadTimeIndex="collectionReadTimeIndex",zn.collectionReadTimeIndexPath=["parentPath","readTime"];class Qo{constructor(n){this.byteSize=n}}Qo.store="remoteDocumentGlobal",Qo.key="remoteDocumentGlobalKey";class Ii{constructor(n,r,s,o,c,h,m){this.targetId=n,this.canonicalId=r,this.readTime=s,this.resumeToken=o,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=h,this.query=m}}Ii.store="targets",Ii.keyPath="targetId",Ii.queryTargetsIndexName="queryTargetsIndex",Ii.queryTargetsKeyPath=["canonicalId","targetId"];class ai{constructor(n,r,s){this.targetId=n,this.path=r,this.sequenceNumber=s}}ai.store="targetDocuments",ai.keyPath=["targetId","path"],ai.documentTargetsIndex="documentTargetsIndex",ai.documentTargetsKeyPath=["path","targetId"];class os{constructor(n,r,s,o){this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=s,this.targetCount=o}}os.key="targetGlobalKey",os.store="targetGlobal";class rc{constructor(n,r){this.collectionId=n,this.parent=r}}rc.store="collectionParents",rc.keyPath=["collectionId","parent"];class Ga{constructor(n,r,s,o){this.clientId=n,this.updateTimeMs=r,this.networkEnabled=s,this.inForeground=o}}Ga.store="clientMetadata",Ga.keyPath="clientId";class Nh{constructor(n,r,s){this.bundleId=n,this.createTime=r,this.version=s}}Nh.store="bundles",Nh.keyPath="bundleId";class Oh{constructor(n,r,s){this.name=n,this.readTime=r,this.bundledQuery=s}}Oh.store="namedQueries",Oh.keyPath="name";const Ew=[nc.store,xn.store,Ci.store,zn.store,Ii.store,Hr.store,os.store,ai.store,Ga.store,Qo.store,rc.store,Nh.store,Oh.store],VT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ww{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class Re{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(n){return this.next(void 0,n)}next(n,r){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new Re((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(n,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(r,c).next(s,o)}})}toPromise(){return new Promise((n,r)=>{this.next(n,r)})}wrapUserFunction(n){try{const r=n();return r instanceof Re?r:Re.resolve(r)}catch(r){return Re.reject(r)}}wrapSuccess(n,r){return n?this.wrapUserFunction(()=>n(r)):Re.resolve(r)}wrapFailure(n,r){return n?this.wrapUserFunction(()=>n(r)):Re.reject(r)}static resolve(n){return new Re((r,s)=>{r(n)})}static reject(n){return new Re((r,s)=>{s(n)})}static waitFor(n){return new Re((r,s)=>{let o=0,c=0,h=!1;n.forEach(m=>{++o,m.next(()=>{++c,h&&c===o&&r()},y=>s(y))}),h=!0,c===o&&r()})}static or(n){let r=Re.resolve(!1);for(const s of n)r=r.next(o=>o?Re.resolve(o):s());return r}static forEach(n,r){const s=[];return n.forEach((o,c)=>{s.push(r.call(this,o,c))}),this.waitFor(s)}}class vy{constructor(n,r){this.action=n,this.transaction=r,this.aborted=!1,this.Tt=new Or,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new Xp(n,r.error)):this.Tt.resolve()},this.transaction.onerror=s=>{const o=by(s.target.error);this.Tt.reject(new Xp(n,o))}}static open(n,r,s,o){try{return new vy(r,n.transaction(o,s))}catch(c){throw new Xp(r,c)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(Be("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const r=this.transaction.objectStore(n);return new _k(r)}}class fo{constructor(n,r,s){this.name=n,this.version=r,this.At=s,12.2===fo.Rt((0,P.z$)())&&dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return Be("SimpleDb","Removing database:",n),Ou(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,P.hl)())return!1;if(fo.Pt())return!0;const n=(0,P.z$)(),r=fo.Rt(n),s=0<r&&r<10,o=fo.vt(n),c=0<o&&o<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||s||c)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,r){return n.store(r)}static Rt(n){const r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static vt(n){const r=n.match(/Android ([\d.]+)/i),s=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Dt(n){var r=this;return(0,Ce.Z)(function*(){return r.db||(Be("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,o)=>{const c=indexedDB.open(r.name,r.version);c.onsuccess=h=>{s(h.target.result)},c.onblocked=()=>{o(new Xp(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new Ne(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ne(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Xp(n,m))},c.onupgradeneeded=h=>{Be("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',h.oldVersion),r.At.Ct(h.target.result,c.transaction,h.oldVersion,r.version).next(()=>{Be("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=s=>r.Nt(s)),r.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=r=>n(r))}runTransaction(n,r,s,o){var c=this;return(0,Ce.Z)(function*(){const h="readonly"===r;let m=0;for(;;){++m;try{c.db=yield c.Dt(n);const y=vy.open(c.db,n,h?"readonly":"readwrite",s),C=o(y).catch(T=>(y.abort(T),Re.reject(T))).toPromise();return C.catch(()=>{}),yield y.It,C}catch(y){const C="FirebaseError"!==y.name&&m<3;if(Be("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),c.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mk{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return Ou(this.kt.delete())}}class Xp extends Ne{constructor(n,r){super(_e.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Nu(i){return"IndexedDbTransactionError"===i.name}class _k{constructor(n){this.store=n}put(n,r){let s;return void 0!==r?(Be("SimpleDb","PUT",this.store.name,n,r),s=this.store.put(r,n)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",n),s=this.store.put(n)),Ou(s)}add(n){return Be("SimpleDb","ADD",this.store.name,n,n),Ou(this.store.add(n))}get(n){return Ou(this.store.get(n)).next(r=>(void 0===r&&(r=null),Be("SimpleDb","GET",this.store.name,n,r),r))}delete(n){return Be("SimpleDb","DELETE",this.store.name,n),Ou(this.store.delete(n))}count(){return Be("SimpleDb","COUNT",this.store.name),Ou(this.store.count())}Lt(n,r){const s=this.cursor(this.options(n,r)),o=[];return this.Bt(s,(c,h)=>{o.push(h)}).next(()=>o)}Ut(n,r){Be("SimpleDb","DELETE ALL",this.store.name);const s=this.options(n,r);s.qt=!1;const o=this.cursor(s);return this.Bt(o,(c,h,m)=>m.delete())}Kt(n,r){let s;r?s=n:(s={},r=n);const o=this.cursor(s);return this.Bt(o,r)}jt(n){const r=this.cursor({});return new Re((s,o)=>{r.onerror=c=>{const h=by(c.target.error);o(h)},r.onsuccess=c=>{const h=c.target.result;h?n(h.primaryKey,h.value).next(m=>{m?h.continue():s()}):s()}})}Bt(n,r){const s=[];return new Re((o,c)=>{n.onerror=h=>{c(h.target.error)},n.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const y=new mk(m),C=r(m.primaryKey,m.value,y);if(C instanceof Re){const T=C.catch(x=>(y.done(),Re.reject(x)));s.push(T)}y.isDone?o():null===y.Ft?m.continue():m.continue(y.Ft)}}).next(()=>Re.waitFor(s))}options(n,r){let s;return void 0!==n&&("string"==typeof n?s=n:r=n),{index:s,range:r}}cursor(n){let r="next";if(n.reverse&&(r="prev"),n.index){const s=this.store.index(n.index);return n.qt?s.openKeyCursor(n.range,r):s.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}function Ou(i){return new Re((n,r)=>{i.onsuccess=s=>{n(s.target.result)},i.onerror=s=>{const o=by(s.target.error);r(o)}})}let Cw=!1;function by(i){const n=fo.Rt((0,P.z$)());if(n>=12.2&&n<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const s=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Cw||(Cw=!0,setTimeout(()=>{throw s},0)),s}}return i}class BT extends ww{constructor(n,r){super(),this.Qt=n,this.currentSequenceNumber=r}}function as(i,n){const r=je(i);return fo.St(r.Qt,n)}class Ey{constructor(n,r,s,o){this.batchId=n,this.localWriteTime=r,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(n,r){const s=r.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(n.key)&&ek(c,n,s[o])}}applyToLocalView(n){for(const r of this.baseMutations)r.key.isEqual(n.key)&&iw(r,n,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(n.key)&&iw(r,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(r=>{const s=n.get(r.key),o=s;this.applyToLocalView(o),s.isValidDocument()||o.convertToNoDocument(Pt.min())})}keys(){return this.mutations.reduce((n,r)=>n.add(r.key),pn())}isEqual(n){return this.batchId===n.batchId&&Yl(this.mutations,n.mutations,(r,s)=>sw(r,s))&&Yl(this.baseMutations,n.baseMutations,(r,s)=>sw(r,s))}}class Iw{constructor(n,r,s,o){this.batch=n,this.commitVersion=r,this.mutationResults=s,this.docVersions=o}static from(n,r,s){Et(n.mutations.length===s.length);let o=CT();const c=n.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,s[h].version);return new Iw(n,r,s,o)}}class ic{constructor(n,r,s,o,c=Pt.min(),h=Pt.min(),m=Er.EMPTY_BYTE_STRING){this.target=n,this.targetId=r,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(n){return new ic(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,r){return new ic(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new ic(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class UT{constructor(n){this.Wt=n}}function eg(i,n){if(n.document)return xT(i.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const r=nt.fromSegments(n.noDocument.path),s=Fh(n.noDocument.readTime),o=Nn.newNoDocument(r,s);return n.hasCommittedMutations?o.setHasCommittedMutations():o}if(n.unknownDocument){const r=nt.fromSegments(n.unknownDocument.path),s=Fh(n.unknownDocument.version);return Nn.newUnknownDocument(r,s)}return st()}function wy(i,n,r){const s=Cy(r),o=n.key.path.popLast().toArray();if(n.isFoundDocument()){const c={name:Mh(m=i.Wt,(y=n).key),fields:y.data.value.mapValue.fields,updateTime:Ua(m,y.version.toTimestamp())};return new zn(null,null,c,n.hasCommittedMutations,s,o)}var m,y;if(n.isNoDocument()){const c=n.key.path.toArray(),h=Ph(n.version),m=n.hasCommittedMutations;return new zn(null,new LT(c,h),null,m,s,o)}if(n.isUnknownDocument()){const c=n.key.path.toArray(),h=Ph(n.version);return new zn(new gk(c,h),null,null,!0,s,o)}return st()}function Cy(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function Iy(i){const n=new Pr(i[0],i[1]);return Pt.fromTimestamp(n)}function Ph(i){const n=i.toTimestamp();return new pk(n.seconds,n.nanoseconds)}function Fh(i){const n=new Pr(i.seconds,i.nanoseconds);return Pt.fromTimestamp(n)}function sc(i,n){const r=(n.baseMutations||[]).map(c=>kT(i.Wt,c));for(let c=0;c<n.mutations.length-1;++c){const h=n.mutations[c];c+1<n.mutations.length&&void 0!==n.mutations[c+1].transform&&(h.updateTransforms=n.mutations[c+1].transform.fieldTransforms,n.mutations.splice(c+1,1),++c)}const s=n.mutations.map(c=>kT(i.Wt,c)),o=Pr.fromMillis(n.localWriteTimeMs);return new Ey(n.batchId,o,r,s)}function tg(i){const n=Fh(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?Fh(i.lastLimboFreeSnapshotVersion):Pt.min();let s;var o;return void 0!==i.query.documents?(Et(1===(o=i.query).documents.length),s=zi(Xl(Rh(o.documents[0])))):s=zi(ak(i.query)),new ic(s,i.targetId,0,i.lastListenSequenceNumber,n,r,Er.fromBase64String(i.resumeToken))}function Sw(i,n){const r=Ph(n.snapshotVersion),s=Ph(n.lastLimboFreeSnapshotVersion);let o;o=sy(n.target)?OT(i.Wt,n.target):PT(i.Wt,n.target);const c=n.resumeToken.toBase64();return new Ii(n.targetId,wh(n.target),r,c,n.sequenceNumber,s,o)}function Tw(i){const n=ak({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?dT(n,n.limit,"L"):n}class jT{getBundleMetadata(n,r){return Dw(n).get(r).next(s=>{if(s)return{id:(o=s).bundleId,createTime:Fh(o.createTime),version:o.version};var o})}saveBundleMetadata(n,r){return Dw(n).put({bundleId:(s=r).id,createTime:Ph(jr(s.createTime)),version:s.version});var s}getNamedQuery(n,r){return Aw(n).get(r).next(s=>{if(s)return{name:(o=s).name,query:Tw(o.bundledQuery),readTime:Fh(o.readTime)};var o})}saveNamedQuery(n,r){return Aw(n).put({name:(s=r).name,readTime:Ph(jr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Dw(i){return as(i,Nh.store)}function Aw(i){return as(i,Oh.store)}class F1{constructor(){this.Gt=new xw}addToCollectionParentIndex(n,r){return this.Gt.add(r),Re.resolve()}getCollectionParents(n,r){return Re.resolve(this.Gt.getEntries(r))}}class xw{constructor(){this.index={}}add(n){const r=n.lastSegment(),s=n.popLast(),o=this.index[r]||new fr(on.comparator),c=!o.has(s);return this.index[r]=o.add(s),c}has(n){const r=n.lastSegment(),s=n.popLast(),o=this.index[r];return o&&o.has(s)}getEntries(n){return(this.index[n]||new fr(on.comparator)).toArray()}}class Lh{constructor(){this.zt=new xw}addToCollectionParentIndex(n,r){if(!this.zt.has(r)){const s=r.lastSegment(),o=r.popLast();n.addOnCommittedListener(()=>{this.zt.add(r)});const c={collectionId:s,parent:ho(o)};return yk(n).put(c)}return Re.resolve()}getCollectionParents(n,r){const s=[],o=IDBKeyRange.bound([r,""],[J_(r),""],!1,!0);return yk(n).Lt(o).next(c=>{for(const h of c){if(h.collectionId!==r)break;s.push(Ha(h.parent))}return s})}}function yk(i){return as(i,rc.store)}const Sy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class li{constructor(n,r,s){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(n){return new li(n,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function HT(i,n,r){const s=i.store(xn.store),o=i.store(Ci.store),c=[],h=IDBKeyRange.only(r.batchId);let m=0;const y=s.Kt({range:h},(T,x,R)=>(m++,R.delete()));c.push(y.next(()=>{Et(1===m)}));const C=[];for(const T of r.mutations){const x=Ci.key(n,T.key.path,r.batchId);c.push(o.delete(x)),C.push(T.key)}return Re.waitFor(c).next(()=>C)}function $a(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw st();n=i.noDocument}return JSON.stringify(n).length}li.DEFAULT_COLLECTION_PERCENTILE=10,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,li.DEFAULT=new li(41943040,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),li.DISABLED=new li(-1,0,0);class Mw{constructor(n,r,s,o){this.userId=n,this.N=r,this.Ht=s,this.referenceDelegate=o,this.Jt={}}static Yt(n,r,s,o){Et(""!==n.uid);const c=n.isAuthenticated()?n.uid:"";return new Mw(c,r,s,o)}checkEmpty(n){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oc(n).Kt({index:xn.userMutationsIndex,range:s},(o,c,h)=>{r=!1,h.done()}).next(()=>r)}addMutationBatch(n,r,s,o){const c=qi(n),h=oc(n);return h.add({}).next(m=>{Et("number"==typeof m);const y=new Ey(m,r,s,o),C=function(R,O,U){const te=U.baseMutations.map(Fe=>Qp(R.Wt,Fe)),pe=U.mutations.map(Fe=>Qp(R.Wt,Fe));return new xn(O,U.batchId,U.localWriteTime.toMillis(),te,pe)}(this.N,this.userId,y),T=[];let x=new fr((R,O)=>Zt(R.canonicalString(),O.canonicalString()));for(const R of o){const O=Ci.key(this.userId,R.key.path,m);x=x.add(R.key.path.popLast()),T.push(h.put(C)),T.push(c.put(O,Ci.PLACEHOLDER))}return x.forEach(R=>{T.push(this.Ht.addToCollectionParentIndex(n,R))}),n.addOnCommittedListener(()=>{this.Jt[m]=y.keys()}),Re.waitFor(T).next(()=>y)})}lookupMutationBatch(n,r){return oc(n).get(r).next(s=>s?(Et(s.userId===this.userId),sc(this.N,s)):null)}Xt(n,r){return this.Jt[r]?Re.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(s=>{if(s){const o=s.keys();return this.Jt[r]=o,o}return null})}getNextMutationBatchAfterBatchId(n,r){const s=r+1,o=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return oc(n).Kt({index:xn.userMutationsIndex,range:o},(h,m,y)=>{m.userId===this.userId&&(Et(m.batchId>=s),c=sc(this.N,m)),y.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(n){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return oc(n).Kt({index:xn.userMutationsIndex,range:r,reverse:!0},(o,c,h)=>{s=c.batchId,h.done()}).next(()=>s)}getAllMutationBatches(n){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oc(n).Lt(xn.userMutationsIndex,r).next(s=>s.map(o=>sc(this.N,o)))}getAllMutationBatchesAffectingDocumentKey(n,r){const s=Ci.prefixForPath(this.userId,r.path),o=IDBKeyRange.lowerBound(s),c=[];return qi(n).Kt({range:o},(h,m,y)=>{const[C,T,x]=h,R=Ha(T);if(C===this.userId&&r.path.isEqual(R))return oc(n).get(x).next(O=>{if(!O)throw st();Et(O.userId===this.userId),c.push(sc(this.N,O))});y.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(n,r){let s=new fr(Zt);const o=[];return r.forEach(c=>{const h=Ci.prefixForPath(this.userId,c.path),m=IDBKeyRange.lowerBound(h),y=qi(n).Kt({range:m},(C,T,x)=>{const[R,O,U]=C,te=Ha(O);R===this.userId&&c.path.isEqual(te)?s=s.add(U):x.done()});o.push(y)}),Re.waitFor(o).next(()=>this.Zt(n,s))}getAllMutationBatchesAffectingQuery(n,r){const s=r.path,o=s.length+1,c=Ci.prefixForPath(this.userId,s),h=IDBKeyRange.lowerBound(c);let m=new fr(Zt);return qi(n).Kt({range:h},(y,C,T)=>{const[x,R,O]=y,U=Ha(R);x===this.userId&&s.isPrefixOf(U)?U.length===o&&(m=m.add(O)):T.done()}).next(()=>this.Zt(n,m))}Zt(n,r){const s=[],o=[];return r.forEach(c=>{o.push(oc(n).get(c).next(h=>{if(null===h)throw st();Et(h.userId===this.userId),s.push(sc(this.N,h))}))}),Re.waitFor(o).next(()=>s)}removeMutationBatch(n,r){return HT(n.Qt,this.userId,r).next(s=>(n.addOnCommittedListener(()=>{this.te(r.batchId)}),Re.forEach(s,o=>this.referenceDelegate.markPotentiallyOrphaned(n,o))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(r=>{if(!r)return Re.resolve();const s=IDBKeyRange.lowerBound(Ci.prefixForUser(this.userId)),o=[];return qi(n).Kt({range:s},(c,h,m)=>{if(c[0]===this.userId){const y=Ha(c[1]);o.push(y)}else m.done()}).next(()=>{Et(0===o.length)})})}containsKey(n,r){return vk(n,this.userId,r)}ee(n){return Rw(n).get(this.userId).next(r=>r||new nc(this.userId,-1,""))}}function vk(i,n,r){const s=Ci.prefixForPath(n,r.path),o=s[1],c=IDBKeyRange.lowerBound(s);let h=!1;return qi(i).Kt({range:c,qt:!0},(m,y,C)=>{const[T,x,R]=m;T===n&&x===o&&(h=!0),C.done()}).next(()=>h)}function oc(i){return as(i,xn.store)}function qi(i){return as(i,Ci.store)}function Rw(i){return as(i,nc.store)}class Vh{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new Vh(0)}static ie(){return new Vh(-1)}}class Ty{constructor(n,r){this.referenceDelegate=n,this.N=r}allocateTargetId(n){return this.re(n).next(r=>{const s=new Vh(r.highestTargetId);return r.highestTargetId=s.next(),this.oe(n,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(r=>Pt.fromTimestamp(new Pr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(n,r,s){return this.re(n).next(o=>(o.highestListenSequenceNumber=r,s&&(o.lastRemoteSnapshotVersion=s.toTimestamp()),r>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=r),this.oe(n,o)))}addTargetData(n,r){return this.ae(n,r).next(()=>this.re(n).next(s=>(s.targetCount+=1,this.ce(r,s),this.oe(n,s))))}updateTargetData(n,r){return this.ae(n,r)}removeTargetData(n,r){return this.removeMatchingKeysForTargetId(n,r.targetId).next(()=>Bh(n).delete(r.targetId)).next(()=>this.re(n)).next(s=>(Et(s.targetCount>0),s.targetCount-=1,this.oe(n,s)))}removeTargets(n,r,s){let o=0;const c=[];return Bh(n).Kt((h,m)=>{const y=tg(m);y.sequenceNumber<=r&&null===s.get(y.targetId)&&(o++,c.push(this.removeTargetData(n,y)))}).next(()=>Re.waitFor(c)).next(()=>o)}forEachTarget(n,r){return Bh(n).Kt((s,o)=>{const c=tg(o);r(c)})}re(n){return GT(n).get(os.key).next(r=>(Et(null!==r),r))}oe(n,r){return GT(n).put(os.key,r)}ae(n,r){return Bh(n).put(Sw(this.N,r))}ce(n,r){let s=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,s=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,s=!0),s}getTargetCount(n){return this.re(n).next(r=>r.targetCount)}getTargetData(n,r){const s=wh(r),o=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Bh(n).Kt({range:o,index:Ii.queryTargetsIndexName},(h,m,y)=>{const C=tg(m);iy(r,C.target)&&(c=C,y.done())}).next(()=>c)}addMatchingKeys(n,r,s){const o=[],c=Pu(n);return r.forEach(h=>{const m=ho(h.path);o.push(c.put(new ai(s,m))),o.push(this.referenceDelegate.addReference(n,s,h))}),Re.waitFor(o)}removeMatchingKeys(n,r,s){const o=Pu(n);return Re.forEach(r,c=>{const h=ho(c.path);return Re.waitFor([o.delete([s,h]),this.referenceDelegate.removeReference(n,s,c)])})}removeMatchingKeysForTargetId(n,r){const s=Pu(n),o=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(o)}getMatchingKeysForTargetId(n,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),o=Pu(n);let c=pn();return o.Kt({range:s,qt:!0},(h,m,y)=>{const C=Ha(h[1]),T=new nt(C);c=c.add(T)}).next(()=>c)}containsKey(n,r){const s=ho(r.path),o=IDBKeyRange.bound([s],[J_(s)],!1,!0);let c=0;return Pu(n).Kt({index:ai.documentTargetsIndex,qt:!0,range:o},([h,m],y,C)=>{0!==h&&(c++,C.done())}).next(()=>c>0)}Et(n,r){return Bh(n).get(r).next(s=>s?tg(s):null)}}function Bh(i){return as(i,Ii.store)}function GT(i){return as(i,os.store)}function Pu(i){return as(i,ai.store)}function Fu(i){return kw.apply(this,arguments)}function kw(){return(kw=(0,Ce.Z)(function*(i){if(i.code!==_e.FAILED_PRECONDITION||i.message!==VT)throw i;Be("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function $T([i,n],[r,s]){const o=Zt(i,r);return 0===o?Zt(n,s):o}class Nw{constructor(n){this.ue=n,this.buffer=new fr($T),this.he=0}le(){return++this.he}fe(n){const r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();$T(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class zT{constructor(n,r){this.garbageCollector=n,this.asyncQueue=r,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var r=this;const s=this.de?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,Ce.Z)(function*(){r.we=null,r.de=!0;try{yield n.collectGarbage(r.garbageCollector)}catch(o){Nu(o)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Fu(o)}yield r._e(n)}))}}class Ow{constructor(n,r){this.me=n,this.params=r}calculateTargetCount(n,r){return this.me.ge(n).next(s=>Math.floor(r/100*s))}nthSequenceNumber(n,r){if(0===r)return Re.resolve(ws.T);const s=new Nw(r);return this.me.forEachTarget(n,o=>s.fe(o.sequenceNumber)).next(()=>this.me.ye(n,o=>s.fe(o))).next(()=>s.maxValue)}removeTargets(n,r,s){return this.me.removeTargets(n,r,s)}removeOrphanedDocuments(n,r){return this.me.removeOrphanedDocuments(n,r)}collect(n,r){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(Sy)):this.getCacheSize(n).next(s=>s<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sy):this.pe(n,r))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,r){let s,o,c,h,m,y,C;const T=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,h=Date.now(),this.nthSequenceNumber(n,o))).next(x=>(s=x,m=Date.now(),this.removeTargets(n,s,r))).next(x=>(c=x,y=Date.now(),this.removeOrphanedDocuments(n,s))).next(x=>(C=Date.now(),Y_()<=qo.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-T}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${c} targets in `+(y-m)+`ms\n\tRemoved ${x} documents in `+(C-y)+`ms\nTotal Duration: ${C-T}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:x})))}}class qT{constructor(n,r){this.db=n,this.garbageCollector=new Ow(this,r)}ge(n){const r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(s=>r.next(o=>s+o))}Ee(n){let r=0;return this.ye(n,s=>{r++}).next(()=>r)}forEachTarget(n,r){return this.db.getTargetCache().forEachTarget(n,r)}ye(n,r){return this.Te(n,(s,o)=>r(o))}addReference(n,r,s){return Dy(n,s)}removeReference(n,r,s){return Dy(n,s)}removeTargets(n,r,s){return this.db.getTargetCache().removeTargets(n,r,s)}markPotentiallyOrphaned(n,r){return Dy(n,r)}Ie(n,r){return function(s,o){let c=!1;return Rw(s).jt(h=>vk(s,h,o).next(m=>(m&&(c=!0),Re.resolve(!m)))).next(()=>c)}(n,r)}removeOrphanedDocuments(n,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this.Te(n,(h,m)=>{if(m<=r){const y=this.Ie(n,h).next(C=>{if(!C)return c++,s.getEntry(n,h).next(()=>(s.removeEntry(h),Pu(n).delete([0,ho(h.path)])))});o.push(y)}}).next(()=>Re.waitFor(o)).next(()=>s.apply(n)).next(()=>c)}removeTarget(n,r){const s=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,s)}updateLimboDocument(n,r){return Dy(n,r)}Te(n,r){const s=Pu(n);let o,c=ws.T;return s.Kt({index:ai.documentTargetsIndex},([h,m],{path:y,sequenceNumber:C})=>{0===h?(c!==ws.T&&r(new nt(Ha(o)),c),c=C,o=y):c=ws.T}).next(()=>{c!==ws.T&&r(new nt(Ha(o)),c)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function Dy(i,n){return Pu(i).put((s=i.currentSequenceNumber,new ai(0,ho(n.path),s)));var s}class ng{constructor(n,r){this.mapKeyFn=n,this.equalsFn=r,this.inner={}}get(n){const r=this.mapKeyFn(n),s=this.inner[r];if(void 0!==s)for(const[o,c]of s)if(this.equalsFn(o,n))return c}has(n){return void 0!==this.get(n)}set(n,r){const s=this.mapKeyFn(n),o=this.inner[s];if(void 0!==o){for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],n))return void(o[c]=[n,r]);o.push([n,r])}else this.inner[s]=[[n,r]]}delete(n){const r=this.mapKeyFn(n),s=this.inner[r];if(void 0===s)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],n))return 1===s.length?delete this.inner[r]:s.splice(o,1),!0;return!1}forEach(n){Fa(this.inner,(r,s)=>{for(const[o,c]of s)n(o,c)})}isEmpty(){return X_(this.inner)}}class WT{constructor(){this.changes=new ng(n=>n.toString(),(n,r)=>n.isEqual(r)),this.changesApplied=!1}getReadTime(n){const r=this.changes.get(n);return r?r.readTime:Pt.min()}addEntry(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}removeEntry(n,r=null){this.assertNotApplied(),this.changes.set(n,{document:Nn.newInvalidDocument(n),readTime:r})}getEntry(n,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?Re.resolve(s.document):this.getFromCache(n,r)}getEntries(n,r){return this.getAllFromCache(n,r)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class bk{constructor(n,r){this.N=n,this.Ht=r}addEntry(n,r,s){return za(n).put(rg(r),s)}removeEntry(n,r){const s=za(n),o=rg(r);return s.delete(o)}updateMetadata(n,r){return this.getMetadata(n).next(s=>(s.byteSize+=r,this.Ae(n,s)))}getEntry(n,r){return za(n).get(rg(r)).next(s=>this.Re(r,s))}be(n,r){return za(n).get(rg(r)).next(s=>({document:this.Re(r,s),size:$a(s)}))}getEntries(n,r){let s=co();return this.Pe(n,r,(o,c)=>{const h=this.Re(o,c);s=s.insert(o,h)}).next(()=>s)}ve(n,r){let s=co(),o=new Vn(nt.comparator);return this.Pe(n,r,(c,h)=>{const m=this.Re(c,h);s=s.insert(c,m),o=o.insert(c,$a(h))}).next(()=>({documents:s,Ve:o}))}Pe(n,r,s){if(r.isEmpty())return Re.resolve();const o=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),c=r.getIterator();let h=c.getNext();return za(n).Kt({range:o},(m,y,C)=>{const T=nt.fromSegments(m);for(;h&&nt.comparator(h,T)<0;)s(h,null),h=c.getNext();h&&h.isEqual(T)&&(s(h,y),h=c.hasNext()?c.getNext():null),h?C.Mt(h.path.toArray()):C.done()}).next(()=>{for(;h;)s(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(n,r,s){let o=co();const c=r.path.length+1,h={};if(s.isEqual(Pt.min())){const m=r.path.toArray();h.range=IDBKeyRange.lowerBound(m)}else{const m=r.path.toArray(),y=Cy(s);h.range=IDBKeyRange.lowerBound([m,y],!0),h.index=zn.collectionReadTimeIndex}return za(n).Kt(h,(m,y,C)=>{if(m.length!==c)return;const T=eg(this.N,y);r.path.isPrefixOf(T.key.path)?tc(r,T)&&(o=o.insert(T.key,T)):C.done()}).next(()=>o)}newChangeBuffer(n){return new Ek(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(r=>r.byteSize)}getMetadata(n){return Pw(n).get(Qo.key).next(r=>(Et(!!r),r))}Ae(n,r){return Pw(n).put(Qo.key,r)}Re(n,r){if(r){const s=eg(this.N,r);if(!s.isNoDocument()||!s.version.isEqual(Pt.min()))return s}return Nn.newInvalidDocument(n)}}class Ek extends WT{constructor(n,r){super(),this.Se=n,this.trackRemovals=r,this.De=new ng(s=>s.toString(),(s,o)=>s.isEqual(o))}applyChanges(n){const r=[];let s=0,o=new fr((c,h)=>Zt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const m=this.De.get(c);if(h.document.isValidDocument()){const y=wy(this.Se.N,h.document,this.getReadTime(c));o=o.add(c.path.popLast()),s+=$a(y)-m,r.push(this.Se.addEntry(n,c,y))}else if(s-=m,this.trackRemovals){const y=wy(this.Se.N,Nn.newNoDocument(c,Pt.min()),this.getReadTime(c));r.push(this.Se.addEntry(n,c,y))}else r.push(this.Se.removeEntry(n,c))}),o.forEach(c=>{r.push(this.Se.Ht.addToCollectionParentIndex(n,c))}),r.push(this.Se.updateMetadata(n,s)),Re.waitFor(r)}getFromCache(n,r){return this.Se.be(n,r).next(s=>(this.De.set(r,s.size),s.document))}getAllFromCache(n,r){return this.Se.ve(n,r).next(({documents:s,Ve:o})=>(o.forEach((c,h)=>{this.De.set(c,h)}),s))}}function Pw(i){return as(i,Qo.store)}function za(i){return as(i,zn.store)}function rg(i){return i.path.toArray()}class wk{constructor(n){this.N=n}Ct(n,r,s,o){Et(s<o&&s>=0&&o<=11);const c=new vy("createOrUpgrade",r);var m;s<1&&o>=1&&(n.createObjectStore(Hr.store),(m=n).createObjectStore(nc.store,{keyPath:nc.keyPath}),m.createObjectStore(xn.store,{keyPath:xn.keyPath,autoIncrement:!0}).createIndex(xn.userMutationsIndex,xn.userMutationsKeyPath,{unique:!0}),m.createObjectStore(Ci.store),YT(n),function(m){m.createObjectStore(zn.store)}(n));let h=Re.resolve();return s<3&&o>=3&&(0!==s&&(function(m){m.deleteObjectStore(ai.store),m.deleteObjectStore(Ii.store),m.deleteObjectStore(os.store)}(n),YT(n)),h=h.next(()=>function(m){const y=m.store(os.store),C=new os(0,0,Pt.min().toTimestamp(),0);return y.put(os.key,C)}(c))),s<4&&o>=4&&(0!==s&&(h=h.next(()=>function(m,y){return y.store(xn.store).Lt().next(C=>{m.deleteObjectStore(xn.store),m.createObjectStore(xn.store,{keyPath:xn.keyPath,autoIncrement:!0}).createIndex(xn.userMutationsIndex,xn.userMutationsKeyPath,{unique:!0});const T=y.store(xn.store),x=C.map(R=>T.put(R));return Re.waitFor(x)})}(n,c))),h=h.next(()=>{!function(m){m.createObjectStore(Ga.store,{keyPath:Ga.keyPath})}(n)})),s<5&&o>=5&&(h=h.next(()=>this.Ce(c))),s<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore(Qo.store)}(n),this.Ne(c)))),s<7&&o>=7&&(h=h.next(()=>this.xe(c))),s<8&&o>=8&&(h=h.next(()=>this.ke(n,c))),s<9&&o>=9&&(h=h.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(n),function(m){const y=m.objectStore(zn.store);y.createIndex(zn.readTimeIndex,zn.readTimeIndexPath,{unique:!1}),y.createIndex(zn.collectionReadTimeIndex,zn.collectionReadTimeIndexPath,{unique:!1})}(r)})),s<10&&o>=10&&(h=h.next(()=>this.$e(c))),s<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore(Nh.store,{keyPath:Nh.keyPath})})(n),function(m){m.createObjectStore(Oh.store,{keyPath:Oh.keyPath})}(n)})),h}Ne(n){let r=0;return n.store(zn.store).Kt((s,o)=>{r+=$a(o)}).next(()=>{const s=new Qo(r);return n.store(Qo.store).put(Qo.key,s)})}Ce(n){const r=n.store(nc.store),s=n.store(xn.store);return r.Lt().next(o=>Re.forEach(o,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.Lt(xn.userMutationsIndex,h).next(m=>Re.forEach(m,y=>{Et(y.userId===c.userId);const C=sc(this.N,y);return HT(n,c.userId,C).next(()=>{})}))}))}xe(n){const r=n.store(ai.store),s=n.store(zn.store);return n.store(os.store).get(os.key).next(o=>{const c=[];return s.Kt((h,m)=>{const y=new on(h),C=[0,ho(y)];c.push(r.get(C).next(T=>T?Re.resolve():r.put(new ai(0,ho(y),o.highestListenSequenceNumber))))}).next(()=>Re.waitFor(c))})}ke(n,r){n.createObjectStore(rc.store,{keyPath:rc.keyPath});const s=r.store(rc.store),o=new xw,c=h=>{if(o.add(h)){const m=h.lastSegment(),y=h.popLast();return s.put({collectionId:m,parent:ho(y)})}};return r.store(zn.store).Kt({qt:!0},(h,m)=>{const y=new on(h);return c(y.popLast())}).next(()=>r.store(Ci.store).Kt({qt:!0},([h,m,y],C)=>{const T=Ha(m);return c(T.popLast())}))}$e(n){const r=n.store(Ii.store);return r.Kt((s,o)=>{const c=tg(o),h=Sw(this.N,c);return r.put(h)})}}function YT(i){i.createObjectStore(ai.store,{keyPath:ai.keyPath}).createIndex(ai.documentTargetsIndex,ai.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(Ii.store,{keyPath:Ii.keyPath}).createIndex(Ii.queryTargetsIndexName,Ii.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(os.store)}const Ay="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Uh{constructor(n,r,s,o,c,h,m,y,C,T){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=s,this.Oe=c,this.window=h,this.document=m,this.Fe=C,this.Me=T,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=x=>Promise.resolve(),!Uh.bt())throw new Ne(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qT(this,o),this.We=r+"main",this.N=new UT(y),this.Ge=new fo(this.We,11,new wk(this.N)),this.ze=new Ty(this.referenceDelegate,this.N),this.Ht=new Lh,this.He=new bk(this.N,this.Ht),this.Je=new jT,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===T&&dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,Ay);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new ws(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var r=this;return this.Qe=function(){var s=(0,Ce.Z)(function*(o){if(r.started)return n(o)});return function(o){return s.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var r=(0,Ce.Z)(function*(s){null===s.newVersion&&(yield n())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,Ce.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>sg(n).put(new Ga(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(r=>this.isPrimary&&!r?this.on(n).next(()=>!1):!!r&&this.an(n).next(()=>!0))).catch(n=>{if(Nu(n))return Be("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return ig(n).get(Hr.key).next(r=>Re.resolve(this.cn(r)))}un(n){return sg(n).delete(this.clientId)}hn(){var n=this;return(0,Ce.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const r=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const o=as(s,Ga.store);return o.Lt().next(c=>{const h=n.fn(c,18e5),m=c.filter(y=>-1===h.indexOf(y));return Re.forEach(m,y=>o.delete(y.clientId)).next(()=>m)})}).catch(()=>[]);if(n.Ye)for(const s of r)n.Ye.removeItem(n.dn(s.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?Re.resolve(!0):ig(n).get(Hr.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,Ay);return!1}}return!(!this.networkEnabled||!this.inForeground)||sg(n).Lt().next(s=>void 0===this.fn(s,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Be("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var n=this;return(0,Ce.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[Hr.store,Ga.store],r=>{const s=new BT(r,ws.T);return n.on(s).next(()=>n.un(s))}),n.Ge.close(),n.yn()})()}fn(n,r){return n.filter(s=>this.ln(s.updateTimeMs,r)&&!this.wn(s.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>sg(n).Lt().next(r=>this.fn(r,18e5).map(s=>s.clientId)))}get started(){return this.Be}getMutationQueue(n){return Mw.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,r,s){let c;return Be("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",Ew,h=>(c=new BT(h,this.Le?this.Le.next():ws.T),"readwrite-primary"===r?this.sn(c).next(m=>!!m||this.rn(c)).next(m=>{if(!m)throw dr(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Ne(_e.FAILED_PRECONDITION,VT);return s(c)}).next(m=>this.an(c).next(()=>m)):this.En(c).next(()=>s(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}En(n){return ig(n).get(Hr.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ne(_e.FAILED_PRECONDITION,Ay)})}an(n){const r=new Hr(this.clientId,this.allowTabSynchronization,Date.now());return ig(n).put(Hr.key,r)}static bt(){return fo.bt()}on(n){const r=ig(n);return r.get(Hr.key).next(s=>this.cn(s)?(Be("IndexedDbPersistence","Releasing primary lease."),r.delete(Hr.key)):Re.resolve())}ln(n,r){const s=Date.now();return!(n<s-r||n>s&&(dr(`Detected an update time that is in the future: ${n} > ${s}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,P.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var r;try{const s=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return Be("IndexedDbPersistence",`Client '${n}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return dr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){dr("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function ig(i){return as(i,Hr.store)}function sg(i){return as(i,Ga.store)}function jh(i,n){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+n+"/"+r+"/"}class xy{constructor(n,r){this.progress=n,this.Tn=r}}class Hh{constructor(n,r,s){this.He=n,this.In=r,this.Ht=s}An(n,r){return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(s=>this.Rn(n,r,s))}Rn(n,r,s){return this.He.getEntry(n,r).next(o=>{for(const c of s)c.applyToLocalView(o);return o})}bn(n,r){n.forEach((s,o)=>{for(const c of r)c.applyToLocalView(o)})}Pn(n,r){return this.He.getEntries(n,r).next(s=>this.vn(n,s).next(()=>s))}vn(n,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(s=>this.bn(r,s))}getDocumentsMatchingQuery(n,r,s){return nt.isDocumentKey((o=r).path)&&null===o.collectionGroup&&0===o.filters.length?this.Vn(n,r.path):cy(r)?this.Sn(n,r,s):this.Dn(n,r,s);var o}Vn(n,r){return this.An(n,new nt(r)).next(s=>{let o=fw();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}Sn(n,r,s){const o=r.collectionGroup;let c=fw();return this.Ht.getCollectionParents(n,o).next(h=>Re.forEach(h,m=>{const y=(C=r,T=m.child(o),new Va(T,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,T;return this.Dn(n,y,s).next(C=>{C.forEach((T,x)=>{c=c.insert(T,x)})})}).next(()=>c))}Dn(n,r,s){let o,c;return this.He.getDocumentsMatchingQuery(n,r,s).next(h=>(o=h,this.In.getAllMutationBatchesAffectingQuery(n,r))).next(h=>(c=h,this.Cn(n,c,o).next(m=>{o=m;for(const y of c)for(const C of y.mutations){const T=C.key;let x=o.get(T);null==x&&(x=Nn.newInvalidDocument(T),o=o.insert(T,x)),iw(C,x,y.localWriteTime),x.isFoundDocument()||(o=o.remove(T))}}))).next(()=>(o.forEach((h,m)=>{tc(r,m)||(o=o.remove(h))}),o))}Cn(n,r,s){let o=pn();for(const h of r)for(const m of h.mutations)m instanceof Ba&&null===s.get(m.key)&&(o=o.add(m.key));let c=s;return this.He.getEntries(n,o).next(h=>(h.forEach((m,y)=>{y.isFoundDocument()&&(c=c.insert(m,y))}),c))}}class Fw{constructor(n,r,s,o){this.targetId=n,this.fromCache=r,this.Nn=s,this.xn=o}static kn(n,r){let s=pn(),o=pn();for(const c of r.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Fw(n,r.fromCache,s,o)}}class KT{$n(n){this.On=n}getDocumentsMatchingQuery(n,r,s,o){return 0===(c=r).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||s.isEqual(Pt.min())?this.Fn(n,r):this.On.Pn(n,o).next(c=>{const h=this.Mn(r,c);return(ec(r)||ay(r))&&this.Ln(r.limitType,h,o,s)?this.Fn(n,r):(Y_()<=qo.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Wp(r)),this.On.getDocumentsMatchingQuery(n,r,s).next(m=>(h.forEach(y=>{m=m.insert(y.key,y)}),m)))});var c}Mn(n,r){let s=new fr(uy(n));return r.forEach((o,c)=>{tc(n,c)&&(s=s.add(c))}),s}Ln(n,r,s,o){if(s.size!==r.size)return!0;const c="F"===n?r.last():r.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Fn(n,r){return Y_()<=qo.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Wp(r)),this.On.getDocumentsMatchingQuery(n,r,Pt.min())}}class L1{constructor(n,r,s,o){this.persistence=n,this.Bn=r,this.N=o,this.Un=new Vn(Zt),this.qn=new ng(c=>wh(c),iy),this.Kn=Pt.min(),this.In=n.getMutationQueue(s),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new Hh(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>n.collect(r,this.Un))}}function ZT(i,n,r,s){return new L1(i,n,r,s)}function QT(i,n){return Lw.apply(this,arguments)}function Lw(){return(Lw=(0,Ce.Z)(function*(i,n){const r=je(i);let s=r.In,o=r.Qn;const c=yield r.persistence.runTransaction("Handle user change","readonly",h=>{let m;return r.In.getAllMutationBatches(h).next(y=>(m=y,s=r.persistence.getMutationQueue(n),o=new Hh(r.jn,s,r.persistence.getIndexManager()),s.getAllMutationBatches(h))).next(y=>{const C=[],T=[];let x=pn();for(const R of m){C.push(R.batchId);for(const O of R.mutations)x=x.add(O.key)}for(const R of y){T.push(R.batchId);for(const O of R.mutations)x=x.add(O.key)}return o.Pn(h,x).next(R=>({Wn:R,removedBatchIds:C,addedBatchIds:T}))})});return r.In=s,r.Qn=o,r.Bn.$n(r.Qn),c})).apply(this,arguments)}function Ck(i,n){const r=je(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=n.batch.keys(),c=r.jn.newChangeBuffer({trackRemovals:!0});return function(h,m,y,C){const T=y.batch,x=T.keys();let R=Re.resolve();return x.forEach(O=>{R=R.next(()=>C.getEntry(m,O)).next(U=>{const te=y.docVersions.get(O);Et(null!==te),U.version.compareTo(te)<0&&(T.applyToRemoteDocument(U,y),U.isValidDocument()&&C.addEntry(U,y.commitVersion))})}),R.next(()=>h.In.removeMutationBatch(m,T))}(r,s,n,c).next(()=>c.apply(s)).next(()=>r.In.performConsistencyCheck(s)).next(()=>r.Qn.Pn(s,o))})}function JT(i){const n=je(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",r=>n.ze.getLastRemoteSnapshotVersion(r))}function Ik(i,n){const r=je(i),s=n.snapshotVersion;let o=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=r.jn.newChangeBuffer({trackRemovals:!0});o=r.Un;const m=[];n.targetChanges.forEach((C,T)=>{const x=o.get(T);if(!x)return;m.push(r.ze.removeMatchingKeys(c,C.removedDocuments,T).next(()=>r.ze.addMatchingKeys(c,C.addedDocuments,T)));const R=C.resumeToken;if(R.approximateByteSize()>0){const O=x.withResumeToken(R,s).withSequenceNumber(c.currentSequenceNumber);o=o.insert(T,O),U=x,pe=C,Et((te=O).resumeToken.approximateByteSize()>0),(0===U.resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0)&&m.push(r.ze.updateTargetData(c,O))}var U,te,pe});let y=co();if(n.documentUpdates.forEach((C,T)=>{n.resolvedLimboDocuments.has(C)&&m.push(r.persistence.referenceDelegate.updateLimboDocument(c,C))}),m.push(XT(c,h,n.documentUpdates,s,void 0).next(C=>{y=C})),!s.isEqual(Pt.min())){const C=r.ze.getLastRemoteSnapshotVersion(c).next(T=>r.ze.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(C)}return Re.waitFor(m).next(()=>h.apply(c)).next(()=>r.Qn.vn(c,y)).next(()=>y)}).then(c=>(r.Un=o,c))}function XT(i,n,r,s,o){let c=pn();return r.forEach(h=>c=c.add(h)),n.getEntries(i,c).next(h=>{let m=co();return r.forEach((y,C)=>{const T=h.get(y),x=(null==o?void 0:o.get(y))||s;C.isNoDocument()&&C.version.isEqual(Pt.min())?(n.removeEntry(y,x),m=m.insert(y,C)):!T.isValidDocument()||C.version.compareTo(T.version)>0||0===C.version.compareTo(T.version)&&T.hasPendingWrites?(n.addEntry(C,x),m=m.insert(y,C)):Be("LocalStore","Ignoring outdated watch update for ",y,". Current version:",T.version," Watch version:",C.version)}),m})}function Sk(i,n){const r=je(i);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===n&&(n=-1),r.In.getNextMutationBatchAfterBatchId(s,n)))}function Gh(i,n){const r=je(i);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return r.ze.getTargetData(s,n).next(c=>c?(o=c,Re.resolve(o)):r.ze.allocateTargetId(s).next(h=>(o=new ic(n,h,0,s.currentSequenceNumber),r.ze.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=r.Un.get(s.targetId);return(null===o||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(r.Un=r.Un.insert(s.targetId,s),r.qn.set(n,s.targetId)),s})}function og(i,n,r){return Vw.apply(this,arguments)}function Vw(){return(Vw=(0,Ce.Z)(function*(i,n,r){const s=je(i),o=s.Un.get(n),c=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",c,h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Nu(h))throw h;Be("LocalStore",`Failed to update sequence numbers for target ${n}: ${h}`)}s.Un=s.Un.remove(n),s.qn.delete(o.target)})).apply(this,arguments)}function ac(i,n,r){const s=je(i);let o=Pt.min(),c=pn();return s.persistence.runTransaction("Execute query","readonly",h=>function(m,y,C){const T=je(m),x=T.qn.get(C);return void 0!==x?Re.resolve(T.Un.get(x)):T.ze.getTargetData(y,C)}(s,h,zi(n)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(h,m.targetId).next(y=>{c=y})}).next(()=>s.Bn.getDocumentsMatchingQuery(h,n,r?o:Pt.min(),r?c:pn())).next(m=>({documents:m,Gn:c})))}function eD(i,n){const r=je(i),s=je(r.ze),o=r.Un.get(n);return o?Promise.resolve(o.target):r.persistence.runTransaction("Get target data","readonly",c=>s.Et(c,n).next(h=>h?h.target:null))}function tD(i){const n=je(i);return n.persistence.runTransaction("Get new document changes","readonly",r=>function(s,o,c){const h=je(s);let m=co(),y=Cy(c);const C=za(o),T=IDBKeyRange.lowerBound(y,!0);return C.Kt({index:zn.readTimeIndex,range:T},(x,R)=>{const O=eg(h.N,R);m=m.insert(O.key,O),y=R.readTime}).next(()=>({Tn:m,readTime:Iy(y)}))}(n.jn,r,n.Kn)).then(({Tn:r,readTime:s})=>(n.Kn=s,r))}function $h(){return($h=(0,Ce.Z)(function*(i){const n=je(i);return n.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(s){const o=za(s);let c=Pt.min();return o.Kt({index:zn.readTimeIndex,reverse:!0},(h,m,y)=>{m.readTime&&(c=Iy(m.readTime)),y.done()}).next(()=>c)}(r)).then(r=>{n.Kn=r})})).apply(this,arguments)}function My(){return(My=(0,Ce.Z)(function*(i,n,r,s){const o=je(i);let c=pn(),h=co(),m=CT();for(const T of r){const x=n.zn(T.metadata.name);T.document&&(c=c.add(x)),h=h.insert(x,n.Hn(T)),m=m.insert(x,n.Jn(T.metadata.readTime))}const y=o.jn.newChangeBuffer({trackRemovals:!0}),C=yield Gh(o,(T=s,zi(Xl(on.fromString(`__bundle__/docs/${T}`)))));var T;return o.persistence.runTransaction("Apply bundle documents","readwrite",T=>XT(T,y,h,Pt.min(),m).next(x=>(y.apply(T),x)).next(x=>o.ze.removeMatchingKeysForTargetId(T,C.targetId).next(()=>o.ze.addMatchingKeys(T,c,C.targetId)).next(()=>o.Qn.vn(T,x)).next(()=>x)))})).apply(this,arguments)}function Dk(i,n){return nD.apply(this,arguments)}function nD(){return(nD=(0,Ce.Z)(function*(i,n,r=pn()){const s=yield Gh(i,zi(Tw(n.bundledQuery))),o=je(i);return o.persistence.runTransaction("Save named query","readwrite",c=>{const h=jr(n.readTime);if(s.snapshotVersion.compareTo(h)>=0)return o.Je.saveNamedQuery(c,n);const m=s.withResumeToken(Er.EMPTY_BYTE_STRING,h);return o.Un=o.Un.insert(m.targetId,m),o.ze.updateTargetData(c,m).next(()=>o.ze.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>o.ze.addMatchingKeys(c,r,s.targetId)).next(()=>o.Je.saveNamedQuery(c,n))})})).apply(this,arguments)}class Ak{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,r){return Re.resolve(this.Yn.get(r))}saveBundleMetadata(n,r){var s;return this.Yn.set(r.id,{id:(s=r).id,version:s.version,createTime:jr(s.createTime)}),Re.resolve()}getNamedQuery(n,r){return Re.resolve(this.Xn.get(r))}saveNamedQuery(n,r){return this.Xn.set(r.name,{name:(s=r).name,query:Tw(s.bundledQuery),readTime:jr(s.readTime)}),Re.resolve();var s}}class zh{constructor(){this.Zn=new fr(Gr.ts),this.es=new fr(Gr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,r){const s=new Gr(n,r);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(n,r){n.forEach(s=>this.addReference(s,r))}removeReference(n,r){this.rs(new Gr(n,r))}os(n,r){n.forEach(s=>this.removeReference(s,r))}cs(n){const r=new nt(new on([])),s=new Gr(r,n),o=new Gr(r,n+1),c=[];return this.es.forEachInRange([s,o],h=>{this.rs(h),c.push(h.key)}),c}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const r=new nt(new on([])),s=new Gr(r,n),o=new Gr(r,n+1);let c=pn();return this.es.forEachInRange([s,o],h=>{c=c.add(h.key)}),c}containsKey(n){const r=new Gr(n,0),s=this.Zn.firstAfterOrEqual(r);return null!==s&&n.isEqual(s.key)}}class Gr{constructor(n,r){this.key=n,this.ls=r}static ts(n,r){return nt.comparator(n.key,r.key)||Zt(n.ls,r.ls)}static ns(n,r){return Zt(n.ls,r.ls)||nt.comparator(n.key,r.key)}}class xk{constructor(n,r){this.Ht=n,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new fr(Gr.ts)}checkEmpty(n){return Re.resolve(0===this.In.length)}addMutationBatch(n,r,s,o){const c=this.fs;this.fs++;const h=new Ey(c,r,s,o);this.In.push(h);for(const m of o)this.ds=this.ds.add(new Gr(m.key,c)),this.Ht.addToCollectionParentIndex(n,m.key.path.popLast());return Re.resolve(h)}lookupMutationBatch(n,r){return Re.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(n,r){const o=this._s(r+1),c=o<0?0:o;return Re.resolve(this.In.length>c?this.In[c]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return Re.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,r){const s=new Gr(r,0),o=new Gr(r,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([s,o],h=>{const m=this.ws(h.ls);c.push(m)}),Re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(n,r){let s=new fr(Zt);return r.forEach(o=>{const c=new Gr(o,0),h=new Gr(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([c,h],m=>{s=s.add(m.ls)})}),Re.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(n,r){const s=r.path,o=s.length+1;let c=s;nt.isDocumentKey(c)||(c=c.child(""));const h=new Gr(new nt(c),0);let m=new fr(Zt);return this.ds.forEachWhile(y=>{const C=y.key.path;return!!s.isPrefixOf(C)&&(C.length===o&&(m=m.add(y.ls)),!0)},h),Re.resolve(this.gs(m))}gs(n){const r=[];return n.forEach(s=>{const o=this.ws(s);null!==o&&r.push(o)}),r}removeMutationBatch(n,r){Et(0===this.ys(r.batchId,"removed")),this.In.shift();let s=this.ds;return Re.forEach(r.mutations,o=>{const c=new Gr(o.key,r.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(n,o.key)}).next(()=>{this.ds=s})}te(n){}containsKey(n,r){const s=new Gr(r,0),o=this.ds.firstAfterOrEqual(s);return Re.resolve(r.isEqual(o&&o.key))}performConsistencyCheck(n){return Re.resolve()}ys(n,r){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}class rD{constructor(n,r){this.Ht=n,this.ps=r,this.docs=new Vn(nt.comparator),this.size=0}addEntry(n,r,s){const o=r.key,c=this.docs.get(o),h=c?c.size:0,m=this.ps(r);return this.docs=this.docs.insert(o,{document:r.clone(),size:m,readTime:s}),this.size+=m-h,this.Ht.addToCollectionParentIndex(n,o.path.popLast())}removeEntry(n){const r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}getEntry(n,r){const s=this.docs.get(r);return Re.resolve(s?s.document.clone():Nn.newInvalidDocument(r))}getEntries(n,r){let s=co();return r.forEach(o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.clone():Nn.newInvalidDocument(o))}),Re.resolve(s)}getDocumentsMatchingQuery(n,r,s){let o=co();const c=new nt(r.path.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:m,value:{document:y,readTime:C}}=h.getNext();if(!r.path.isPrefixOf(m.path))break;C.compareTo(s)<=0||tc(r,y)&&(o=o.insert(y.key,y.clone()))}return Re.resolve(o)}Es(n,r){return Re.forEach(this.docs,s=>r(s))}newChangeBuffer(n){return new iD(this)}getSize(n){return Re.resolve(this.size)}}class iD extends WT{constructor(n){super(),this.Se=n}applyChanges(n){const r=[];return this.changes.forEach((s,o)=>{o.document.isValidDocument()?r.push(this.Se.addEntry(n,o.document,this.getReadTime(s))):this.Se.removeEntry(s)}),Re.waitFor(r)}getFromCache(n,r){return this.Se.getEntry(n,r)}getAllFromCache(n,r){return this.Se.getEntries(n,r)}}class Bw{constructor(n){this.persistence=n,this.Ts=new ng(r=>wh(r),iy),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.Is=0,this.As=new zh,this.targetCount=0,this.Rs=Vh.se()}forEachTarget(n,r){return this.Ts.forEach((s,o)=>r(o)),Re.resolve()}getLastRemoteSnapshotVersion(n){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return Re.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(n,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Is&&(this.Is=r),Re.resolve()}ae(n){this.Ts.set(n.target,n);const r=n.targetId;r>this.highestTargetId&&(this.Rs=new Vh(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,r){return this.ae(r),this.targetCount+=1,Re.resolve()}updateTargetData(n,r){return this.ae(r),Re.resolve()}removeTargetData(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,Re.resolve()}removeTargets(n,r,s){let o=0;const c=[];return this.Ts.forEach((h,m)=>{m.sequenceNumber<=r&&null===s.get(m.targetId)&&(this.Ts.delete(h),c.push(this.removeMatchingKeysForTargetId(n,m.targetId)),o++)}),Re.waitFor(c).next(()=>o)}getTargetCount(n){return Re.resolve(this.targetCount)}getTargetData(n,r){const s=this.Ts.get(r)||null;return Re.resolve(s)}addMatchingKeys(n,r,s){return this.As.ss(r,s),Re.resolve()}removeMatchingKeys(n,r,s){this.As.os(r,s);const o=this.persistence.referenceDelegate,c=[];return o&&r.forEach(h=>{c.push(o.markPotentiallyOrphaned(n,h))}),Re.waitFor(c)}removeMatchingKeysForTargetId(n,r){return this.As.cs(r),Re.resolve()}getMatchingKeysForTargetId(n,r){const s=this.As.hs(r);return Re.resolve(s)}containsKey(n,r){return Re.resolve(this.As.containsKey(r))}}class sD{constructor(n,r){this.bs={},this.Le=new ws(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new Bw(this),this.Ht=new F1,this.He=new rD(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new UT(r),this.Je=new Ak(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let r=this.bs[n.toKey()];return r||(r=new xk(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,r,s){Be("MemoryPersistence","Starting transaction:",n);const o=new oD(this.Le.next());return this.referenceDelegate.vs(),s(o).next(c=>this.referenceDelegate.Vs(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ss(n,r){return Re.or(Object.values(this.bs).map(s=>()=>s.containsKey(n,r)))}}class oD extends ww{constructor(n){super(),this.currentSequenceNumber=n}}class Uw{constructor(n){this.persistence=n,this.Ds=new zh,this.Cs=null}static Ns(n){return new Uw(n)}get xs(){if(this.Cs)return this.Cs;throw st()}addReference(n,r,s){return this.Ds.addReference(s,r),this.xs.delete(s.toString()),Re.resolve()}removeReference(n,r,s){return this.Ds.removeReference(s,r),this.xs.add(s.toString()),Re.resolve()}markPotentiallyOrphaned(n,r){return this.xs.add(r.toString()),Re.resolve()}removeTarget(n,r){this.Ds.cs(r.targetId).forEach(o=>this.xs.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(n,r.targetId).next(o=>{o.forEach(c=>this.xs.add(c.toString()))}).next(()=>s.removeTargetData(n,r))}vs(){this.Cs=new Set}Vs(n){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.xs,s=>{const o=nt.fromPath(s);return this.ks(n,o).next(c=>{c||r.removeEntry(o)})}).next(()=>(this.Cs=null,r.apply(n)))}updateLimboDocument(n,r){return this.ks(n,r).next(s=>{s?this.xs.delete(r.toString()):this.xs.add(r.toString())})}Ps(n){return 0}ks(n,r){return Re.or([()=>Re.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(n,r),()=>this.persistence.Ss(n,r)])}}function aD(i,n){return`firestore_clients_${i}_${n}`}function jw(i,n,r){let s=`firestore_mutations_${i}_${r}`;return n.isAuthenticated()&&(s+=`_${n.uid}`),s}function Hw(i,n){return`firestore_targets_${i}_${n}`}class ag{constructor(n,r,s,o){this.user=n,this.batchId=r,this.state=s,this.error=o}static $s(n,r,s){const o=JSON.parse(s);let c,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(c=new Ne(o.error.code,o.error.message))),h?new ag(n,r,o.state,c):(dr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class lc{constructor(n,r,s){this.targetId=n,this.state=r,this.error=s}static $s(n,r){const s=JSON.parse(r);let o,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(o=new Ne(s.error.code,s.error.message))),c?new lc(n,s.state,o):(dr("SharedClientState",`Failed to parse target state for ID '${n}': ${r}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Vu{constructor(n,r){this.clientId=n,this.activeTargetIds=r}static $s(n,r){const s=JSON.parse(r);let o="object"==typeof s&&s.activeTargetIds instanceof Array,c=Ru();for(let h=0;o&&h<s.activeTargetIds.length;++h)o=ty(s.activeTargetIds[h]),c=c.add(s.activeTargetIds[h]);return o?new Vu(n,c):(dr("SharedClientState",`Failed to parse client data for instance '${n}': ${r}`),null)}}class lD{constructor(n,r){this.clientId=n,this.onlineState=r}static $s(n){const r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new lD(r.clientId,r.onlineState):(dr("SharedClientState",`Failed to parse online state: ${n}`),null)}}class Bu{constructor(){this.activeTargetIds=Ru()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class an{constructor(n,r,s,o,c){this.window=n,this.Oe=r,this.persistenceKey=s,this.Ls=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Vn(Zt),this.started=!1,this.Ks=[];const h=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.js=aD(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new Bu),this.Ws=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,Ce.Z)(function*(){const r=yield n.syncEngine.pn();for(const o of r){if(o===n.Ls)continue;const c=n.getItem(aD(n.persistenceKey,o));if(c){const h=Vu.$s(o,c);h&&(n.qs=n.qs.insert(h.clientId,h))}}n.Ys();const s=n.storage.getItem(n.Hs);if(s){const o=n.Xs(s);o&&n.Zs(o)}for(const o of n.Ks)n.Us(o);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let r=!1;return this.qs.forEach((s,o)=>{o.activeTargetIds.has(n)&&(r=!0)}),r}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,r,s){this.ei(n,r,s),this.ni(n)}addLocalQueryTarget(n){let r="not-current";if(this.isActiveQueryTarget(n)){const s=this.storage.getItem(Hw(this.persistenceKey,n));if(s){const o=lc.$s(n,s);o&&(r=o.state)}}return this.si.Fs(n),this.Ys(),r}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(Hw(this.persistenceKey,n))}updateQueryState(n,r,s){this.ii(n,r,s)}handleUserChange(n,r,s){r.forEach(o=>{this.ni(o)}),this.currentUser=n,s.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const r=this.storage.getItem(n);return Be("SharedClientState","READ",n,r),r}setItem(n,r){Be("SharedClientState","SET",n,r),this.storage.setItem(n,r)}removeItem(n){Be("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var r=this;const s=n;if(s.storageArea===this.storage){if(Be("SharedClientState","EVENT",s.key,s.newValue),s.key===this.js)return void dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ce.Z)(function*(){if(r.started){if(null!==s.key)if(r.Ws.test(s.key)){if(null==s.newValue){const o=r.ai(s.key);return r.ci(o,null)}{const o=r.ui(s.key,s.newValue);if(o)return r.ci(o.clientId,o)}}else if(r.Gs.test(s.key)){if(null!==s.newValue){const o=r.hi(s.key,s.newValue);if(o)return r.li(o)}}else if(r.zs.test(s.key)){if(null!==s.newValue){const o=r.fi(s.key,s.newValue);if(o)return r.di(o)}}else if(s.key===r.Hs){if(null!==s.newValue){const o=r.Xs(s.newValue);if(o)return r.Zs(o)}}else if(s.key===r.Qs){const o=function(c){let h=ws.T;if(null!=c)try{const m=JSON.parse(c);Et("number"==typeof m),h=m}catch(m){dr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(s.newValue);o!==ws.T&&r.sequenceNumberHandler(o)}else if(s.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(s)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,r,s){const o=new ag(this.currentUser,n,r,s),c=jw(this.persistenceKey,this.currentUser,n);this.setItem(c,o.Os())}ni(n){const r=jw(this.persistenceKey,this.currentUser,n);this.removeItem(r)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,r,s){const o=Hw(this.persistenceKey,n),c=new lc(n,r,s);this.setItem(o,c.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const r=this.Ws.exec(n);return r?r[1]:null}ui(n,r){const s=this.ai(n);return Vu.$s(s,r)}hi(n,r){const s=this.Gs.exec(n),o=Number(s[1]);return ag.$s(new oi(void 0!==s[2]?s[2]:null),o,r)}fi(n,r){const s=this.zs.exec(n),o=Number(s[1]);return lc.$s(o,r)}Xs(n){return lD.$s(n)}li(n){var r=this;return(0,Ce.Z)(function*(){if(n.user.uid===r.currentUser.uid)return r.syncEngine._i(n.batchId,n.state,n.error);Be("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,r){const s=r?this.qs.insert(n,r):this.qs.remove(n),o=this.ti(this.qs),c=this.ti(s),h=[],m=[];return c.forEach(y=>{o.has(y)||h.push(y)}),o.forEach(y=>{c.has(y)||m.push(y)}),this.syncEngine.gi(h,m).then(()=>{this.qs=s})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let r=Ru();return n.forEach((s,o)=>{r=r.unionWith(o.activeTargetIds)}),r}}class qa{constructor(){this.yi=new Bu,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,r,s){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,r,s){this.pi[n]=r}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new Bu,Promise.resolve()}handleUserChange(n,r,s){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class qh{Ei(n){}shutdown(){}}class Wh{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const V1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Dt{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class Fs extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,r,s,o){const c=this.Bi(n,r);Be("RestConnection","Sending: ",c,s);const h={};return this.Ui(h,o),this.qi(n,c,h,s).then(m=>(Be("RestConnection","Received: ",m),m),m=>{throw $p("RestConnection",`${n} failed with error: `,m,"url: ",c,"request:",s),m})}Ki(n,r,s,o){return this.Li(n,r,s,o)}Ui(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+Su,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const s in r.authHeaders)r.authHeaders.hasOwnProperty(s)&&(n[s]=r.authHeaders[s])}Bi(n,r){return`${this.Fi}/v1/${r}:${V1[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,r,s,o){return new Promise((c,h)=>{const m=new _h;m.listenOnce(M1.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case tT.NO_ERROR:const C=m.getResponseJson();Be("Connection","XHR received:",JSON.stringify(C)),c(C);break;case tT.TIMEOUT:Be("Connection",'RPC "'+n+'" timed out'),h(new Ne(_e.DEADLINE_EXCEEDED,"Request time out"));break;case tT.HTTP_ERROR:const T=m.getStatus();if(Be("Connection",'RPC "'+n+'" failed with status:',T,"response text:",m.getResponseText()),T>0){const x=m.getResponseJson().error;if(x&&x.status&&x.message){const R=function(O){const U=O.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(U)>=0?U:_e.UNKNOWN}(x.status);h(new Ne(R,x.message))}else h(new Ne(_e.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Ne(_e.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Be("Connection",'RPC "'+n+'" completed.')}});const y=JSON.stringify(o);m.send(r,"POST",y,s,15)})}ji(n,r){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],o=GR(),c=x1(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new R1({})),this.Ui(h.initMessageHeaders,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=s.join("");Be("Connection","Creating WebChannel: "+m,h);const y=o.createWebChannel(m,h);let C=!1,T=!1;const x=new Dt({vi:O=>{T?Be("Connection","Not sending because WebChannel is closed:",O):(C||(Be("Connection","Opening WebChannel transport."),y.open(),C=!0),Be("Connection","WebChannel sending:",O),y.send(O))},Vi:()=>y.close()}),R=(O,U,te)=>{O.listen(U,pe=>{try{te(pe)}catch(Fe){setTimeout(()=>{throw Fe},0)}})};return R(y,W_.EventType.OPEN,()=>{T||Be("Connection","WebChannel transport opened.")}),R(y,W_.EventType.CLOSE,()=>{T||(T=!0,Be("Connection","WebChannel transport closed"),x.$i())}),R(y,W_.EventType.ERROR,O=>{T||(T=!0,$p("Connection","WebChannel transport errored:",O),x.$i(new Ne(_e.UNAVAILABLE,"The operation could not be completed")))}),R(y,W_.EventType.MESSAGE,O=>{var U;if(!T){const te=O.data[0];Et(!!te);const pe=te,Fe=pe.error||(null===(U=pe[0])||void 0===U?void 0:U.error);if(Fe){Be("Connection","WebChannel received error:",Fe);const Ge=Fe.status;let $e=function(wn){const Dr=er[wn];if(void 0!==Dr)return ET(Dr)}(Ge),We=Fe.message;void 0===$e&&($e=_e.INTERNAL,We="Unknown error status: "+Ge+" with message "+Fe.message),T=!0,x.$i(new Ne($e,We)),y.close()}else Be("Connection","WebChannel received:",te),x.Oi(te)}}),R(c,$R.STAT_EVENT,O=>{O.stat===UE.PROXY?Be("Connection","Detected buffering proxy"):O.stat===UE.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.ki()},0),x}}function Ry(){return"undefined"!=typeof window?window:null}function Jo(){return"undefined"!=typeof document?document:null}function ky(i){return new sk(i,!0)}class Ny{constructor(n,r,s=1e3,o=1.5,c=6e4){this.Oe=n,this.timerId=r,this.Qi=s,this.Wi=o,this.Gi=c,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const r=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),o=Math.max(0,r-s);o>0&&Be("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Gw{constructor(n,r,s,o,c,h){this.Oe=n,this.er=s,this.nr=o,this.credentialsProvider=c,this.listener=h,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Ny(n,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,Ce.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,Ce.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,r){var s=this;return(0,Ce.Z)(function*(){s._r(),s.rr.cancel(),s.sr++,3!==n?s.rr.reset():r&&r.code===_e.RESOURCE_EXHAUSTED?(dr(r.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),s.rr.Yi()):r&&r.code===_e.UNAUTHENTICATED&&s.credentialsProvider.invalidateToken(),null!==s.stream&&(s.mr(),s.stream.close(),s.stream=null),s.state=n,yield s.listener.Ci(r)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(s=>{this.sr===r&&this.yr(s)},s=>{n(()=>{const o=new Ne(_e.UNKNOWN,"Fetching auth token failed: "+s.message);return this.pr(o)})})}yr(n){const r=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(s=>{r(()=>this.pr(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}ur(){var n=this;this.state=4,this.rr.Xi((0,Ce.Z)(function*(){n.state=0,n.start()}))}pr(n){return Be("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return r=>{this.Oe.enqueueAndForget(()=>this.sr===n?r():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B1 extends Gw{constructor(n,r,s,o,c){super(n,"listen_stream_connection_backoff","listen_stream_idle",r,s,c),this.N=o}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const r=function(i,n){let r;if("targetChange"in n){const s="NO_CHANGE"===(y=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:st(),o=n.targetChange.targetIds||[],c=function(y,C){return y.D?(Et(void 0===C||"string"==typeof C),Er.fromBase64String(C||"")):(Et(void 0===C||C instanceof Uint8Array),Er.fromUint8Array(C||new Uint8Array))}(i,n.targetChange.resumeToken),h=n.targetChange.cause,m=h&&function(y){const C=void 0===y.code?_e.UNKNOWN:ET(y.code);return new Ne(C,y.message||"")}(h);r=new IT(s,o,c,m||null)}else if("documentChange"in n){const s=n.documentChange,o=uo(i,s.document.name),c=jr(s.document.updateTime),h=new Ei({mapValue:{fields:s.document.fields}}),m=Nn.newFoundDocument(o,c,h);r=new Zp(s.targetIds||[],s.removedTargetIds||[],m.key,m)}else if("documentDelete"in n){const s=n.documentDelete,o=uo(i,s.document),c=s.readTime?jr(s.readTime):Pt.min(),h=Nn.newNoDocument(o,c);r=new Zp([],s.removedTargetIds||[],h.key,h)}else if("documentRemove"in n){const s=n.documentRemove,o=uo(i,s.document);r=new Zp([],s.removedTargetIds||[],o,null)}else{if(!("filter"in n))return st();{const s=n.filter,c=new uw(s.count||0);r=new _y(s.targetId,c)}}var y;return r}(this.N,n),s=function(o){if(!("targetChange"in o))return Pt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Pt.min():c.readTime?jr(c.readTime):Pt.min()}(n);return this.listener.Tr(r,s)}Ir(n){const r={};r.database=ja(this.N),r.addTarget=function(o,c){let h;const m=c.target;return h=sy(m)?{documents:OT(o,m)}:{query:PT(o,m)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=TT(o,c.resumeToken):c.snapshotVersion.compareTo(Pt.min())>0&&(h.readTime=Ua(o,c.snapshotVersion.toTimestamp())),h}(this.N,n);const s=function(i,n){const r=function(s,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,n.purpose);return null==r?null:{"goog-listen-tags":r}}(0,n);s&&(r.labels=s),this.wr(r)}Ar(n){const r={};r.database=ja(this.N),r.removeTarget=n,this.wr(r)}}class Mk extends Gw{constructor(n,r,s,o,c){super(n,"write_stream_connection_backoff","write_stream_idle",r,s,c),this.N=o,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(Et(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const r=function(i,n){return i&&i.length>0?(Et(void 0!==n),i.map(r=>function(s,o){let c=jr(s.updateTime?s.updateTime:o);return c.isEqual(Pt.min())&&(c=jr(o)),new XR(c,s.transformResults||[])}(r,n))):[]}(n.writeResults,n.commitTime),s=jr(n.commitTime);return this.listener.vr(s,r)}return Et(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=ja(this.N),this.wr(n)}Pr(n){const r={streamToken:this.lastStreamToken,writes:n.map(s=>Qp(this.N,s))};this.wr(r)}}class Rk extends class{}{constructor(n,r,s){super(),this.credentials=n,this.nr=r,this.N=s,this.Dr=!1}Cr(){if(this.Dr)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,r,s){return this.Cr(),this.credentials.getToken().then(o=>this.nr.Li(n,r,s,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===_e.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new Ne(_e.UNKNOWN,o.toString())})}Ki(n,r,s){return this.Cr(),this.credentials.getToken().then(o=>this.nr.Ki(n,r,s,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===_e.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new Ne(_e.UNKNOWN,o.toString())})}terminate(){this.Dr=!0}}class Ls{constructor(n,r){this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const r=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(dr(r),this.$r=!1):Be("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class qn{constructor(n,r,s,o,c){var h=this;this.localStore=n,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=c,this.Qr.Ei(m=>{s.enqueueAndForget((0,Ce.Z)(function*(){var y;Ya(h)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Ce.Z)(function*(C){const T=je(C);T.Kr.add(4),yield Yh(T),T.Wr.set("Unknown"),T.Kr.delete(4),yield Wi(T)}),function(C){return y.apply(this,arguments)})(h))}))}),this.Wr=new Ls(s,o)}}function Wi(i){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,Ce.Z)(function*(i){if(Ya(i))for(const n of i.jr)yield n(!0)})).apply(this,arguments)}function Yh(i){return Py.apply(this,arguments)}function Py(){return(Py=(0,Ce.Z)(function*(i){for(const n of i.jr)yield n(!1)})).apply(this,arguments)}function Kh(i,n){const r=je(i);r.qr.has(n.targetId)||(r.qr.set(n.targetId,n),$w(r)?Wa(r):Qh(r).cr()&&Uu(r,n))}function Xo(i,n){const r=je(i),s=Qh(r);r.qr.delete(n),s.cr()&&cD(r,n),0===r.qr.size&&(s.cr()?s.lr():Ya(r)&&r.Wr.set("Unknown"))}function Uu(i,n){i.Gr.Y(n.targetId),Qh(i).Ir(n)}function cD(i,n){i.Gr.Y(n),Qh(i).Ar(n)}function Wa(i){i.Gr=new ST({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>i.qr.get(n)||null}),Qh(i).start(),i.Wr.Or()}function $w(i){return Ya(i)&&!Qh(i).ar()&&i.qr.size>0}function Ya(i){return 0===je(i).Kr.size}function Fy(i){i.Gr=void 0}function lg(i){return cg.apply(this,arguments)}function cg(){return(cg=(0,Ce.Z)(function*(i){i.qr.forEach((n,r)=>{Uu(i,n)})})).apply(this,arguments)}function uD(i,n){return cc.apply(this,arguments)}function cc(){return(cc=(0,Ce.Z)(function*(i,n){Fy(i),$w(i)?(i.Wr.Lr(n),Wa(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function kk(i,n,r){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,Ce.Z)(function*(i,n,r){if(i.Wr.set("Online"),n instanceof IT&&2===n.state&&n.cause)try{yield(s=(0,Ce.Z)(function*(o,c){const h=c.cause;for(const m of c.targetIds)o.qr.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.qr.delete(m),o.Gr.removeTarget(m))}),function(o,c){return s.apply(this,arguments)})(i,n)}catch(s){Be("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),s),yield ug(i,s)}else if(n instanceof Zp?i.Gr.rt(n):n instanceof _y?i.Gr.ft(n):i.Gr.ct(n),!r.isEqual(Pt.min()))try{const s=yield JT(i.localStore);r.compareTo(s)>=0&&(yield function(o,c){const h=o.Gr._t(c);return h.targetChanges.forEach((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.qr.get(y);C&&o.qr.set(y,C.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach(m=>{const y=o.qr.get(m);if(!y)return;o.qr.set(m,y.withResumeToken(Er.EMPTY_BYTE_STRING,y.snapshotVersion)),cD(o,m);const C=new ic(y.target,m,1,y.sequenceNumber);Uu(o,C)}),o.remoteSyncer.applyRemoteEvent(h)}(i,r))}catch(s){Be("RemoteStore","Failed to raise snapshot:",s),yield ug(i,s)}var s})).apply(this,arguments)}function ug(i,n,r){return Ly.apply(this,arguments)}function Ly(){return(Ly=(0,Ce.Z)(function*(i,n,r){if(!Nu(n))throw n;i.Kr.add(1),yield Yh(i),i.Wr.set("Offline"),r||(r=()=>JT(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield r(),i.Kr.delete(1),yield Wi(i)}))})).apply(this,arguments)}function zw(i,n){return n().catch(r=>ug(i,r,n))}function Ka(i){return qw.apply(this,arguments)}function qw(){return(qw=(0,Ce.Z)(function*(i){const n=je(i),r=uc(n);let s=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;Ww(n);)try{const o=yield Sk(n.localStore,s);if(null===o){0===n.Ur.length&&r.lr();break}s=o.batchId,Yw(n,o)}catch(o){yield ug(n,o)}Nk(n)&&Ok(n)})).apply(this,arguments)}function Ww(i){return Ya(i)&&i.Ur.length<10}function Yw(i,n){i.Ur.push(n);const r=uc(i);r.cr()&&r.br&&r.Pr(n.mutations)}function Nk(i){return Ya(i)&&!uc(i).ar()&&i.Ur.length>0}function Ok(i){uc(i).start()}function St(i){return dD.apply(this,arguments)}function dD(){return(dD=(0,Ce.Z)(function*(i){uc(i).Sr()})).apply(this,arguments)}function dg(i){return Kw.apply(this,arguments)}function Kw(){return(Kw=(0,Ce.Z)(function*(i){const n=uc(i);for(const r of i.Ur)n.Pr(r.mutations)})).apply(this,arguments)}function Pk(i,n,r){return Zw.apply(this,arguments)}function Zw(){return(Zw=(0,Ce.Z)(function*(i,n,r){const s=i.Ur.shift(),o=Iw.from(s,n,r);yield zw(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),yield Ka(i)})).apply(this,arguments)}function U1(i,n){return hD.apply(this,arguments)}function hD(){return(hD=(0,Ce.Z)(function*(i,n){var r;n&&uc(i).br&&(yield(r=(0,Ce.Z)(function*(s,o){if(bT(c=o.code)&&c!==_e.ABORTED){const h=s.Ur.shift();uc(s).hr(),yield zw(s,()=>s.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Ka(s)}var c}),function(s,o){return r.apply(this,arguments)})(i,n)),Nk(i)&&Ok(i)})).apply(this,arguments)}function Qw(i,n){return $r.apply(this,arguments)}function $r(){return($r=(0,Ce.Z)(function*(i,n){const r=je(i);n?(r.Kr.delete(2),yield Wi(r)):n||(r.Kr.add(2),yield Yh(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function Qh(i){return i.zr||(i.zr=function(n,r,s){const o=je(n);return o.Cr(),new B1(r,o.nr,o.credentials,o.N,s)}(i.datastore,i.asyncQueue,{Si:lg.bind(null,i),Ci:uD.bind(null,i),Tr:kk.bind(null,i)}),i.jr.push(function(){var n=(0,Ce.Z)(function*(r){r?(i.zr.hr(),$w(i)?Wa(i):i.Wr.set("Unknown")):(yield i.zr.stop(),Fy(i))});return function(r){return n.apply(this,arguments)}}())),i.zr}function uc(i){return i.Hr||(i.Hr=function(n,r,s){const o=je(n);return o.Cr(),new Mk(r,o.nr,o.credentials,o.N,s)}(i.datastore,i.asyncQueue,{Si:St.bind(null,i),Ci:U1.bind(null,i),Vr:dg.bind(null,i),vr:Pk.bind(null,i)}),i.jr.push(function(){var n=(0,Ce.Z)(function*(r){r?(i.Hr.hr(),yield Ka(i)):(yield i.Hr.stop(),i.Ur.length>0&&(Be("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(r){return n.apply(this,arguments)}}())),i.Hr}class hg{constructor(n,r,s,o,c){this.asyncQueue=n,this.timerId=r,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(n,r,s,o,c){const h=Date.now()+s,m=new hg(n,r,h,o,c);return m.start(s),m}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(_e.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jh(i,n){if(dr("AsyncQueue",`${n}: ${i}`),Nu(i))return new Ne(_e.UNAVAILABLE,`${n}: ${i}`);throw i}class Xh{constructor(n){this.comparator=n?(r,s)=>n(r,s)||nt.comparator(r.key,s.key):(r,s)=>nt.comparator(r.key,s.key),this.keyedMap=fw(),this.sortedSet=new Vn(this.comparator)}static emptySet(n){return new Xh(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((r,s)=>(n(r),!1))}add(n){const r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}delete(n){const r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}isEqual(n){if(!(n instanceof Xh)||this.size!==n.size)return!1;const r=this.sortedSet.getIterator(),s=n.sortedSet.getIterator();for(;r.hasNext();){const o=r.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const n=[];return this.forEach(r=>{n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,r){const s=new Xh;return s.comparator=this.comparator,s.keyedMap=n,s.sortedSet=r,s}}class fD{constructor(){this.Jr=new Vn(nt.comparator)}track(n){const r=n.doc.key,s=this.Jr.get(r);s?0!==n.type&&3===s.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==s.type?this.Jr=this.Jr.insert(r,{type:s.type,doc:n.doc}):2===n.type&&2===s.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===s.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===s.type?this.Jr=this.Jr.remove(r):1===n.type&&2===s.type?this.Jr=this.Jr.insert(r,{type:1,doc:s.doc}):0===n.type&&1===s.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):st():this.Jr=this.Jr.insert(r,n)}Yr(){const n=[];return this.Jr.inorderTraversal((r,s)=>{n.push(s)}),n}}class ef{constructor(n,r,s,o,c,h,m,y){this.query=n,this.docs=r,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y}static fromInitialDocuments(n,r,s,o){const c=[];return r.forEach(h=>{c.push({type:0,doc:h})}),new ef(n,r,Xh.emptySet(r),c,s,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&Ih(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const r=this.docChanges,s=n.docChanges;if(r.length!==s.length)return!1;for(let o=0;o<r.length;o++)if(r[o].type!==s[o].type||!r[o].doc.isEqual(s[o].doc))return!1;return!0}}class Fk{constructor(){this.Xr=void 0,this.listeners=[]}}class Lk{constructor(){this.queries=new ng(n=>ew(n),Ih),this.onlineState="Unknown",this.Zr=new Set}}function fg(i,n){return Jw.apply(this,arguments)}function Jw(){return(Jw=(0,Ce.Z)(function*(i,n){const r=je(i),s=n.query;let o=!1,c=r.queries.get(s);if(c||(o=!0,c=new Fk),o)try{c.Xr=yield r.onListen(s)}catch(h){const m=Jh(h,`Initialization of query '${Wp(n.query)}' failed`);return void n.onError(m)}r.queries.set(s,c),c.listeners.push(n),n.eo(r.onlineState),c.Xr&&n.no(c.Xr)&&pD(r)})).apply(this,arguments)}function Xw(i,n){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,Ce.Z)(function*(i,n){const r=je(i),s=n.query;let o=!1;const c=r.queries.get(s);if(c){const h=c.listeners.indexOf(n);h>=0&&(c.listeners.splice(h,1),o=0===c.listeners.length)}if(o)return r.queries.delete(s),r.onUnlisten(s)})).apply(this,arguments)}function eC(i,n){const r=je(i);let s=!1;for(const o of n){const h=r.queries.get(o.query);if(h){for(const m of h.listeners)m.no(o)&&(s=!0);h.Xr=o}}s&&pD(r)}function Vk(i,n,r){const s=je(i),o=s.queries.get(n);if(o)for(const c of o.listeners)c.onError(r);s.queries.delete(n)}function pD(i){i.Zr.forEach(n=>{n.next()})}class tC{constructor(n,r,s){this.query=n,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=s||{}}no(n){if(!this.options.includeMetadataChanges){const s=[];for(const o of n.docChanges)3!==o.type&&s.push(o);n=new ef(n.query,n.docs,n.oldDocs,s,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let r=!1;return this.io?this.oo(n)&&(this.so.next(n),r=!0):this.ao(n,this.onlineState)&&(this.co(n),r=!0),this.ro=n,r}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}ao(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=ef.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class Bk{constructor(n,r){this.payload=n,this.byteLength=r}ho(){return"metadata"in this.payload}}class gD{constructor(n){this.N=n}zn(n){return uo(this.N,n)}Hn(n){return n.metadata.exists?xT(this.N,n.document,!1):Nn.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return jr(n)}}class Uk{constructor(n,r,s){this.lo=n,this.localStore=r,this.N=s,this.queries=[],this.documents=[],this.progress=mD(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(n){const r=new Map,s=new gD(this.N);for(const o of n)if(o.metadata.queries){const c=s.zn(o.metadata.name);for(const h of o.metadata.queries){const m=(r.get(h)||pn()).add(c);r.set(h,m)}}return r}complete(){var n=this;return(0,Ce.Z)(function*(){const r=yield function(i,n,r,s){return My.apply(this,arguments)}(n.localStore,new gD(n.N),n.documents,n.lo.id),s=n.wo(n.documents);for(const o of n.queries)yield Dk(n.localStore,o,s.get(o.name));return n.progress.taskState="Success",new xy(Object.assign({},n.progress),r)})()}}function mD(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class _D{constructor(n){this.key=n}}class tf{constructor(n){this.key=n}}class yD{constructor(n,r){this.query=n,this._o=r,this.mo=null,this.current=!1,this.yo=pn(),this.mutatedKeys=pn(),this.po=uy(n),this.Eo=new Xh(this.po)}get To(){return this._o}Io(n,r){const s=r?r.Ao:new fD,o=r?r.Eo:this.Eo;let c=r?r.mutatedKeys:this.mutatedKeys,h=o,m=!1;const y=ec(this.query)&&o.size===this.query.limit?o.last():null,C=ay(this.query)&&o.size===this.query.limit?o.first():null;if(n.inorderTraversal((T,x)=>{const R=o.get(T),O=tc(this.query,x)?x:null,U=!!R&&this.mutatedKeys.has(R.key),te=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let pe=!1;R&&O?R.data.isEqual(O.data)?U!==te&&(s.track({type:3,doc:O}),pe=!0):this.Ro(R,O)||(s.track({type:2,doc:O}),pe=!0,(y&&this.po(O,y)>0||C&&this.po(O,C)<0)&&(m=!0)):!R&&O?(s.track({type:0,doc:O}),pe=!0):R&&!O&&(s.track({type:1,doc:R}),pe=!0,(y||C)&&(m=!0)),pe&&(O?(h=h.add(O),c=te?c.add(T):c.delete(T)):(h=h.delete(T),c=c.delete(T)))}),ec(this.query)||ay(this.query))for(;h.size>this.query.limit;){const T=ec(this.query)?h.last():h.first();h=h.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{Eo:h,Ao:s,Ln:m,mutatedKeys:c}}Ro(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(n,r,s){const o=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const c=n.Ao.Yr();c.sort((C,T)=>function(x,R){const O=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return O(x)-O(R)}(C.type,T.type)||this.po(C.doc,T.doc)),this.bo(s);const h=r?this.Po():[],m=0===this.yo.size&&this.current?1:0,y=m!==this.mo;return this.mo=m,0!==c.length||y?{snapshot:new ef(this.query,n.Eo,o,c,n.mutatedKeys,0===m,y,!1),vo:h}:{vo:h}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new fD,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(r=>this._o=this._o.add(r)),n.modifiedDocuments.forEach(r=>{}),n.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=pn(),this.Eo.forEach(s=>{this.Vo(s.key)&&(this.yo=this.yo.add(s.key))});const r=[];return n.forEach(s=>{this.yo.has(s)||r.push(new tf(s))}),this.yo.forEach(s=>{n.has(s)||r.push(new _D(s))}),r}So(n){this._o=n.Gn,this.yo=pn();const r=this.Io(n.documents);return this.applyChanges(r,!0)}Do(){return ef.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class jk{constructor(n,r,s){this.query=n,this.targetId=r,this.view=s}}class vD{constructor(n){this.key=n,this.Co=!1}}class pg{constructor(n,r,s,o,c,h){this.localStore=n,this.remoteStore=r,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.No={},this.xo=new ng(m=>ew(m),Ih),this.ko=new Map,this.$o=new Set,this.Oo=new Vn(nt.comparator),this.Fo=new Map,this.Mo=new zh,this.Lo={},this.Bo=new Map,this.Uo=Vh.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function j1(i,n){return By.apply(this,arguments)}function By(){return(By=(0,Ce.Z)(function*(i,n){const r=mg(i);let s,o;const c=r.xo.get(n);if(c)s=c.targetId,r.sharedClientState.addLocalQueryTarget(s),o=c.view.Do();else{const h=yield Gh(r.localStore,zi(n)),m=r.sharedClientState.addLocalQueryTarget(h.targetId);s=h.targetId,o=yield nC(r,n,s,"current"===m),r.isPrimaryClient&&Kh(r.remoteStore,h)}return o})).apply(this,arguments)}function nC(i,n,r,s){return rC.apply(this,arguments)}function rC(){return(rC=(0,Ce.Z)(function*(i,n,r,s){i.Ko=(T,x,R)=>{return(O=(0,Ce.Z)(function*(U,te,pe,Fe){let Ge=te.view.Io(pe);Ge.Ln&&(Ge=yield ac(U.localStore,te.query,!1).then(({documents:wn})=>te.view.Io(wn,Ge)));const $e=Fe&&Fe.targetChanges.get(te.targetId),We=te.view.applyChanges(Ge,U.isPrimaryClient,$e);return hc(U,te.targetId,We.vo),We.snapshot}),function(U,te,pe,Fe){return O.apply(this,arguments)})(i,T,x,R);var O};const o=yield ac(i.localStore,n,!0),c=new yD(n,o.Gn),h=c.Io(o.documents),m=my.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==i.onlineState),y=c.applyChanges(h,i.isPrimaryClient,m);hc(i,r,y.vo);const C=new jk(n,r,c);return i.xo.set(n,C),i.ko.has(r)?i.ko.get(r).push(n):i.ko.set(r,[n]),y.snapshot})).apply(this,arguments)}function Hk(i,n){return iC.apply(this,arguments)}function iC(){return(iC=(0,Ce.Z)(function*(i,n){const r=je(i),s=r.xo.get(n),o=r.ko.get(s.targetId);if(o.length>1)return r.ko.set(s.targetId,o.filter(c=>!Ih(c,n))),void r.xo.delete(n);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield og(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),Xo(r.remoteStore,s.targetId),dc(r,s.targetId)}).catch(Fu))):(dc(r,s.targetId),yield og(r.localStore,s.targetId,!0))})).apply(this,arguments)}function Uy(){return(Uy=(0,Ce.Z)(function*(i,n,r){const s=$y(i);try{const o=yield function(c,h){const m=je(c),y=Pr.now(),C=h.reduce((x,R)=>x.add(R.key),pn());let T;return m.persistence.runTransaction("Locally write mutations","readwrite",x=>m.Qn.Pn(x,C).next(R=>{T=R;const O=[];for(const U of h){const te=tk(U,T.get(U.key));null!=te&&O.push(new Ba(U.key,te,sT(te.value.mapValue),wr.exists(!0)))}return m.In.addMutationBatch(x,y,O,h)})).then(x=>(x.applyToLocalDocumentSet(T),{batchId:x.batchId,changes:T}))}(s.localStore,n);s.sharedClientState.addPendingMutation(o.batchId),function(c,h,m){let y=c.Lo[c.currentUser.toKey()];y||(y=new Vn(Zt)),y=y.insert(h,m),c.Lo[c.currentUser.toKey()]=y}(s,o.batchId,r),yield Lr(s,o.changes),yield Ka(s.remoteStore)}catch(o){const c=Jh(o,"Failed to persist write");r.reject(c)}})).apply(this,arguments)}function bD(i,n){return sC.apply(this,arguments)}function sC(){return(sC=(0,Ce.Z)(function*(i,n){const r=je(i);try{const s=yield Ik(r.localStore,n);n.targetChanges.forEach((o,c)=>{const h=r.Fo.get(c);h&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Co=!0:o.modifiedDocuments.size>0?Et(h.Co):o.removedDocuments.size>0&&(Et(h.Co),h.Co=!1))}),yield Lr(r,s,n)}catch(s){yield Fu(s)}})).apply(this,arguments)}function $k(i,n,r){const s=je(i);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const o=[];s.xo.forEach((c,h)=>{const m=h.view.eo(n);m.snapshot&&o.push(m.snapshot)}),function(c,h){const m=je(c);m.onlineState=h;let y=!1;m.queries.forEach((C,T)=>{for(const x of T.listeners)x.eo(h)&&(y=!0)}),y&&pD(m)}(s.eventManager,n),o.length&&s.No.Tr(o),s.onlineState=n,s.isPrimaryClient&&s.sharedClientState.setOnlineState(n)}}function H1(i,n,r){return ED.apply(this,arguments)}function ED(){return(ED=(0,Ce.Z)(function*(i,n,r){const s=je(i);s.sharedClientState.updateQueryState(n,"rejected",r);const o=s.Fo.get(n),c=o&&o.key;if(c){let h=new Vn(nt.comparator);h=h.insert(c,Nn.newNoDocument(c,Pt.min()));const m=pn().add(c),y=new An(Pt.min(),new Map,new fr(Zt),h,m);yield bD(s,y),s.Oo=s.Oo.remove(c),s.Fo.delete(n),Hy(s)}else yield og(s.localStore,n,!1).then(()=>dc(s,n,r)).catch(Fu)})).apply(this,arguments)}function oC(i,n){return aC.apply(this,arguments)}function aC(){return(aC=(0,Ce.Z)(function*(i,n){const r=je(i),s=n.batch.batchId;try{const o=yield Ck(r.localStore,n);jy(r,s,null),uC(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield Lr(r,o)}catch(o){yield Fu(o)}})).apply(this,arguments)}function zk(i,n,r){return lC.apply(this,arguments)}function lC(){return(lC=(0,Ce.Z)(function*(i,n,r){const s=je(i);try{const o=yield function(c,h){const m=je(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let C;return m.In.lookupMutationBatch(y,h).next(T=>(Et(null!==T),C=T.keys(),m.In.removeMutationBatch(y,T))).next(()=>m.In.performConsistencyCheck(y)).next(()=>m.Qn.Pn(y,C))})}(s.localStore,n);jy(s,n,r),uC(s,n),s.sharedClientState.updateMutationState(n,"rejected",r),yield Lr(s,o)}catch(o){yield Fu(o)}})).apply(this,arguments)}function cC(){return(cC=(0,Ce.Z)(function*(i,n){const r=je(i);Ya(r.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const h=je(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.In.getHighestUnacknowledgedBatchId(m))}(r.localStore);if(-1===s)return void n.resolve();const o=r.Bo.get(s)||[];o.push(n),r.Bo.set(s,o)}catch(s){const o=Jh(s,"Initialization of waitForPendingWrites() operation failed");n.reject(o)}})).apply(this,arguments)}function uC(i,n){(i.Bo.get(n)||[]).forEach(r=>{r.resolve()}),i.Bo.delete(n)}function jy(i,n,r){const s=je(i);let o=s.Lo[s.currentUser.toKey()];if(o){const c=o.get(n);c&&(r?c.reject(r):c.resolve(),o=o.remove(n)),s.Lo[s.currentUser.toKey()]=o}}function dc(i,n,r=null){i.sharedClientState.removeLocalQueryTarget(n);for(const s of i.ko.get(n))i.xo.delete(s),r&&i.No.jo(s,r);i.ko.delete(n),i.isPrimaryClient&&i.Mo.cs(n).forEach(s=>{i.Mo.containsKey(s)||wD(i,s)})}function wD(i,n){i.$o.delete(n.path.canonicalString());const r=i.Oo.get(n);null!==r&&(Xo(i.remoteStore,r),i.Oo=i.Oo.remove(n),i.Fo.delete(r),Hy(i))}function hc(i,n,r){for(const s of r)s instanceof _D?(i.Mo.addReference(s.key,n),Si(i,s)):s instanceof tf?(Be("SyncEngine","Document no longer in limbo: "+s.key),i.Mo.removeReference(s.key,n),i.Mo.containsKey(s.key)||wD(i,s.key)):st()}function Si(i,n){const r=n.key,s=r.path.canonicalString();i.Oo.get(r)||i.$o.has(s)||(Be("SyncEngine","New document in limbo: "+r),i.$o.add(s),Hy(i))}function Hy(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const n=i.$o.values().next().value;i.$o.delete(n);const r=new nt(on.fromString(n)),s=i.Uo.next();i.Fo.set(s,new vD(r)),i.Oo=i.Oo.insert(r,s),Kh(i.remoteStore,new ic(zi(Xl(r.path)),s,2,ws.T))}}function Lr(i,n,r){return gg.apply(this,arguments)}function gg(){return(gg=(0,Ce.Z)(function*(i,n,r){const s=je(i),o=[],c=[],h=[];var m;s.xo.isEmpty()||(s.xo.forEach((m,y)=>{h.push(s.Ko(y,n,r).then(C=>{if(C){s.isPrimaryClient&&s.sharedClientState.updateQueryState(y.targetId,C.fromCache?"not-current":"current"),o.push(C);const T=Fw.kn(y.targetId,C);c.push(T)}}))}),yield Promise.all(h),s.No.Tr(o),yield(m=(0,Ce.Z)(function*(y,C){const T=je(y);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>Re.forEach(C,R=>Re.forEach(R.Nn,O=>T.persistence.referenceDelegate.addReference(x,R.targetId,O)).next(()=>Re.forEach(R.xn,O=>T.persistence.referenceDelegate.removeReference(x,R.targetId,O)))))}catch(x){if(!Nu(x))throw x;Be("LocalStore","Failed to update sequence numbers: "+x)}for(const x of C){const R=x.targetId;if(!x.fromCache){const O=T.Un.get(R),te=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);T.Un=T.Un.insert(R,te)}}}),function(y,C){return m.apply(this,arguments)})(s.localStore,c))})).apply(this,arguments)}function Wk(i,n){return Gy.apply(this,arguments)}function Gy(){return(Gy=(0,Ce.Z)(function*(i,n){const r=je(i);if(!r.currentUser.isEqual(n)){Be("SyncEngine","User change. New user:",n.toKey());const s=yield QT(r.localStore,n);r.currentUser=n,(o=r).Bo.forEach(h=>{h.forEach(m=>{m.reject(new Ne(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Bo.clear(),r.sharedClientState.handleUserChange(n,s.removedBatchIds,s.addedBatchIds),yield Lr(r,s.Wn)}var o})).apply(this,arguments)}function CD(i,n){const r=je(i),s=r.Fo.get(n);if(s&&s.Co)return pn().add(s.key);{let o=pn();const c=r.ko.get(n);if(!c)return o;for(const h of c){const m=r.xo.get(h);o=o.unionWith(m.view.To)}return o}}function ID(i,n){return dC.apply(this,arguments)}function dC(){return(dC=(0,Ce.Z)(function*(i,n){const r=je(i),s=yield ac(r.localStore,n.query,!0),o=n.view.So(s);return r.isPrimaryClient&&hc(r,n.targetId,o.vo),o})).apply(this,arguments)}function Yk(i){return hC.apply(this,arguments)}function hC(){return(hC=(0,Ce.Z)(function*(i){const n=je(i);return tD(n.localStore).then(r=>Lr(n,r))})).apply(this,arguments)}function SD(i,n,r,s){return fC.apply(this,arguments)}function fC(){return(fC=(0,Ce.Z)(function*(i,n,r,s){const o=je(i),c=yield function(h,m){const y=je(h),C=je(y.In);return y.persistence.runTransaction("Lookup mutation documents","readonly",T=>C.Xt(T,m).next(x=>x?y.Qn.Pn(T,x):Re.resolve(null)))}(o.localStore,n);var m;null!==c?("pending"===r?yield Ka(o.remoteStore):"acknowledged"===r||"rejected"===r?(jy(o,n,s||null),uC(o,n),m=n,je(je(o.localStore).In).te(m)):st(),yield Lr(o,c)):Be("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function pC(){return(pC=(0,Ce.Z)(function*(i,n){const r=je(i);if(mg(r),$y(r),!0===n&&!0!==r.qo){const s=r.sharedClientState.getAllActiveQueryTargets(),o=yield TD(r,s.toArray());r.qo=!0,yield Qw(r.remoteStore,!0);for(const c of o)Kh(r.remoteStore,c)}else if(!1===n&&!1!==r.qo){const s=[];let o=Promise.resolve();r.ko.forEach((c,h)=>{r.sharedClientState.isLocalQueryTarget(h)?s.push(h):o=o.then(()=>(dc(r,h),og(r.localStore,h,!0))),Xo(r.remoteStore,h)}),yield o,yield TD(r,s),function(c){const h=je(c);h.Fo.forEach((m,y)=>{Xo(h.remoteStore,y)}),h.Mo.us(),h.Fo=new Map,h.Oo=new Vn(nt.comparator)}(r),r.qo=!1,yield Qw(r.remoteStore,!1)}})).apply(this,arguments)}function TD(i,n,r){return fc.apply(this,arguments)}function fc(){return(fc=(0,Ce.Z)(function*(i,n,r){const s=je(i),o=[],c=[];for(const h of n){let m;const y=s.ko.get(h);if(y&&0!==y.length){m=yield Gh(s.localStore,zi(y[0]));for(const C of y){const T=s.xo.get(C),x=yield ID(s,T);x.snapshot&&c.push(x.snapshot)}}else{const C=yield eD(s.localStore,h);m=yield Gh(s.localStore,C),yield nC(s,Kk(C),h,!1)}o.push(m)}return s.No.Tr(c),o})).apply(this,arguments)}function Kk(i){return uT(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function DD(i){const n=je(i);return je(je(n.localStore).persistence).pn()}function Zk(i,n,r,s){return AD.apply(this,arguments)}function AD(){return(AD=(0,Ce.Z)(function*(i,n,r,s){const o=je(i);if(o.qo)Be("SyncEngine","Ignoring unexpected query state notification.");else if(o.ko.has(n))switch(r){case"current":case"not-current":{const c=yield tD(o.localStore),h=An.createSynthesizedRemoteEventForCurrentChange(n,"current"===r);yield Lr(o,c,h);break}case"rejected":yield og(o.localStore,n,!0),dc(o,n,s);break;default:st()}})).apply(this,arguments)}function xD(i,n,r){return gC.apply(this,arguments)}function gC(){return(gC=(0,Ce.Z)(function*(i,n,r){const s=mg(i);if(s.qo){for(const o of n){if(s.ko.has(o)){Be("SyncEngine","Adding an already active target "+o);continue}const c=yield eD(s.localStore,o),h=yield Gh(s.localStore,c);yield nC(s,Kk(c),h.targetId,!1),Kh(s.remoteStore,h)}for(const o of r)s.ko.has(o)&&(yield og(s.localStore,o,!1).then(()=>{Xo(s.remoteStore,o),dc(s,o)}).catch(Fu))}})).apply(this,arguments)}function mg(i){const n=je(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=bD.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=CD.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=H1.bind(null,n),n.No.Tr=eC.bind(null,n.eventManager),n.No.jo=Vk.bind(null,n.eventManager),n}function $y(i){const n=je(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=oC.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=zk.bind(null,n),n}class MD{constructor(){this.synchronizeTabs=!1}initialize(n){var r=this;return(0,Ce.Z)(function*(){r.N=ky(n.databaseInfo.databaseId),r.sharedClientState=r.Wo(n),r.persistence=r.Go(n),yield r.persistence.start(),r.gcScheduler=r.zo(n),r.localStore=r.Ho(n)})()}zo(n){return null}Ho(n){return ZT(this.persistence,new KT,n.initialUser,this.N)}Go(n){return new sD(Uw.Ns,this.N)}Wo(n){return new qa}terminate(){var n=this;return(0,Ce.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class RD extends MD{constructor(n,r,s){super(),this.Jo=n,this.cacheSizeBytes=r,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(n){var r=()=>super.initialize,s=this;return(0,Ce.Z)(function*(){yield r().call(s,n),yield function(i){return $h.apply(this,arguments)}(s.localStore),yield s.Jo.initialize(s,n),yield $y(s.Jo.syncEngine),yield Ka(s.Jo.remoteStore),yield s.persistence.nn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Ho(n){return ZT(this.persistence,new KT,n.initialUser,this.N)}zo(n){return new zT(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const r=jh(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?li.withCacheSize(this.cacheSizeBytes):li.DEFAULT;return new Uh(this.synchronizeTabs,r,n.clientId,s,n.asyncQueue,Ry(),Jo(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new qa}}class Jk extends RD{constructor(n,r){super(n,r,!1),this.Jo=n,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(n){var r=()=>super.initialize,s=this;return(0,Ce.Z)(function*(){yield r().call(s,n);const o=s.Jo.syncEngine;s.sharedClientState instanceof an&&(s.sharedClientState.syncEngine={_i:SD.bind(null,o),mi:Zk.bind(null,o),gi:xD.bind(null,o),pn:DD.bind(null,o),wi:Yk.bind(null,o)},yield s.sharedClientState.start()),yield s.persistence.nn(function(){var c=(0,Ce.Z)(function*(h){yield function(i,n){return pC.apply(this,arguments)}(s.Jo.syncEngine,h),s.gcScheduler&&(h&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):h||s.gcScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}Wo(n){const r=Ry();if(!an.bt(r))throw new Ne(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=jh(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new an(r,n.asyncQueue,s,n.clientId,n.initialUser)}}class mC{initialize(n,r){var s=this;return(0,Ce.Z)(function*(){s.localStore||(s.localStore=n.localStore,s.sharedClientState=n.sharedClientState,s.datastore=s.createDatastore(r),s.remoteStore=s.createRemoteStore(r),s.eventManager=s.createEventManager(r),s.syncEngine=s.createSyncEngine(r,!n.synchronizeTabs),s.sharedClientState.onlineStateHandler=o=>$k(s.syncEngine,o,1),s.remoteStore.remoteSyncer.handleCredentialChange=Wk.bind(null,s.syncEngine),yield Qw(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Lk}createDatastore(n){const r=ky(n.databaseInfo.databaseId),s=new Fs(n.databaseInfo);return new Rk(n.credentials,s,r)}createRemoteStore(n){return r=this.localStore,s=this.datastore,o=n.asyncQueue,c=m=>$k(this.syncEngine,m,0),h=Wh.bt()?new Wh:new qh,new qn(r,s,o,c,h);var r,s,o,c,h}createSyncEngine(n,r){return function(s,o,c,h,m,y,C){const T=new pg(s,o,c,h,m,y);return C&&(T.qo=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return(n=(0,Ce.Z)(function*(r){const s=je(r);Be("RemoteStore","RemoteStore shutting down."),s.Kr.add(5),yield Yh(s),s.Qr.shutdown(),s.Wr.set("Unknown")}),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}function kD(i,n=10240){let r=0;return{read:()=>(0,Ce.Z)(function*(){if(r<i.byteLength){const s={value:i.slice(r,r+n),done:!1};return r+=n,s}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class zy{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,r){this.muted||setTimeout(()=>{this.muted||n(r)},0)}}class Xk{constructor(n,r){this.Zo=n,this.N=r,this.metadata=new Or,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(s=>{s&&s.ho()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,Ce.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,Ce.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,Ce.Z)(function*(){const r=yield n.na();if(null===r)return null;const s=n.ta.decode(r),o=Number(s);isNaN(o)&&n.sa(`length string (${s}) is not valid number`);const c=yield n.ia(o);return new Bk(JSON.parse(c),r.length+o)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,Ce.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const r=n.ra();r<0&&n.sa("Reached the end of bundle when a length string is expected.");const s=n.buffer.slice(0,r);return n.buffer=n.buffer.slice(r),s})()}ia(n){var r=this;return(0,Ce.Z)(function*(){for(;r.buffer.length<n;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const s=r.ta.decode(r.buffer.slice(0,n));return r.buffer=r.buffer.slice(n),s})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,Ce.Z)(function*(){const r=yield n.Zo.read();if(!r.done){const s=new Uint8Array(n.buffer.length+r.value.length);s.set(n.buffer),s.set(r.value,n.buffer.length),n.buffer=s}return r.done})()}}class eN{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var r=this;return(0,Ce.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Ne(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(o=(0,Ce.Z)(function*(c,h){const m=je(c),y=ja(m.N)+"/documents",C={documents:h.map(O=>Mh(m.N,O))},T=yield m.Ki("BatchGetDocuments",y,C),x=new Map;T.forEach(O=>{const U=function(i,n){return"found"in n?function(r,s){Et(!!s.found);const o=uo(r,s.found.name),c=jr(s.found.updateTime),h=new Ei({mapValue:{fields:s.found.fields}});return Nn.newFoundDocument(o,c,h)}(i,n):"missing"in n?function(r,s){Et(!!s.missing),Et(!!s.readTime);const o=uo(r,s.missing),c=jr(s.readTime);return Nn.newNoDocument(o,c)}(i,n):st()}(m.N,O);x.set(U.key.toString(),U)});const R=[];return h.forEach(O=>{const U=x.get(O.toString());Et(!!U),R.push(U)}),R}),function(c,h){return o.apply(this,arguments)})(r.datastore,n);var o;return s.forEach(o=>r.recordVersion(o)),s})()}set(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(n.toString())}delete(n){this.write(new Ah(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,Ce.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const r=n.readVersions;var s;n.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,o)=>{const c=nt.fromPath(o);n.mutations.push(new fy(c,n.precondition(c)))}),yield(s=(0,Ce.Z)(function*(o,c){const h=je(o),m=ja(h.N)+"/documents",y={writes:c.map(C=>Qp(h.N,C))};yield h.Li("Commit",m,y)}),function(o,c){return s.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw st();r=Pt.min()}const s=this.readVersions.get(n.key.toString());if(s){if(!r.isEqual(s))throw new Ne(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}precondition(n){const r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?wr.updateTime(r):wr.none()}preconditionForUpdate(n){const r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(Pt.min()))throw new Ne(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wr.updateTime(r)}return wr.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class _g{constructor(n,r,s,o){this.asyncQueue=n,this.datastore=r,this.updateFunction=s,this.deferred=o,this.aa=5,this.rr=new Ny(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,Ce.Z)(function*(){const r=new eN(n.datastore),s=n.ua(r);s&&s.then(o=>{n.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{n.deferred.resolve(o)}).catch(c=>{n.ha(c)}))}).catch(o=>{n.ha(o)})}))}ua(n){try{const r=this.updateFunction(n);return!Ql(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const r=n.code;return"aborted"===r||"failed-precondition"===r||!bT(r)}return!1}}class ND{constructor(n,r,s){var o=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=oi.UNAUTHENTICATED,this.clientId=Q_.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var c=(0,Ce.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield o.credentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,Ce.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const r=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),r.resolve()}catch(s){const o=Jh(s,"Failed to shutdown persistence");r.reject(o)}})),r.promise}}function _C(i,n){return qy.apply(this,arguments)}function qy(){return(qy=(0,Ce.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(r);let s=r.initialUser;i.setCredentialChangeListener(function(){var o=(0,Ce.Z)(function*(c){s.isEqual(c)||(yield QT(n.localStore,c),s=c)});return function(c){return o.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=n})).apply(this,arguments)}function yC(i,n){return Wy.apply(this,arguments)}function Wy(){return(Wy=(0,Ce.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const r=yield Yy(i);Be("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield n.initialize(r,s),i.setCredentialChangeListener(o=>{return(c=(0,Ce.Z)(function*(h,m){const y=je(h);y.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const C=Ya(y);y.Kr.add(3),yield Yh(y),C&&y.Wr.set("Unknown"),yield y.remoteSyncer.handleCredentialChange(m),y.Kr.delete(3),yield Wi(y)}),function(h,m){return c.apply(this,arguments)})(n.remoteStore,o);var c}),i.onlineComponents=n})).apply(this,arguments)}function Yy(i){return vC.apply(this,arguments)}function vC(){return(vC=(0,Ce.Z)(function*(i){return i.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield _C(i,new MD)),i.offlineComponents})).apply(this,arguments)}function yg(i){return Ky.apply(this,arguments)}function Ky(){return(Ky=(0,Ce.Z)(function*(i){return i.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield yC(i,new mC)),i.onlineComponents})).apply(this,arguments)}function OD(i){return Yy(i).then(n=>n.persistence)}function bC(i){return Yy(i).then(n=>n.localStore)}function PD(i){return yg(i).then(n=>n.remoteStore)}function ju(i){return yg(i).then(n=>n.syncEngine)}function ea(i){return EC.apply(this,arguments)}function EC(){return(EC=(0,Ce.Z)(function*(i){const n=yield yg(i),r=n.eventManager;return r.onListen=j1.bind(null,n.syncEngine),r.onUnlisten=Hk.bind(null,n.syncEngine),r})).apply(this,arguments)}function nf(i,n,r={}){const s=new Or;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(o,c,h,m,y){const C=new zy({next:x=>{c.enqueueAndForget(()=>Xw(o,T));const R=x.docs.has(h);!R&&x.fromCache?y.reject(new Ne(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&x.fromCache&&m&&"server"===m.source?y.reject(new Ne(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new tC(Xl(h.path),C,{includeMetadataChanges:!0,uo:!0});return fg(o,T)}(yield ea(i),i.asyncQueue,n,r,s)})),s.promise}function FD(i,n,r={}){const s=new Or;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(o,c,h,m,y){const C=new zy({next:x=>{c.enqueueAndForget(()=>Xw(o,T)),x.fromCache&&"server"===m.source?y.reject(new Ne(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new tC(h,C,{includeMetadataChanges:!0,uo:!0});return fg(o,T)}(yield ea(i),i.asyncQueue,n,r,s)})),s.promise}class SC{constructor(n,r,s,o,c,h,m,y){this.databaseId=n,this.appId=r,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=y}}class pc{constructor(n,r){this.projectId=n,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof pc&&n.projectId===this.projectId&&n.database===this.database}}const VD=new Map;function TC(i,n,r){if(!r)throw new Ne(_e.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function BD(i,n,r,s){if(!0===n&&!0===s)throw new Ne(_e.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function UD(i){if(!nt.isDocumentKey(i))throw new Ne(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function DC(i){if(nt.isDocumentKey(i))throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function rf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(r=i).constructor?r.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var r;return"function"==typeof i?"a function":st()}function tn(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new Ne(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=rf(i);throw new Ne(_e.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${r}`)}}return i}function AC(i,n){if(n<=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class xC{constructor(n){var r;if(void 0===n.host){if(void 0!==n.ssl)throw new Ne(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new Ne(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,BD("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class sf{constructor(n,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xC({}),this._settingsFrozen=!1,n instanceof pc?this._databaseId=n:(this._app=n,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ne(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(s.options.projectId)}(n))}get app(){if(!this._app)throw new Ne(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xC(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new k1;switch(r.type){case"gapi":const s=r.client;return Et(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new zp(s,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new Ne(_e.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=VD.get(n);r&&(Be("ComponentProvider","Removing Datastore"),VD.delete(n),r.terminate())}(this),Promise.resolve()}}class Mn{constructor(n,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new Mn(this.firestore,n,this._key)}}class ci{constructor(n,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=n}withConverter(n){return new ci(this.firestore,n,this._query)}}class na extends ci{constructor(n,r,s){super(n,r,Xl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new Mn(this.firestore,null,new nt(n))}withConverter(n){return new na(this.firestore,n,this._path)}}function MC(i,n,...r){if(i=(0,P.m9)(i),TC("collection","path",n),i instanceof sf){const s=on.fromString(n,...r);return DC(s),new na(i,null,s)}{if(!(i instanceof Mn||i instanceof na))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(on.fromString(n,...r));return DC(s),new na(i.firestore,null,s)}}function RC(i,n,...r){if(i=(0,P.m9)(i),1===arguments.length&&(n=Q_.I()),TC("doc","path",n),i instanceof sf){const s=on.fromString(n,...r);return UD(s),new Mn(i,null,new nt(s))}{if(!(i instanceof Mn||i instanceof na))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(on.fromString(n,...r));return UD(s),new Mn(i.firestore,i instanceof na?i.converter:null,new nt(s))}}function Ti(i,n){return i=(0,P.m9)(i),n=(0,P.m9)(n),(i instanceof Mn||i instanceof na)&&(n instanceof Mn||n instanceof na)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function Hu(i,n){return i=(0,P.m9)(i),n=(0,P.m9)(n),i instanceof ci&&n instanceof ci&&i.firestore===n.firestore&&Ih(i._query,n._query)&&i.converter===n.converter}class iN{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Ny(this,"async_queue_retry"),this.Ea=()=>{const r=Jo();r&&Be("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const n=Jo();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const r=Jo();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new Or;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,Ce.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(r){if(!Nu(r))throw r;Be("AsyncQueue","Operation failed with retryable error: "+r)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const r=this.fa.then(()=>(this.ga=!0,n().catch(s=>{throw this.ma=s,this.ga=!1,dr("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(s)),s}).then(s=>(this.ga=!1,s))));return this.fa=r,r}enqueueAfterDelay(n,r,s){this.Ta(),this.pa.indexOf(n)>-1&&(r=0);const o=hg.createAndSchedule(this,n,r,s,c=>this.Ra(c));return this._a.push(o),o}Ta(){this.ma&&st()}verifyOperationInProgress(){}ba(){var n=this;return(0,Ce.Z)(function*(){let r;do{r=n.fa,yield r}while(r!==n.fa)})()}Pa(n){for(const r of this._a)if(r.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==n&&r.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const r=this._a.indexOf(n);this._a.splice(r,1)}}function kC(i){return function(n,r){if("object"!=typeof n||null===n)return!1;const s=n;for(const o of["next","error","complete"])if(o in s&&"function"==typeof s[o])return!0;return!1}(i)}class z1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,r,s){this._progressObserver={next:n,error:r,complete:s}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,r){return this._taskCompletionResolver.promise.then(n,r)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class tr extends sf{constructor(n,r){super(n,r),this.type="firestore",this._queue=new iN,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||GD(this),this._firestoreClient.terminate()}}function Cr(i){return i._firestoreClient||GD(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function GD(i){var n;const r=i._freezeSettings(),s=(c=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new SC(i._databaseId,c,i._persistenceKey,(m=r).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var c,m;i._firestoreClient=new ND(i._credentials,i._queue,s)}function OC(i,n,r){const s=new Or;return i.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield _C(i,r),yield yC(i,n),s.resolve()}catch(o){if(!("FirebaseError"===(c=o).name?c.code===_e.FAILED_PRECONDITION||c.code===_e.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),s.reject(o)}var c})).then(()=>s.promise)}function bg(i){if(i._initialized||i._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ra{constructor(...n){for(let r=0;r<n.length;++r)if(0===n[r].length)throw new Ne(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class Vs{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Vs(Er.fromBase64String(n))}catch(r){throw new Ne(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(n){return new Vs(Er.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class Za{constructor(n){this._methodName=n}}class Qy{constructor(n,r){if(!isFinite(n)||n<-90||n>90)throw new Ne(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new Ne(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return Zt(this._lat,n._lat)||Zt(this._long,n._long)}}const lN=/^__.*__$/;class qD{constructor(n,r,s){this.data=n,this.fieldMask=r,this.fieldTransforms=s}toMutation(n,r){return null!==this.fieldMask?new Ba(n,this.data,this.fieldMask,r,this.fieldTransforms):new Dh(n,this.data,r,this.fieldTransforms)}}class FC{constructor(n,r,s){this.data=n,this.fieldMask=r,this.fieldTransforms=s}toMutation(n,r){return new Ba(n,this.data,this.fieldMask,r,this.fieldTransforms)}}function LC(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Jy{constructor(n,r,s,o,c,h){this.settings=n,this.databaseId=r,this.N=s,this.ignoreUndefinedProperties=o,void 0===c&&this.Sa(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new Jy(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(n),o=this.Ca({path:s,xa:!1});return o.ka(n),o}$a(n){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(n),o=this.Ca({path:s,xa:!1});return o.Sa(),o}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return HC(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(r=>n.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>n.isPrefixOf(r.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(LC(this.Da)&&lN.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class WD{constructor(n,r,s){this.databaseId=n,this.ignoreUndefinedProperties=r,this.N=s||ky(n)}Ba(n,r,s,o=!1){return new Jy({Da:n,methodName:r,La:s,path:Ur.emptyPath(),xa:!1,Ma:o},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function gc(i){const n=i._freezeSettings(),r=ky(i._databaseId);return new WD(i._databaseId,!!n.ignoreUndefinedProperties,r)}function Xy(i,n,r,s,o,c={}){const h=i.Ba(c.merge||c.mergeFields?2:0,n,r,o);JD("Data must be an object, but it was:",h,s);const m=jC(s,h);let y,C;if(c.merge)y=new Kl(h.fieldMask),C=h.fieldTransforms;else if(c.mergeFields){const T=[];for(const x of c.mergeFields){const R=XD(n,x,r);if(!h.contains(R))throw new Ne(_e.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);uN(T,R)||T.push(R)}y=new Kl(T),C=h.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,C=h.fieldTransforms;return new qD(new Ei(m),y,C)}class Eg extends Za{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof Eg}}function VC(i,n,r){return new Jy({Da:3,La:n.settings.La,methodName:i._methodName,xa:r},n.databaseId,n.N,n.ignoreUndefinedProperties)}class BC extends Za{_toFieldTransform(n){return new Kp(n.path,new Sh)}isEqual(n){return n instanceof BC}}class YD extends Za{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=VC(this,n,!0),s=this.Ua.map(c=>Gu(c,r)),o=new xu(s);return new Kp(n.path,o)}isEqual(n){return this===n}}class KD extends Za{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=VC(this,n,!0),s=this.Ua.map(c=>Gu(c,r)),o=new Mu(s);return new Kp(n.path,o)}isEqual(n){return this===n}}class ZD extends Za{constructor(n,r){super(n),this.qa=r}_toFieldTransform(n){const r=new Th(n.N,rw(n.N,this.qa));return new Kp(n.path,r)}isEqual(n){return this===n}}function ev(i,n,r,s){const o=i.Ba(1,n,r);JD("Data must be an object, but it was:",o,s);const c=[],h=Ei.empty();Fa(s,(y,C)=>{const T=eA(n,y,r);C=(0,P.m9)(C);const x=o.$a(T);if(C instanceof Eg)c.push(T);else{const R=Gu(C,x);null!=R&&(c.push(T),h.set(T,R))}});const m=new Kl(c);return new FC(h,m,o.fieldTransforms)}function UC(i,n,r,s,o,c){const h=i.Ba(1,n,r),m=[XD(n,s,r)],y=[o];if(c.length%2!=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)m.push(XD(n,c[R])),y.push(c[R+1]);const C=[],T=Ei.empty();for(let R=m.length-1;R>=0;--R)if(!uN(C,m[R])){const O=m[R];let U=y[R];U=(0,P.m9)(U);const te=h.$a(O);if(U instanceof Eg)C.push(O);else{const pe=Gu(U,te);null!=pe&&(C.push(O),T.set(O,pe))}}const x=new Kl(C);return new FC(T,x,h.fieldTransforms)}function QD(i,n,r,s=!1){return Gu(r,i.Ba(s?4:3,n))}function Gu(i,n){if(cN(i=(0,P.m9)(i)))return JD("Unsupported field value:",n,i),jC(i,n);if(i instanceof Za)return function(r,s){if(!LC(s.Da))throw s.Fa(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Fa(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(r,s){const o=[];let c=0;for(const h of r){let m=Gu(h,s.Oa(c));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}}(i,n)}return function(r,s){if(null===(r=(0,P.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return rw(s.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Pr.fromDate(r);return{timestampValue:Ua(s.N,o)}}if(r instanceof Pr){const o=new Pr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ua(s.N,o)}}if(r instanceof Qy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vs)return{bytesValue:TT(s.N,r._byteString)};if(r instanceof Mn){const o=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw s.Fa(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:xh(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Fa(`Unsupported field value: ${rf(r)}`)}(i,n)}function jC(i,n){const r={};return X_(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):Fa(i,(s,o)=>{const c=Gu(o,n.Na(s));null!=c&&(r[s]=c)}),{mapValue:{fields:r}}}function cN(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Pr||i instanceof Qy||i instanceof Vs||i instanceof Mn||i instanceof Za)}function JD(i,n,r){if(!cN(r)||"object"!=typeof(s=r)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=rf(r);throw n.Fa("an object"===s?i+" a custom object":i+" "+s)}var s}function XD(i,n,r){if((n=(0,P.m9)(n))instanceof ra)return n._internalPath;if("string"==typeof n)return eA(i,n);throw HC("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const K1=new RegExp("[~\\*/\\[\\]]");function eA(i,n,r){if(n.search(K1)>=0)throw HC(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new ra(...n.split("."))._internalPath}catch(s){throw HC(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function HC(i,n,r,s,o){const c=s&&!s.isEmpty(),h=void 0!==o;let m=`Function ${n}() called with invalid data`;r&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||h)&&(y+=" (found",c&&(y+=` in field ${s}`),h&&(y+=` in document ${o}`),y+=")"),new Ne(_e.INVALID_ARGUMENT,m+i+y)}function uN(i,n){return i.some(r=>r.isEqual(n))}class tv{constructor(n,r,s,o,c){this._firestore=n,this._userDataWriter=r,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new Z1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const r=this._document.data.field(GC("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}class Z1 extends tv{data(){return super.data()}}function GC(i,n){return"string"==typeof n?eA(i,n):n instanceof ra?n._internalPath:n._delegate._internalPath}class of{constructor(n,r){this.hasPendingWrites=n,this.fromCache=r}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class mc extends tv{constructor(n,r,s,o,c,h){super(n,r,s,o,h),this._firestore=n,this._firestoreImpl=n,this.metadata=c}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const r=new nv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,r={}){if(this._document){const s=this._document.data.field(GC("DocumentSnapshot.get",n));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class nv extends mc{data(n={}){return super.data(n)}}class $u{constructor(n,r,s,o){this._firestore=n,this._userDataWriter=r,this._snapshot=o,this.metadata=new of(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const n=[];return this.forEach(r=>n.push(r)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,r){this._snapshot.docs.forEach(s=>{n.call(r,new nv(this._firestore,this._userDataWriter,s.key,s,new of(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ne(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(h=>({type:"added",doc:new nv(s._firestore,s._userDataWriter,h.doc.key,h.doc,new of(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new nv(s._firestore,s._userDataWriter,h.doc.key,h.doc,new of(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let y=-1,C=-1;return 0!==h.type&&(y=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),C=c.indexOf(h.doc.key)),{type:Q1(h.type),doc:m,oldIndex:y,newIndex:C}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Q1(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function dN(i,n){return i instanceof mc&&n instanceof mc?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof $u&&n instanceof $u&&i._firestore===n._firestore&&Hu(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}function hN(i){if(ay(i)&&0===i.explicitOrderBy.length)throw new Ne(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wg{}function _c(i,...n){for(const r of n)i=r._apply(i);return i}class fN extends wg{constructor(n,r,s){super(),this.Ka=n,this.ja=r,this.Qa=s,this.type="where"}_apply(n){const r=gc(n.firestore),s=function(o,c,h,m,y,C,T){let x;if(y.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on FieldPath.documentId().`);if("in"===C||"not-in"===C){zu(T,C);const O=[];for(const U of T)O.push(rv(m,o,U));x={arrayValue:{values:O}}}else x=rv(m,o,T)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||zu(T,C),x=QD(h,"where",T,"in"===C||"not-in"===C);const R=wi.create(y,C,x);return function(O,U){if(U.v()){const pe=XE(O);if(null!==pe&&!pe.isEqual(U.field))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${pe.toString()}' and '${U.field.toString()}'`);const Fe=ly(O);null!==Fe&&$C(0,U.field,Fe)}const te=function(pe,Fe){for(const Ge of pe.filters)if(Fe.indexOf(Ge.op)>=0)return Ge.op;return null}(O,function(pe){switch(pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==te)throw new Ne(_e.INVALID_ARGUMENT,te===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${te.toString()}' filters.`)}(o,R),R}(n._query,0,r,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new ci(n.firestore,n.converter,function(o,c){const h=o.filters.concat([c]);return new Va(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(n._query,s))}}class X1 extends wg{constructor(n,r){super(),this.Ka=n,this.Wa=r,this.type="orderBy"}_apply(n){const r=function(s,o,c){if(null!==s.startAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Du(o,c);return function(m,y){if(null===ly(m)){const C=XE(m);null!==C&&$C(0,C,y.field)}}(s,h),h}(n._query,this.Ka,this.Wa);return new ci(n.firestore,n.converter,function(s,o){const c=s.explicitOrderBy.concat([o]);return new Va(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(n._query,r))}}class tA extends wg{constructor(n,r,s){super(),this.type=n,this.Ga=r,this.za=s}_apply(n){return new ci(n.firestore,n.converter,dT(n._query,this.Ga,this.za))}}class mN extends wg{constructor(n,r,s){super(),this.type=n,this.Ha=r,this.Ja=s}_apply(n){const r=nA(n,this.type,this.Ha,this.Ja);return new ci(n.firestore,n.converter,(o=r,new Va((s=n._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)));var s,o}}class _N extends wg{constructor(n,r,s){super(),this.type=n,this.Ha=r,this.Ja=s}_apply(n){const r=nA(n,this.type,this.Ha,this.Ja);return new ci(n.firestore,n.converter,(o=r,new Va((s=n._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,o)));var s,o}}function nA(i,n,r,s){if(r[0]=(0,P.m9)(r[0]),r[0]instanceof tv)return function(o,c,h,m,y){if(!m)throw new Ne(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const T of Au(o))if(T.field.isKeyField())C.push(WE(c,m.key));else{const x=m.data.field(T.field);if(ey(x))throw new Ne(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const R=T.field.canonicalString();throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}C.push(x)}return new $i(C,y)}(i._query,i.firestore._databaseId,n,r[0]._document,s);{const o=gc(i.firestore);return function(c,h,m,y,C,T){const x=c.explicitOrderBy;if(C.length>x.length)throw new Ne(_e.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let O=0;O<C.length;O++){const U=C[O];if(x[O].field.isKeyField()){if("string"!=typeof U)throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof U}`);if(!cy(c)&&-1!==U.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${y}() must be a plain document ID, but '${U}' contains a slash.`);const te=c.path.child(on.fromString(U));if(!nt.isDocumentKey(te))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${y}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const pe=new nt(te);R.push(WE(h,pe))}else{const te=QD(m,y,U);R.push(te)}}return new $i(R,T)}(i._query,i.firestore._databaseId,o,n,r,s)}}function rv(i,n,r){if("string"==typeof(r=(0,P.m9)(r))){if(""===r)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!cy(n)&&-1!==r.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=n.path.child(on.fromString(r));if(!nt.isDocumentKey(s))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return WE(i,new nt(s))}if(r instanceof Mn)return WE(i,r._key);throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(r)}.`)}function zu(i,n){if(!Array.isArray(i)||0===i.length)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(i.length>10)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function $C(i,n,r){if(!r.isEqual(n))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class zC{convertValue(n,r="none"){switch(Jl(n)){case 0:return null;case 1:return n.booleanValue;case 2:return hr(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(Zl(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw st()}}convertObject(n,r){const s={};return Fa(n.fields,(o,c)=>{s[o]=this.convertValue(c,r)}),s}convertGeoPoint(n){return new Qy(hr(n.latitude),hr(n.longitude))}convertArray(n,r){return(n.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(n,r){switch(r){case"previous":const s=rT(n);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(yh(n));default:return null}}convertTimestamp(n){const r=La(n);return new Pr(r.seconds,r.nanos)}convertDocumentKey(n,r){const s=on.fromString(n);Et(FT(s));const o=new pc(s.get(1),s.get(3)),c=new nt(s.popFirst(5));return o.isEqual(r)||dr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),c}}function iv(i,n,r){let s;return s=i?r&&(r.merge||r.mergeFields)?i.toFirestore(n,r):i.toFirestore(n):n,s}class qC extends zC{constructor(n){super(),this.firestore=n}convertBytes(n){return new Vs(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Mn(this.firestore,null,r)}}class WC{constructor(n,r){this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=gc(n)}set(n,r,s){this._verifyNotCommitted();const o=Qa(n,this._firestore),c=iv(o.converter,r,s),h=Xy(this._dataReader,"WriteBatch.set",o._key,c,null!==o.converter,s);return this._mutations.push(h.toMutation(o._key,wr.none())),this}update(n,r,s,...o){this._verifyNotCommitted();const c=Qa(n,this._firestore);let h;return h="string"==typeof(r=(0,P.m9)(r))||r instanceof ra?UC(this._dataReader,"WriteBatch.update",c._key,r,s,o):ev(this._dataReader,"WriteBatch.update",c._key,r),this._mutations.push(h.toMutation(c._key,wr.exists(!0))),this}delete(n){this._verifyNotCommitted();const r=Qa(n,this._firestore);return this._mutations=this._mutations.concat(new Ah(r._key,wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qa(i,n){if((i=(0,P.m9)(i)).firestore!==n)throw new Ne(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class af extends zC{constructor(n){super(),this.firestore=n}convertBytes(n){return new Vs(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Mn(this.firestore,null,r)}}function vN(i,n,r){i=tn(i,Mn);const s=tn(i.firestore,tr),o=iv(i.converter,n,r);return Cg(s,[Xy(gc(s),"setDoc",i._key,o,null!==i.converter,r).toMutation(i._key,wr.none())])}function oA(i,n,r,...s){i=tn(i,Mn);const o=tn(i.firestore,tr),c=gc(o);let h;return h="string"==typeof(n=(0,P.m9)(n))||n instanceof ra?UC(c,"updateDoc",i._key,n,r,s):ev(c,"updateDoc",i._key,n),Cg(o,[h.toMutation(i._key,wr.exists(!0))])}function aA(i,...n){var r,s,o;i=(0,P.m9)(i);let c={includeMetadataChanges:!1},h=0;"object"!=typeof n[h]||kC(n[h])||(c=n[h],h++);const m={includeMetadataChanges:c.includeMetadataChanges};if(kC(n[h])){const x=n[h];n[h]=null===(r=x.next)||void 0===r?void 0:r.bind(x),n[h+1]=null===(s=x.error)||void 0===s?void 0:s.bind(x),n[h+2]=null===(o=x.complete)||void 0===o?void 0:o.bind(x)}let y,C,T;if(i instanceof Mn)C=tn(i.firestore,tr),T=Xl(i._key.path),y={next:x=>{n[h]&&n[h](Ig(C,i,x))},error:n[h+1],complete:n[h+2]};else{const x=tn(i,ci);C=tn(x.firestore,tr),T=x._query;const R=new af(C);y={next:O=>{n[h]&&n[h](new $u(C,R,x,O))},error:n[h+1],complete:n[h+2]},hN(i._query)}return function(x,R,O,U){const te=new zy(U),pe=new tC(R,te,O);return x.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return fg(yield ea(x),pe)})),()=>{te.Xo(),x.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Xw(yield ea(x),pe)}))}}(Cr(C),T,m,y)}function Cg(i,n){return function(r,s){const o=new Or;return r.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,n,r){return Uy.apply(this,arguments)}(yield ju(r),s,o)})),o.promise}(Cr(i),n)}function Ig(i,n,r){const s=r.docs.get(n._key),o=new af(i);return new mc(i,o,n._key,s,new of(r.hasPendingWrites,r.fromCache),n.converter)}class bN extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=gc(n)}get(n){const r=Qa(n,this._firestore),s=new qC(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return st();const c=o[0];if(c.isFoundDocument())return new tv(this._firestore,s,c.key,c,r.converter);if(c.isNoDocument())return new tv(this._firestore,s,r._key,null,r.converter);throw st()})}set(n,r,s){const o=Qa(n,this._firestore),c=iv(o.converter,r,s),h=Xy(this._dataReader,"Transaction.set",o._key,c,null!==o.converter,s);return this._transaction.set(o._key,h),this}update(n,r,s,...o){const c=Qa(n,this._firestore);let h;return h="string"==typeof(r=(0,P.m9)(r))||r instanceof ra?UC(this._dataReader,"Transaction.update",c._key,r,s,o):ev(this._dataReader,"Transaction.update",c._key,r),this._transaction.update(c._key,h),this}delete(n){const r=Qa(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(n,r){super(n,r),this._firestore=n}get(n){const r=Qa(n,this._firestore),s=new af(this._firestore);return super.get(n).then(o=>new mc(this._firestore,s,r._key,o._document,new of(!1,!1),r.converter))}}function YC(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function cA(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function uA(){if("undefined"==typeof atob)throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){Su=i})(Ra.SDK_VERSION),(0,Ra._registerComponent)(new dt.wA("firestore",(i,{options:n})=>{const r=i.getProvider("app").getImmediate(),s=new tr(r,new qR(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),s._setSettings(n),s},"PUBLIC")),(0,Ra.registerVersion)("@firebase/firestore","3.1.0",void 0);class qu{constructor(n){this._delegate=n}static fromBase64String(n){return uA(),new qu(Vs.fromBase64String(n))}static fromUint8Array(n){return cA(),new qu(Vs.fromUint8Array(n))}toBase64(){return uA(),this._delegate.toBase64()}toUint8Array(){return cA(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function KC(i){return function(i,n){if("object"!=typeof i||null===i)return!1;const r=i;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(i)}class IN{enableIndexedDbPersistence(n,r){return function(i,n){bg(i=tn(i,tr));const r=Cr(i),s=i._freezeSettings(),o=new mC;return OC(r,o,new RD(o,s.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(n){return function(i){bg(i=tn(i,tr));const n=Cr(i),r=i._freezeSettings(),s=new mC;return OC(n,s,new Jk(s,r.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(i){if(i._initialized&&!i._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new Or;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(r=(0,Ce.Z)(function*(s){if(!fo.bt())return Promise.resolve();const o=s+"main";yield fo.delete(o)}),function(s){return r.apply(this,arguments)})(jh(i._databaseId,i._persistenceKey)),n.resolve()}catch(r){n.reject(r)}var r})),n.promise}(n._delegate)}}class av{constructor(n,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},n instanceof pc||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&$p("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}useEmulator(n,r,s={}){!function(i,n,r,s={}){var o;const c=(i=tn(i,sf))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==n&&$p("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},c),{host:`${n}:${r}`,ssl:!1})),s.mockUserToken){let h,m;if("string"==typeof s.mockUserToken)h=s.mockUserToken,m=oi.MOCK_USER;else{h=(0,P.Sg)(s.mockUserToken,null===(o=i._app)||void 0===o?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new Ne(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new oi(y)}i._credentials=new HE(new Z_(h,m))}}(this._delegate,n,r,s)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Ce.Z)(function*(){const n=yield OD(i),r=yield PD(i);return n.setNetworkEnabled(!0),function(s){const o=je(s);return o.Kr.delete(0),Wi(o)}(r)}))}(Cr(i=tn(i,tr)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Ce.Z)(function*(){const n=yield OD(i),r=yield PD(i);return n.setNetworkEnabled(!1),(s=(0,Ce.Z)(function*(o){const c=je(o);c.Kr.add(0),yield Yh(c),c.Wr.set("Offline")}),function(o){return s.apply(this,arguments)})(r);var s}))}(Cr(i=tn(i,tr)))}(this._delegate)}enablePersistence(n){let r=!1,s=!1;return n&&(r=!!n.synchronizeTabs,s=!!n.experimentalForceOwningTab,BD("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(n){const r=new Or;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,n){return cC.apply(this,arguments)}(yield ju(n),r)})),r.promise}(Cr(i=tn(i,tr)))}(this._delegate)}onSnapshotsInSync(n){return function(i,n){return function(i,n){const r=new zy(n);return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return s=yield ea(i),o=r,je(s).Zr.add(o),void o.next();var s,o})),()=>{r.Xo(),i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return s=yield ea(i),o=r,void je(s).Zr.delete(o);var s,o}))}}(Cr(i=tn(i,tr)),kC(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new lf(this,MC(this._delegate,n))}catch(r){throw Di(r,"collection()","Firestore.collection()")}}doc(n){try{return new Bs(this,RC(this._delegate,n))}catch(r){throw Di(r,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new Ai(this,function(i,n){if(i=tn(i,sf),TC("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ci(i,null,(r=n,new Va(on.emptyPath(),r)));var r}(this._delegate,n))}catch(r){throw Di(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(i,n){return function(i,n){const r=new Or;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const s=yield(o=i,yg(o).then(c=>c.datastore));var o;new _g(i.asyncQueue,s,n,r).run()})),r.promise}(Cr(i),r=>n(new bN(i,r)))}(this._delegate,r=>n(new cv(this,r)))}batch(){return Cr(this._delegate),new ZC(new WC(this._delegate,n=>Cg(this._delegate,n)))}loadBundle(n){return function(i,n){const r=Cr(i=tn(i,tr)),s=new z1;return function(i,n,r,s){const o=function(c,h){let m;return m="string"==typeof c?(new TextEncoder).encode(c):c,y=function(y,C){if(y instanceof Uint8Array)return kD(y,C);if(y instanceof ArrayBuffer)return kD(new Uint8Array(y),C);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Xk(y,h);var y}(r,ky(n));i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function(i,n,r){const s=je(i);var o;(o=(0,Ce.Z)(function*(c,h,m){try{const y=yield h.getMetadata();if(yield function(R,O){const U=je(R),te=jr(O.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",pe=>U.Je.getBundleMetadata(pe,O.id)).then(pe=>!!pe&&pe.createTime.compareTo(te)>=0)}(c.localStore,y))return yield h.close(),void m._completeWith((R=y,{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}));m._updateProgress(mD(y));const C=new Uk(y,c.localStore,h.N);let T=yield h.Qo();for(;T;){const R=yield C.fo(T);R&&m._updateProgress(R),T=yield h.Qo()}const x=yield C.complete();yield Lr(c,x.Tn,void 0),yield function(R,O){const U=je(R);return U.persistence.runTransaction("Save bundle","readwrite",te=>U.Je.saveBundleMetadata(te,O))}(c.localStore,y),m._completeWith(x.progress)}catch(y){$p("SyncEngine",`Loading bundle failed with ${y}`),m._failWith(y)}var R}),function(c,h,m){return o.apply(this,arguments)})(s,n,r).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield ju(i),o,s)}))}(r,i._databaseId,n,s),s}(this._delegate,n)}namedQuery(n){return function(i,n){return function(i,n){return i.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(r,s){const o=je(r);return o.persistence.runTransaction("Get named query","readonly",c=>o.Je.getNamedQuery(c,s))}(yield bC(i),n)}))}(Cr(i=tn(i,tr)),n).then(r=>r?new ci(i,null,r.query):null)}(this._delegate,n).then(r=>r?new Ai(this,r):null)}}class lv extends zC{constructor(n){super(),this.firestore=n}convertBytes(n){return new qu(new Vs(n))}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return Bs.forKey(r,this.firestore,null)}}class cv{constructor(n,r){this._firestore=n,this._delegate=r,this._userDataWriter=new lv(n)}get(n){const r=ui(n);return this._delegate.get(r).then(s=>new Tg(this._firestore,new mc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(n,r,s){const o=ui(n);return s?(YC("Transaction.set",s),this._delegate.set(o,r,s)):this._delegate.set(o,r),this}update(n,r,s,...o){const c=ui(n);return 2===arguments.length?this._delegate.update(c,r):this._delegate.update(c,r,s,...o),this}delete(n){const r=ui(n);return this._delegate.delete(r),this}}class ZC{constructor(n){this._delegate=n}set(n,r,s){const o=ui(n);return s?(YC("WriteBatch.set",s),this._delegate.set(o,r,s)):this._delegate.set(o,r),this}update(n,r,s,...o){const c=ui(n);return 2===arguments.length?this._delegate.update(c,r):this._delegate.update(c,r,s,...o),this}delete(n){const r=ui(n);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class yc{constructor(n,r,s){this._firestore=n,this._userDataWriter=r,this._delegate=s}fromFirestore(n,r){const s=new nv(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new Wu(this._firestore,s),null!=r?r:{})}toFirestore(n,r){return r?this._delegate.toFirestore(n,r):this._delegate.toFirestore(n)}static getInstance(n,r){const s=yc.INSTANCES;let o=s.get(n);o||(o=new WeakMap,s.set(n,o));let c=o.get(r);return c||(c=new yc(n,new lv(n),r),o.set(r,c)),c}}yc.INSTANCES=new WeakMap;class Bs{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new lv(n)}static forPath(n,r,s){if(n.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new Bs(r,new Mn(r._delegate,s,new nt(n)))}static forKey(n,r,s){return new Bs(r,new Mn(r._delegate,s,n))}get id(){return this._delegate.id}get parent(){return new lf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new lf(this.firestore,MC(this._delegate,n))}catch(r){throw Di(r,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,P.m9)(n))instanceof Mn&&Ti(this._delegate,n)}set(n,r){r=YC("DocumentReference.set",r);try{return r?vN(this._delegate,n,r):vN(this._delegate,n)}catch(s){throw Di(s,"setDoc()","DocumentReference.set()")}}update(n,r,...s){try{return 1===arguments.length?oA(this._delegate,n):oA(this._delegate,n,r,...s)}catch(o){throw Di(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return Cg(tn(i.firestore,tr),[new Ah(i._key,wr.none())])}(this._delegate)}onSnapshot(...n){const r=QC(n),s=dA(n,o=>new Tg(this.firestore,new mc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return aA(this._delegate,r,s)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=tn(i,Mn);const n=tn(i.firestore,tr),r=Cr(n),s=new af(n);return function(i,n){const r=new Or;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(s=(0,Ce.Z)(function*(o,c,h){try{const m=yield function(y,C){const T=je(y);return T.persistence.runTransaction("read document","readonly",x=>T.Qn.An(x,C))}(o,c);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Ne(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const y=Jh(m,`Failed to get document '${c} from cache`);h.reject(y)}}),function(o,c,h){return s.apply(this,arguments)})(yield bC(i),n,r);var s})),r.promise}(r,i._key).then(o=>new mc(n,s,i._key,o,new of(null!==o&&o.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=tn(i,Mn);const n=tn(i.firestore,tr);return nf(Cr(n),i._key,{source:"server"}).then(r=>Ig(n,i,r))}(this._delegate):function(i){i=tn(i,Mn);const n=tn(i.firestore,tr);return nf(Cr(n),i._key).then(r=>Ig(n,i,r))}(this._delegate),r.then(s=>new Tg(this.firestore,new mc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(n){return new Bs(this.firestore,this._delegate.withConverter(n?yc.getInstance(this.firestore,n):null))}}function Di(i,n,r){return i.message=i.message.replace(n,r),i}function QC(i){for(const n of i)if("object"==typeof n&&!KC(n))return n;return{}}function dA(i,n){var r,s;let o;return o=KC(i[0])?i[0]:KC(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:c=>{o.next&&o.next(n(c))},error:null===(r=o.error)||void 0===r?void 0:r.bind(o),complete:null===(s=o.complete)||void 0===s?void 0:s.bind(o)}}class Tg{constructor(n,r){this._firestore=n,this._delegate=r}get ref(){return new Bs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,r){return this._delegate.get(n,r)}isEqual(n){return dN(this._delegate,n._delegate)}}class Wu extends Tg{data(n){const r=this._delegate.data(n);return function(i,n){i||st()}(void 0!==r),r}}class Ai{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new lv(n)}where(n,r,s){try{return new Ai(this.firestore,_c(this._delegate,function(i,n,r){const s=n,o=GC("where",i);return new fN(o,s,r)}(n,r,s)))}catch(o){throw Di(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,r){try{return new Ai(this.firestore,_c(this._delegate,function(i,n="asc"){const r=n,s=GC("orderBy",i);return new X1(s,r)}(n,r)))}catch(s){throw Di(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new Ai(this.firestore,_c(this._delegate,function(i){return AC("limit",i),new tA("limit",i,"F")}(n)))}catch(r){throw Di(r,"limit()","Query.limit()")}}limitToLast(n){try{return new Ai(this.firestore,_c(this._delegate,function(i){return AC("limitToLast",i),new tA("limitToLast",i,"L")}(n)))}catch(r){throw Di(r,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new Ai(this.firestore,_c(this._delegate,function(...i){return new mN("startAt",i,!0)}(...n)))}catch(r){throw Di(r,"startAt()","Query.startAt()")}}startAfter(...n){try{return new Ai(this.firestore,_c(this._delegate,function(...i){return new mN("startAfter",i,!1)}(...n)))}catch(r){throw Di(r,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new Ai(this.firestore,_c(this._delegate,function(...i){return new _N("endBefore",i,!0)}(...n)))}catch(r){throw Di(r,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new Ai(this.firestore,_c(this._delegate,function(...i){return new _N("endAt",i,!1)}(...n)))}catch(r){throw Di(r,"endAt()","Query.endAt()")}}isEqual(n){return Hu(this._delegate,n._delegate)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=tn(i,ci);const n=tn(i.firestore,tr),r=Cr(n),s=new af(n);return function(i,n){const r=new Or;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(s=(0,Ce.Z)(function*(o,c,h){try{const m=yield ac(o,c,!0),y=new yD(c,m.Gn),C=y.Io(m.documents),T=y.applyChanges(C,!1);h.resolve(T.snapshot)}catch(m){const y=Jh(m,`Failed to execute query '${c} against cache`);h.reject(y)}}),function(o,c,h){return s.apply(this,arguments)})(yield bC(i),n,r);var s})),r.promise}(r,i._query).then(o=>new $u(n,s,i,o))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=tn(i,ci);const n=tn(i.firestore,tr),r=Cr(n),s=new af(n);return FD(r,i._query,{source:"server"}).then(o=>new $u(n,s,i,o))}(this._delegate):function(i){i=tn(i,ci);const n=tn(i.firestore,tr),r=Cr(n),s=new af(n);return hN(i._query),FD(r,i._query).then(o=>new $u(n,s,i,o))}(this._delegate),r.then(s=>new Dg(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...n){const r=QC(n),s=dA(n,o=>new Dg(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return aA(this._delegate,r,s)}withConverter(n){return new Ai(this.firestore,this._delegate.withConverter(n?yc.getInstance(this.firestore,n):null))}}class hA{constructor(n,r){this._firestore=n,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Wu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Dg{constructor(n,r){this._firestore=n,this._delegate=r}get query(){return new Ai(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new Wu(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(r=>new hA(this._firestore,r))}forEach(n,r){this._delegate.forEach(s=>{n.call(r,new Wu(this._firestore,s))})}isEqual(n){return dN(this._delegate,n._delegate)}}class lf extends Ai{constructor(n,r){super(n,r),this.firestore=n,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new Bs(this.firestore,n):null}doc(n){try{return new Bs(this.firestore,void 0===n?RC(this._delegate):RC(this._delegate,n))}catch(r){throw Di(r,"doc()","CollectionReference.doc()")}}add(n){return function(i,n){const r=tn(i.firestore,tr),s=RC(i),o=iv(i.converter,n);return Cg(r,[Xy(gc(i.firestore),"addDoc",s._key,o,null!==i.converter,{}).toMutation(s._key,wr.exists(!1))]).then(()=>s)}(this._delegate,n).then(r=>new Bs(this.firestore,r))}isEqual(n){return Ti(this._delegate,n._delegate)}withConverter(n){return new lf(this.firestore,this._delegate.withConverter(n?yc.getInstance(this.firestore,n):null))}}function ui(i){return tn(i,Mn)}class JC{constructor(...n){this._delegate=new ra(...n)}static documentId(){return new JC(Ur.keyField().canonicalString())}isEqual(n){return(n=(0,P.m9)(n))instanceof ra&&this._delegate._internalPath.isEqual(n._internalPath)}}class cf{constructor(n){this._delegate=n}static serverTimestamp(){const n=new BC("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new cf(n)}static delete(){const n=new Eg("deleteField");return n._methodName="FieldValue.delete",new cf(n)}static arrayUnion(...n){const r=function(...i){return new YD("arrayUnion",i)}(...n);return r._methodName="FieldValue.arrayUnion",new cf(r)}static arrayRemove(...n){const r=function(...i){return new KD("arrayRemove",i)}(...n);return r._methodName="FieldValue.arrayRemove",new cf(r)}static increment(n){const r=function(i){return new ZD("increment",i)}(n);return r._methodName="FieldValue.increment",new cf(r)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const TN={Firestore:av,GeoPoint:Qy,Timestamp:Pr,Blob:qu,Transaction:cv,WriteBatch:ZC,DocumentReference:Bs,DocumentSnapshot:Tg,Query:Ai,QueryDocumentSnapshot:Wu,QuerySnapshot:Dg,CollectionReference:lf,FieldPath:JC,FieldValue:cf,setLogLevel:function(i){!function(i){Wl.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function fA(i,n){return function(i,n=Qd.z){return new bn.y(r=>{let s;return null!=n?n.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},r)}):s=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=s&&s()}})}(i,n)}function XC(i,n){return fA(i,n).pipe((0,it.U)(r=>({payload:r,type:"query"})))}function Ag(i,n){return XC(i,n).pipe(ms(void 0),Dp(),(0,it.U)(([r,s])=>{const o=s.payload.docChanges(),c=o.map(h=>({type:h.type,payload:h}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((h,m)=>{const y=o.find(T=>T.doc.ref.isEqual(h.ref)),C=null==r?void 0:r.payload.docs.find(T=>T.ref.isEqual(h.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(h.metadata)||!y&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),c}))}function pA(i,n,r){return Ag(i,r).pipe(Lo((s,o)=>function(i,n,r){return n.forEach(s=>{r.indexOf(s.type)>-1&&(i=function(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return uv(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const r=i.slice();return r.splice(n.oldIndex,1),r.splice(n.newIndex,0,n),r}return uv(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return uv(i,n.oldIndex,1)}return i}(i,s))}),i}(s,o.map(c=>c.payload),n),[]),y_(),(0,it.U)(s=>s.map(o=>({type:o.type,payload:o}))))}function uv(i,n,r,...s){const o=i.slice();return o.splice(n,r,...s),o}function RN(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}!function(i){(function(i,n){i.INTERNAL.registerComponent(new dt.wA("firestore-compat",r=>((n,r)=>new av(n,r,new IN))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},TN)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(cS.Z);class e0{constructor(n,r,s){this.ref=n,this.query=r,this.afs=s}stateChanges(n){let r=Ag(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,it.U)(s=>s.filter(o=>n.indexOf(o.type)>-1)))),r.pipe(ms(void 0),Dp(),ar(([s,o])=>o.length>0||!s),(0,it.U)(([s,o])=>o),Xt.iC)}auditTrail(n){return this.stateChanges(n).pipe(Lo((r,s)=>[...r,...s],[]))}snapshotChanges(n){const r=RN(n);return pA(this.query,r,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}valueChanges(n={}){return XC(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(r=>r.payload.docs.map(s=>n.idField?Object.assign(Object.assign({},s.data()),{[n.idField]:s.id}):s.data())),Xt.iC)}get(n){return(0,cn.D)(this.query.get(n)).pipe(Xt.iC)}add(n){return this.ref.add(n)}doc(n){return new t0(this.ref.doc(n),this.afs)}}class t0{constructor(n,r){this.ref=n,this.afs=r}set(n,r){return this.ref.set(n,r)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,r){const s=this.ref.collection(n),{ref:o,query:c}=s0(s,r);return new e0(o,c,this.afs)}snapshotChanges(){return function(i,n){return fA(i,n).pipe(ms(void 0),Dp(),(0,it.U)(([r,s])=>s.exists?(null==r?void 0:r.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,it.U)(({payload:r})=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data()))}get(n){return(0,cn.D)(this.ref.get(n)).pipe(Xt.iC)}}class kN{constructor(n,r){this.query=n,this.afs=r}stateChanges(n){return n&&0!==n.length?Ag(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(r=>r.filter(s=>n.indexOf(s.type)>-1)),ar(r=>r.length>0),Xt.iC):Ag(this.query,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}auditTrail(n){return this.stateChanges(n).pipe(Lo((r,s)=>[...r,...s],[]))}snapshotChanges(n){const r=RN(n);return pA(this.query,r,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}valueChanges(n={}){return XC(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(s=>s.payload.docs.map(o=>n.idField?Object.assign({[n.idField]:o.id},o.data()):o.data())),Xt.iC)}get(n){return(0,cn.D)(this.query.get(n)).pipe(Xt.iC)}}const gA=new f.OlP("angularfire2.enableFirestorePersistence"),n0=new f.OlP("angularfire2.firestore.persistenceSettings"),xg=new f.OlP("angularfire2.firestore.settings"),r0=new f.OlP("angularfire2.firestore.use-emulator");function s0(i,n=(r=>r)){return{query:n(i),ref:i}}let mA=(()=>{class i{constructor(r,s,o,c,h,m,y,C,T,x,R,O,U,te,pe,Fe){this.schedulers=y;const Ge=(0,rs.on)(r,m,s),$e=T;x&&g_(Ge,m,R,U,te,pe,O,Fe),[this.firestore,this.persistenceEnabled$]=(0,Xt.cc)(`${Ge.name}.firestore`,"AngularFirestore",Ge.name,()=>{const We=m.runOutsideAngular(()=>Ge.firestore());if(c&&We.settings(c),$e&&We.useEmulator(...$e),o&&!Pi(h)){const wn=()=>{try{return(0,cn.D)(We.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Dr){return"undefined"!=typeof console&&console.warn(Dr),(0,qe.of)(!1)}};return[We,m.runOutsideAngular(wn)]}return[We,(0,qe.of)(!1)]},[c,$e,o])}collection(r,s){let o;o="string"==typeof r?this.firestore.collection(r):r;const{ref:c,query:h}=s0(o,s),m=this.schedulers.ngZone.run(()=>c);return new e0(m,h,this)}collectionGroup(r,s){const o=s||(h=>h),c=this.firestore.collectionGroup(r);return new kN(o(c),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const o=this.schedulers.ngZone.run(()=>s);return new t0(o,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(rs.Dh),f.LFG(rs.xv,8),f.LFG(gA,8),f.LFG(xg,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Xt.HU),f.LFG(n0,8),f.LFG(r0,8),f.LFG(m_,8),f.LFG(io,8),f.LFG(Kd,8),f.LFG(Zd,8),f.LFG(Tp,8),f.LFG(aS,8),f.LFG(Wb,8))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),NN=(()=>{class i{constructor(){p_.Z.registerVersion("angularfire",Xt.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:i,providers:[{provide:gA,useValue:!0},{provide:n0,useValue:r}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[mA]}),i})(),o0=(()=>{class i{constructor(r){this.afs=r,this.postsCollection=this.afs.collection("posts",s=>s.orderBy("published","desc"))}getPosts(){return this.postsCollection.snapshotChanges().pipe((0,it.U)(r=>r.map(s=>{const o=s.payload.doc.data();return Object.assign({id:s.payload.doc.id},o)})))}getPostData(r){return this.postDoc=this.afs.doc(`posts/${r}`),this.postDoc.valueChanges()}create(r){this.postsCollection.add(r)}update(r,s){return this.getPost(r).update(s)}getPost(r){return this.afs.doc(`posts/${r}`)}delete(r){return this.getPost(r).delete()}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(mA))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function nr(i){return null!=i&&"false"!=`${i}`}function vc(i,n=0){return function(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):n}function Mg(i){return Array.isArray(i)?i:[i]}function Ir(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Ja(i){return i instanceof f.SBq?i.nativeElement:i}var ON=B(9105);function Rg(i,n,r,s){return(0,ON.m)(r)&&(s=r,r=void 0),s?Rg(i,n,r).pipe((0,it.U)(o=>(0,Hc.k)(o)?s(...o):s(o))):new bn.y(o=>{FN(i,n,function(h){o.next(arguments.length>1?Array.prototype.slice.call(arguments):h)},o,r)})}function FN(i,n,r,s,o){let c;if(function(i){return i&&"function"==typeof i.addEventListener&&"function"==typeof i.removeEventListener}(i)){const h=i;i.addEventListener(n,r,o),c=()=>h.removeEventListener(n,r,o)}else if(function(i){return i&&"function"==typeof i.on&&"function"==typeof i.off}(i)){const h=i;i.on(n,r),c=()=>h.off(n,r)}else if(function(i){return i&&"function"==typeof i.addListener&&"function"==typeof i.removeListener}(i)){const h=i;i.addListener(n,r),c=()=>h.removeListener(n,r)}else{if(!i||!i.length)throw new TypeError("Invalid event target");for(let h=0,m=i.length;h<m;h++)FN(i[h],n,r,s,o)}s.add(c)}var gL=B(6465),vA=B(6102);new class extends vA.v{flush(n){this.active=!0,this.scheduled=void 0;const{actions:r}=this;let s,o=-1,c=r.length;n=n||r.shift();do{if(s=n.execute(n.state,n.delay))break}while(++o<c&&(n=r.shift()));if(this.active=!1,s){for(;++o<c&&(n=r.shift());)n.unsubscribe();throw s}}}(class extends gL.o{constructor(n,r){super(n,r),this.scheduler=n,this.work=r}requestAsyncId(n,r,s=0){return null!==s&&s>0?super.requestAsyncId(n,r,s):(n.actions.push(this),n.scheduled||(n.scheduled=requestAnimationFrame(()=>n.flush(null))))}recycleAsyncId(n,r,s=0){if(null!==s&&s>0||null===s&&this.delay>0)return super.recycleAsyncId(n,r,s);0===n.actions.length&&(cancelAnimationFrame(r),n.scheduled=void 0)}});B(4581);class bA{constructor(n){this.durationSelector=n}call(n,r){return r.subscribe(new c0(n,this.durationSelector))}}class c0 extends es.Ds{constructor(n,r){super(n),this.durationSelector=r,this.hasValue=!1}_next(n){if(this.value=n,this.hasValue=!0,!this.throttled){let r;try{const{durationSelector:o}=this;r=o(n)}catch(o){return this.destination.error(o)}const s=(0,es.ft)(r,new es.IY(this));!s||s.closed?this.clearThrottle():this.add(this.throttled=s)}}clearThrottle(){const{value:n,hasValue:r,throttled:s}=this;s&&(this.remove(s),this.throttled=void 0,s.unsubscribe()),r&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var hv=B(6561);function fv(i){const{index:n,period:r,subscriber:s}=i;if(s.next(n),!s.closed){if(-1===r)return s.complete();i.index=n+1,this.schedule(i,r)}}function pv(i,n=Qd.P){return function(i){return function(r){return r.lift(new bA(i))}}(()=>function(i=0,n,r){let s=-1;return(0,hv.k)(n)?s=Number(n)<1?1:Number(n):(0,_l.K)(n)&&(r=n),(0,_l.K)(r)||(r=Qd.P),new bn.y(o=>{const c=(0,hv.k)(i)?i:+i-r.now();return r.schedule(fv,c,{index:0,period:s,subscriber:o})})}(i,n))}function Is(i){return n=>n.lift(new EA(i))}class EA{constructor(n){this.notifier=n}call(n,r){const s=new qr(n),o=(0,es.ft)(this.notifier,new es.IY(s));return o&&!s.seenValue?(s.add(o),r.subscribe(s)):s}}class qr extends es.Ds{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let wA;try{wA="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){wA=!1}let Ng,gn=(()=>{class i{constructor(r){this._platformId=r,this.isBrowser=this._platformId?function(i){return"browser"===i}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!wA)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(f.Lbi))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(f.Lbi))},token:i,providedIn:"root"}),i})(),kg=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({}),i})();const Og=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function CA(){if(Ng)return Ng;if("object"!=typeof document||!document)return Ng=new Set(Og),Ng;let i=document.createElement("input");return Ng=new Set(Og.filter(n=>(i.setAttribute("type",n),i.type===n))),Ng}let gv,Ku,d0,ia;function u0(i){return function(){if(null==gv&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>gv=!0}))}finally{gv=gv||!1}return gv}()?i:!!i.capture}function IA(){if(null==Ku){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ku=!1,Ku;if("scrollBehavior"in document.documentElement.style)Ku=!0;else{const i=Element.prototype.scrollTo;Ku=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return Ku}function uf(i){return i.composedPath?i.composedPath()[0]:i.target}function SA(){return void 0!==ia.__karma__&&!!ia.__karma__||void 0!==ia.jasmine&&!!ia.jasmine||void 0!==ia.jest&&!!ia.jest||void 0!==ia.Mocha&&!!ia.Mocha}ia="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};const TA=new f.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,f.f3M)(se)}});let df=(()=>{class i{constructor(r){if(this.value="ltr",this.change=new f.vpe,r){const o=r.documentElement?r.documentElement.dir:null,c=(r.body?r.body.dir:null)||o;this.value="ltr"===c||"rtl"===c?c:"ltr"}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(TA,8))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(TA,8))},token:i,providedIn:"root"}),i})(),Fg=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({}),i})(),DA=(()=>{class i{constructor(){this._listeners=[]}notify(r,s){for(let o of this._listeners)o(r,s)}listen(r){return this._listeners.push(r),()=>{this._listeners=this._listeners.filter(s=>r!==s)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=f.Yz7({factory:function(){return new i},token:i,providedIn:"root"}),i})(),hf=(()=>{class i{constructor(r,s,o){this._ngZone=r,this._platform=s,this._scrolled=new ct.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(r){this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(()=>this._scrolled.next(r)))}deregister(r){const s=this.scrollContainers.get(r);s&&(s.unsubscribe(),this.scrollContainers.delete(r))}scrolled(r=20){return this._platform.isBrowser?new bn.y(s=>{this._globalSubscription||this._addGlobalListener();const o=r>0?this._scrolled.pipe(pv(r)).subscribe(s):this._scrolled.subscribe(s);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,qe.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((r,s)=>this.deregister(s)),this._scrolled.complete()}ancestorScrolled(r,s){const o=this.getAncestorScrollContainers(r);return this.scrolled(s).pipe(ar(c=>!c||o.indexOf(c)>-1))}getAncestorScrollContainers(r){const s=[];return this.scrollContainers.forEach((o,c)=>{this._scrollableContainsElement(c,r)&&s.push(c)}),s}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(r,s){let o=Ja(s),c=r.getElementRef().nativeElement;do{if(o==c)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Rg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(f.R0b),f.LFG(gn),f.LFG(se,8))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(f.R0b),f.LFG(gn),f.LFG(se,8))},token:i,providedIn:"root"}),i})(),Vg=(()=>{class i{constructor(r,s,o){this._platform=r,this._change=new ct.xQ,this._changeListener=c=>{this._change.next(c)},this._document=o,s.runOutsideAngular(()=>{if(r.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const r=this._getWindow();r.removeEventListener("resize",this._changeListener),r.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}getViewportRect(){const r=this.getViewportScrollPosition(),{width:s,height:o}=this.getViewportSize();return{top:r.top,left:r.left,bottom:r.top+o,right:r.left+s,height:o,width:s}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const r=this._document,s=this._getWindow(),o=r.documentElement,c=o.getBoundingClientRect();return{top:-c.top||r.body.scrollTop||s.scrollY||o.scrollTop||0,left:-c.left||r.body.scrollLeft||s.scrollX||o.scrollLeft||0}}change(r=20){return r>0?this._change.pipe(pv(r)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(gn),f.LFG(f.R0b),f.LFG(se,8))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(gn),f.LFG(f.R0b),f.LFG(se,8))},token:i,providedIn:"root"}),i})(),JN=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({}),i})(),h0=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[Fg,kg,JN],Fg,JN]}),i})();class Bg{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class ff extends Bg{constructor(n,r,s,o){super(),this.component=n,this.viewContainerRef=r,this.injector=s,this.componentFactoryResolver=o}}class bc extends Bg{constructor(n,r,s){super(),this.templateRef=n,this.viewContainerRef=r,this.context=s}get origin(){return this.templateRef.elementRef}attach(n,r=this.context){return this.context=r,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class OA extends Bg{constructor(n){super(),this.element=n instanceof f.SBq?n.nativeElement:n}}class _v{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof ff?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof bc?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof OA?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class nO extends _v{constructor(n,r,s,o,c){super(),this.outletElement=n,this._componentFactoryResolver=r,this._appRef=s,this._defaultInjector=o,this.attachDomPortal=h=>{const m=h.element,y=this._document.createComment("dom-portal");m.parentNode.insertBefore(y,m),this.outletElement.appendChild(m),this._attachedPortal=h,super.setDisposeFn(()=>{y.parentNode&&y.parentNode.replaceChild(m,y)})},this._document=c}attachComponentPortal(n){const s=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let o;return n.viewContainerRef?(o=n.viewContainerRef.createComponent(s,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector),this.setDisposeFn(()=>o.destroy())):(o=s.create(n.injector||this._defaultInjector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=n,o}attachTemplatePortal(n){let r=n.viewContainerRef,s=r.createEmbeddedView(n.templateRef,n.context);return s.rootNodes.forEach(o=>this.outletElement.appendChild(o)),s.detectChanges(),this.setDisposeFn(()=>{let o=r.indexOf(s);-1!==o&&r.remove(o)}),this._attachedPortal=n,s}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let Ug=(()=>{class i extends _v{constructor(r,s,o){super(),this._componentFactoryResolver=r,this._viewContainerRef=s,this._isInitialized=!1,this.attached=new f.vpe,this.attachDomPortal=c=>{const h=c.element,m=this._document.createComment("dom-portal");c.setAttachedHost(this),h.parentNode.insertBefore(m,h),this._getRootNode().appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(h,m)})},this._document=o}get portal(){return this._attachedPortal}set portal(r){this.hasAttached()&&!r&&!this._isInitialized||(this.hasAttached()&&super.detach(),r&&super.attach(r),this._attachedPortal=r)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(r){r.setAttachedHost(this);const s=null!=r.viewContainerRef?r.viewContainerRef:this._viewContainerRef,c=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component),h=s.createComponent(c,s.length,r.injector||s.injector);return s!==this._viewContainerRef&&this._getRootNode().appendChild(h.hostView.rootNodes[0]),super.setDisposeFn(()=>h.destroy()),this._attachedPortal=r,this._attachedRef=h,this.attached.emit(h),h}attachTemplatePortal(r){r.setAttachedHost(this);const s=this._viewContainerRef.createEmbeddedView(r.templateRef,r.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=r,this._attachedRef=s,this.attached.emit(s),s}_getRootNode(){const r=this._viewContainerRef.element.nativeElement;return r.nodeType===r.ELEMENT_NODE?r:r.parentNode}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f._Vd),f.Y36(f.s_b),f.Y36(se))},i.\u0275dir=f.lG2({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[f.qOj]}),i})(),f0=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({}),i})();function ZA(i,...n){return n.length?n.some(r=>i[r]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}const UL=IA();class J3{constructor(n,r){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=r}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=Ir(-this._previousScrollPosition.left),n.style.top=Ir(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,s=n.style,o=this._document.body.style,c=s.scrollBehavior||"",h=o.scrollBehavior||"";this._isEnabled=!1,s.left=this._previousHTMLStyles.left,s.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),UL&&(s.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),UL&&(s.scrollBehavior=c,o.scrollBehavior=h)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const r=this._document.body,s=this._viewportRuler.getViewportSize();return r.scrollHeight>s.height||r.scrollWidth>s.width}}class X3{constructor(n,r,s,o){this._scrollDispatcher=n,this._ngZone=r,this._viewportRuler=s,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const r=this._viewportRuler.getViewportScrollPosition().top;Math.abs(r-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class jL{enable(){}disable(){}attach(){}}function EO(i,n){return n.some(r=>i.bottom<r.top||i.top>r.bottom||i.right<r.left||i.left>r.right)}function HL(i,n){return n.some(r=>i.top<r.top||i.bottom>r.bottom||i.left<r.left||i.right>r.right)}class eG{constructor(n,r,s,o){this._scrollDispatcher=n,this._viewportRuler=r,this._ngZone=s,this._config=o,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const r=this._overlayRef.overlayElement.getBoundingClientRect(),{width:s,height:o}=this._viewportRuler.getViewportSize();EO(r,[{width:s,height:o,bottom:o,right:s,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let tG=(()=>{class i{constructor(r,s,o,c){this._scrollDispatcher=r,this._viewportRuler=s,this._ngZone=o,this.noop=()=>new jL,this.close=h=>new X3(this._scrollDispatcher,this._ngZone,this._viewportRuler,h),this.block=()=>new J3(this._viewportRuler,this._document),this.reposition=h=>new eG(this._scrollDispatcher,this._viewportRuler,this._ngZone,h),this._document=c}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(hf),f.LFG(Vg),f.LFG(f.R0b),f.LFG(se))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(hf),f.LFG(Vg),f.LFG(f.R0b),f.LFG(se))},token:i,providedIn:"root"}),i})();class wO{constructor(n){if(this.scrollStrategy=new jL,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const r=Object.keys(n);for(const s of r)void 0!==n[s]&&(this[s]=n[s])}}}class nG{constructor(n,r,s,o,c){this.offsetX=s,this.offsetY=o,this.panelClass=c,this.originX=n.originX,this.originY=n.originY,this.overlayX=r.overlayX,this.overlayY=r.overlayY}}class rG{constructor(n,r){this.connectionPair=n,this.scrollableViewProperties=r}}let GL=(()=>{class i{constructor(r){this._attachedOverlays=[],this._document=r}ngOnDestroy(){this.detach()}add(r){this.remove(r),this._attachedOverlays.push(r)}remove(r){const s=this._attachedOverlays.indexOf(r);s>-1&&this._attachedOverlays.splice(s,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(se))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(se))},token:i,providedIn:"root"}),i})(),iG=(()=>{class i extends GL{constructor(r){super(r),this._keydownListener=s=>{const o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){o[c]._keydownEvents.next(s);break}}}add(r){super.add(r),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(se))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(se))},token:i,providedIn:"root"}),i})(),sG=(()=>{class i extends GL{constructor(r,s){super(r),this._platform=s,this._cursorStyleIsSet=!1,this._clickListener=o=>{const c=uf(o),h=this._attachedOverlays.slice();for(let m=h.length-1;m>-1;m--){const y=h[m];if(!(y._outsidePointerEvents.observers.length<1)&&y.hasAttached()){if(y.overlayElement.contains(c))break;y._outsidePointerEvents.next(o)}}}}add(r){if(super.add(r),!this._isAttached){const s=this._document.body;s.addEventListener("click",this._clickListener,!0),s.addEventListener("auxclick",this._clickListener,!0),s.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=s.style.cursor,s.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const r=this._document.body;r.removeEventListener("click",this._clickListener,!0),r.removeEventListener("auxclick",this._clickListener,!0),r.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(r.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(se),f.LFG(gn))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(se),f.LFG(gn))},token:i,providedIn:"root"}),i})(),CO=(()=>{class i{constructor(r,s){this._platform=s,this._document=r}ngOnDestroy(){const r=this._containerElement;r&&r.parentNode&&r.parentNode.removeChild(r)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const r="cdk-overlay-container";if(this._platform.isBrowser||SA()){const o=this._document.querySelectorAll(`.${r}[platform="server"], .${r}[platform="test"]`);for(let c=0;c<o.length;c++)o[c].parentNode.removeChild(o[c])}const s=this._document.createElement("div");s.classList.add(r),SA()?s.setAttribute("platform","test"):this._platform.isBrowser||s.setAttribute("platform","server"),this._document.body.appendChild(s),this._containerElement=s}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(se),f.LFG(gn))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(se),f.LFG(gn))},token:i,providedIn:"root"}),i})();class oG{constructor(n,r,s,o,c,h,m,y,C){this._portalOutlet=n,this._host=r,this._pane=s,this._config=o,this._ngZone=c,this._keyboardDispatcher=h,this._document=m,this._location=y,this._outsideClickDispatcher=C,this._backdropElement=null,this._backdropClick=new ct.xQ,this._attachments=new ct.xQ,this._detachments=new ct.xQ,this._locationChanges=Vi.w.EMPTY,this._backdropClickHandler=T=>this._backdropClick.next(T),this._keydownEvents=new ct.xQ,this._outsidePointerEvents=new ct.xQ,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){let r=this._portalOutlet.attach(n);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(gs(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),r}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config=Object.assign(Object.assign({},this._config),n),this._updateElementSize()}setDirection(n){this._config=Object.assign(Object.assign({},this._config),{direction:n}),this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=Ir(this._config.width),n.height=Ir(this._config.height),n.minWidth=Ir(this._config.minWidth),n.minHeight=Ir(this._config.minHeight),n.maxWidth=Ir(this._config.maxWidth),n.maxHeight=Ir(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(!n)return;let r;const s=()=>{n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",s),this._disposeBackdrop(n)),this._config.backdropClass&&this._toggleClasses(n,this._config.backdropClass,!1),clearTimeout(r)};n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",s)}),n.style.pointerEvents="none",r=this._ngZone.runOutsideAngular(()=>setTimeout(s,500))}_toggleClasses(n,r,s){const o=n.classList;Mg(r).forEach(c=>{c&&(s?o.add(c):o.remove(c))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const n=this._ngZone.onStable.pipe(Is((0,uu.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.parentNode&&n.parentNode.removeChild(n),this._backdropElement===n&&(this._backdropElement=null))}}const $L="cdk-overlay-connected-position-bounding-box",aG=/([A-Za-z%]+)$/;class zL{constructor(n,r,s,o,c){this._viewportRuler=r,this._document=s,this._platform=o,this._overlayContainer=c,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ct.xQ,this._resizeSubscription=Vi.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}get positions(){return this._preferredPositions}attach(n){this._validatePositions(),n.hostElement.classList.add($L),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const n=this._originRect,r=this._overlayRect,s=this._viewportRect,o=[];let c;for(let h of this._preferredPositions){let m=this._getOriginPoint(n,h),y=this._getOverlayPoint(m,r,h),C=this._getOverlayFit(y,r,s,h);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,m);this._canFitWithFlexibleDimensions(C,y,s)?o.push({position:h,origin:m,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(m,h)}):(!c||c.overlayFit.visibleArea<C.visibleArea)&&(c={overlayFit:C,overlayPoint:y,originPoint:m,position:h,overlayRect:r})}if(o.length){let h=null,m=-1;for(const y of o){const C=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);C>m&&(m=C,h=y)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Wg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($L),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const n=this._lastPosition||this._preferredPositions[0],r=this._getOriginPoint(this._originRect,n);this._applyPosition(n,r)}}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,r){let s,o;if("center"==r.originX)s=n.left+n.width/2;else{const c=this._isRtl()?n.right:n.left,h=this._isRtl()?n.left:n.right;s="start"==r.originX?c:h}return o="center"==r.originY?n.top+n.height/2:"top"==r.originY?n.top:n.bottom,{x:s,y:o}}_getOverlayPoint(n,r,s){let o,c;return o="center"==s.overlayX?-r.width/2:"start"===s.overlayX?this._isRtl()?-r.width:0:this._isRtl()?0:-r.width,c="center"==s.overlayY?-r.height/2:"top"==s.overlayY?0:-r.height,{x:n.x+o,y:n.y+c}}_getOverlayFit(n,r,s,o){const c=WL(r);let{x:h,y:m}=n,y=this._getOffset(o,"x"),C=this._getOffset(o,"y");y&&(h+=y),C&&(m+=C);let R=0-m,O=m+c.height-s.height,U=this._subtractOverflows(c.width,0-h,h+c.width-s.width),te=this._subtractOverflows(c.height,R,O),pe=U*te;return{visibleArea:pe,isCompletelyWithinViewport:c.width*c.height===pe,fitsInViewportVertically:te===c.height,fitsInViewportHorizontally:U==c.width}}_canFitWithFlexibleDimensions(n,r,s){if(this._hasFlexibleDimensions){const o=s.bottom-r.y,c=s.right-r.x,h=qL(this._overlayRef.getConfig().minHeight),m=qL(this._overlayRef.getConfig().minWidth),C=n.fitsInViewportHorizontally||null!=m&&m<=c;return(n.fitsInViewportVertically||null!=h&&h<=o)&&C}return!1}_pushOverlayOnScreen(n,r,s){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const o=WL(r),c=this._viewportRect,h=Math.max(n.x+o.width-c.width,0),m=Math.max(n.y+o.height-c.height,0),y=Math.max(c.top-s.top-n.y,0),C=Math.max(c.left-s.left-n.x,0);let T=0,x=0;return T=o.width<=c.width?C||-h:n.x<this._viewportMargin?c.left-s.left-n.x:0,x=o.height<=c.height?y||-m:n.y<this._viewportMargin?c.top-s.top-n.y:0,this._previousPushAmount={x:T,y:x},{x:n.x+T,y:n.y+x}}_applyPosition(n,r){if(this._setTransformOrigin(n),this._setOverlayElementStyles(r,n),this._setBoundingBoxStyles(r,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){const s=this._getScrollVisibility(),o=new rG(n,s);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const r=this._boundingBox.querySelectorAll(this._transformOriginSelector);let s,o=n.overlayY;s="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let c=0;c<r.length;c++)r[c].style.transformOrigin=`${s} ${o}`}_calculateBoundingBoxRect(n,r){const s=this._viewportRect,o=this._isRtl();let c,h,m,T,x,R;if("top"===r.overlayY)h=n.y,c=s.height-h+this._viewportMargin;else if("bottom"===r.overlayY)m=s.height-n.y+2*this._viewportMargin,c=s.height-m+this._viewportMargin;else{const O=Math.min(s.bottom-n.y+s.top,n.y),U=this._lastBoundingBoxSize.height;c=2*O,h=n.y-O,c>U&&!this._isInitialRender&&!this._growAfterOpen&&(h=n.y-U/2)}if("end"===r.overlayX&&!o||"start"===r.overlayX&&o)R=s.width-n.x+this._viewportMargin,T=n.x-this._viewportMargin;else if("start"===r.overlayX&&!o||"end"===r.overlayX&&o)x=n.x,T=s.right-n.x;else{const O=Math.min(s.right-n.x+s.left,n.x),U=this._lastBoundingBoxSize.width;T=2*O,x=n.x-O,T>U&&!this._isInitialRender&&!this._growAfterOpen&&(x=n.x-U/2)}return{top:h,left:x,bottom:m,right:R,width:T,height:c}}_setBoundingBoxStyles(n,r){const s=this._calculateBoundingBoxRect(n,r);!this._isInitialRender&&!this._growAfterOpen&&(s.height=Math.min(s.height,this._lastBoundingBoxSize.height),s.width=Math.min(s.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const c=this._overlayRef.getConfig().maxHeight,h=this._overlayRef.getConfig().maxWidth;o.height=Ir(s.height),o.top=Ir(s.top),o.bottom=Ir(s.bottom),o.width=Ir(s.width),o.left=Ir(s.left),o.right=Ir(s.right),o.alignItems="center"===r.overlayX?"center":"end"===r.overlayX?"flex-end":"flex-start",o.justifyContent="center"===r.overlayY?"center":"bottom"===r.overlayY?"flex-end":"flex-start",c&&(o.maxHeight=Ir(c)),h&&(o.maxWidth=Ir(h))}this._lastBoundingBoxSize=s,Wg(this._boundingBox.style,o)}_resetBoundingBoxStyles(){Wg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Wg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,r){const s={},o=this._hasExactPosition(),c=this._hasFlexibleDimensions,h=this._overlayRef.getConfig();if(o){const T=this._viewportRuler.getViewportScrollPosition();Wg(s,this._getExactOverlayY(r,n,T)),Wg(s,this._getExactOverlayX(r,n,T))}else s.position="static";let m="",y=this._getOffset(r,"x"),C=this._getOffset(r,"y");y&&(m+=`translateX(${y}px) `),C&&(m+=`translateY(${C}px)`),s.transform=m.trim(),h.maxHeight&&(o?s.maxHeight=Ir(h.maxHeight):c&&(s.maxHeight="")),h.maxWidth&&(o?s.maxWidth=Ir(h.maxWidth):c&&(s.maxWidth="")),Wg(this._pane.style,s)}_getExactOverlayY(n,r,s){let o={top:"",bottom:""},c=this._getOverlayPoint(r,this._overlayRect,n);this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,s));let h=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return c.y-=h,"bottom"===n.overlayY?o.bottom=this._document.documentElement.clientHeight-(c.y+this._overlayRect.height)+"px":o.top=Ir(c.y),o}_getExactOverlayX(n,r,s){let h,o={left:"",right:""},c=this._getOverlayPoint(r,this._overlayRect,n);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,s)),h=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===h?o.right=this._document.documentElement.clientWidth-(c.x+this._overlayRect.width)+"px":o.left=Ir(c.x),o}_getScrollVisibility(){const n=this._getOriginRect(),r=this._pane.getBoundingClientRect(),s=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:HL(n,s),isOriginOutsideView:EO(n,s),isOverlayClipped:HL(r,s),isOverlayOutsideView:EO(r,s)}}_subtractOverflows(n,...r){return r.reduce((s,o)=>s-Math.max(o,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,r=this._document.documentElement.clientHeight,s=this._viewportRuler.getViewportScrollPosition();return{top:s.top+this._viewportMargin,left:s.left+this._viewportMargin,right:s.left+n-this._viewportMargin,bottom:s.top+r-this._viewportMargin,width:n-2*this._viewportMargin,height:r-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,r){return"x"===r?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&Mg(n).forEach(r=>{""!==r&&-1===this._appliedPanelClasses.indexOf(r)&&(this._appliedPanelClasses.push(r),this._pane.classList.add(r))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof f.SBq)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const r=n.width||0,s=n.height||0;return{top:n.y,bottom:n.y+s,left:n.x,right:n.x+r,height:s,width:r}}}function Wg(i,n){for(let r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);return i}function qL(i){if("number"!=typeof i&&null!=i){const[n,r]=i.split(aG);return r&&"px"!==r?null:parseFloat(n)}return i||null}function WL(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}class lG{constructor(n,r,s,o,c,h,m){this._preferredPositions=[],this._positionStrategy=new zL(s,o,c,h,m).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(n,r),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(n){this._overlayRef=n,this._positionStrategy.attach(n),this._direction&&(n.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(n){this._positionStrategy.withScrollableContainers(n)}withFallbackPosition(n,r,s,o){const c=new nG(n,r,s,o);return this._preferredPositions.push(c),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(n){return this._overlayRef?this._overlayRef.setDirection(n):this._direction=n,this}withOffsetX(n){return this._positionStrategy.withDefaultOffsetX(n),this}withOffsetY(n){return this._positionStrategy.withDefaultOffsetY(n),this}withLockedPosition(n){return this._positionStrategy.withLockedPosition(n),this}withPositions(n){return this._preferredPositions=n.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(n){return this._positionStrategy.setOrigin(n),this}}const YL="cdk-global-overlay-wrapper";class cG{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(n){const r=n.getConfig();this._overlayRef=n,this._width&&!r.width&&n.updateSize({width:this._width}),this._height&&!r.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(YL),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._rightOffset="",this._leftOffset=n,this._justifyContent="flex-start",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._leftOffset="",this._rightOffset=n,this._justifyContent="flex-end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._justifyContent="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement.style,s=this._overlayRef.getConfig(),{width:o,height:c,maxWidth:h,maxHeight:m}=s,y=!("100%"!==o&&"100vw"!==o||h&&"100%"!==h&&"100vw"!==h),C=!("100%"!==c&&"100vh"!==c||m&&"100%"!==m&&"100vh"!==m);n.position=this._cssPosition,n.marginLeft=y?"0":this._leftOffset,n.marginTop=C?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=this._rightOffset,y?r.justifyContent="flex-start":"center"===this._justifyContent?r.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?r.justifyContent="flex-end":"flex-end"===this._justifyContent&&(r.justifyContent="flex-start"):r.justifyContent=this._justifyContent,r.alignItems=C?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement,s=r.style;r.classList.remove(YL),s.justifyContent=s.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let uG=(()=>{class i{constructor(r,s,o,c){this._viewportRuler=r,this._document=s,this._platform=o,this._overlayContainer=c}global(){return new cG}connectedTo(r,s,o){return new lG(s,o,r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(r){return new zL(r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(Vg),f.LFG(se),f.LFG(gn),f.LFG(CO))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(Vg),f.LFG(se),f.LFG(gn),f.LFG(CO))},token:i,providedIn:"root"}),i})(),dG=0,v0=(()=>{class i{constructor(r,s,o,c,h,m,y,C,T,x,R){this.scrollStrategies=r,this._overlayContainer=s,this._componentFactoryResolver=o,this._positionBuilder=c,this._keyboardDispatcher=h,this._injector=m,this._ngZone=y,this._document=C,this._directionality=T,this._location=x,this._outsideClickDispatcher=R}create(r){const s=this._createHostElement(),o=this._createPaneElement(s),c=this._createPortalOutlet(o),h=new wO(r);return h.direction=h.direction||this._directionality.value,new oG(c,s,o,h,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(r){const s=this._document.createElement("div");return s.id="cdk-overlay-"+dG++,s.classList.add("cdk-overlay-pane"),r.appendChild(s),s}_createHostElement(){const r=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalOutlet(r){return this._appRef||(this._appRef=this._injector.get(f.z2F)),new nO(r,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(tG),f.LFG(CO),f.LFG(f._Vd),f.LFG(uG),f.LFG(iG),f.LFG(f.zs3),f.LFG(f.R0b),f.LFG(se),f.LFG(df),f.LFG(Wt),f.LFG(sG))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();const pG={provide:new f.OlP("cdk-connected-overlay-scroll-strategy"),deps:[v0],useFactory:function(i){return()=>i.scrollStrategies.reposition()}};let gG=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[v0,pG],imports:[[Fg,f0,h0],h0]}),i})();function QA(i,n=Qd.P){return r=>r.lift(new mG(i,n))}class mG{constructor(n,r){this.dueTime=n,this.scheduler=r}call(n,r){return r.subscribe(new _G(n,this.dueTime,this.scheduler))}}class _G extends Vr.L{constructor(n,r,s){super(n),this.dueTime=r,this.scheduler=s,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(yG,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function yG(i){i.debouncedNext()}function ZL(i){return n=>n.lift(new vG(i))}class vG{constructor(n){this.total=n}call(n,r){return r.subscribe(new bG(n,this.total))}}class bG extends Vr.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){++this.count>this.total&&this.destination.next(n)}}let IO=(()=>{class i{create(r){return"undefined"==typeof MutationObserver?null:new MutationObserver(r)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=f.Yz7({factory:function(){return new i},token:i,providedIn:"root"}),i})(),QL=(()=>{class i{constructor(r){this._mutationObserverFactory=r,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((r,s)=>this._cleanupObserver(s))}observe(r){const s=Ja(r);return new bn.y(o=>{const h=this._observeElement(s).subscribe(o);return()=>{h.unsubscribe(),this._unobserveElement(s)}})}_observeElement(r){if(this._observedElements.has(r))this._observedElements.get(r).count++;else{const s=new ct.xQ,o=this._mutationObserverFactory.create(c=>s.next(c));o&&o.observe(r,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(r,{observer:o,stream:s,count:1})}return this._observedElements.get(r).stream}_unobserveElement(r){this._observedElements.has(r)&&(this._observedElements.get(r).count--,this._observedElements.get(r).count||this._cleanupObserver(r))}_cleanupObserver(r){if(this._observedElements.has(r)){const{observer:s,stream:o}=this._observedElements.get(r);s&&s.disconnect(),o.complete(),this._observedElements.delete(r)}}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(IO))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(IO))},token:i,providedIn:"root"}),i})(),EG=(()=>{class i{constructor(r,s,o){this._contentObserver=r,this._elementRef=s,this._ngZone=o,this.event=new f.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(r){this._disabled=nr(r),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(r){this._debounce=vc(r),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const r=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?r.pipe(QA(this.debounce)):r).subscribe(this.event)})}_unsubscribe(){var r;null===(r=this._currentSubscription)||void 0===r||r.unsubscribe()}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(QL),f.Y36(f.SBq),f.Y36(f.R0b))},i.\u0275dir=f.lG2({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),JL=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[IO]}),i})();class SG extends class{constructor(n){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ct.xQ,this._typeaheadSubscription=Vi.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=r=>r.disabled,this._pressedLetters=[],this.tabOut=new ct.xQ,this.change=new ct.xQ,n instanceof f.n_E&&n.changes.subscribe(r=>{if(this._activeItem){const o=r.toArray().indexOf(this._activeItem);o>-1&&o!==this._activeItemIndex&&(this._activeItemIndex=o)}})}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Gn.b)(r=>this._pressedLetters.push(r)),QA(n),ar(()=>this._pressedLetters.length>0),(0,it.U)(()=>this._pressedLetters.join(""))).subscribe(r=>{const s=this._getItemsArray();for(let o=1;o<s.length+1;o++){const c=(this._activeItemIndex+o)%s.length,h=s[c];if(!this._skipPredicateFn(h)&&0===h.getLabel().toUpperCase().trim().indexOf(r)){this.setActiveItem(c);break}}this._pressedLetters=[]}),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}setActiveItem(n){const r=this._activeItem;this.updateActiveItem(n),this._activeItem!==r&&this.change.next(this._activeItemIndex)}onKeydown(n){const r=n.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(c=>!n[c]||this._allowedModifierKeys.indexOf(c)>-1);switch(r){case 9:return void this.tabOut.next();case 40:if(this._vertical&&o){this.setNextItemActive();break}return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&o){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&o){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}return;default:return void((o||ZA(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(r>=65&&r<=90||r>=48&&r<=57)&&this._letterKeyStream.next(String.fromCharCode(r))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const r=this._getItemsArray(),s="number"==typeof n?n:r.indexOf(n),o=r[s];this._activeItem=null==o?null:o,this._activeItemIndex=s}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const r=this._getItemsArray();for(let s=1;s<=r.length;s++){const o=(this._activeItemIndex+n*s+r.length)%r.length;if(!this._skipPredicateFn(r[o]))return void this.setActiveItem(o)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,r){const s=this._getItemsArray();if(s[n]){for(;this._skipPredicateFn(s[n]);)if(!s[n+=r])return;this.setActiveItem(n)}}_getItemsArray(){return this._items instanceof f.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}}function iV(i){return 0===i.offsetX&&0===i.offsetY}function sV(i){const n=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}"undefined"!=typeof Element&&Element;const oV=new f.OlP("cdk-input-modality-detector-options"),HG={ignoreKeys:[18,17,224,91,16]},wv=u0({passive:!0,capture:!0});let lV=(()=>{class i{constructor(r,s,o,c){this._platform=r,this._mostRecentTarget=null,this._modality=new ri(null),this._lastTouchMs=0,this._onKeydown=h=>{var m,y;(null===(y=null===(m=this._options)||void 0===m?void 0:m.ignoreKeys)||void 0===y?void 0:y.some(C=>C===h.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=uf(h))},this._onMousedown=h=>{Date.now()-this._lastTouchMs<650||(this._modality.next(iV(h)?"keyboard":"mouse"),this._mostRecentTarget=uf(h))},this._onTouchstart=h=>{sV(h)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=uf(h))},this._options=Object.assign(Object.assign({},HG),c),this.modalityDetected=this._modality.pipe(ZL(1)),this.modalityChanged=this.modalityDetected.pipe(y_()),r.isBrowser&&s.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,wv),o.addEventListener("mousedown",this._onMousedown,wv),o.addEventListener("touchstart",this._onTouchstart,wv)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,wv),document.removeEventListener("mousedown",this._onMousedown,wv),document.removeEventListener("touchstart",this._onTouchstart,wv))}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(gn),f.LFG(f.R0b),f.LFG(se),f.LFG(oV,8))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(gn),f.LFG(f.R0b),f.LFG(se),f.LFG(oV,8))},token:i,providedIn:"root"}),i})();const cV=new f.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),uV=new f.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let SO=(()=>{class i{constructor(r,s,o,c){this._ngZone=s,this._defaultOptions=c,this._document=o,this._liveElement=r||this._createLiveElement()}announce(r,...s){const o=this._defaultOptions;let c,h;return 1===s.length&&"number"==typeof s[0]?h=s[0]:[c,h]=s,this.clear(),clearTimeout(this._previousTimeout),c||(c=o&&o.politeness?o.politeness:"polite"),null==h&&o&&(h=o.duration),this._liveElement.setAttribute("aria-live",c),this._ngZone.runOutsideAngular(()=>new Promise(m=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=r,m(),"number"==typeof h&&(this._previousTimeout=setTimeout(()=>this.clear(),h))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const r="cdk-live-announcer-element",s=this._document.getElementsByClassName(r),o=this._document.createElement("div");for(let c=0;c<s.length;c++)s[c].parentNode.removeChild(s[c]);return o.classList.add(r),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),this._document.body.appendChild(o),o}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(cV,8),f.LFG(f.R0b),f.LFG(se),f.LFG(uV,8))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(cV,8),f.LFG(f.R0b),f.LFG(se),f.LFG(uV,8))},token:i,providedIn:"root"}),i})();const dV=new f.OlP("cdk-focus-monitor-default-options"),JA=u0({passive:!0,capture:!0});let XA=(()=>{class i{constructor(r,s,o,c,h){this._ngZone=r,this._platform=s,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ct.xQ,this._rootNodeFocusAndBlurListener=m=>{const y=uf(m),C="focus"===m.type?this._onFocus:this._onBlur;for(let T=y;T;T=T.parentElement)C.call(this,m,T)},this._document=c,this._detectionMode=(null==h?void 0:h.detectionMode)||0}monitor(r,s=!1){const o=Ja(r);if(!this._platform.isBrowser||1!==o.nodeType)return(0,qe.of)(null);const c=function(i){if(function(){if(null==d0){const i="undefined"!=typeof document?document.head:null;d0=!(!i||!i.createShadowRoot&&!i.attachShadow)}return d0}()){const n=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(o)||this._getDocument(),h=this._elementInfo.get(o);if(h)return s&&(h.checkChildren=!0),h.subject;const m={checkChildren:s,subject:new ct.xQ,rootNode:c};return this._elementInfo.set(o,m),this._registerGlobalListeners(m),m.subject}stopMonitoring(r){const s=Ja(r),o=this._elementInfo.get(s);o&&(o.subject.complete(),this._setClasses(s),this._elementInfo.delete(s),this._removeGlobalListeners(o))}focusVia(r,s,o){const c=Ja(r);c===this._getDocument().activeElement?this._getClosestElementsInfo(c).forEach(([m,y])=>this._originChanged(m,s,y)):(this._setOrigin(s),"function"==typeof c.focus&&c.focus(o))}ngOnDestroy(){this._elementInfo.forEach((r,s)=>this.stopMonitoring(s))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(r,s,o){o?r.classList.add(s):r.classList.remove(s)}_getFocusOrigin(r){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(r)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(r){return 1===this._detectionMode||!!(null==r?void 0:r.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(r,s){this._toggleClass(r,"cdk-focused",!!s),this._toggleClass(r,"cdk-touch-focused","touch"===s),this._toggleClass(r,"cdk-keyboard-focused","keyboard"===s),this._toggleClass(r,"cdk-mouse-focused","mouse"===s),this._toggleClass(r,"cdk-program-focused","program"===s)}_setOrigin(r,s=!1){this._ngZone.runOutsideAngular(()=>{this._origin=r,this._originFromTouchInteraction="touch"===r&&s,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(r,s){const o=this._elementInfo.get(s),c=uf(r);!o||!o.checkChildren&&s!==c||this._originChanged(s,this._getFocusOrigin(c),o)}_onBlur(r,s){const o=this._elementInfo.get(s);!o||o.checkChildren&&r.relatedTarget instanceof Node&&s.contains(r.relatedTarget)||(this._setClasses(s),this._emitOrigin(o.subject,null))}_emitOrigin(r,s){this._ngZone.run(()=>r.next(s))}_registerGlobalListeners(r){if(!this._platform.isBrowser)return;const s=r.rootNode,o=this._rootNodeFocusListenerCount.get(s)||0;o||this._ngZone.runOutsideAngular(()=>{s.addEventListener("focus",this._rootNodeFocusAndBlurListener,JA),s.addEventListener("blur",this._rootNodeFocusAndBlurListener,JA)}),this._rootNodeFocusListenerCount.set(s,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Is(this._stopInputModalityDetector)).subscribe(c=>{this._setOrigin(c,!0)}))}_removeGlobalListeners(r){const s=r.rootNode;if(this._rootNodeFocusListenerCount.has(s)){const o=this._rootNodeFocusListenerCount.get(s);o>1?this._rootNodeFocusListenerCount.set(s,o-1):(s.removeEventListener("focus",this._rootNodeFocusAndBlurListener,JA),s.removeEventListener("blur",this._rootNodeFocusAndBlurListener,JA),this._rootNodeFocusListenerCount.delete(s))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(r,s,o){this._setClasses(r,s),this._emitOrigin(o.subject,s),this._lastFocusOrigin=s}_getClosestElementsInfo(r){const s=[];return this._elementInfo.forEach((o,c)=>{(c===r||o.checkChildren&&c.contains(r))&&s.push([c,o])}),s}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(f.R0b),f.LFG(gn),f.LFG(lV),f.LFG(se,8),f.LFG(dV,8))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(f.R0b),f.LFG(gn),f.LFG(lV),f.LFG(se,8),f.LFG(dV,8))},token:i,providedIn:"root"}),i})();const hV="cdk-high-contrast-black-on-white",fV="cdk-high-contrast-white-on-black",TO="cdk-high-contrast-active";let pV=(()=>{class i{constructor(r,s){this._platform=r,this._document=s}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);const s=this._document.defaultView||window,o=s&&s.getComputedStyle?s.getComputedStyle(r):null,c=(o&&o.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(r),c){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const r=this._document.body.classList;r.remove(TO),r.remove(hV),r.remove(fV),this._hasCheckedHighContrastMode=!0;const s=this.getHighContrastMode();1===s?(r.add(TO),r.add(hV)):2===s&&(r.add(TO),r.add(fV))}}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(gn),f.LFG(se))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(gn),f.LFG(se))},token:i,providedIn:"root"}),i})();const gV=new f.GfV("12.2.9");class mV{}const Qu="*";function ex(i,n){return{type:7,name:i,definitions:n,options:{}}}function b0(i,n=null){return{type:4,styles:n,timings:i}}function _V(i,n=null){return{type:2,steps:i,options:n}}function Xa(i){return{type:6,styles:i,offset:null}}function Yg(i,n,r){return{type:0,name:i,styles:n,options:r}}function E0(i,n,r=null){return{type:1,expr:i,animation:n,options:r}}function yV(i){Promise.resolve(null).then(i)}class Cv{constructor(n=0,r=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+r}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){yV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}class vV{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let r=0,s=0,o=0;const c=this.players.length;0==c?yV(()=>this._onFinish()):this.players.forEach(h=>{h.onDone(()=>{++r==c&&this._onFinish()}),h.onDestroy(()=>{++s==c&&this._onDestroy()}),h.onStart(()=>{++o==c&&this._onStart()})}),this.totalTime=this.players.reduce((h,m)=>Math.max(h,m.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const r=n*this.totalTime;this.players.forEach(s=>{const o=s.totalTime?Math.min(1,r/s.totalTime):1;s.setPosition(o)})}getPosition(){const n=this.players.reduce((r,s)=>null===r||s.totalTime>r.totalTime?s:r,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}function bV(){return"undefined"!=typeof window&&void 0!==window.document}function AO(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function gf(i){switch(i.length){case 0:return new Cv;case 1:return i[0];default:return new vV(i)}}function EV(i,n,r,s,o={},c={}){const h=[],m=[];let y=-1,C=null;if(s.forEach(T=>{const x=T.offset,R=x==y,O=R&&C||{};Object.keys(T).forEach(U=>{let te=U,pe=T[U];if("offset"!==U)switch(te=n.normalizePropertyName(te,h),pe){case"!":pe=o[U];break;case Qu:pe=c[U];break;default:pe=n.normalizeStyleValue(U,te,pe,h)}O[te]=pe}),R||m.push(O),C=O,y=x}),h.length){const T="\n - ";throw new Error(`Unable to animate due to the following errors:${T}${h.join(T)}`)}return m}function xO(i,n,r,s){switch(n){case"start":i.onStart(()=>s(r&&MO(r,"start",i)));break;case"done":i.onDone(()=>s(r&&MO(r,"done",i)));break;case"destroy":i.onDestroy(()=>s(r&&MO(r,"destroy",i)))}}function MO(i,n,r){const s=r.totalTime,c=RO(i.element,i.triggerName,i.fromState,i.toState,n||i.phaseName,null==s?i.totalTime:s,!!r.disabled),h=i._data;return null!=h&&(c._data=h),c}function RO(i,n,r,s,o="",c=0,h){return{element:i,triggerName:n,fromState:r,toState:s,phaseName:o,totalTime:c,disabled:!!h}}function mo(i,n,r){let s;return i instanceof Map?(s=i.get(n),s||i.set(n,s=r)):(s=i[n],s||(s=i[n]=r)),s}function wV(i){const n=i.indexOf(":");return[i.substring(1,n),i.substr(n+1)]}let kO=(i,n)=>!1,NO=(i,n)=>!1,CV=(i,n,r)=>[];const IV=AO();(IV||"undefined"!=typeof Element)&&(kO=bV()?(i,n)=>{for(;n&&n!==document.documentElement;){if(n===i)return!0;n=n.parentNode||n.host}return!1}:(i,n)=>i.contains(n),NO=(()=>{if(IV||Element.prototype.matches)return(i,n)=>i.matches(n);{const i=Element.prototype,n=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector;return n?(r,s)=>n.apply(r,[s]):NO}})(),CV=(i,n,r)=>{let s=[];if(r){const o=i.querySelectorAll(n);for(let c=0;c<o.length;c++)s.push(o[c])}else{const o=i.querySelector(n);o&&s.push(o)}return s});let Kg=null,SV=!1;function OO(i){Kg||(Kg=("undefined"!=typeof document?document.body:null)||{},SV=!!Kg.style&&"WebkitAppearance"in Kg.style);let n=!0;return Kg.style&&!function(i){return"ebkit"==i.substring(1,6)}(i)&&(n=i in Kg.style,!n&&SV&&(n="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in Kg.style)),n}const PO=NO,FO=kO,LO=CV;function TV(i){const n={};return Object.keys(i).forEach(r=>{const s=r.replace(/([a-z])([A-Z])/g,"$1-$2");n[s]=i[r]}),n}let DV=(()=>{class i{validateStyleProperty(r){return OO(r)}matchesElement(r,s){return PO(r,s)}containsElement(r,s){return FO(r,s)}query(r,s,o){return LO(r,s,o)}computeStyle(r,s,o){return o||""}animate(r,s,o,c,h,m=[],y){return new Cv(o,c)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})(),VO=(()=>{class i{}return i.NOOP=new DV,i})();const BO="ng-enter",tx="ng-leave",nx="ng-trigger",rx=".ng-trigger",xV="ng-animating",UO=".ng-animating";function Zg(i){if("number"==typeof i)return i;const n=i.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:jO(parseFloat(n[1]),n[2])}function jO(i,n){switch(n){case"s":return 1e3*i;default:return i}}function ix(i,n,r){return i.hasOwnProperty("duration")?i:function(i,n,r){let o,c=0,h="";if("string"==typeof i){const m=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===m)return n.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};o=jO(parseFloat(m[1]),m[2]);const y=m[3];null!=y&&(c=jO(parseFloat(y),m[4]));const C=m[5];C&&(h=C)}else o=i;if(!r){let m=!1,y=n.length;o<0&&(n.push("Duration values below 0 are not allowed for this animation step."),m=!0),c<0&&(n.push("Delay values below 0 are not allowed for this animation step."),m=!0),m&&n.splice(y,0,`The provided timing value "${i}" is invalid.`)}return{duration:o,delay:c,easing:h}}(i,n,r)}function Iv(i,n={}){return Object.keys(i).forEach(r=>{n[r]=i[r]}),n}function mf(i,n,r={}){if(n)for(let s in i)r[s]=i[s];else Iv(i,r);return r}function RV(i,n,r){return r?n+":"+r+";":""}function kV(i){let n="";for(let r=0;r<i.style.length;r++){const s=i.style.item(r);n+=RV(0,s,i.style.getPropertyValue(s))}for(const r in i.style)i.style.hasOwnProperty(r)&&!r.startsWith("_")&&(n+=RV(0,JG(r),i.style[r]));i.setAttribute("style",n)}function wc(i,n,r){i.style&&(Object.keys(n).forEach(s=>{const o=GO(s);r&&!r.hasOwnProperty(s)&&(r[s]=i.style[o]),i.style[o]=n[s]}),AO()&&kV(i))}function Qg(i,n){i.style&&(Object.keys(n).forEach(r=>{const s=GO(r);i.style[s]=""}),AO()&&kV(i))}function w0(i){return Array.isArray(i)?1==i.length?i[0]:_V(i):i}const HO=new RegExp("{{\\s*(.+?)\\s*}}","g");function NV(i){let n=[];if("string"==typeof i){let r;for(;r=HO.exec(i);)n.push(r[1]);HO.lastIndex=0}return n}function sx(i,n,r){const s=i.toString(),o=s.replace(HO,(c,h)=>{let m=n[h];return n.hasOwnProperty(h)||(r.push(`Please provide a value for the animation param ${h}`),m=""),m.toString()});return o==s?i:o}function ox(i){const n=[];let r=i.next();for(;!r.done;)n.push(r.value),r=i.next();return n}const QG=/-+([a-z0-9])/g;function GO(i){return i.replace(QG,(...n)=>n[1].toUpperCase())}function JG(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function OV(i,n){return 0===i||0===n}function PV(i,n,r){const s=Object.keys(r);if(s.length&&n.length){let c=n[0],h=[];if(s.forEach(m=>{c.hasOwnProperty(m)||h.push(m),c[m]=r[m]}),h.length)for(var o=1;o<n.length;o++){let m=n[o];h.forEach(function(y){m[y]=$O(i,y)})}}return n}function _o(i,n,r){switch(n.type){case 7:return i.visitTrigger(n,r);case 0:return i.visitState(n,r);case 1:return i.visitTransition(n,r);case 2:return i.visitSequence(n,r);case 3:return i.visitGroup(n,r);case 4:return i.visitAnimate(n,r);case 5:return i.visitKeyframes(n,r);case 6:return i.visitStyle(n,r);case 8:return i.visitReference(n,r);case 9:return i.visitAnimateChild(n,r);case 10:return i.visitAnimateRef(n,r);case 11:return i.visitQuery(n,r);case 12:return i.visitStagger(n,r);default:throw new Error(`Unable to resolve animation metadata node #${n.type}`)}}function $O(i,n){return window.getComputedStyle(i)[n]}function XG(i,n){const r=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(s=>function(i,n,r){if(":"==i[0]){const y=function(i,n){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,s)=>parseFloat(s)>parseFloat(r);case":decrement":return(r,s)=>parseFloat(s)<parseFloat(r);default:return n.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,r);if("function"==typeof y)return void n.push(y);i=y}const s=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return r.push(`The provided transition expression "${i}" is not supported`),n;const o=s[1],c=s[2],h=s[3];n.push(FV(o,h));"<"==c[0]&&!("*"==o&&"*"==h)&&n.push(FV(h,o))}(s,r,n)):r.push(i),r}const lx=new Set(["true","1"]),cx=new Set(["false","0"]);function FV(i,n){const r=lx.has(i)||cx.has(i),s=lx.has(n)||cx.has(n);return(o,c)=>{let h="*"==i||i==o,m="*"==n||n==c;return!h&&r&&"boolean"==typeof o&&(h=o?lx.has(i):cx.has(i)),!m&&s&&"boolean"==typeof c&&(m=c?lx.has(n):cx.has(n)),h&&m}}const n$=new RegExp("s*:selfs*,?","g");function zO(i,n,r){return new r$(i).build(n,r)}class r${constructor(n){this._driver=n}build(n,r){const s=new o$(r);return this._resetContextStyleTimingState(s),_o(this,w0(n),s)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles={},n.collectedStyles[""]={},n.currentTime=0}visitTrigger(n,r){let s=r.queryCount=0,o=r.depCount=0;const c=[],h=[];return"@"==n.name.charAt(0)&&r.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),n.definitions.forEach(m=>{if(this._resetContextStyleTimingState(r),0==m.type){const y=m,C=y.name;C.toString().split(/\s*,\s*/).forEach(T=>{y.name=T,c.push(this.visitState(y,r))}),y.name=C}else if(1==m.type){const y=this.visitTransition(m,r);s+=y.queryCount,o+=y.depCount,h.push(y)}else r.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:n.name,states:c,transitions:h,queryCount:s,depCount:o,options:null}}visitState(n,r){const s=this.visitStyle(n.styles,r),o=n.options&&n.options.params||null;if(s.containsDynamicStyles){const c=new Set,h=o||{};if(s.styles.forEach(m=>{if(ux(m)){const y=m;Object.keys(y).forEach(C=>{NV(y[C]).forEach(T=>{h.hasOwnProperty(T)||c.add(T)})})}}),c.size){const m=ox(c.values());r.errors.push(`state("${n.name}", ...) must define default values for all the following style substitutions: ${m.join(", ")}`)}}return{type:0,name:n.name,style:s,options:o?{params:o}:null}}visitTransition(n,r){r.queryCount=0,r.depCount=0;const s=_o(this,w0(n.animation),r);return{type:1,matchers:XG(n.expr,r.errors),animation:s,queryCount:r.queryCount,depCount:r.depCount,options:Jg(n.options)}}visitSequence(n,r){return{type:2,steps:n.steps.map(s=>_o(this,s,r)),options:Jg(n.options)}}visitGroup(n,r){const s=r.currentTime;let o=0;const c=n.steps.map(h=>{r.currentTime=s;const m=_o(this,h,r);return o=Math.max(o,r.currentTime),m});return r.currentTime=o,{type:3,steps:c,options:Jg(n.options)}}visitAnimate(n,r){const s=function(i,n){let r=null;if(i.hasOwnProperty("duration"))r=i;else if("number"==typeof i)return qO(ix(i,n).duration,0,"");const s=i;if(s.split(/\s+/).some(c=>"{"==c.charAt(0)&&"{"==c.charAt(1))){const c=qO(0,0,"");return c.dynamic=!0,c.strValue=s,c}return r=r||ix(s,n),qO(r.duration,r.delay,r.easing)}(n.timings,r.errors);r.currentAnimateTimings=s;let o,c=n.styles?n.styles:Xa({});if(5==c.type)o=this.visitKeyframes(c,r);else{let h=n.styles,m=!1;if(!h){m=!0;const C={};s.easing&&(C.easing=s.easing),h=Xa(C)}r.currentTime+=s.duration+s.delay;const y=this.visitStyle(h,r);y.isEmptyStep=m,o=y}return r.currentAnimateTimings=null,{type:4,timings:s,style:o,options:null}}visitStyle(n,r){const s=this._makeStyleAst(n,r);return this._validateStyleAst(s,r),s}_makeStyleAst(n,r){const s=[];Array.isArray(n.styles)?n.styles.forEach(h=>{"string"==typeof h?h==Qu?s.push(h):r.errors.push(`The provided style string value ${h} is not allowed.`):s.push(h)}):s.push(n.styles);let o=!1,c=null;return s.forEach(h=>{if(ux(h)){const m=h,y=m.easing;if(y&&(c=y,delete m.easing),!o)for(let C in m)if(m[C].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:s,easing:c,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,r){const s=r.currentAnimateTimings;let o=r.currentTime,c=r.currentTime;s&&c>0&&(c-=s.duration+s.delay),n.styles.forEach(h=>{"string"!=typeof h&&Object.keys(h).forEach(m=>{if(!this._driver.validateStyleProperty(m))return void r.errors.push(`The provided animation property "${m}" is not a supported CSS property for animations`);const y=r.collectedStyles[r.currentQuerySelector],C=y[m];let T=!0;C&&(c!=o&&c>=C.startTime&&o<=C.endTime&&(r.errors.push(`The CSS property "${m}" that exists between the times of "${C.startTime}ms" and "${C.endTime}ms" is also being animated in a parallel animation between the times of "${c}ms" and "${o}ms"`),T=!1),c=C.startTime),T&&(y[m]={startTime:c,endTime:o}),r.options&&function(i,n,r){const s=n.params||{},o=NV(i);o.length&&o.forEach(c=>{s.hasOwnProperty(c)||r.push(`Unable to resolve the local animation param ${c} in the given list of values`)})}(h[m],r.options,r.errors)})})}visitKeyframes(n,r){const s={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push("keyframes() must be placed inside of a call to animate()"),s;let c=0;const h=[];let m=!1,y=!1,C=0;const T=n.steps.map(Fe=>{const Ge=this._makeStyleAst(Fe,r);let $e=null!=Ge.offset?Ge.offset:function(i){if("string"==typeof i)return null;let n=null;if(Array.isArray(i))i.forEach(r=>{if(ux(r)&&r.hasOwnProperty("offset")){const s=r;n=parseFloat(s.offset),delete s.offset}});else if(ux(i)&&i.hasOwnProperty("offset")){const r=i;n=parseFloat(r.offset),delete r.offset}return n}(Ge.styles),We=0;return null!=$e&&(c++,We=Ge.offset=$e),y=y||We<0||We>1,m=m||We<C,C=We,h.push(We),Ge});y&&r.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),m&&r.errors.push("Please ensure that all keyframe offsets are in order");const x=n.steps.length;let R=0;c>0&&c<x?r.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==c&&(R=1/(x-1));const O=x-1,U=r.currentTime,te=r.currentAnimateTimings,pe=te.duration;return T.forEach((Fe,Ge)=>{const $e=R>0?Ge==O?1:R*Ge:h[Ge],We=$e*pe;r.currentTime=U+te.delay+We,te.duration=We,this._validateStyleAst(Fe,r),Fe.offset=$e,s.styles.push(Fe)}),s}visitReference(n,r){return{type:8,animation:_o(this,w0(n.animation),r),options:Jg(n.options)}}visitAnimateChild(n,r){return r.depCount++,{type:9,options:Jg(n.options)}}visitAnimateRef(n,r){return{type:10,animation:this.visitReference(n.animation,r),options:Jg(n.options)}}visitQuery(n,r){const s=r.currentQuerySelector,o=n.options||{};r.queryCount++,r.currentQuery=n;const[c,h]=function(i){const n=!!i.split(/\s*,\s*/).find(r=>":self"==r);return n&&(i=i.replace(n$,"")),[i=i.replace(/@\*/g,rx).replace(/@\w+/g,r=>rx+"-"+r.substr(1)).replace(/:animating/g,UO),n]}(n.selector);r.currentQuerySelector=s.length?s+" "+c:c,mo(r.collectedStyles,r.currentQuerySelector,{});const m=_o(this,w0(n.animation),r);return r.currentQuery=null,r.currentQuerySelector=s,{type:11,selector:c,limit:o.limit||0,optional:!!o.optional,includeSelf:h,animation:m,originalSelector:n.selector,options:Jg(n.options)}}visitStagger(n,r){r.currentQuery||r.errors.push("stagger() can only be used inside of query()");const s="full"===n.timings?{duration:0,delay:0,easing:"full"}:ix(n.timings,r.errors,!0);return{type:12,animation:_o(this,w0(n.animation),r),timings:s,options:null}}}class o${constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ux(i){return!Array.isArray(i)&&"object"==typeof i}function Jg(i){return i?(i=Iv(i)).params&&(i.params=function(i){return i?Iv(i):null}(i.params)):i={},i}function qO(i,n,r){return{duration:i,delay:n,easing:r}}function WO(i,n,r,s,o,c,h=null,m=!1){return{type:1,element:i,keyframes:n,preStyleProps:r,postStyleProps:s,duration:o,delay:c,totalTime:o+c,easing:h,subTimeline:m}}class dx{constructor(){this._map=new Map}consume(n){let r=this._map.get(n);return r?this._map.delete(n):r=[],r}append(n,r){let s=this._map.get(n);s||this._map.set(n,s=[]),s.push(...r)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const d$=new RegExp(":enter","g"),f$=new RegExp(":leave","g");function YO(i,n,r,s,o,c={},h={},m,y,C=[]){return(new p$).buildKeyframes(i,n,r,s,o,c,h,m,y,C)}class p${buildKeyframes(n,r,s,o,c,h,m,y,C,T=[]){C=C||new dx;const x=new KO(n,r,C,o,c,T,[]);x.options=y,x.currentTimeline.setStyles([h],null,x.errors,y),_o(this,s,x);const R=x.timelines.filter(O=>O.containsAnimation());if(R.length&&Object.keys(m).length){const O=R[R.length-1];O.allowOnlyTimelineStyles()||O.setStyles([m],null,x.errors,y)}return R.length?R.map(O=>O.buildKeyframes()):[WO(r,[],[],[],0,0,"",!1)]}visitTrigger(n,r){}visitState(n,r){}visitTransition(n,r){}visitAnimateChild(n,r){const s=r.subInstructions.consume(r.element);if(s){const o=r.createSubContext(n.options),c=r.currentTimeline.currentTime,h=this._visitSubInstructions(s,o,o.options);c!=h&&r.transformIntoNewTimeline(h)}r.previousNode=n}visitAnimateRef(n,r){const s=r.createSubContext(n.options);s.transformIntoNewTimeline(),this.visitReference(n.animation,s),r.transformIntoNewTimeline(s.currentTimeline.currentTime),r.previousNode=n}_visitSubInstructions(n,r,s){let c=r.currentTimeline.currentTime;const h=null!=s.duration?Zg(s.duration):null,m=null!=s.delay?Zg(s.delay):null;return 0!==h&&n.forEach(y=>{const C=r.appendInstructionToTimeline(y,h,m);c=Math.max(c,C.duration+C.delay)}),c}visitReference(n,r){r.updateOptions(n.options,!0),_o(this,n.animation,r),r.previousNode=n}visitSequence(n,r){const s=r.subContextCount;let o=r;const c=n.options;if(c&&(c.params||c.delay)&&(o=r.createSubContext(c),o.transformIntoNewTimeline(),null!=c.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=hx);const h=Zg(c.delay);o.delayNextStep(h)}n.steps.length&&(n.steps.forEach(h=>_o(this,h,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>s&&o.transformIntoNewTimeline()),r.previousNode=n}visitGroup(n,r){const s=[];let o=r.currentTimeline.currentTime;const c=n.options&&n.options.delay?Zg(n.options.delay):0;n.steps.forEach(h=>{const m=r.createSubContext(n.options);c&&m.delayNextStep(c),_o(this,h,m),o=Math.max(o,m.currentTimeline.currentTime),s.push(m.currentTimeline)}),s.forEach(h=>r.currentTimeline.mergeTimelineCollectedStyles(h)),r.transformIntoNewTimeline(o),r.previousNode=n}_visitTiming(n,r){if(n.dynamic){const s=n.strValue;return ix(r.params?sx(s,r.params,r.errors):s,r.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,r){const s=r.currentAnimateTimings=this._visitTiming(n.timings,r),o=r.currentTimeline;s.delay&&(r.incrementTime(s.delay),o.snapshotCurrentStyles());const c=n.style;5==c.type?this.visitKeyframes(c,r):(r.incrementTime(s.duration),this.visitStyle(c,r),o.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=n}visitStyle(n,r){const s=r.currentTimeline,o=r.currentAnimateTimings;!o&&s.getCurrentStyleProperties().length&&s.forwardFrame();const c=o&&o.easing||n.easing;n.isEmptyStep?s.applyEmptyStep(c):s.setStyles(n.styles,c,r.errors,r.options),r.previousNode=n}visitKeyframes(n,r){const s=r.currentAnimateTimings,o=r.currentTimeline.duration,c=s.duration,m=r.createSubContext().currentTimeline;m.easing=s.easing,n.styles.forEach(y=>{m.forwardTime((y.offset||0)*c),m.setStyles(y.styles,y.easing,r.errors,r.options),m.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(m),r.transformIntoNewTimeline(o+c),r.previousNode=n}visitQuery(n,r){const s=r.currentTimeline.currentTime,o=n.options||{},c=o.delay?Zg(o.delay):0;c&&(6===r.previousNode.type||0==s&&r.currentTimeline.getCurrentStyleProperties().length)&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=hx);let h=s;const m=r.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!o.optional,r.errors);r.currentQueryTotal=m.length;let y=null;m.forEach((C,T)=>{r.currentQueryIndex=T;const x=r.createSubContext(n.options,C);c&&x.delayNextStep(c),C===r.element&&(y=x.currentTimeline),_o(this,n.animation,x),x.currentTimeline.applyStylesToKeyframe(),h=Math.max(h,x.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(h),y&&(r.currentTimeline.mergeTimelineCollectedStyles(y),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=n}visitStagger(n,r){const s=r.parentContext,o=r.currentTimeline,c=n.timings,h=Math.abs(c.duration),m=h*(r.currentQueryTotal-1);let y=h*r.currentQueryIndex;switch(c.duration<0?"reverse":c.easing){case"reverse":y=m-y;break;case"full":y=s.currentStaggerTime}const T=r.currentTimeline;y&&T.delayNextStep(y);const x=T.currentTime;_o(this,n.animation,r),r.previousNode=n,s.currentStaggerTime=o.currentTime-x+(o.startTime-s.currentTimeline.startTime)}}const hx={};class KO{constructor(n,r,s,o,c,h,m,y){this._driver=n,this.element=r,this.subInstructions=s,this._enterClassName=o,this._leaveClassName=c,this.errors=h,this.timelines=m,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hx,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new fx(this._driver,r,0),m.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,r){if(!n)return;const s=n;let o=this.options;null!=s.duration&&(o.duration=Zg(s.duration)),null!=s.delay&&(o.delay=Zg(s.delay));const c=s.params;if(c){let h=o.params;h||(h=this.options.params={}),Object.keys(c).forEach(m=>{(!r||!h.hasOwnProperty(m))&&(h[m]=sx(c[m],h,this.errors))})}}_copyOptions(){const n={};if(this.options){const r=this.options.params;if(r){const s=n.params={};Object.keys(r).forEach(o=>{s[o]=r[o]})}}return n}createSubContext(n=null,r,s){const o=r||this.element,c=new KO(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,s||0));return c.previousNode=this.previousNode,c.currentAnimateTimings=this.currentAnimateTimings,c.options=this._copyOptions(),c.updateOptions(n),c.currentQueryIndex=this.currentQueryIndex,c.currentQueryTotal=this.currentQueryTotal,c.parentContext=this,this.subContextCount++,c}transformIntoNewTimeline(n){return this.previousNode=hx,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,r,s){const o={duration:null!=r?r:n.duration,delay:this.currentTimeline.currentTime+(null!=s?s:0)+n.delay,easing:""},c=new g$(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(c),o}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,r,s,o,c,h){let m=[];if(o&&m.push(this.element),n.length>0){n=(n=n.replace(d$,"."+this._enterClassName)).replace(f$,"."+this._leaveClassName);let C=this._driver.query(this.element,n,1!=s);0!==s&&(C=s<0?C.slice(C.length+s,C.length):C.slice(0,s)),m.push(...C)}return!c&&0==m.length&&h.push(`\`query("${r}")\` returned zero elements. (Use \`query("${r}", { optional: true })\` if you wish to allow this.)`),m}}class fx{constructor(n,r,s,o){this._driver=n,this.element=r,this.startTime=s,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const r=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||r?(this.forwardTime(this.currentTime+n),r&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,r){return this.applyStylesToKeyframe(),new fx(this._driver,n,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,r){this._localTimelineStyles[n]=r,this._globalTimelineStyles[n]=r,this._styleSummary[n]={time:this.currentTime,value:r}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&(this._previousKeyframe.easing=n),Object.keys(this._globalTimelineStyles).forEach(r=>{this._backFill[r]=this._globalTimelineStyles[r]||Qu,this._currentKeyframe[r]=Qu}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,r,s,o){r&&(this._previousKeyframe.easing=r);const c=o&&o.params||{},h=function(i,n){const r={};let s;return i.forEach(o=>{"*"===o?(s=s||Object.keys(n),s.forEach(c=>{r[c]=Qu})):mf(o,!1,r)}),r}(n,this._globalTimelineStyles);Object.keys(h).forEach(m=>{const y=sx(h[m],c,s);this._pendingStyles[m]=y,this._localTimelineStyles.hasOwnProperty(m)||(this._backFill[m]=this._globalTimelineStyles.hasOwnProperty(m)?this._globalTimelineStyles[m]:Qu),this._updateStyle(m,y)})}applyStylesToKeyframe(){const n=this._pendingStyles,r=Object.keys(n);0!=r.length&&(this._pendingStyles={},r.forEach(s=>{this._currentKeyframe[s]=n[s]}),Object.keys(this._localTimelineStyles).forEach(s=>{this._currentKeyframe.hasOwnProperty(s)||(this._currentKeyframe[s]=this._localTimelineStyles[s])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(n=>{const r=this._localTimelineStyles[n];this._pendingStyles[n]=r,this._updateStyle(n,r)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let r in this._currentKeyframe)n.push(r);return n}mergeTimelineCollectedStyles(n){Object.keys(n._styleSummary).forEach(r=>{const s=this._styleSummary[r],o=n._styleSummary[r];(!s||o.time>s.time)&&this._updateStyle(r,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,r=new Set,s=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((m,y)=>{const C=mf(m,!0);Object.keys(C).forEach(T=>{const x=C[T];"!"==x?n.add(T):x==Qu&&r.add(T)}),s||(C.offset=y/this.duration),o.push(C)});const c=n.size?ox(n.values()):[],h=r.size?ox(r.values()):[];if(s){const m=o[0],y=Iv(m);m.offset=0,y.offset=1,o=[m,y]}return WO(this.element,o,c,h,this.duration,this.startTime,this.easing,!1)}}class g$ extends fx{constructor(n,r,s,o,c,h,m=!1){super(n,r,h.delay),this.keyframes=s,this.preStyleProps=o,this.postStyleProps=c,this._stretchStartingKeyframe=m,this.timings={duration:h.duration,delay:h.delay,easing:h.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:r,duration:s,easing:o}=this.timings;if(this._stretchStartingKeyframe&&r){const c=[],h=s+r,m=r/h,y=mf(n[0],!1);y.offset=0,c.push(y);const C=mf(n[0],!1);C.offset=BV(m),c.push(C);const T=n.length-1;for(let x=1;x<=T;x++){let R=mf(n[x],!1);R.offset=BV((r+R.offset*s)/h),c.push(R)}s=h,r=0,o="",n=c}return WO(this.element,n,this.preStyleProps,this.postStyleProps,s,r,o,!0)}}function BV(i,n=3){const r=Math.pow(10,n-1);return Math.round(i*r)/r}class ZO{}class _$ extends ZO{normalizePropertyName(n,r){return GO(n)}normalizeStyleValue(n,r,s,o){let c="";const h=s.toString().trim();if(y$[r]&&0!==s&&"0"!==s)if("number"==typeof s)c="px";else{const m=s.match(/^[+-]?[\d\.]+([a-z]*)$/);m&&0==m[1].length&&o.push(`Please provide a CSS unit value for ${n}:${s}`)}return h+c}}const y$=(()=>function(i){const n={};return i.forEach(r=>n[r]=!0),n}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function UV(i,n,r,s,o,c,h,m,y,C,T,x,R){return{type:0,element:i,triggerName:n,isRemovalTransition:o,fromState:r,fromStyles:c,toState:s,toStyles:h,timelines:m,queriedElements:y,preStyleProps:C,postStyleProps:T,totalTime:x,errors:R}}const QO={};class jV{constructor(n,r,s){this._triggerName=n,this.ast=r,this._stateStyles=s}match(n,r,s,o){return function(i,n,r,s,o){return i.some(c=>c(n,r,s,o))}(this.ast.matchers,n,r,s,o)}buildStyles(n,r,s){const o=this._stateStyles["*"],c=this._stateStyles[n],h=o?o.buildStyles(r,s):{};return c?c.buildStyles(r,s):h}build(n,r,s,o,c,h,m,y,C,T){const x=[],R=this.ast.options&&this.ast.options.params||QO,U=this.buildStyles(s,m&&m.params||QO,x),te=y&&y.params||QO,pe=this.buildStyles(o,te,x),Fe=new Set,Ge=new Map,$e=new Map,We="void"===o,wn={params:Object.assign(Object.assign({},R),te)},Dr=T?[]:YO(n,r,this.ast.animation,c,h,U,pe,wn,C,x);let di=0;if(Dr.forEach(bo=>{di=Math.max(bo.duration+bo.delay,di)}),x.length)return UV(r,this._triggerName,s,o,We,U,pe,[],[],Ge,$e,di,x);Dr.forEach(bo=>{const id=bo.element,k3=mo(Ge,id,{});bo.preStyleProps.forEach(pm=>k3[pm]=!0);const cI=mo($e,id,{});bo.postStyleProps.forEach(pm=>cI[pm]=!0),id!==r&&Fe.add(id)});const Ms=ox(Fe.values());return UV(r,this._triggerName,s,o,We,U,pe,Dr,Ms,Ge,$e,di)}}class E${constructor(n,r,s){this.styles=n,this.defaultParams=r,this.normalizer=s}buildStyles(n,r){const s={},o=Iv(this.defaultParams);return Object.keys(n).forEach(c=>{const h=n[c];null!=h&&(o[c]=h)}),this.styles.styles.forEach(c=>{if("string"!=typeof c){const h=c;Object.keys(h).forEach(m=>{let y=h[m];y.length>1&&(y=sx(y,o,r));const C=this.normalizer.normalizePropertyName(m,r);y=this.normalizer.normalizeStyleValue(m,C,y,r),s[C]=y})}}),s}}class C${constructor(n,r,s){this.name=n,this.ast=r,this._normalizer=s,this.transitionFactories=[],this.states={},r.states.forEach(o=>{this.states[o.name]=new E$(o.style,o.options&&o.options.params||{},s)}),HV(this.states,"true","1"),HV(this.states,"false","0"),r.transitions.forEach(o=>{this.transitionFactories.push(new jV(n,o,this.states))}),this.fallbackTransition=function(i,n,r){return new jV(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(h,m)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,r,s,o){return this.transitionFactories.find(h=>h.match(n,r,s,o))||null}matchStyles(n,r,s){return this.fallbackTransition.buildStyles(n,r,s)}}function HV(i,n,r){i.hasOwnProperty(n)?i.hasOwnProperty(r)||(i[r]=i[n]):i.hasOwnProperty(r)&&(i[n]=i[r])}const S$=new dx;class T${constructor(n,r,s){this.bodyNode=n,this._driver=r,this._normalizer=s,this._animations={},this._playersById={},this.players=[]}register(n,r){const s=[],o=zO(this._driver,r,s);if(s.length)throw new Error(`Unable to build the animation due to the following errors: ${s.join("\n")}`);this._animations[n]=o}_buildPlayer(n,r,s){const o=n.element,c=EV(0,this._normalizer,0,n.keyframes,r,s);return this._driver.animate(o,c,n.duration,n.delay,n.easing,[],!0)}create(n,r,s={}){const o=[],c=this._animations[n];let h;const m=new Map;if(c?(h=YO(this._driver,r,c,BO,tx,{},{},s,S$,o),h.forEach(T=>{const x=mo(m,T.element,{});T.postStyleProps.forEach(R=>x[R]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),h=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);m.forEach((T,x)=>{Object.keys(T).forEach(R=>{T[R]=this._driver.computeStyle(x,R,Qu)})});const C=gf(h.map(T=>{const x=m.get(T.element);return this._buildPlayer(T,{},x)}));return this._playersById[n]=C,C.onDestroy(()=>this.destroy(n)),this.players.push(C),C}destroy(n){const r=this._getPlayer(n);r.destroy(),delete this._playersById[n];const s=this.players.indexOf(r);s>=0&&this.players.splice(s,1)}_getPlayer(n){const r=this._playersById[n];if(!r)throw new Error(`Unable to find the timeline player referenced by ${n}`);return r}listen(n,r,s,o){const c=RO(r,"","","");return xO(this._getPlayer(n),s,c,o),()=>{}}command(n,r,s,o){if("register"==s)return void this.register(n,o[0]);if("create"==s)return void this.create(n,r,o[0]||{});const c=this._getPlayer(n);switch(s){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n)}}}const GV="ng-animate-queued",$V="ng-animate-disabled",zV=".ng-animate-disabled",M$=[],qV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},R$={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},oa="__ng_removed";class JO{constructor(n,r=""){this.namespaceId=r;const s=n&&n.hasOwnProperty("value");if(this.value=function(i){return null!=i?i:null}(s?n.value:n),s){const c=Iv(n);delete c.value,this.options=c}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(n){const r=n.params;if(r){const s=this.options.params;Object.keys(r).forEach(o=>{null==s[o]&&(s[o]=r[o])})}}}const C0="void",XO=new JO(C0);class k${constructor(n,r,s){this.id=n,this.hostElement=r,this._engine=s,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,aa(r,this._hostClassName)}listen(n,r,s,o){if(!this._triggers.hasOwnProperty(r))throw new Error(`Unable to listen on the animation trigger event "${s}" because the animation trigger "${r}" doesn't exist!`);if(null==s||0==s.length)throw new Error(`Unable to listen on the animation trigger "${r}" because the provided event is undefined!`);if(!function(i){return"start"==i||"done"==i}(s))throw new Error(`The provided animation trigger event "${s}" for the animation trigger "${r}" is not supported!`);const c=mo(this._elementListeners,n,[]),h={name:r,phase:s,callback:o};c.push(h);const m=mo(this._engine.statesByElement,n,{});return m.hasOwnProperty(r)||(aa(n,nx),aa(n,nx+"-"+r),m[r]=XO),()=>{this._engine.afterFlush(()=>{const y=c.indexOf(h);y>=0&&c.splice(y,1),this._triggers[r]||delete m[r]})}}register(n,r){return!this._triggers[n]&&(this._triggers[n]=r,!0)}_getTrigger(n){const r=this._triggers[n];if(!r)throw new Error(`The provided animation trigger "${n}" has not been registered!`);return r}trigger(n,r,s,o=!0){const c=this._getTrigger(r),h=new eP(this.id,r,n);let m=this._engine.statesByElement.get(n);m||(aa(n,nx),aa(n,nx+"-"+r),this._engine.statesByElement.set(n,m={}));let y=m[r];const C=new JO(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&y&&C.absorbOptions(y.options),m[r]=C,y||(y=XO),C.value!==C0&&y.value===C.value){if(!function(i,n){const r=Object.keys(i),s=Object.keys(n);if(r.length!=s.length)return!1;for(let o=0;o<r.length;o++){const c=r[o];if(!n.hasOwnProperty(c)||i[c]!==n[c])return!1}return!0}(y.params,C.params)){const te=[],pe=c.matchStyles(y.value,y.params,te),Fe=c.matchStyles(C.value,C.params,te);te.length?this._engine.reportError(te):this._engine.afterFlush(()=>{Qg(n,pe),wc(n,Fe)})}return}const R=mo(this._engine.playersByElement,n,[]);R.forEach(te=>{te.namespaceId==this.id&&te.triggerName==r&&te.queued&&te.destroy()});let O=c.matchTransition(y.value,C.value,n,C.params),U=!1;if(!O){if(!o)return;O=c.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:r,transition:O,fromState:y,toState:C,player:h,isFallbackTransition:U}),U||(aa(n,GV),h.onStart(()=>{Sv(n,GV)})),h.onDone(()=>{let te=this.players.indexOf(h);te>=0&&this.players.splice(te,1);const pe=this._engine.playersByElement.get(n);if(pe){let Fe=pe.indexOf(h);Fe>=0&&pe.splice(Fe,1)}}),this.players.push(h),R.push(h),h}deregister(n){delete this._triggers[n],this._engine.statesByElement.forEach((r,s)=>{delete r[n]}),this._elementListeners.forEach((r,s)=>{this._elementListeners.set(s,r.filter(o=>o.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const r=this._engine.playersByElement.get(n);r&&(r.forEach(s=>s.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,r){const s=this._engine.driver.query(n,rx,!0);s.forEach(o=>{if(o[oa])return;const c=this._engine.fetchNamespacesByElement(o);c.size?c.forEach(h=>h.triggerLeaveAnimation(o,r,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(n,r,s,o){const c=this._engine.statesByElement.get(n);if(c){const h=[];if(Object.keys(c).forEach(m=>{if(this._triggers[m]){const y=this.trigger(n,m,C0,o);y&&h.push(y)}}),h.length)return this._engine.markElementAsRemoved(this.id,n,!0,r),s&&gf(h).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const r=this._elementListeners.get(n),s=this._engine.statesByElement.get(n);if(r&&s){const o=new Set;r.forEach(c=>{const h=c.name;if(o.has(h))return;o.add(h);const y=this._triggers[h].fallbackTransition,C=s[h]||XO,T=new JO(C0),x=new eP(this.id,h,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:h,transition:y,fromState:C,toState:T,player:x,isFallbackTransition:!0})})}}removeNode(n,r){const s=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,r),this.triggerLeaveAnimation(n,r,!0))return;let o=!1;if(s.totalAnimations){const c=s.players.length?s.playersByQueriedElement.get(n):[];if(c&&c.length)o=!0;else{let h=n;for(;h=h.parentNode;)if(s.statesByElement.get(h)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(n),o)s.markElementAsRemoved(this.id,n,!1,r);else{const c=n[oa];(!c||c===qV)&&(s.afterFlush(()=>this.clearElementCache(n)),s.destroyInnerAnimations(n),s._onRemovalComplete(n,r))}}insertNode(n,r){aa(n,this._hostClassName)}drainQueuedTransitions(n){const r=[];return this._queue.forEach(s=>{const o=s.player;if(o.destroyed)return;const c=s.element,h=this._elementListeners.get(c);h&&h.forEach(m=>{if(m.name==s.triggerName){const y=RO(c,s.triggerName,s.fromState.value,s.toState.value);y._data=n,xO(s.player,m.phase,y,m.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):r.push(s)}),this._queue=[],r.sort((s,o)=>{const c=s.transition.ast.depCount,h=o.transition.ast.depCount;return 0==c||0==h?c-h:this._engine.driver.containsElement(s.element,o.element)?1:-1})}destroy(n){this.players.forEach(r=>r.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let r=!1;return this._elementListeners.has(n)&&(r=!0),r=!!this._queue.find(s=>s.element===n)||r,r}}class N${constructor(n,r,s){this.bodyNode=n,this.driver=r,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,c)=>{}}_onRemovalComplete(n,r){this.onRemovalComplete(n,r)}get queuedPlayers(){const n=[];return this._namespaceList.forEach(r=>{r.players.forEach(s=>{s.queued&&n.push(s)})}),n}createNamespace(n,r){const s=new k$(n,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(s,r):(this.newHostElements.set(r,s),this.collectEnterElement(r)),this._namespaceLookup[n]=s}_balanceNamespaceList(n,r){const s=this._namespaceList.length-1;if(s>=0){let o=!1;for(let c=s;c>=0;c--)if(this.driver.containsElement(this._namespaceList[c].hostElement,r)){this._namespaceList.splice(c+1,0,n),o=!0;break}o||this._namespaceList.splice(0,0,n)}else this._namespaceList.push(n);return this.namespacesByHostElement.set(r,n),n}register(n,r){let s=this._namespaceLookup[n];return s||(s=this.createNamespace(n,r)),s}registerTrigger(n,r,s){let o=this._namespaceLookup[n];o&&o.register(r,s)&&this.totalAnimations++}destroy(n,r){if(!n)return;const s=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[n];const o=this._namespaceList.indexOf(s);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>s.destroy(r))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const r=new Set,s=this.statesByElement.get(n);if(s){const o=Object.keys(s);for(let c=0;c<o.length;c++){const h=s[o[c]].namespaceId;if(h){const m=this._fetchNamespace(h);m&&r.add(m)}}}return r}trigger(n,r,s,o){if(px(r)){const c=this._fetchNamespace(n);if(c)return c.trigger(r,s,o),!0}return!1}insertNode(n,r,s,o){if(!px(r))return;const c=r[oa];if(c&&c.setForRemoval){c.setForRemoval=!1,c.setForMove=!0;const h=this.collectedLeaveElements.indexOf(r);h>=0&&this.collectedLeaveElements.splice(h,1)}if(n){const h=this._fetchNamespace(n);h&&h.insertNode(r,s)}o&&this.collectEnterElement(r)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,r){r?this.disabledNodes.has(n)||(this.disabledNodes.add(n),aa(n,$V)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Sv(n,$V))}removeNode(n,r,s,o){if(px(r)){const c=n?this._fetchNamespace(n):null;if(c?c.removeNode(r,o):this.markElementAsRemoved(n,r,!1,o),s){const h=this.namespacesByHostElement.get(r);h&&h.id!==n&&h.removeNode(r,o)}}else this._onRemovalComplete(r,o)}markElementAsRemoved(n,r,s,o){this.collectedLeaveElements.push(r),r[oa]={namespaceId:n,setForRemoval:o,hasAnimation:s,removedBeforeQueried:!1}}listen(n,r,s,o,c){return px(r)?this._fetchNamespace(n).listen(r,s,o,c):()=>{}}_buildInstruction(n,r,s,o,c){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,s,o,n.fromState.options,n.toState.options,r,c)}destroyInnerAnimations(n){let r=this.driver.query(n,rx,!0);r.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(r=this.driver.query(n,UO,!0),r.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(n){const r=this.playersByElement.get(n);r&&r.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(n){const r=this.playersByQueriedElement.get(n);r&&r.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return gf(this.players).onDone(()=>n());n()})}processLeaveNode(n){const r=n[oa];if(r&&r.setForRemoval){if(n[oa]=qV,r.namespaceId){this.destroyInnerAnimations(n);const s=this._fetchNamespace(r.namespaceId);s&&s.clearElementCache(n)}this._onRemovalComplete(n,r.setForRemoval)}this.driver.matchesElement(n,zV)&&this.markElementAsDisabled(n,!1),this.driver.query(n,zV,!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(n=-1){let r=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,o)=>this._balanceNamespaceList(s,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)aa(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{r=this._flushAnimations(s,n)}finally{for(let o=0;o<s.length;o++)s[o]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],r.length?gf(r).onDone(()=>{s.forEach(o=>o())}):s.forEach(o=>o())}}reportError(n){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${n.join("\n")}`)}_flushAnimations(n,r){const s=new dx,o=[],c=new Map,h=[],m=new Map,y=new Map,C=new Map,T=new Set;this.disabledNodes.forEach(rt=>{T.add(rt);const _t=this.driver.query(rt,".ng-animate-queued",!0);for(let Rt=0;Rt<_t.length;Rt++)T.add(_t[Rt])});const x=this.bodyNode,R=Array.from(this.statesByElement.keys()),O=KV(R,this.collectedEnterElements),U=new Map;let te=0;O.forEach((rt,_t)=>{const Rt=BO+te++;U.set(_t,Rt),rt.forEach(un=>aa(un,Rt))});const pe=[],Fe=new Set,Ge=new Set;for(let rt=0;rt<this.collectedLeaveElements.length;rt++){const _t=this.collectedLeaveElements[rt],Rt=_t[oa];Rt&&Rt.setForRemoval&&(pe.push(_t),Fe.add(_t),Rt.hasAnimation?this.driver.query(_t,".ng-star-inserted",!0).forEach(un=>Fe.add(un)):Ge.add(_t))}const $e=new Map,We=KV(R,Array.from(Fe));We.forEach((rt,_t)=>{const Rt=tx+te++;$e.set(_t,Rt),rt.forEach(un=>aa(un,Rt))}),n.push(()=>{O.forEach((rt,_t)=>{const Rt=U.get(_t);rt.forEach(un=>Sv(un,Rt))}),We.forEach((rt,_t)=>{const Rt=$e.get(_t);rt.forEach(un=>Sv(un,Rt))}),pe.forEach(rt=>{this.processLeaveNode(rt)})});const wn=[],Dr=[];for(let rt=this._namespaceList.length-1;rt>=0;rt--)this._namespaceList[rt].drainQueuedTransitions(r).forEach(Rt=>{const un=Rt.player,Ri=Rt.element;if(wn.push(un),this.collectedEnterElements.length){const Rc=Ri[oa];if(Rc&&Rc.setForMove)return void un.destroy()}const Mc=!x||!this.driver.containsElement(x,Ri),Eo=$e.get(Ri),kf=U.get(Ri),Ar=this._buildInstruction(Rt,s,kf,Eo,Mc);if(Ar.errors&&Ar.errors.length)Dr.push(Ar);else{if(Mc)return un.onStart(()=>Qg(Ri,Ar.fromStyles)),un.onDestroy(()=>wc(Ri,Ar.toStyles)),void o.push(un);if(Rt.isFallbackTransition)return un.onStart(()=>Qg(Ri,Ar.fromStyles)),un.onDestroy(()=>wc(Ri,Ar.toStyles)),void o.push(un);Ar.timelines.forEach(Rc=>Rc.stretchStartingKeyframe=!0),s.append(Ri,Ar.timelines),h.push({instruction:Ar,player:un,element:Ri}),Ar.queriedElements.forEach(Rc=>mo(m,Rc,[]).push(un)),Ar.preStyleProps.forEach((Rc,uI)=>{const RM=Object.keys(Rc);if(RM.length){let gm=y.get(uI);gm||y.set(uI,gm=new Set),RM.forEach(f1=>gm.add(f1))}}),Ar.postStyleProps.forEach((Rc,uI)=>{const RM=Object.keys(Rc);let gm=C.get(uI);gm||C.set(uI,gm=new Set),RM.forEach(f1=>gm.add(f1))})}});if(Dr.length){const rt=[];Dr.forEach(_t=>{rt.push(`@${_t.triggerName} has failed due to:\n`),_t.errors.forEach(Rt=>rt.push(`- ${Rt}\n`))}),wn.forEach(_t=>_t.destroy()),this.reportError(rt)}const di=new Map,Ms=new Map;h.forEach(rt=>{const _t=rt.element;s.has(_t)&&(Ms.set(_t,_t),this._beforeAnimationBuild(rt.player.namespaceId,rt.instruction,di))}),o.forEach(rt=>{const _t=rt.element;this._getPreviousPlayers(_t,!1,rt.namespaceId,rt.triggerName,null).forEach(un=>{mo(di,_t,[]).push(un),un.destroy()})});const bo=pe.filter(rt=>QV(rt,y,C)),id=new Map;YV(id,this.driver,Ge,C,Qu).forEach(rt=>{QV(rt,y,C)&&bo.push(rt)});const cI=new Map;O.forEach((rt,_t)=>{YV(cI,this.driver,new Set(rt),y,"!")}),bo.forEach(rt=>{const _t=id.get(rt),Rt=cI.get(rt);id.set(rt,Object.assign(Object.assign({},_t),Rt))});const pm=[],N3=[],O3={};h.forEach(rt=>{const{element:_t,player:Rt,instruction:un}=rt;if(s.has(_t)){if(T.has(_t))return Rt.onDestroy(()=>wc(_t,un.toStyles)),Rt.disabled=!0,Rt.overrideTotalTime(un.totalTime),void o.push(Rt);let Ri=O3;if(Ms.size>1){let Eo=_t;const kf=[];for(;Eo=Eo.parentNode;){const Ar=Ms.get(Eo);if(Ar){Ri=Ar;break}kf.push(Eo)}kf.forEach(Ar=>Ms.set(Ar,Ri))}const Mc=this._buildAnimation(Rt.namespaceId,un,di,c,cI,id);if(Rt.setRealPlayer(Mc),Ri===O3)pm.push(Rt);else{const Eo=this.playersByElement.get(Ri);Eo&&Eo.length&&(Rt.parentPlayer=gf(Eo)),o.push(Rt)}}else Qg(_t,un.fromStyles),Rt.onDestroy(()=>wc(_t,un.toStyles)),N3.push(Rt),T.has(_t)&&o.push(Rt)}),N3.forEach(rt=>{const _t=c.get(rt.element);if(_t&&_t.length){const Rt=gf(_t);rt.setRealPlayer(Rt)}}),o.forEach(rt=>{rt.parentPlayer?rt.syncPlayerEvents(rt.parentPlayer):rt.destroy()});for(let rt=0;rt<pe.length;rt++){const _t=pe[rt],Rt=_t[oa];if(Sv(_t,tx),Rt&&Rt.hasAnimation)continue;let un=[];if(m.size){let Mc=m.get(_t);Mc&&Mc.length&&un.push(...Mc);let Eo=this.driver.query(_t,UO,!0);for(let kf=0;kf<Eo.length;kf++){let Ar=m.get(Eo[kf]);Ar&&Ar.length&&un.push(...Ar)}}const Ri=un.filter(Mc=>!Mc.destroyed);Ri.length?L$(this,_t,Ri):this.processLeaveNode(_t)}return pe.length=0,pm.forEach(rt=>{this.players.push(rt),rt.onDone(()=>{rt.destroy();const _t=this.players.indexOf(rt);this.players.splice(_t,1)}),rt.play()}),pm}elementContainsData(n,r){let s=!1;const o=r[oa];return o&&o.setForRemoval&&(s=!0),this.playersByElement.has(r)&&(s=!0),this.playersByQueriedElement.has(r)&&(s=!0),this.statesByElement.has(r)&&(s=!0),this._fetchNamespace(n).elementContainsData(r)||s}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,r,s,o,c){let h=[];if(r){const m=this.playersByQueriedElement.get(n);m&&(h=m)}else{const m=this.playersByElement.get(n);if(m){const y=!c||c==C0;m.forEach(C=>{C.queued||!y&&C.triggerName!=o||h.push(C)})}}return(s||o)&&(h=h.filter(m=>!(s&&s!=m.namespaceId||o&&o!=m.triggerName))),h}_beforeAnimationBuild(n,r,s){const c=r.element,h=r.isRemovalTransition?void 0:n,m=r.isRemovalTransition?void 0:r.triggerName;for(const y of r.timelines){const C=y.element,T=C!==c,x=mo(s,C,[]);this._getPreviousPlayers(C,T,h,m,r.toState).forEach(O=>{const U=O.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),O.destroy(),x.push(O)})}Qg(c,r.fromStyles)}_buildAnimation(n,r,s,o,c,h){const m=r.triggerName,y=r.element,C=[],T=new Set,x=new Set,R=r.timelines.map(U=>{const te=U.element;T.add(te);const pe=te[oa];if(pe&&pe.removedBeforeQueried)return new Cv(U.duration,U.delay);const Fe=te!==y,Ge=function(i){const n=[];return ZV(i,n),n}((s.get(te)||M$).map(di=>di.getRealPlayer())).filter(di=>!!di.element&&di.element===te),$e=c.get(te),We=h.get(te),wn=EV(0,this._normalizer,0,U.keyframes,$e,We),Dr=this._buildPlayer(U,wn,Ge);if(U.subTimeline&&o&&x.add(te),Fe){const di=new eP(n,m,te);di.setRealPlayer(Dr),C.push(di)}return Dr});C.forEach(U=>{mo(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function(i,n,r){let s;if(i instanceof Map){if(s=i.get(n),s){if(s.length){const o=s.indexOf(r);s.splice(o,1)}0==s.length&&i.delete(n)}}else if(s=i[n],s){if(s.length){const o=s.indexOf(r);s.splice(o,1)}0==s.length&&delete i[n]}return s}(this.playersByQueriedElement,U.element,U))}),T.forEach(U=>aa(U,xV));const O=gf(R);return O.onDestroy(()=>{T.forEach(U=>Sv(U,xV)),wc(y,r.toStyles)}),x.forEach(U=>{mo(o,U,[]).push(O)}),O}_buildPlayer(n,r,s){return r.length>0?this.driver.animate(n.element,r,n.duration,n.delay,n.easing,s):new Cv(n.duration,n.delay)}}class eP{constructor(n,r,s){this.namespaceId=n,this.triggerName=r,this.element=s,this._player=new Cv,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,Object.keys(this._queuedCallbacks).forEach(r=>{this._queuedCallbacks[r].forEach(s=>xO(n,r,void 0,s))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const r=this._player;r.triggerCallback&&n.onStart(()=>r.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,r){mo(this._queuedCallbacks,n,[]).push(r)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const r=this._player;r.triggerCallback&&r.triggerCallback(n)}}function px(i){return i&&1===i.nodeType}function WV(i,n){const r=i.style.display;return i.style.display=null!=n?n:"none",r}function YV(i,n,r,s,o){const c=[];r.forEach(y=>c.push(WV(y)));const h=[];s.forEach((y,C)=>{const T={};y.forEach(x=>{const R=T[x]=n.computeStyle(C,x,o);(!R||0==R.length)&&(C[oa]=R$,h.push(C))}),i.set(C,T)});let m=0;return r.forEach(y=>WV(y,c[m++])),h}function KV(i,n){const r=new Map;if(i.forEach(m=>r.set(m,[])),0==n.length)return r;const o=new Set(n),c=new Map;function h(m){if(!m)return 1;let y=c.get(m);if(y)return y;const C=m.parentNode;return y=r.has(C)?C:o.has(C)?1:h(C),c.set(m,y),y}return n.forEach(m=>{const y=h(m);1!==y&&r.get(y).push(m)}),r}const gx="$$classes";function aa(i,n){if(i.classList)i.classList.add(n);else{let r=i[gx];r||(r=i[gx]={}),r[n]=!0}}function Sv(i,n){if(i.classList)i.classList.remove(n);else{let r=i[gx];r&&delete r[n]}}function L$(i,n,r){gf(r).onDone(()=>i.processLeaveNode(n))}function ZV(i,n){for(let r=0;r<i.length;r++){const s=i[r];s instanceof vV?ZV(s.players,n):n.push(s)}}function QV(i,n,r){const s=r.get(i);if(!s)return!1;let o=n.get(i);return o?s.forEach(c=>o.add(c)):n.set(i,s),r.delete(i),!0}class mx{constructor(n,r,s){this.bodyNode=n,this._driver=r,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(o,c)=>{},this._transitionEngine=new N$(n,r,s),this._timelineEngine=new T$(n,r,s),this._transitionEngine.onRemovalComplete=(o,c)=>this.onRemovalComplete(o,c)}registerTrigger(n,r,s,o,c){const h=n+"-"+o;let m=this._triggerCache[h];if(!m){const y=[],C=zO(this._driver,c,y);if(y.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${y.join("\n - ")}`);m=function(i,n,r){return new C$(i,n,r)}(o,C,this._normalizer),this._triggerCache[h]=m}this._transitionEngine.registerTrigger(r,o,m)}register(n,r){this._transitionEngine.register(n,r)}destroy(n,r){this._transitionEngine.destroy(n,r)}onInsert(n,r,s,o){this._transitionEngine.insertNode(n,r,s,o)}onRemove(n,r,s,o){this._transitionEngine.removeNode(n,r,o||!1,s)}disableAnimations(n,r){this._transitionEngine.markElementAsDisabled(n,r)}process(n,r,s,o){if("@"==s.charAt(0)){const[c,h]=wV(s);this._timelineEngine.command(c,r,h,o)}else this._transitionEngine.trigger(n,r,s,o)}listen(n,r,s,o,c){if("@"==s.charAt(0)){const[h,m]=wV(s);return this._timelineEngine.listen(h,r,m,c)}return this._transitionEngine.listen(n,r,s,o,c)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function JV(i,n){let r=null,s=null;return Array.isArray(n)&&n.length?(r=tP(n[0]),n.length>1&&(s=tP(n[n.length-1]))):n&&(r=tP(n)),r||s?new U$(i,r,s):null}let U$=(()=>{class i{constructor(r,s,o){this._element=r,this._startStyles=s,this._endStyles=o,this._state=0;let c=i.initialStylesByElement.get(r);c||i.initialStylesByElement.set(r,c={}),this._initialStyles=c}start(){this._state<1&&(this._startStyles&&wc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(wc(this._element,this._initialStyles),this._endStyles&&(wc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Qg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qg(this._element,this._endStyles),this._endStyles=null),wc(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function tP(i){let n=null;const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=r[s];j$(o)&&(n=n||{},n[o]=i[o])}return n}function j$(i){return"display"===i||"position"===i}const XV="animation",eB="animationend";class $${constructor(n,r,s,o,c,h,m){this._element=n,this._name=r,this._duration=s,this._delay=o,this._easing=c,this._fillMode=h,this._onDoneFn=m,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=y=>this._handleCallback(y)}apply(){(function(i,n){const r=rP(i,"").trim();let s=0;r.length&&(function(i,n){let r=0;for(let s=0;s<i.length;s++)","===i.charAt(s)&&r++;return r}(r)+1,n=`${r}, ${n}`),_x(i,"",n)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),rB(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){tB(this._element,this._name,"paused")}resume(){tB(this._element,this._name,"running")}setPosition(n){const r=nB(this._element,this._name);this._position=n*this._duration,_x(this._element,"Delay",`-${this._position}ms`,r)}getPosition(){return this._position}_handleCallback(n){const r=n._ngTestManualTimestamp||Date.now(),s=1e3*parseFloat(n.elapsedTime.toFixed(3));n.animationName==this._name&&Math.max(r-this._startTime,0)>=this._delay&&s>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),rB(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(i,n){const s=rP(i,"").split(","),o=nP(s,n);o>=0&&(s.splice(o,1),_x(i,"",s.join(",")))}(this._element,this._name))}}function tB(i,n,r){_x(i,"PlayState",r,nB(i,n))}function nB(i,n){const r=rP(i,"");return r.indexOf(",")>0?nP(r.split(","),n):nP([r],n)}function nP(i,n){for(let r=0;r<i.length;r++)if(i[r].indexOf(n)>=0)return r;return-1}function rB(i,n,r){r?i.removeEventListener(eB,n):i.addEventListener(eB,n)}function _x(i,n,r,s){const o=XV+n;if(null!=s){const c=i.style[o];if(c.length){const h=c.split(",");h[s]=r,r=h.join(",")}}i.style[o]=r}function rP(i,n){return i.style[XV+n]||""}class iB{constructor(n,r,s,o,c,h,m,y){this.element=n,this.keyframes=r,this.animationName=s,this._duration=o,this._delay=c,this._finalStyles=m,this._specialStyles=y,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=h||"linear",this.totalTime=o+c,this._buildStyler()}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(n=>n()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(n){this._styler.setPosition(n)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new $$(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}beforeDestroy(){this.init();const n={};if(this.hasStarted()){const r=this._state>=3;Object.keys(this._finalStyles).forEach(s=>{"offset"!=s&&(n[s]=r?this._finalStyles[s]:$O(this.element,s))})}this.currentSnapshot=n}}class Z$ extends Cv{constructor(n,r){super(),this.element=n,this._startingStyles={},this.__initialized=!1,this._styles=TV(r)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(n=>{this._startingStyles[n]=this.element.style[n]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(n=>this.element.style.setProperty(n,this._styles[n])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(n=>{const r=this._startingStyles[n];r?this.element.style.setProperty(n,r):this.element.style.removeProperty(n)}),this._startingStyles=null,super.destroy())}}class oB{constructor(){this._count=0}validateStyleProperty(n){return OO(n)}matchesElement(n,r){return PO(n,r)}containsElement(n,r){return FO(n,r)}query(n,r,s){return LO(n,r,s)}computeStyle(n,r,s){return window.getComputedStyle(n)[r]}buildKeyframeElement(n,r,s){s=s.map(m=>TV(m));let o=`@keyframes ${r} {\n`,c="";s.forEach(m=>{c=" ";const y=parseFloat(m.offset);o+=`${c}${100*y}% {\n`,c+=" ",Object.keys(m).forEach(C=>{const T=m[C];switch(C){case"offset":return;case"easing":return void(T&&(o+=`${c}animation-timing-function: ${T};\n`));default:return void(o+=`${c}${C}: ${T};\n`)}}),o+=`${c}}\n`}),o+="}\n";const h=document.createElement("style");return h.textContent=o,h}animate(n,r,s,o,c,h=[],m){const y=h.filter(pe=>pe instanceof iB),C={};OV(s,o)&&y.forEach(pe=>{let Fe=pe.currentSnapshot;Object.keys(Fe).forEach(Ge=>C[Ge]=Fe[Ge])});const T=function(i){let n={};return i&&(Array.isArray(i)?i:[i]).forEach(s=>{Object.keys(s).forEach(o=>{"offset"==o||"easing"==o||(n[o]=s[o])})}),n}(r=PV(n,r,C));if(0==s)return new Z$(n,T);const x="gen_css_kf_"+this._count++,R=this.buildKeyframeElement(n,x,r);(function(i){var n;const r=null===(n=i.getRootNode)||void 0===n?void 0:n.call(i);return"undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot?r:document.head})(n).appendChild(R);const U=JV(n,r),te=new iB(n,r,x,s,o,c,T,U);return te.onDestroy(()=>function(i){i.parentNode.removeChild(i)}(R)),te}}class lB{constructor(n,r,s,o){this.element=n,this.keyframes=r,this.options=s,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(n,r,s){return n.animate(r,s)}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(r=>{"offset"!=r&&(n[r]=this._finished?this._finalKeyframe[r]:$O(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}class tz{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(cB().toString()),this._cssKeyframesDriver=new oB}validateStyleProperty(n){return OO(n)}matchesElement(n,r){return PO(n,r)}containsElement(n,r){return FO(n,r)}query(n,r,s){return LO(n,r,s)}computeStyle(n,r,s){return window.getComputedStyle(n)[r]}overrideWebAnimationsSupport(n){this._isNativeImpl=n}animate(n,r,s,o,c,h=[],m){if(!m&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(n,r,s,o,c,h);const T={duration:s,delay:o,fill:0==o?"both":"forwards"};c&&(T.easing=c);const x={},R=h.filter(U=>U instanceof lB);OV(s,o)&&R.forEach(U=>{let te=U.currentSnapshot;Object.keys(te).forEach(pe=>x[pe]=te[pe])});const O=JV(n,r=PV(n,r=r.map(U=>mf(U,!1)),x));return new lB(n,r,T,O)}}function cB(){return bV()&&Element.prototype.animate||{}}let rz=(()=>{class i extends mV{constructor(r,s){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(s.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(r){const s=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(r)?_V(r):r;return uB(this._renderer,null,s,"register",[o]),new iz(s,this._renderer)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(f.FYo),f.LFG(se))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();class iz extends class{}{constructor(n,r){super(),this._id=n,this._renderer=r}create(n,r){return new sz(this._id,n,r||{},this._renderer)}}class sz{constructor(n,r,s,o){this.id=n,this.element=r,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(n,r){return this._renderer.listen(this.element,`@@${this.id}:${n}`,r)}_command(n,...r){return uB(this._renderer,this.element,this.id,n,r)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){var n,r;return null!==(r=null===(n=this._renderer.engine.players[+this.id])||void 0===n?void 0:n.getPosition())&&void 0!==r?r:0}}function uB(i,n,r,s,o){return i.setProperty(n,`@@${r}:${s}`,o)}const dB="@.disabled";let oz=(()=>{class i{constructor(r,s,o){this.delegate=r,this.engine=s,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(c,h)=>{h&&h.parentNode(c)&&h.removeChild(c.parentNode,c)}}createRenderer(r,s){const c=this.delegate.createRenderer(r,s);if(!(r&&s&&s.data&&s.data.animation)){let T=this._rendererCache.get(c);return T||(T=new hB("",c,this.engine),this._rendererCache.set(c,T)),T}const h=s.id,m=s.id+"-"+this._currentId;this._currentId++,this.engine.register(m,r);const y=T=>{Array.isArray(T)?T.forEach(y):this.engine.registerTrigger(h,m,r,T.name,T)};return s.data.animation.forEach(y),new az(this,m,c,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(r,s,o){r>=0&&r<this._microtaskId?this._zone.run(()=>s(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(c=>{const[h,m]=c;h(m)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(f.FYo),f.LFG(mx),f.LFG(f.R0b))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();class hB{constructor(n,r,s){this.namespaceId=n,this.delegate=r,this.engine=s,this.destroyNode=this.delegate.destroyNode?o=>r.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(n,r){return this.delegate.createElement(n,r)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,r){this.delegate.appendChild(n,r),this.engine.onInsert(this.namespaceId,r,n,!1)}insertBefore(n,r,s,o=!0){this.delegate.insertBefore(n,r,s),this.engine.onInsert(this.namespaceId,r,n,o)}removeChild(n,r,s){this.engine.onRemove(this.namespaceId,r,this.delegate,s)}selectRootElement(n,r){return this.delegate.selectRootElement(n,r)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,r,s,o){this.delegate.setAttribute(n,r,s,o)}removeAttribute(n,r,s){this.delegate.removeAttribute(n,r,s)}addClass(n,r){this.delegate.addClass(n,r)}removeClass(n,r){this.delegate.removeClass(n,r)}setStyle(n,r,s,o){this.delegate.setStyle(n,r,s,o)}removeStyle(n,r,s){this.delegate.removeStyle(n,r,s)}setProperty(n,r,s){"@"==r.charAt(0)&&r==dB?this.disableAnimations(n,!!s):this.delegate.setProperty(n,r,s)}setValue(n,r){this.delegate.setValue(n,r)}listen(n,r,s){return this.delegate.listen(n,r,s)}disableAnimations(n,r){this.engine.disableAnimations(n,r)}}class az extends hB{constructor(n,r,s,o){super(r,s,o),this.factory=n,this.namespaceId=r}setProperty(n,r,s){"@"==r.charAt(0)?"."==r.charAt(1)&&r==dB?this.disableAnimations(n,s=void 0===s||!!s):this.engine.process(this.namespaceId,n,r.substr(1),s):this.delegate.setProperty(n,r,s)}listen(n,r,s){if("@"==r.charAt(0)){const o=function(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(n);let c=r.substr(1),h="";return"@"!=c.charAt(0)&&([c,h]=function(i){const n=i.indexOf(".");return[i.substring(0,n),i.substr(n+1)]}(c)),this.engine.listen(this.namespaceId,o,c,h,m=>{this.factory.scheduleListenerCallback(m._data||-1,s,m)})}return this.delegate.listen(n,r,s)}}let uz=(()=>{class i extends mx{constructor(r,s,o){super(r.body,s,o)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(se),f.LFG(VO),f.LFG(ZO))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();const el=new f.OlP("AnimationModuleType"),fB=[{provide:mV,useClass:rz},{provide:ZO,useFactory:function(){return new _$}},{provide:mx,useClass:uz},{provide:f.FYo,useFactory:function(i,n,r){return new oz(i,n,r)},deps:[fs,mx,f.R0b]}],pB=[{provide:VO,useFactory:function(){return"function"==typeof cB()?new tz:new oB}},{provide:el,useValue:"BrowserAnimations"},...fB],gB=[{provide:VO,useClass:DV},{provide:el,useValue:"NoopAnimations"},...fB];let pz=(()=>{class i{static withConfig(r){return{ngModule:i,providers:r.disableAnimations?gB:pB}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:pB,imports:[Mm]}),i})();const mB=new f.GfV("12.2.9"),Ez=new f.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Xg,Sr=(()=>{class i{constructor(r,s,o){this._hasDoneGlobalChecks=!1,this._document=o,r._applyBodyHighContrastModeCssClasses(),this._sanityChecks=s,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return!(!(0,f.X6Q)()||SA())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[r])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const r=this._document.createElement("div");r.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(r);const s=getComputedStyle(r);s&&"none"!==s.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(r)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&mB.full!==gV.full&&console.warn("The Angular Material version ("+mB.full+") does not match the Angular CDK version ("+gV.full+").\nPlease ensure the versions of these two packages exactly match.")}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(pV),f.LFG(Ez,8),f.LFG(se))},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[Fg],Fg]}),i})();function _B(i){return class extends i{constructor(...n){super(...n),this._disabled=!1}get disabled(){return this._disabled}set disabled(n){this._disabled=nr(n)}}}function I0(i,n){return class extends i{constructor(...r){super(...r),this.defaultColor=n,this.color=n}get color(){return this._color}set color(r){const s=r||this.defaultColor;s!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),s&&this._elementRef.nativeElement.classList.add(`mat-${s}`),this._color=s)}}}function wz(i){return class extends i{constructor(...n){super(...n),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=nr(n)}}}function Cz(i,n=0){return class extends i{constructor(...r){super(...r),this._tabIndex=n,this.defaultTabIndex=n}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(r){this._tabIndex=null!=r?vc(r):this.defaultTabIndex}}}function Iz(i){return class extends i{constructor(...n){super(...n),this.stateChanges=new ct.xQ,this.errorState=!1}updateErrorState(){const n=this.errorState,c=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);c!==n&&(this.errorState=c,this.stateChanges.next())}}}try{Xg="undefined"!=typeof Intl}catch(i){Xg=!1}let vB=(()=>{class i{isErrorState(r,s){return!!(r&&r.invalid&&(r.touched||s&&s.submitted))}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=f.Yz7({factory:function(){return new i},token:i,providedIn:"root"}),i})();class Fz{constructor(n,r,s){this._renderer=n,this.element=r,this.config=s,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const bB={enterDuration:225,exitDuration:150},iP=u0({passive:!0}),EB=["mousedown","touchstart"],wB=["mouseup","mouseleave","touchend","touchcancel"];class Vz{constructor(n,r,s,o){this._target=n,this._ngZone=r,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=Ja(s))}fadeInRipple(n,r,s={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c=Object.assign(Object.assign({},bB),s.animation);s.centered&&(n=o.left+o.width/2,r=o.top+o.height/2);const h=s.radius||function(i,n,r){const s=Math.max(Math.abs(i-r.left),Math.abs(i-r.right)),o=Math.max(Math.abs(n-r.top),Math.abs(n-r.bottom));return Math.sqrt(s*s+o*o)}(n,r,o),m=n-o.left,y=r-o.top,C=c.enterDuration,T=document.createElement("div");T.classList.add("mat-ripple-element"),T.style.left=m-h+"px",T.style.top=y-h+"px",T.style.height=2*h+"px",T.style.width=2*h+"px",null!=s.color&&(T.style.backgroundColor=s.color),T.style.transitionDuration=`${C}ms`,this._containerElement.appendChild(T),function(i){window.getComputedStyle(i).getPropertyValue("opacity")}(T),T.style.transform="scale(1)";const x=new Fz(this,T,s);return x.state=0,this._activeRipples.add(x),s.persistent||(this._mostRecentTransientRipple=x),this._runTimeoutOutsideZone(()=>{const R=x===this._mostRecentTransientRipple;x.state=1,!s.persistent&&(!R||!this._isPointerDown)&&x.fadeOut()},C),x}fadeOutRipple(n){const r=this._activeRipples.delete(n);if(n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!r)return;const s=n.element,o=Object.assign(Object.assign({},bB),n.config.animation);s.style.transitionDuration=`${o.exitDuration}ms`,s.style.opacity="0",n.state=2,this._runTimeoutOutsideZone(()=>{n.state=3,s.parentNode.removeChild(s)},o.exitDuration)}fadeOutAll(){this._activeRipples.forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const r=Ja(n);!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,this._registerEvents(EB))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(wB),this._pointerUpEventsRegistered=!0)}_onMousedown(n){const r=iV(n),s=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!r&&!s&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!sV(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const r=n.changedTouches;for(let s=0;s<r.length;s++)this.fadeInRipple(r[s].clientX,r[s].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_runTimeoutOutsideZone(n,r=0){this._ngZone.runOutsideAngular(()=>setTimeout(n,r))}_registerEvents(n){this._ngZone.runOutsideAngular(()=>{n.forEach(r=>{this._triggerElement.addEventListener(r,this,iP)})})}_removeTriggerEvents(){this._triggerElement&&(EB.forEach(n=>{this._triggerElement.removeEventListener(n,this,iP)}),this._pointerUpEventsRegistered&&wB.forEach(n=>{this._triggerElement.removeEventListener(n,this,iP)}))}}const jz=new f.OlP("mat-ripple-global-options");let bx=(()=>{class i{constructor(r,s,o,c,h){this._elementRef=r,this._animationMode=h,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new Vz(this,s,r,o)}get disabled(){return this._disabled}set disabled(r){r&&this.fadeOutAllNonPersistent(),this._disabled=r,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(r){this._trigger=r,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(r,s=0,o){return"number"==typeof r?this._rippleRenderer.fadeInRipple(r,s,Object.assign(Object.assign({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),r))}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.SBq),f.Y36(f.R0b),f.Y36(gn),f.Y36(jz,8),f.Y36(el,8))},i.\u0275dir=f.lG2({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){2&r&&f.ekj("mat-ripple-unbounded",s.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),i})(),CB=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[Sr,kg],Sr]}),i})();const DB=["mat-button",""],AB=["*"],Zz=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Qz=I0(_B(wz(class{constructor(i){this._elementRef=i}})));let Tv=(()=>{class i extends Qz{constructor(r,s,o){super(r),this._focusMonitor=s,this._animationMode=o,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const c of Zz)this._hasHostAttributes(c)&&this._getHostElement().classList.add(c);r.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(r,s){r?this._focusMonitor.focusVia(this._getHostElement(),r,s):this._getHostElement().focus(s)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...r){return r.some(s=>this._getHostElement().hasAttribute(s))}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.SBq),f.Y36(XA),f.Y36(el,8))},i.\u0275cmp=f.Xpm({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(r,s){if(1&r&&f.Gf(bx,5),2&r){let o;f.iGM(o=f.CRH())&&(s.ripple=o.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(r,s){2&r&&(f.uIk("disabled",s.disabled||null),f.ekj("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-button-disabled",s.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[f.qOj],attrs:DB,ngContentSelectors:AB,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(r,s){1&r&&(f.F$t(),f.TgZ(0,"span",0),f.Hsn(1),f.qZA(),f._UZ(2,"span",1),f._UZ(3,"span",2)),2&r&&(f.xp6(2),f.ekj("mat-button-ripple-round",s.isRoundButton||s.isIconButton),f.Q6J("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",s.isIconButton)("matRippleTrigger",s._getHostElement()))},directives:[bx],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),i})(),sP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[CB,Sr],Sr]}),i})();const MB=new Set;let Dv,RB=(()=>{class i{constructor(r){this._platform=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Xz}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&function(i){if(!MB.has(i))try{Dv||(Dv=document.createElement("style"),Dv.setAttribute("type","text/css"),document.head.appendChild(Dv)),Dv.sheet&&(Dv.sheet.insertRule(`@media ${i} {body{ }}`,0),MB.add(i))}catch(n){console.error(n)}}(r),this._matchMedia(r)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(gn))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(gn))},token:i,providedIn:"root"}),i})();function Xz(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let kB=(()=>{class i{constructor(r,s){this._mediaMatcher=r,this._zone=s,this._queries=new Map,this._destroySubject=new ct.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return NB(Mg(r)).some(o=>this._registerQuery(o).mql.matches)}observe(r){let c=Oo(NB(Mg(r)).map(h=>this._registerQuery(h).observable));return c=Po(c.pipe(gs(1)),c.pipe(ZL(1),QA(0))),c.pipe((0,it.U)(h=>{const m={matches:!1,breakpoints:{}};return h.forEach(({matches:y,query:C})=>{m.matches=m.matches||y,m.breakpoints[C]=y}),m}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);const s=this._mediaMatcher.matchMedia(r),c={observable:new bn.y(h=>{const m=y=>this._zone.run(()=>h.next(y));return s.addListener(m),()=>{s.removeListener(m)}}).pipe(ms(s),(0,it.U)(({matches:h})=>({query:r,matches:h})),Is(this._destroySubject)),mql:s};return this._queries.set(r,c),c}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(RB),f.LFG(f.R0b))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(RB),f.LFG(f.R0b))},token:i,providedIn:"root"}),i})();function NB(i){return i.map(n=>n.split(",")).reduce((n,r)=>n.concat(r)).map(n=>n.trim())}function tq(i,n){if(1&i){const r=f.EpF();f.TgZ(0,"div",1),f.TgZ(1,"button",2),f.NdJ("click",function(){return f.CHM(r),f.oxw().action()}),f._uU(2),f.qZA(),f.qZA()}if(2&i){const r=f.oxw();f.xp6(2),f.Oqu(r.data.action)}}function nq(i,n){}const OB=new f.OlP("MatSnackBarData");class Ex{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const rq=Math.pow(2,31)-1;class oP{constructor(n,r){this._overlayRef=r,this._afterDismissed=new ct.xQ,this._afterOpened=new ct.xQ,this._onAction=new ct.xQ,this._dismissedByAction=!1,this.containerInstance=n,this.onAction().subscribe(()=>this.dismiss()),n._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(n){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(n,rq))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let iq=(()=>{class i{constructor(r,s){this.snackBarRef=r,this.data=s}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(oP),f.Y36(OB))},i.\u0275cmp=f.Xpm({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(r,s){1&r&&(f.TgZ(0,"span"),f._uU(1),f.qZA(),f.YNc(2,tq,3,1,"div",0)),2&r&&(f.xp6(1),f.Oqu(s.data.message),f.xp6(1),f.Q6J("ngIf",s.hasAction))},directives:[Ni,Tv],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),i})();const sq={snackBarState:ex("state",[Yg("void, hidden",Xa({transform:"scale(0.8)",opacity:0})),Yg("visible",Xa({transform:"scale(1)",opacity:1})),E0("* => visible",b0("150ms cubic-bezier(0, 0, 0.2, 1)")),E0("* => void, * => hidden",b0("75ms cubic-bezier(0.4, 0.0, 1, 1)",Xa({opacity:0})))])};let oq=(()=>{class i extends _v{constructor(r,s,o,c,h){super(),this._ngZone=r,this._elementRef=s,this._changeDetectorRef=o,this._platform=c,this.snackBarConfig=h,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ct.xQ,this._onExit=new ct.xQ,this._onEnter=new ct.xQ,this._animationState="void",this.attachDomPortal=m=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(m)),this._live="assertive"!==h.politeness||h.announcementMessage?"off"===h.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(r){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(r)}attachTemplatePortal(r){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(r)}onAnimationEnd(r){const{fromState:s,toState:o}=r;if(("void"===o&&"void"!==s||"hidden"===o)&&this._completeExit(),"visible"===o){const c=this._onEnter;this._ngZone.run(()=>{c.next(),c.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(gs(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const r=this._elementRef.nativeElement,s=this.snackBarConfig.panelClass;s&&(Array.isArray(s)?s.forEach(o=>r.classList.add(o)):r.classList.add(s)),"center"===this.snackBarConfig.horizontalPosition&&r.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&r.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const r=this._elementRef.nativeElement.querySelector("[aria-hidden]"),s=this._elementRef.nativeElement.querySelector("[aria-live]");if(r&&s){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&r.contains(document.activeElement)&&(o=document.activeElement),r.removeAttribute("aria-hidden"),s.appendChild(r),null==o||o.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.R0b),f.Y36(f.SBq),f.Y36(f.sBO),f.Y36(gn),f.Y36(Ex))},i.\u0275cmp=f.Xpm({type:i,selectors:[["snack-bar-container"]],viewQuery:function(r,s){if(1&r&&f.Gf(Ug,7),2&r){let o;f.iGM(o=f.CRH())&&(s._portalOutlet=o.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(r,s){1&r&&f.WFA("@state.done",function(c){return s.onAnimationEnd(c)}),2&r&&f.d8E("@state",s._animationState)},features:[f.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,s){1&r&&(f.TgZ(0,"div",0),f.YNc(1,nq,0,0,"ng-template",1),f.qZA(),f._UZ(2,"div")),2&r&&(f.xp6(2),f.uIk("aria-live",s._live)("role",s._role))},directives:[Ug],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[sq.snackBarState]}}),i})(),aP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[gG,f0,Rr,sP,Sr],Sr]}),i})();const PB=new f.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new Ex}});let lq=(()=>{class i{constructor(r,s,o,c,h,m){this._overlay=r,this._live=s,this._injector=o,this._breakpointObserver=c,this._parentSnackBar=h,this._defaultConfig=m,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=iq,this.snackBarContainerComponent=oq,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const r=this._parentSnackBar;return r?r._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(r){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=r:this._snackBarRefAtThisLevel=r}openFromComponent(r,s){return this._attach(r,s)}openFromTemplate(r,s){return this._attach(r,s)}open(r,s="",o){const c=Object.assign(Object.assign({},this._defaultConfig),o);return c.data={message:r,action:s},c.announcementMessage===r&&(c.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,c)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(r,s){const c=f.zs3.create({parent:s&&s.viewContainerRef&&s.viewContainerRef.injector||this._injector,providers:[{provide:Ex,useValue:s}]}),h=new ff(this.snackBarContainerComponent,s.viewContainerRef,c),m=r.attach(h);return m.instance.snackBarConfig=s,m.instance}_attach(r,s){const o=Object.assign(Object.assign(Object.assign({},new Ex),this._defaultConfig),s),c=this._createOverlay(o),h=this._attachSnackBarContainer(c,o),m=new oP(h,c);if(r instanceof f.Rgc){const y=new bc(r,null,{$implicit:o.data,snackBarRef:m});m.instance=h.attachTemplatePortal(y)}else{const y=this._createInjector(o,m),C=new ff(r,void 0,y),T=h.attachComponentPortal(C);m.instance=T.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Is(c.detachments())).subscribe(y=>{const C=c.overlayElement.classList;y.matches?C.add(this.handsetCssClass):C.remove(this.handsetCssClass)}),o.announcementMessage&&h._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(m,o),this._openedSnackBarRef=m,this._openedSnackBarRef}_animateSnackBar(r,s){r.afterDismissed().subscribe(()=>{this._openedSnackBarRef==r&&(this._openedSnackBarRef=null),s.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{r.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):r.containerInstance.enter(),s.duration&&s.duration>0&&r.afterOpened().subscribe(()=>r._dismissAfter(s.duration))}_createOverlay(r){const s=new wO;s.direction=r.direction;let o=this._overlay.position().global();const c="rtl"===r.direction,h="left"===r.horizontalPosition||"start"===r.horizontalPosition&&!c||"end"===r.horizontalPosition&&c,m=!h&&"center"!==r.horizontalPosition;return h?o.left("0"):m?o.right("0"):o.centerHorizontally(),"top"===r.verticalPosition?o.top("0"):o.bottom("0"),s.positionStrategy=o,this._overlay.create(s)}_createInjector(r,s){return f.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:oP,useValue:s},{provide:OB,useValue:r.data}]})}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(v0),f.LFG(SO),f.LFG(f.zs3),f.LFG(kB),f.LFG(i,12),f.LFG(PB))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(v0),f.LFG(SO),f.LFG(f.gxx),f.LFG(kB),f.LFG(i,12),f.LFG(PB))},token:i,providedIn:aP}),i})(),lP=(()=>{class i{constructor(r){this._snackBar=r}success(r){return this._snackBar.open(r,void 0,{panelClass:["snackbar-success"],duration:3e3})}error(r){return this._snackBar.open(r,void 0,{panelClass:["snackbar-error"],duration:3e3})}info(r){return this._snackBar.open(r,void 0,{panelClass:["snackbar-info"],duration:3e3})}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(lq))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var _f=(()=>(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"}(_f||(_f={})),_f))();const FB="firebasestorage.googleapis.com",LB="storageBucket";class Tr extends P.ZR{constructor(n,r){super(cP(n),`Firebase Storage: ${r} (${cP(n)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tr.prototype)}_codeEquals(n){return cP(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function cP(i){return"storage/"+i}function uP(){return new Tr("unknown","An unknown error occurred, please check the error payload for server response.")}function VB(){return new Tr("canceled","User canceled the upload/download.")}function BB(){return new Tr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Eq(){return new Tr("no-download-url","The given file does not have any download URLs.")}function Av(i){return new Tr("invalid-argument",i)}function UB(){return new Tr("app-deleted","The Firebase app was deleted.")}function jB(i){return new Tr("invalid-root-operation","The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function T0(i,n){return new Tr("invalid-format","String does not match format '"+i+"': "+n)}function wx(i){throw new Tr("internal-error","Internal error: "+i)}class wq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=_f.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_f.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_f.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,r,s,o){if(this.sent_)throw wx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,n,!0),void 0!==o)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wx("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wx("cannot .getStatus() before sending");try{return this.xhr_.status}catch(n){return-1}}getResponseText(){if(!this.sent_)throw wx("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class Iq{createConnection(){return new wq}}class cs{constructor(n,r){this.bucket=n,this.path_=r}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,r){let s;try{s=cs.makeFromUrl(n,r)}catch(o){return new cs(n,"")}if(""===s.path)return s;throw function(i){return new Tr("invalid-default-bucket","Invalid default bucket '"+i+"'.")}(n)}static makeFromUrl(n,r){let s=null;const o="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+o+"(/(.*))?$","i");function C(We){We.path_=decodeURIComponent(We.path)}const x=r.replace(/[.]/g,"\\."),$e=[{regex:m,indices:{bucket:1,path:3},postModify:function(We){"/"===We.path.charAt(We.path.length-1)&&(We.path_=We.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${r===FB?"(?:storage.googleapis.com|storage.cloud.google.com)":r}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let We=0;We<$e.length;We++){const wn=$e[We],Dr=wn.regex.exec(n);if(Dr){let Ms=Dr[wn.indices.path];Ms||(Ms=""),s=new cs(Dr[wn.indices.bucket],Ms),wn.postModify(s);break}}if(null==s)throw function(i){return new Tr("invalid-url","Invalid URL '"+i+"'.")}(n);return s}}class Sq{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function Cx(i){return"string"==typeof i||i instanceof String}function HB(i){return dP()&&i instanceof Blob}function dP(){return"undefined"!=typeof Blob}function hP(i,n,r,s){if(s<n)throw Av(`Invalid value for '${i}'. Expected ${n} or greater.`);if(s>r)throw Av(`Invalid value for '${i}'. Expected ${r} or less.`)}function yf(i,n,r){let s=n;return null==r&&(s=`https://${n}`),`${r}://${s}/v0${i}`}function GB(i){const n=encodeURIComponent;let r="?";for(const s in i)i.hasOwnProperty(s)&&(r=r+(n(s)+"=")+n(i[s])+"&");return r=r.slice(0,-1),r}class Rq{constructor(n,r,s,o,c,h,m,y,C,T,x){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=n,this.method_=r,this.headers_=s,this.body_=o,this.successCodes_=c.slice(),this.additionalRetryCodes_=h.slice(),this.callback_=m,this.errorCallback_=y,this.progressCallback_=T,this.timeout_=C,this.pool_=x,this.promise_=new Promise((R,O)=>{this.resolve_=R,this.reject_=O,this.start_()})}start_(){const n=this;function s(o,c){const h=n.resolve_,m=n.reject_,y=c.connection;if(c.wasSuccessCode)try{const C=n.callback_(y,y.getResponseText());!function(i){return void 0!==i}(C)?h():h(C)}catch(C){m(C)}else if(null!==y){const C=uP();C.serverResponse=y.getResponseText(),m(n.errorCallback_?n.errorCallback_(y,C):C)}else m(c.canceled?n.appDelete_?UB():VB():new Tr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?s(0,new Ix(!1,null,!0)):this.backoffId_=function(i,n,r){let s=1,o=null,c=!1,h=0;function m(){return 2===h}let y=!1;function C(...U){y||(y=!0,n.apply(null,U))}function T(U){o=setTimeout(()=>{o=null,i(x,m())},U)}function x(U,...te){if(y)return;if(U)return void C.call(null,U,...te);if(m()||c)return void C.call(null,U,...te);let Fe;s<64&&(s*=2),1===h?(h=2,Fe=0):Fe=1e3*(s+Math.random()),T(Fe)}let R=!1;function O(U){R||(R=!0,!y&&(null!==o?(U||(h=2),clearTimeout(o),T(0)):U||(h=1)))}return T(0),setTimeout(()=>{c=!0,O(!0)},r),O}(function(o,c){if(c)return void o(!1,new Ix(!1,null,!0));const h=n.pool_.createConnection();function m(y){null!==n.progressCallback_&&n.progressCallback_(y.loaded,y.lengthComputable?y.total:-1)}n.pendingConnection_=h,null!==n.progressCallback_&&h.addUploadProgressListener(m),h.send(n.url_,n.method_,n.body_,n.headers_).then(()=>{null!==n.progressCallback_&&h.removeUploadProgressListener(m),n.pendingConnection_=null;const y=h.getErrorCode()===_f.NO_ERROR,C=h.getStatus();if(!y||n.isRetryStatusCode_(C)){const x=h.getErrorCode()===_f.ABORT;return void o(!1,new Ix(!1,null,x))}const T=-1!==n.successCodes_.indexOf(C);o(!0,new Ix(T,h))})},s,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(n){const r=n>=500&&n<600,o=-1!==[408,429].indexOf(n),c=-1!==this.additionalRetryCodes_.indexOf(n);return r||o||c}}class Ix{constructor(n,r,s){this.wasSuccessCode=n,this.connection=r,this.canceled=!!s}}function Vq(...i){const n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){const r=new n;for(let s=0;s<i.length;s++)r.append(i[s]);return r.getBlob()}if(dP())return new Blob(i);throw new Tr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fP{constructor(n,r){this.data=n,this.contentType=r||null}}function pP(i,n){switch(i){case yo.RAW:return new fP($B(n));case yo.BASE64:case yo.BASE64URL:return new fP(zB(i,n));case yo.DATA_URL:return new fP(function(i){const n=new qB(i);return n.base64?zB(yo.BASE64,n.rest):function(i){let n;try{n=decodeURIComponent(i)}catch(r){throw T0(yo.DATA_URL,"Malformed data URL.")}return $B(n)}(n.rest)}(n),function(i){return new qB(i).contentType}(n))}throw uP()}function $B(i){const n=[];for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);s<=127?n.push(s):s<=2047?n.push(192|s>>6,128|63&s):55296==(64512&s)?r<i.length-1&&56320==(64512&i.charCodeAt(r+1))?(s=65536|(1023&s)<<10|1023&i.charCodeAt(++r),n.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):n.push(239,191,189):56320==(64512&s)?n.push(239,191,189):n.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(n)}function zB(i,n){switch(i){case yo.BASE64:{const o=-1!==n.indexOf("-"),c=-1!==n.indexOf("_");if(o||c)throw T0(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case yo.BASE64URL:{const o=-1!==n.indexOf("+"),c=-1!==n.indexOf("/");if(o||c)throw T0(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=function(i){return atob(i)}(n)}catch(o){throw T0(i,"Invalid character found")}const s=new Uint8Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return s}class qB{constructor(n){this.base64=!1,this.contentType=null;const r=n.match(/^data:([^,]+)?,/);if(null===r)throw T0(yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=r[1]||null;null!=s&&(this.base64=function(i,n){return i.length>=n.length&&i.substring(i.length-n.length)===n}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-";base64".length):s),this.rest=n.substring(n.indexOf(",")+1)}}class Cc{constructor(n,r){let s=0,o="";HB(n)?(this.data_=n,s=n.size,o=n.type):n instanceof ArrayBuffer?(r?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),s=this.data_.length):n instanceof Uint8Array&&(r?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),s=n.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(n,r){if(HB(this.data_)){const o=function(i,n,r){return i.webkitSlice?i.webkitSlice(n,r):i.mozSlice?i.mozSlice(n,r):i.slice?i.slice(n,r):null}(this.data_,n,r);return null===o?null:new Cc(o)}{const s=new Uint8Array(this.data_.buffer,n,r-n);return new Cc(s,!0)}}static getBlob(...n){if(dP()){const r=n.map(s=>s instanceof Cc?s.data_:s);return new Cc(Vq.apply(null,r))}{const r=n.map(h=>Cx(h)?pP(yo.RAW,h).data:h.data_);let s=0;r.forEach(h=>{s+=h.byteLength});const o=new Uint8Array(s);let c=0;return r.forEach(h=>{for(let m=0;m<h.length;m++)o[c++]=h[m]}),new Cc(o,!0)}}uploadData(){return this.data_}}function gP(i){let n;try{n=JSON.parse(i)}catch(r){return null}return function(i){return"object"==typeof i&&!Array.isArray(i)}(n)?n:null}function WB(i){const n=i.lastIndexOf("/",i.length-2);return-1===n?i:i.slice(n+1)}function Wq(i,n){return n}class Ss{constructor(n,r,s,o){this.server=n,this.local=r||n,this.writable=!!s,this.xform=o||Wq}}let Sx=null;function D0(){if(Sx)return Sx;const i=[];i.push(new Ss("bucket")),i.push(new Ss("generation")),i.push(new Ss("metageneration")),i.push(new Ss("name","fullPath",!0));const r=new Ss("name");r.xform=function(c,h){return function(i){return!Cx(i)||i.length<2?i:WB(i)}(h)},i.push(r);const o=new Ss("size");return o.xform=function(c,h){return void 0!==h?Number(h):h},i.push(o),i.push(new Ss("timeCreated")),i.push(new Ss("updated")),i.push(new Ss("md5Hash",null,!0)),i.push(new Ss("cacheControl",null,!0)),i.push(new Ss("contentDisposition",null,!0)),i.push(new Ss("contentEncoding",null,!0)),i.push(new Ss("contentLanguage",null,!0)),i.push(new Ss("contentType",null,!0)),i.push(new Ss("metadata","customMetadata",!0)),Sx=i,Sx}function YB(i,n,r){const s=gP(n);return null===s?null:function(i,n,r){const s={type:"file"},o=r.length;for(let c=0;c<o;c++){const h=r[c];s[h.local]=h.xform(s,n[h.server])}return function(i,n){Object.defineProperty(i,"ref",{get:function(){const c=new cs(i.bucket,i.fullPath);return n._makeStorageReference(c)}})}(s,i),s}(i,s,r)}function mP(i,n){const r={},s=n.length;for(let o=0;o<s;o++){const c=n[o];c.writable&&(r[c.server]=i[c.local])}return JSON.stringify(r)}const KB="prefixes";class Ju{constructor(n,r,s,o){this.url=n,this.method=r,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ic(i){if(!i)throw uP()}function Tx(i,n){return function(s,o){const c=YB(i,o,n);return Ic(null!==c),c}}function xv(i){return function(r,s){let o;return o=401===r.getStatus()?r.getResponseText().includes("Firebase App Check token is invalid")?new Tr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Tr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===r.getStatus()?function(i){return new Tr("quota-exceeded","Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===r.getStatus()?function(i){return new Tr("unauthorized","User does not have permission to access '"+i+"'.")}(i.path):s,o.serverResponse=s.serverResponse,o}}function Dx(i){const n=xv(i);return function(s,o){let c=n(s,o);return 404===s.getStatus()&&(c=function(i){return new Tr("object-not-found","Object '"+i+"' does not exist.")}(i.path)),c.serverResponse=o.serverResponse,c}}function QB(i,n,r){const o=yf(n.fullServerUrl(),i.host,i._protocol),h=i.maxOperationRetryTime,m=new Ju(o,"GET",Tx(i,r),h);return m.errorHandler=Dx(n),m}function n6(i,n,r,s,o){const c={};c.prefix=n.isRoot?"":n.path+"/",r&&r.length>0&&(c.delimiter=r),s&&(c.pageToken=s),o&&(c.maxResults=o);const m=yf(n.bucketOnlyServerUrl(),i.host,i._protocol),C=i.maxOperationRetryTime,T=new Ju(m,"GET",function(i,n){return function(s,o){const c=function(i,n,r){const s=gP(r);return null===s?null:function(i,n,r){const s={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[KB])for(const o of r[KB]){const c=o.replace(/\/$/,""),h=i._makeStorageReference(new cs(n,c));s.prefixes.push(h)}if(r.items)for(const o of r.items){const c=i._makeStorageReference(new cs(n,o.name));s.items.push(c)}return s}(i,n,s)}(i,n,o);return Ic(null!==c),c}}(i,n.bucket),C);return T.urlParams=c,T.errorHandler=xv(n),T}function r6(i,n,r){const o=yf(n.fullServerUrl(),i.host,i._protocol),h=i.maxOperationRetryTime,m=new Ju(o,"GET",function(i,n){return function(s,o){const c=YB(i,o,n);return Ic(null!==c),function(i,n,r,s){const o=gP(n);if(null===o||!Cx(o.downloadTokens))return null;const c=o.downloadTokens;if(0===c.length)return null;const h=encodeURIComponent;return c.split(",").map(C=>{const x=i.fullPath;return yf("/b/"+h(i.bucket)+"/o/"+h(x),r,s)+GB({alt:"media",token:C})})[0]}(c,o,i.host,i._protocol)}}(i,r),h);return m.errorHandler=Dx(n),m}function i6(i,n,r,s){const c=yf(n.fullServerUrl(),i.host,i._protocol),m=mP(r,s),C=i.maxOperationRetryTime,T=new Ju(c,"PATCH",Tx(i,s),C);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=m,T.errorHandler=Dx(n),T}function s6(i,n){const s=yf(n.fullServerUrl(),i.host,i._protocol),m=new Ju(s,"DELETE",function(y,C){},i.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=Dx(n),m}function JB(i,n,r){const s=Object.assign({},r);return s.fullPath=i.path,s.size=n.size(),s.contentType||(s.contentType=function(i,n){return n&&n.type()||"application/octet-stream"}(0,n)),s}class Ax{constructor(n,r,s,o){this.current=n,this.total=r,this.finalized=!!s,this.metadata=o||null}}function _P(i,n){let r=null;try{r=i.getResponseHeader("X-Goog-Upload-Status")}catch(o){Ic(!1)}return Ic(!!r&&-1!==(n||["active"]).indexOf(r)),r}const u6={STATE_CHANGED:"state_changed"},Ts={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yP(i){switch(i){case"running":case"pausing":case"canceling":return Ts.RUNNING;case"paused":return Ts.PAUSED;case"success":return Ts.SUCCESS;case"canceled":return Ts.CANCELED;case"error":default:return Ts.ERROR}}class d6{constructor(n,r,s){if(function(i){return"function"==typeof i}(n)||null!=r||null!=s)this.next=n,this.error=null!=r?r:void 0,this.complete=null!=s?s:void 0;else{const c=n;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function Mv(i){return(...n)=>{Promise.resolve().then(()=>i(...n))}}class tU{constructor(n,r,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=r,this._metadata=s,this._mappings=D0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,c)=>{this._resolve=o,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const n=this._transferred;return r=>this._updateProgress(n+r)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,s])=>{switch(this._state){case"running":n(r,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,r)=>{const s=function(i,n,r,s,o){const c=n.bucketOnlyServerUrl(),h=JB(n,s,o),m={name:h.fullPath},y=yf(c,i.host,i._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},x=mP(h,r),U=new Ju(y,"POST",function(te){let pe;_P(te);try{pe=te.getResponseHeader("X-Goog-Upload-URL")}catch(Fe){Ic(!1)}return Ic(Cx(pe)),pe},i.maxUploadRetryTime);return U.urlParams=m,U.headers=T,U.body=x,U.errorHandler=xv(n),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(s,n,r);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((r,s)=>{const o=function(i,n,r,s){const y=new Ju(r,"POST",function(C){const T=_P(C,["active","final"]);let x=null;try{x=C.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){Ic(!1)}x||Ic(!1);const R=Number(x);return Ic(!isNaN(R)),new Ax(R,s.size(),"final"===T)},i.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=xv(n),y}(this._ref.storage,this._ref._location,n,this._blob),c=this._ref.storage._makeRequest(o,r,s);this._request=c,c.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,r=new Ax(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((o,c)=>{let h;try{h=function(i,n,r,s,o,c,h,m){const y=new Ax(0,0);if(h?(y.current=h.current,y.total=h.total):(y.current=0,y.total=s.size()),s.size()!==y.total)throw new Tr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const C=y.total-y.current;let T=C;o>0&&(T=Math.min(T,o));const x=y.current,U={"X-Goog-Upload-Command":T===C?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},te=s.slice(x,x+T);if(null===te)throw BB();const $e=new Ju(r,"POST",function(We,wn){const Dr=_P(We,["active","final"]),di=y.current+T,Ms=s.size();let bo;return bo="final"===Dr?Tx(n,c)(We,wn):null,new Ax(di,Ms,"final"===Dr,bo)},n.maxUploadRetryTime);return $e.headers=U,$e.body=te.uploadData(),$e.progressCallback=m||null,$e.errorHandler=xv(i),$e}(this._ref._location,this._ref.storage,s,this._blob,n,this._mappings,r,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const m=this._ref.storage._makeRequest(h,o,c);this._request=m,m.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,r)=>{const s=QB(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(s,n,r);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,r)=>{const s=function(i,n,r,s,o){const c=n.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"},y=function(){let $e="";for(let We=0;We<2;We++)$e+=Math.random().toString().slice(2);return $e}();h["Content-Type"]="multipart/related; boundary="+y;const C=JB(n,s,o),T=mP(C,r),O=Cc.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+y+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",s,"\r\n--"+y+"--");if(null===O)throw BB();const U={name:C.fullPath},te=yf(c,i.host,i._protocol),Fe=i.maxUploadRetryTime,Ge=new Ju(te,"POST",Tx(i,r),Fe);return Ge.urlParams=U,Ge.headers=h,Ge.body=O.uploadData(),Ge.errorHandler=xv(n),Ge}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(s,n,r);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const r=this._transferred;this._transferred=n,this._transferred!==r&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request&&this._request.cancel();break;case"running":const r="paused"===this._state;this._state=n,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=n,this._notifyObservers();break;case"canceled":this._error=VB(),this._state=n,this._notifyObservers();break;case"error":case"success":this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=yP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,r,s,o){const c=new d6(r||void 0,s||void 0,o||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(n,r){return this._promise.then(n,r)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const r=this._observers.indexOf(n);-1!==r&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(yP(this._state)){case Ts.SUCCESS:Mv(this._resolve.bind(null,this.snapshot))();break;case Ts.CANCELED:case Ts.ERROR:Mv(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(yP(this._state)){case Ts.RUNNING:case Ts.PAUSED:n.next&&Mv(n.next.bind(n,this.snapshot))();break;case Ts.SUCCESS:n.complete&&Mv(n.complete.bind(n))();break;case Ts.CANCELED:case Ts.ERROR:n.error&&Mv(n.error.bind(n,this._error))();break;default:n.error&&Mv(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class em{constructor(n,r){this._service=n,this._location=r instanceof cs?r:cs.makeFromUrl(r,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,r){return new em(n,r)}get root(){const n=new cs(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WB(this._location.path)}get storage(){return this._service}get parent(){const n=function(i){if(0===i.length)return null;const n=i.lastIndexOf("/");return-1===n?"":i.slice(0,n)}(this._location.path);if(null===n)return null;const r=new cs(this._location.bucket,n);return new em(this._service,r)}_throwIfRoot(n){if(""===this._location.path)throw jB(n)}}function rU(i,n,r){return vP.apply(this,arguments)}function vP(){return(vP=(0,Ce.Z)(function*(i,n,r){const o=yield iU(i,{pageToken:r});n.prefixes.push(...o.prefixes),n.items.push(...o.items),null!=o.nextPageToken&&(yield rU(i,n,o.nextPageToken))})).apply(this,arguments)}function iU(i,n){return bP.apply(this,arguments)}function bP(){return(bP=(0,Ce.Z)(function*(i,n){null!=n&&"number"==typeof n.maxResults&&hP("options.maxResults",1,1e3,n.maxResults);const r=n||{},s=n6(i.storage,i._location,"/",r.pageToken,r.maxResults);return(yield i.storage.makeRequestWithTokens(s)).getPromise()})).apply(this,arguments)}function EP(){return(EP=(0,Ce.Z)(function*(i){i._throwIfRoot("getMetadata");const n=QB(i.storage,i._location,D0());return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function wP(){return(wP=(0,Ce.Z)(function*(i,n){i._throwIfRoot("updateMetadata");const r=i6(i.storage,i._location,n,D0());return(yield i.storage.makeRequestWithTokens(r)).getPromise()})).apply(this,arguments)}function CP(){return(CP=(0,Ce.Z)(function*(i){i._throwIfRoot("getDownloadURL");const n=r6(i.storage,i._location,D0());return(yield i.storage.makeRequestWithTokens(n)).getPromise().then(r=>{if(null===r)throw Eq();return r})})).apply(this,arguments)}function IP(){return(IP=(0,Ce.Z)(function*(i){i._throwIfRoot("deleteObject");const n=s6(i.storage,i._location);return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function sU(i,n){const r=function(i,n){const r=n.split("/").filter(s=>s.length>0).join("/");return 0===i.length?r:i+"/"+r}(i._location.path,n),s=new cs(i._location.bucket,r);return new em(i.storage,s)}function oU(i,n){if(i instanceof SP){const r=i;if(null==r._bucket)throw new Tr("no-default-bucket","No default bucket found. Did you set the '"+LB+"' property when initializing the app?");const s=new em(r,r._bucket);return null!=n?oU(s,n):s}return void 0!==n?sU(i,n):i}function E6(i,n){if(n&&function(i){return/^[A-Za-z]+:\/\//.test(i)}(n)){if(i instanceof SP)return function(i,n){return new em(i,n)}(i,n);throw Av("To use ref(service, url), the first argument must be a Storage instance.")}return oU(i,n)}function aU(i,n){const r=null==n?void 0:n[LB];return null==r?null:cs.makeFromBucketSpec(r,i)}class SP{constructor(n,r,s,o,c,h){this.app=n,this._authProvider=r,this._appCheckProvider=s,this._pool=o,this._url=c,this._firebaseVersion=h,this._bucket=null,this._host=FB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=c?cs.makeFromBucketSpec(c,this._host):aU(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?cs.makeFromBucketSpec(this._url,n):aU(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){hP("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){hP("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,Ce.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const r=n._authProvider.getImmediate({optional:!0});if(r){const s=yield r.getToken();if(null!==s)return s.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,Ce.Z)(function*(){const r=n._appCheckProvider.getImmediate({optional:!0});return r?(yield r.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new em(this,n)}_makeRequest(n,r,s){if(this._deleted)return new Sq(UB());{const o=function(i,n,r,s,o,c){const h=GB(i.urlParams),m=i.url+h,y=Object.assign({},i.headers);return function(i,n){n&&(i["X-Firebase-GMPID"]=n)}(y,n),function(i,n){null!==n&&n.length>0&&(i.Authorization="Firebase "+n)}(y,r),function(i,n){i["X-Firebase-Storage-Version"]="webjs/"+(null!=n?n:"AppManager")}(y,c),function(i,n){null!==n&&(i["X-Firebase-AppCheck"]=n)}(y,s),new Rq(m,i.method,y,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o)}(n,this._appId,r,s,this._pool,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(n){var r=this;return(0,Ce.Z)(function*(){const[s,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(n,s,o)})()}}function cU(i,n){return E6(i=(0,P.m9)(i),n)}(0,Ra._registerComponent)(new dt.wA("storage",function(i,{instanceIdentifier:n}){const r=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new SP(r,s,o,new Iq,n,Ra.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Ra.registerVersion)("@firebase/storage","0.8.3");class xx{constructor(n,r,s){this._delegate=n,this.task=r,this.ref=s}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class uU{constructor(n,r){this._delegate=n,this._ref=r,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new xx(this._delegate.snapshot,this,this._ref)}then(n,r){return this._delegate.then(s=>{if(n)return n(new xx(s,this,this._ref))},r)}on(n,r,s,o){let c;return r&&(c="function"==typeof r?h=>r(new xx(h,this,this._ref)):{next:r.next?h=>r.next(new xx(h,this,this._ref)):void 0,complete:r.complete||void 0,error:r.error||void 0}),this._delegate.on(n,c,s||void 0,o||void 0)}}class dU{constructor(n,r){this._delegate=n,this._service=r}get prefixes(){return this._delegate.prefixes.map(n=>new Xu(n,this._service))}get items(){return this._delegate.items.map(n=>new Xu(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Xu{constructor(n,r){this._delegate=n,this.storage=r}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const r=function(i,n){return sU(i,n)}(this._delegate,n);return new Xu(r,this.storage)}get root(){return new Xu(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new Xu(n,this.storage)}put(n,r){return this._throwIfRoot("put"),new uU(function(i,n,r){return function(i,n,r){return i._throwIfRoot("uploadBytesResumable"),new tU(i,new Cc(n),r)}(i=(0,P.m9)(i),n,r)}(this._delegate,n,r),this)}putString(n,r=yo.RAW,s){this._throwIfRoot("putString");const o=pP(r,n),c=Object.assign({},s);return null==c.contentType&&null!=o.contentType&&(c.contentType=o.contentType),new uU(new tU(this._delegate,new Cc(o.data,!0),c),this)}listAll(){return function(i){return function(i){const n={prefixes:[],items:[]};return rU(i,n).then(()=>n)}(i=(0,P.m9)(i))}(this._delegate).then(n=>new dU(n,this.storage))}list(n){return function(i,n){return iU(i=(0,P.m9)(i),n)}(this._delegate,n||void 0).then(r=>new dU(r,this.storage))}getMetadata(){return function(i){return function(i){return EP.apply(this,arguments)}(i=(0,P.m9)(i))}(this._delegate)}updateMetadata(n){return function(i,n){return function(i,n){return wP.apply(this,arguments)}(i=(0,P.m9)(i),n)}(this._delegate,n)}getDownloadURL(){return function(i){return function(i){return CP.apply(this,arguments)}(i=(0,P.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(i){return function(i){return IP.apply(this,arguments)}(i=(0,P.m9)(i))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw jB(n)}}class hU{constructor(n,r){this.app=n,this._delegate=r}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(fU(n))throw Av("ref() expected a child path but got a URL, use refFromURL instead.");return new Xu(cU(this._delegate,n),this)}refFromURL(n){if(!fU(n))throw Av("refFromURL() expected a full URL but got a child path, use ref() instead.");try{cs.makeFromUrl(n,this._delegate.host)}catch(r){throw Av("refFromUrl() expected a valid full URL but got an invalid one.")}return new Xu(cU(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,r,s={}){!function(i,n,r,s={}){!function(i,n,r,s={}){i.host=`${n}:${r}`,i._protocol="http";const{mockUserToken:o}=s;o&&(i._overrideAuthToken="string"==typeof o?o:(0,P.Sg)(o,i.app.options.projectId))}(i,n,r,s)}(this._delegate,n,r,s)}}function fU(i){return/^[A-Za-z]+:\/\//.test(i)}function B6(i,{instanceIdentifier:n}){const r=i.getProvider("app-compat").getImmediate(),s=i.getProvider("storage").getImmediate({identifier:n});return new hU(r,s)}function pU(i){const n=function(i){return new bn.y(n=>{const r=h=>n.next(h);r(i.snapshot);const c=i.on("state_changed",r);return i.then(h=>{r(h),n.complete()},h=>{r(i.snapshot),(h=>{n.error(h)})(h)}),function(){c()}}).pipe(QA(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,it.U)(r=>r.bytesTransferred/r.totalBytes*100))}}function Mx(i){return{getDownloadURL:()=>(0,qe.of)(void 0).pipe(Xt.fc,or(()=>i.getDownloadURL()),Xt.iC),getMetadata:()=>(0,qe.of)(void 0).pipe(Xt.fc,or(()=>i.getMetadata()),Xt.iC),delete:()=>(0,cn.D)(i.delete()),child:n=>Mx(i.child(n)),updateMetadata:n=>(0,cn.D)(i.updateMetadata(n)),put:(n,r)=>pU(i.put(n,r)),putString:(n,r,s)=>pU(i.putString(n,r,s)),listAll:()=>(0,cn.D)(i.listAll())}}!function(i){const n={TaskState:Ts,TaskEvent:u6,StringFormat:yo,Storage:hU,Reference:Xu};i.INTERNAL.registerComponent(new dt.wA("storage-compat",B6,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.1.3")}(cS.Z);const H6=new f.OlP("angularfire2.storageBucket"),G6=new f.OlP("angularfire2.storage.maxUploadRetryTime"),$6=new f.OlP("angularfire2.storage.maxOperationRetryTime"),z6=new f.OlP("angularfire2.storage.use-emulator");let q6=(()=>{class i{constructor(r,s,o,c,h,m,y,C,T){const x=(0,rs.on)(r,h,s);this.storage=(0,Xt.cc)(`${x.name}.storage.${o}`,"AngularFireStorage",x.name,()=>{const R=h.runOutsideAngular(()=>x.storage(o||void 0)),O=T;return O&&R.useEmulator(...O),y&&R.setMaxUploadRetryTime(y),C&&R.setMaxOperationRetryTime(C),R},[y,C])}ref(r){return Mx(this.storage.ref(r))}refFromURL(r){return Mx(this.storage.refFromURL(r))}upload(r,s,o){return Mx(this.storage.ref(r)).put(s,o)}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(rs.Dh),f.LFG(rs.xv,8),f.LFG(H6,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Xt.HU),f.LFG(G6,8),f.LFG($6,8),f.LFG(z6,8))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),W6=0;const TP=new f.OlP("CdkAccordion");let Y6=(()=>{class i{constructor(){this._stateChanges=new ct.xQ,this._openCloseAllActions=new ct.xQ,this.id="cdk-accordion-"+W6++,this._multi=!1}get multi(){return this._multi}set multi(r){this._multi=nr(r)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(r){this._stateChanges.next(r)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[f._Bn([{provide:TP,useExisting:i}]),f.TTD]}),i})(),K6=0,Q6=(()=>{class i{constructor(r,s,o){this.accordion=r,this._changeDetectorRef=s,this._expansionDispatcher=o,this._openCloseAllSubscription=Vi.w.EMPTY,this.closed=new f.vpe,this.opened=new f.vpe,this.destroyed=new f.vpe,this.expandedChange=new f.vpe,this.id="cdk-accordion-child-"+K6++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=o.listen((c,h)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===h&&this.id!==c&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(r){r=nr(r),this._expanded!==r&&(this._expanded=r,this.expandedChange.emit(r),r?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(r){this._disabled=nr(r)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(r=>{this.disabled||(this.expanded=r)})}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(TP,12),f.Y36(f.sBO),f.Y36(DA))},i.\u0275dir=f.lG2({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[f._Bn([{provide:TP,useValue:void 0}])]}),i})(),J6=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({}),i})();const X6=["body"];function eW(i,n){}const tW=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],nW=["mat-expansion-panel-header","*","mat-action-row"];function rW(i,n){if(1&i&&f._UZ(0,"span",2),2&i){const r=f.oxw();f.Q6J("@indicatorRotate",r._getExpandedState())}}const iW=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],sW=["mat-panel-title","mat-panel-description","*"],DP=new f.OlP("MAT_ACCORDION"),gU="225ms cubic-bezier(0.4,0.0,0.2,1)",mU={indicatorRotate:ex("indicatorRotate",[Yg("collapsed, void",Xa({transform:"rotate(0deg)"})),Yg("expanded",Xa({transform:"rotate(180deg)"})),E0("expanded <=> collapsed, void => collapsed",b0(gU))]),bodyExpansion:ex("bodyExpansion",[Yg("collapsed, void",Xa({height:"0px",visibility:"hidden"})),Yg("expanded",Xa({height:"*",visibility:"visible"})),E0("expanded <=> collapsed, void => collapsed",b0(gU))])};let oW=(()=>{class i{constructor(r){this._template=r}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.Rgc))},i.\u0275dir=f.lG2({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),aW=0;const _U=new f.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let yU=(()=>{class i extends Q6{constructor(r,s,o,c,h,m,y){super(r,s,o),this._viewContainerRef=c,this._animationMode=m,this._hideToggle=!1,this.afterExpand=new f.vpe,this.afterCollapse=new f.vpe,this._inputChanges=new ct.xQ,this._headerId="mat-expansion-panel-header-"+aW++,this._bodyAnimationDone=new ct.xQ,this.accordion=r,this._document=h,this._bodyAnimationDone.pipe(y_((C,T)=>C.fromState===T.fromState&&C.toState===T.toState)).subscribe(C=>{"void"!==C.fromState&&("expanded"===C.toState?this.afterExpand.emit():"collapsed"===C.toState&&this.afterCollapse.emit())}),y&&(this.hideToggle=y.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(r){this._hideToggle=nr(r)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(r){this._togglePosition=r}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(ms(null),ar(()=>this.expanded&&!this._portal),gs(1)).subscribe(()=>{this._portal=new bc(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(r){this._inputChanges.next(r)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const r=this._document.activeElement,s=this._body.nativeElement;return r===s||s.contains(r)}return!1}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(DP,12),f.Y36(f.sBO),f.Y36(DA),f.Y36(f.s_b),f.Y36(se),f.Y36(el,8),f.Y36(_U,8))},i.\u0275cmp=f.Xpm({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(r,s,o){if(1&r&&f.Suo(o,oW,5),2&r){let c;f.iGM(c=f.CRH())&&(s._lazyContent=c.first)}},viewQuery:function(r,s){if(1&r&&f.Gf(X6,5),2&r){let o;f.iGM(o=f.CRH())&&(s._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(r,s){2&r&&f.ekj("mat-expanded",s.expanded)("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-expansion-panel-spacing",s._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[f._Bn([{provide:DP,useValue:void 0}]),f.qOj,f.TTD],ngContentSelectors:nW,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(r,s){1&r&&(f.F$t(tW),f.Hsn(0),f.TgZ(1,"div",0,1),f.NdJ("@bodyExpansion.done",function(c){return s._bodyAnimationDone.next(c)}),f.TgZ(3,"div",2),f.Hsn(4,1),f.YNc(5,eW,0,0,"ng-template",3),f.qZA(),f.Hsn(6,2),f.qZA()),2&r&&(f.xp6(1),f.Q6J("@bodyExpansion",s._getExpandedState())("id",s.id),f.uIk("aria-labelledby",s._headerId),f.xp6(4),f.Q6J("cdkPortalOutlet",s._portal))},directives:[Ug],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[mU.bodyExpansion]},changeDetection:0}),i})();class cW{}const uW=Cz(cW);let vU=(()=>{class i extends uW{constructor(r,s,o,c,h,m,y){super(),this.panel=r,this._element=s,this._focusMonitor=o,this._changeDetectorRef=c,this._animationMode=m,this._parentChangeSubscription=Vi.w.EMPTY;const C=r.accordion?r.accordion._stateChanges.pipe(ar(T=>!(!T.hideToggle&&!T.togglePosition))):mi.E;this.tabIndex=parseInt(y||"")||0,this._parentChangeSubscription=(0,uu.T)(r.opened,r.closed,C,r._inputChanges.pipe(ar(T=>!!(T.hideToggle||T.disabled||T.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),r.closed.pipe(ar(()=>r._containsFocus())).subscribe(()=>o.focusVia(s,"program")),h&&(this.expandedHeight=h.expandedHeight,this.collapsedHeight=h.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const r=this._isExpanded();return r&&this.expandedHeight?this.expandedHeight:!r&&this.collapsedHeight?this.collapsedHeight:null}_keydown(r){switch(r.keyCode){case 32:case 13:ZA(r)||(r.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(r))}}focus(r,s){r?this._focusMonitor.focusVia(this._element,r,s):this._element.nativeElement.focus(s)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(r=>{r&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(yU,1),f.Y36(f.SBq),f.Y36(XA),f.Y36(f.sBO),f.Y36(_U,8),f.Y36(el,8),f.$8M("tabindex"))},i.\u0275cmp=f.Xpm({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(r,s){1&r&&f.NdJ("click",function(){return s._toggle()})("keydown",function(c){return s._keydown(c)}),2&r&&(f.uIk("id",s.panel._headerId)("tabindex",s.tabIndex)("aria-controls",s._getPanelId())("aria-expanded",s._isExpanded())("aria-disabled",s.panel.disabled),f.Udp("height",s._getHeaderHeight()),f.ekj("mat-expanded",s._isExpanded())("mat-expansion-toggle-indicator-after","after"===s._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===s._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===s._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[f.qOj],ngContentSelectors:sW,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(r,s){1&r&&(f.F$t(iW),f.TgZ(0,"span",0),f.Hsn(1),f.Hsn(2,1),f.Hsn(3,2),f.qZA(),f.YNc(4,rW,1,1,"span",1)),2&r&&(f.xp6(4),f.Q6J("ngIf",s._showToggle()))},directives:[Ni],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[mU.indicatorRotate]},changeDetection:0}),i})(),dW=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),hW=(()=>{class i extends Y6{constructor(){super(...arguments),this._ownHeaders=new f.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(r){this._hideToggle=nr(r)}ngAfterContentInit(){this._headers.changes.pipe(ms(this._headers)).subscribe(r=>{this._ownHeaders.reset(r.filter(s=>s.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new SG(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(r){this._keyManager.onKeydown(r)}_handleHeaderFocus(r){this._keyManager.updateActiveItem(r)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return i.\u0275fac=function(){let n;return function(s){return(n||(n=f.n5z(i)))(s||i)}}(),i.\u0275dir=f.lG2({type:i,selectors:[["mat-accordion"]],contentQueries:function(r,s,o){if(1&r&&f.Suo(o,vU,5),2&r){let c;f.iGM(c=f.CRH())&&(s._headers=c)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(r,s){2&r&&f.ekj("mat-accordion-multi",s.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[f._Bn([{provide:DP,useExisting:i}]),f.qOj]}),i})(),bU=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[Rr,Sr,J6,f0]]}),i})();const fW=["primaryValueBar"],pW=I0(class{constructor(i){this._elementRef=i}},"primary"),gW=new f.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const i=(0,f.f3M)(se),n=i?i.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}});let _W=0,yW=(()=>{class i extends pW{constructor(r,s,o,c){super(r),this._ngZone=s,this._animationMode=o,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new f.vpe,this._animationEndSubscription=Vi.w.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+_W++;const h=c?c.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${h}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===o}get value(){return this._value}set value(r){this._value=EU(vc(r)||0)}get bufferValue(){return this._bufferValue}set bufferValue(r){this._bufferValue=EU(r||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const r=this._primaryValueBar.nativeElement;this._animationEndSubscription=Rg(r,"transitionend").pipe(ar(s=>s.target===r)).subscribe(()=>{("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.SBq),f.Y36(f.R0b),f.Y36(el,8),f.Y36(gW,8))},i.\u0275cmp=f.Xpm({type:i,selectors:[["mat-progress-bar"]],viewQuery:function(r,s){if(1&r&&f.Gf(fW,5),2&r){let o;f.iGM(o=f.CRH())&&(s._primaryValueBar=o.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(r,s){2&r&&(f.uIk("aria-valuenow","indeterminate"===s.mode||"query"===s.mode?null:s.value)("mode",s.mode),f.ekj("_mat-animation-noopable",s._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[f.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(r,s){1&r&&(f.TgZ(0,"div",0),f.O4$(),f.TgZ(1,"svg",1),f.TgZ(2,"defs"),f.TgZ(3,"pattern",2),f._UZ(4,"circle",3),f.qZA(),f.qZA(),f._UZ(5,"rect",4),f.qZA(),f.kcU(),f._UZ(6,"div",5),f._UZ(7,"div",6,7),f._UZ(9,"div",8),f.qZA()),2&r&&(f.xp6(3),f.Q6J("id",s.progressbarId),f.xp6(2),f.uIk("fill",s._rectangleFillValue),f.xp6(1),f.Q6J("ngStyle",s._bufferTransform()),f.xp6(1),f.Q6J("ngStyle",s._primaryTransform()))},directives:[ma],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),i})();function EU(i,n=0,r=100){return Math.max(n,Math.min(r,i))}let wU=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[Rr,Sr],Sr]}),i})();const vW=["underline"],bW=["connectionContainer"],EW=["inputContainer"],wW=["label"];function CW(i,n){1&i&&(f.ynx(0),f.TgZ(1,"div",14),f._UZ(2,"div",15),f._UZ(3,"div",16),f._UZ(4,"div",17),f.qZA(),f.TgZ(5,"div",18),f._UZ(6,"div",15),f._UZ(7,"div",16),f._UZ(8,"div",17),f.qZA(),f.BQk())}function IW(i,n){1&i&&(f.TgZ(0,"div",19),f.Hsn(1,1),f.qZA())}function SW(i,n){if(1&i&&(f.ynx(0),f.Hsn(1,2),f.TgZ(2,"span"),f._uU(3),f.qZA(),f.BQk()),2&i){const r=f.oxw(2);f.xp6(3),f.Oqu(r._control.placeholder)}}function TW(i,n){1&i&&f.Hsn(0,3,["*ngSwitchCase","true"])}function DW(i,n){1&i&&(f.TgZ(0,"span",23),f._uU(1," *"),f.qZA())}function AW(i,n){if(1&i){const r=f.EpF();f.TgZ(0,"label",20,21),f.NdJ("cdkObserveContent",function(){return f.CHM(r),f.oxw().updateOutlineGap()}),f.YNc(2,SW,4,1,"ng-container",12),f.YNc(3,TW,1,0,"ng-content",12),f.YNc(4,DW,2,0,"span",22),f.qZA()}if(2&i){const r=f.oxw();f.ekj("mat-empty",r._control.empty&&!r._shouldAlwaysFloat())("mat-form-field-empty",r._control.empty&&!r._shouldAlwaysFloat())("mat-accent","accent"==r.color)("mat-warn","warn"==r.color),f.Q6J("cdkObserveContentDisabled","outline"!=r.appearance)("id",r._labelId)("ngSwitch",r._hasLabel()),f.uIk("for",r._control.id)("aria-owns",r._control.id),f.xp6(2),f.Q6J("ngSwitchCase",!1),f.xp6(1),f.Q6J("ngSwitchCase",!0),f.xp6(1),f.Q6J("ngIf",!r.hideRequiredMarker&&r._control.required&&!r._control.disabled)}}function xW(i,n){1&i&&(f.TgZ(0,"div",24),f.Hsn(1,4),f.qZA())}function MW(i,n){if(1&i&&(f.TgZ(0,"div",25,26),f._UZ(2,"span",27),f.qZA()),2&i){const r=f.oxw();f.xp6(2),f.ekj("mat-accent","accent"==r.color)("mat-warn","warn"==r.color)}}function RW(i,n){if(1&i&&(f.TgZ(0,"div"),f.Hsn(1,5),f.qZA()),2&i){const r=f.oxw();f.Q6J("@transitionMessages",r._subscriptAnimationState)}}function kW(i,n){if(1&i&&(f.TgZ(0,"div",31),f._uU(1),f.qZA()),2&i){const r=f.oxw(2);f.Q6J("id",r._hintLabelId),f.xp6(1),f.Oqu(r.hintLabel)}}function NW(i,n){if(1&i&&(f.TgZ(0,"div",28),f.YNc(1,kW,2,2,"div",29),f.Hsn(2,6),f._UZ(3,"div",30),f.Hsn(4,7),f.qZA()),2&i){const r=f.oxw();f.Q6J("@transitionMessages",r._subscriptAnimationState),f.xp6(1),f.Q6J("ngIf",r.hintLabel)}}const OW=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],PW=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],CU=new f.OlP("MatError"),LW={transitionMessages:ex("transitionMessages",[Yg("enter",Xa({opacity:1,transform:"translateY(0%)"})),E0("void => enter",[Xa({opacity:0,transform:"translateY(-5px)"}),b0("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let AP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i}),i})();const IU=new f.OlP("MatHint");let SU=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["mat-label"]]}),i})(),BW=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["mat-placeholder"]]}),i})();const TU=new f.OlP("MatPrefix"),DU=new f.OlP("MatSuffix");let AU=0;const jW=I0(class{constructor(i){this._elementRef=i}},"primary"),HW=new f.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),MU=new f.OlP("MatFormField");let RU=(()=>{class i extends jW{constructor(r,s,o,c,h,m,y,C){super(r),this._changeDetectorRef=s,this._dir=c,this._defaults=h,this._platform=m,this._ngZone=y,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ct.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+AU++,this._labelId="mat-form-field-label-"+AU++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==C,this.appearance=h&&h.appearance?h.appearance:"legacy",this._hideRequiredMarker=!(!h||null==h.hideRequiredMarker)&&h.hideRequiredMarker}get appearance(){return this._appearance}set appearance(r){const s=this._appearance;this._appearance=r||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&s!==r&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(r){this._hideRequiredMarker=nr(r)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(r){this._hintLabel=r,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(r){r!==this._floatLabel&&(this._floatLabel=r||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(r){this._explicitFormFieldControl=r}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const r=this._control;r.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${r.controlType}`),r.stateChanges.pipe(ms(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),r.ngControl&&r.ngControl.valueChanges&&r.ngControl.valueChanges.pipe(Is(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Is(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,uu.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ms(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ms(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Is(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(r){const s=this._control?this._control.ngControl:null;return s&&s[r]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Rg(this._label.nativeElement,"transitionend").pipe(gs(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let r=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&r.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const s=this._hintChildren?this._hintChildren.find(c=>"start"===c.align):null,o=this._hintChildren?this._hintChildren.find(c=>"end"===c.align):null;s?r.push(s.id):this._hintLabel&&r.push(this._hintLabelId),o&&r.push(o.id)}else this._errorChildren&&r.push(...this._errorChildren.map(s=>s.id));this._control.setDescribedByIds(r)}}_validateControlChild(){}updateOutlineGap(){const r=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&r&&r.children.length&&r.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let s=0,o=0;const c=this._connectionContainerRef.nativeElement,h=c.querySelectorAll(".mat-form-field-outline-start"),m=c.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const y=c.getBoundingClientRect();if(0===y.width&&0===y.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const C=this._getStartEnd(y),T=r.children,x=this._getStartEnd(T[0].getBoundingClientRect());let R=0;for(let O=0;O<T.length;O++)R+=T[O].offsetWidth;s=Math.abs(x-C)-5,o=R>0?.75*R+10:0}for(let y=0;y<h.length;y++)h[y].style.width=`${s}px`;for(let y=0;y<m.length;y++)m[y].style.width=`${o}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(r){return this._dir&&"rtl"===this._dir.value?r.right:r.left}_isAttachedToDOM(){const r=this._elementRef.nativeElement;if(r.getRootNode){const s=r.getRootNode();return s&&s!==r}return document.documentElement.contains(r)}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.SBq),f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(df,8),f.Y36(HW,8),f.Y36(gn),f.Y36(f.R0b),f.Y36(el,8))},i.\u0275cmp=f.Xpm({type:i,selectors:[["mat-form-field"]],contentQueries:function(r,s,o){if(1&r&&(f.Suo(o,AP,5),f.Suo(o,AP,7),f.Suo(o,SU,5),f.Suo(o,SU,7),f.Suo(o,BW,5),f.Suo(o,CU,5),f.Suo(o,IU,5),f.Suo(o,TU,5),f.Suo(o,DU,5)),2&r){let c;f.iGM(c=f.CRH())&&(s._controlNonStatic=c.first),f.iGM(c=f.CRH())&&(s._controlStatic=c.first),f.iGM(c=f.CRH())&&(s._labelChildNonStatic=c.first),f.iGM(c=f.CRH())&&(s._labelChildStatic=c.first),f.iGM(c=f.CRH())&&(s._placeholderChild=c.first),f.iGM(c=f.CRH())&&(s._errorChildren=c),f.iGM(c=f.CRH())&&(s._hintChildren=c),f.iGM(c=f.CRH())&&(s._prefixChildren=c),f.iGM(c=f.CRH())&&(s._suffixChildren=c)}},viewQuery:function(r,s){if(1&r&&(f.Gf(vW,5),f.Gf(bW,7),f.Gf(EW,5),f.Gf(wW,5)),2&r){let o;f.iGM(o=f.CRH())&&(s.underlineRef=o.first),f.iGM(o=f.CRH())&&(s._connectionContainerRef=o.first),f.iGM(o=f.CRH())&&(s._inputContainerRef=o.first),f.iGM(o=f.CRH())&&(s._label=o.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(r,s){2&r&&f.ekj("mat-form-field-appearance-standard","standard"==s.appearance)("mat-form-field-appearance-fill","fill"==s.appearance)("mat-form-field-appearance-outline","outline"==s.appearance)("mat-form-field-appearance-legacy","legacy"==s.appearance)("mat-form-field-invalid",s._control.errorState)("mat-form-field-can-float",s._canLabelFloat())("mat-form-field-should-float",s._shouldLabelFloat())("mat-form-field-has-label",s._hasFloatingLabel())("mat-form-field-hide-placeholder",s._hideControlPlaceholder())("mat-form-field-disabled",s._control.disabled)("mat-form-field-autofilled",s._control.autofilled)("mat-focused",s._control.focused)("ng-untouched",s._shouldForward("untouched"))("ng-touched",s._shouldForward("touched"))("ng-pristine",s._shouldForward("pristine"))("ng-dirty",s._shouldForward("dirty"))("ng-valid",s._shouldForward("valid"))("ng-invalid",s._shouldForward("invalid"))("ng-pending",s._shouldForward("pending"))("_mat-animation-noopable",!s._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[f._Bn([{provide:MU,useExisting:i}]),f.qOj],ngContentSelectors:PW,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(r,s){1&r&&(f.F$t(OW),f.TgZ(0,"div",0),f.TgZ(1,"div",1,2),f.NdJ("click",function(c){return s._control.onContainerClick&&s._control.onContainerClick(c)}),f.YNc(3,CW,9,0,"ng-container",3),f.YNc(4,IW,2,0,"div",4),f.TgZ(5,"div",5,6),f.Hsn(7),f.TgZ(8,"span",7),f.YNc(9,AW,5,16,"label",8),f.qZA(),f.qZA(),f.YNc(10,xW,2,0,"div",9),f.qZA(),f.YNc(11,MW,3,4,"div",10),f.TgZ(12,"div",11),f.YNc(13,RW,2,1,"div",12),f.YNc(14,NW,5,2,"div",13),f.qZA(),f.qZA()),2&r&&(f.xp6(3),f.Q6J("ngIf","outline"==s.appearance),f.xp6(1),f.Q6J("ngIf",s._prefixChildren.length),f.xp6(5),f.Q6J("ngIf",s._hasFloatingLabel()),f.xp6(1),f.Q6J("ngIf",s._suffixChildren.length),f.xp6(1),f.Q6J("ngIf","outline"!=s.appearance),f.xp6(1),f.Q6J("ngSwitch",s._getDisplayedMessages()),f.xp6(1),f.Q6J("ngSwitchCase","error"),f.xp6(1),f.Q6J("ngSwitchCase","hint"))},directives:[Ni,Qi,Mr,EG],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[LW.transitionMessages]},changeDetection:0}),i})(),kU=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[Rr,Sr,JL],Sr]}),i})();const NU=u0({passive:!0});let OU=(()=>{class i{constructor(r,s){this._platform=r,this._ngZone=s,this._monitoredElements=new Map}monitor(r){if(!this._platform.isBrowser)return mi.E;const s=Ja(r),o=this._monitoredElements.get(s);if(o)return o.subject;const c=new ct.xQ,h="cdk-text-field-autofilled",m=y=>{"cdk-text-field-autofill-start"!==y.animationName||s.classList.contains(h)?"cdk-text-field-autofill-end"===y.animationName&&s.classList.contains(h)&&(s.classList.remove(h),this._ngZone.run(()=>c.next({target:y.target,isAutofilled:!1}))):(s.classList.add(h),this._ngZone.run(()=>c.next({target:y.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{s.addEventListener("animationstart",m,NU),s.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(s,{subject:c,unlisten:()=>{s.removeEventListener("animationstart",m,NU)}}),c}stopMonitoring(r){const s=Ja(r),o=this._monitoredElements.get(s);o&&(o.unlisten(),o.subject.complete(),s.classList.remove("cdk-text-field-autofill-monitored"),s.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(s))}ngOnDestroy(){this._monitoredElements.forEach((r,s)=>this.stopMonitoring(s))}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(gn),f.LFG(f.R0b))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(gn),f.LFG(f.R0b))},token:i,providedIn:"root"}),i})(),PU=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[kg]]}),i})();var $W=B(1555);function FU(...i){if(1===i.length){const n=i[0];if((0,Hc.k)(n))return Rx(n,null);if((0,$W.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){const r=Object.keys(n);return Rx(r.map(s=>n[s]),r)}}if("function"==typeof i[i.length-1]){const n=i.pop();return Rx(i=1===i.length&&(0,Hc.k)(i[0])?i[0]:i,null).pipe((0,it.U)(r=>n(...r)))}return Rx(i,null)}function Rx(i,n){return new bn.y(r=>{const s=i.length;if(0===s)return void r.complete();const o=new Array(s);let c=0,h=0;for(let m=0;m<s;m++){const y=(0,cn.D)(i[m]);let C=!1;r.add(y.subscribe({next:T=>{C||(C=!0,h++),o[m]=T},error:T=>r.error(T),complete:()=>{c++,(c===s||!C)&&(h===s&&r.next(n?n.reduce((T,x,R)=>(T[x]=o[R],T),{}):o),r.complete())}}))}})}let LU=(()=>{class i{constructor(r,s){this._renderer=r,this._elementRef=s,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,s){this._renderer.setProperty(this._elementRef.nativeElement,r,s)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.Qsj),f.Y36(f.SBq))},i.\u0275dir=f.lG2({type:i}),i})(),tm=(()=>{class i extends LU{}return i.\u0275fac=function(){let n;return function(s){return(n||(n=f.n5z(i)))(s||i)}}(),i.\u0275dir=f.lG2({type:i,features:[f.qOj]}),i})();const Sc=new f.OlP("NgValueAccessor"),qW={provide:Sc,useExisting:(0,f.Gpc)(()=>A0),multi:!0},YW=new f.OlP("CompositionEventMode");let A0=(()=>{class i extends LU{constructor(r,s,o){super(r,s),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const i=j()?j().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(YW,8))},i.\u0275dir=f.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&f.NdJ("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[f._Bn([qW]),f.qOj]}),i})();const us=new f.OlP("NgValidators"),bf=new f.OlP("NgAsyncValidators");function YU(i){return null!=i}function KU(i){const n=(0,f.QGY)(i)?(0,cn.D)(i):i;return(0,f.CqO)(n),n}function ZU(i){let n={};return i.forEach(r=>{n=null!=r?Object.assign(Object.assign({},n),r):n}),0===Object.keys(n).length?null:n}function QU(i,n){return n.map(r=>r(i))}function JU(i){return i.map(n=>function(i){return!i.validate}(n)?n:r=>n.validate(r))}function xP(i){return null!=i?function(i){if(!i)return null;const n=i.filter(YU);return 0==n.length?null:function(r){return ZU(QU(r,n))}}(JU(i)):null}function MP(i){return null!=i?function(i){if(!i)return null;const n=i.filter(YU);return 0==n.length?null:function(r){return FU(QU(r,n).map(KU)).pipe((0,it.U)(ZU))}}(JU(i)):null}function t2(i,n){return null===i?[n]:Array.isArray(i)?[...i,n]:[i,n]}function n2(i){return i._rawValidators}function r2(i){return i._rawAsyncValidators}function RP(i){return i?Array.isArray(i)?i:[i]:[]}function kx(i,n){return Array.isArray(i)?i.includes(n):i===n}function s2(i,n){const r=RP(n);return RP(i).forEach(o=>{kx(r,o)||r.push(o)}),r}function o2(i,n){return RP(n).filter(r=>!kx(i,r))}let a2=(()=>{class i{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=xP(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=MP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,s){return!!this.control&&this.control.hasError(r,s)}getError(r,s){return this.control?this.control.getError(r,s):null}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i}),i})(),Ds=(()=>{class i extends a2{get formDirective(){return null}get path(){return null}}return i.\u0275fac=function(){let n;return function(s){return(n||(n=f.n5z(i)))(s||i)}}(),i.\u0275dir=f.lG2({type:i,features:[f.qOj]}),i})();class ed extends a2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let kP=(()=>{class i extends class{constructor(n){this._cd=n}is(n){var r,s,o;return"submitted"===n?!!(null===(r=this._cd)||void 0===r?void 0:r.submitted):!!(null===(o=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===o?void 0:o[n])}}{constructor(r){super(r)}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(ed,2))},i.\u0275dir=f.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&f.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[f.qOj]}),i})();function x0(i,n){PP(i,n),n.valueAccessor.writeValue(i.value),function(i,n){n.valueAccessor.registerOnChange(r=>{i._pendingValue=r,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&c2(i,n)})}(i,n),function(i,n){const r=(s,o)=>{n.valueAccessor.writeValue(s),o&&n.viewToModelUpdate(s)};i.registerOnChange(r),n._registerOnDestroy(()=>{i._unregisterOnChange(r)})}(i,n),function(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&c2(i,n),"submit"!==i.updateOn&&i.markAsTouched()})}(i,n),function(i,n){if(n.valueAccessor.setDisabledState){const r=s=>{n.valueAccessor.setDisabledState(s)};i.registerOnDisabledChange(r),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(r)})}}(i,n)}function Px(i,n,r=!0){const s=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(s),n.valueAccessor.registerOnTouched(s)),Lx(i,n),i&&(n._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Fx(i,n){i.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(n)})}function PP(i,n){const r=n2(i);null!==n.validator?i.setValidators(t2(r,n.validator)):"function"==typeof r&&i.setValidators([r]);const s=r2(i);null!==n.asyncValidator?i.setAsyncValidators(t2(s,n.asyncValidator)):"function"==typeof s&&i.setAsyncValidators([s]);const o=()=>i.updateValueAndValidity();Fx(n._rawValidators,o),Fx(n._rawAsyncValidators,o)}function Lx(i,n){let r=!1;if(null!==i){if(null!==n.validator){const o=n2(i);if(Array.isArray(o)&&o.length>0){const c=o.filter(h=>h!==n.validator);c.length!==o.length&&(r=!0,i.setValidators(c))}}if(null!==n.asyncValidator){const o=r2(i);if(Array.isArray(o)&&o.length>0){const c=o.filter(h=>h!==n.asyncValidator);c.length!==o.length&&(r=!0,i.setAsyncValidators(c))}}}const s=()=>{};return Fx(n._rawValidators,s),Fx(n._rawAsyncValidators,s),r}function c2(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function u2(i,n){PP(i,n)}function d2(i,n){i._syncPendingControls(),n.forEach(r=>{const s=r.control;"submit"===s.updateOn&&s._pendingChange&&(r.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}function Vx(i,n){const r=i.indexOf(n);r>-1&&i.splice(r,1)}const M0="VALID",Bx="INVALID",Rv="PENDING",R0="DISABLED";function VP(i){return(UP(i)?i.validators:i)||null}function h2(i){return Array.isArray(i)?xP(i):i||null}function BP(i,n){return(UP(n)?n.asyncValidators:i)||null}function f2(i){return Array.isArray(i)?MP(i):i||null}function UP(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class jP{constructor(n,r){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=r,this._composedValidatorFn=h2(this._rawValidators),this._composedAsyncValidatorFn=f2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===M0}get invalid(){return this.status===Bx}get pending(){return this.status==Rv}get disabled(){return this.status===R0}get enabled(){return this.status!==R0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=h2(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=f2(n)}addValidators(n){this.setValidators(s2(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(s2(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(o2(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(o2(n,this._rawAsyncValidators))}hasValidator(n){return kx(this._rawValidators,n)}hasAsyncValidator(n){return kx(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Rv,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=R0,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(s=>s(!0))}enable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=M0,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===M0||this.status===Rv)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?R0:M0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Rv,this._hasOwnPendingAsyncValidator=!0;const r=KU(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,r={}){this.errors=n,this._updateControlsErrors(!1!==r.emitEvent)}get(n){return function(i,n,r){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let s=i;return n.forEach(o=>{s=s instanceof HP?s.controls.hasOwnProperty(o)?s.controls[o]:null:s instanceof c4&&s.at(o)||null}),s}(this,n)}getError(n,r){const s=r?this.get(r):this;return s&&s.errors?s.errors[n]:null}hasError(n,r){return!!this.getError(n,r)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?R0:this.errors?Bx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rv)?Rv:this._anyControlsHaveStatus(Bx)?Bx:M0}_anyControlsHaveStatus(n){return this._anyControls(r=>r.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){UP(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ux extends jP{constructor(n=null,r,s){super(VP(r),BP(s,r)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,r={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==r.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==r.emitViewToModelChange)),this.updateValueAndValidity(r)}patchValue(n,r={}){this.setValue(n,r)}reset(n=null,r={}){this._applyFormState(n),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Vx(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Vx(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class HP extends jP{constructor(n,r,s){super(VP(r),BP(s,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,r){return this.controls[n]?this.controls[n]:(this.controls[n]=r,r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange),r)}addControl(n,r,s={}){this.registerControl(n,r),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}setControl(n,r,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],r&&this.registerControl(n,r),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,r={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(s=>{this._throwIfControlMissing(s),this.controls[s].setValue(n[s],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(Object.keys(n).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(n[s],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n={},r={}){this._forEachChild((s,o)=>{s.reset(n[o],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this._reduceChildren({},(n,r,s)=>(n[s]=r instanceof Ux?r.value:r.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(r,s)=>!!s._syncPendingControls()||r);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(r=>{const s=this.controls[r];s&&n(s,r)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const r of Object.keys(this.controls)){const s=this.controls[r];if(this.contains(r)&&n(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,r,s)=>((r.enabled||this.disabled)&&(n[s]=r.value),n))}_reduceChildren(n,r){let s=n;return this._forEachChild((o,c)=>{s=r(s,o,c)}),s}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((r,s)=>{if(void 0===n[s])throw new Error(`Must supply a value for form control with name: '${s}'.`)})}}class c4 extends jP{constructor(n,r,s){super(VP(r),BP(s,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,r={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}insert(n,r,s={}){this.controls.splice(n,0,r),this._registerControl(r),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:r.emitEvent})}setControl(n,r,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),r&&(this.controls.splice(n,0,r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,r={}){this._checkAllValuesPresent(n),n.forEach((s,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(s,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(n.forEach((s,o)=>{this.at(o)&&this.at(o).patchValue(s,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n=[],r={}){this._forEachChild((s,o)=>{s.reset(n[o],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this.controls.map(n=>n instanceof Ux?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(r=>r._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((r,s)=>!!s._syncPendingControls()||r,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((r,s)=>{n(r,s)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(r=>r.enabled&&n(r))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((r,s)=>{if(void 0===n[s])throw new Error(`Must supply a value for form control at index: ${s}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const u4={provide:Ds,useExisting:(0,f.Gpc)(()=>jx)},k0=(()=>Promise.resolve(null))();let jx=(()=>{class i extends Ds{constructor(r,s){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new f.vpe,this.form=new HP({},xP(r),MP(s))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){k0.then(()=>{const s=this._findContainer(r.path);r.control=s.registerControl(r.name,r.control),x0(r.control,r),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){k0.then(()=>{const s=this._findContainer(r.path);s&&s.removeControl(r.name),Vx(this._directives,r)})}addFormGroup(r){k0.then(()=>{const s=this._findContainer(r.path),o=new HP({});u2(o,r),s.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){k0.then(()=>{const s=this._findContainer(r.path);s&&s.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,s){k0.then(()=>{this.form.get(r.path).setValue(s)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,d2(this.form,this._directives),this.ngSubmit.emit(r),!1}onReset(){this.resetForm()}resetForm(r){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(us,10),f.Y36(bf,10))},i.\u0275dir=f.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&f.NdJ("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([u4]),f.qOj]}),i})();const h4={provide:ed,useExisting:(0,f.Gpc)(()=>Hx)},m2=(()=>Promise.resolve(null))();let Hx=(()=>{class i extends ed{constructor(r,s,o,c){super(),this.control=new Ux,this._registered=!1,this.update=new f.vpe,this._parent=r,this._setValidators(s),this._setAsyncValidators(o),this.valueAccessor=function(i,n){if(!n)return null;let r,s,o;return Array.isArray(n),n.forEach(c=>{c.constructor===A0?r=c:function(i){return Object.getPrototypeOf(i.constructor)===tm}(c)?s=c:o=c}),o||s||r||null}(0,c)}ngOnChanges(r){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in r&&this._updateDisabled(r),function(i,n){if(!i.hasOwnProperty("model"))return!1;const r=i.model;return!!r.isFirstChange()||!Object.is(n,r.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(i,n){return[...n.path,i]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){x0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){m2.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1})})}_updateDisabled(r){const s=r.isDisabled.currentValue,o=""===s||s&&"false"!==s;m2.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(Ds,9),f.Y36(us,10),f.Y36(bf,10),f.Y36(Sc,10))},i.\u0275dir=f.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([h4]),f.qOj,f.TTD]}),i})(),y2=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({}),i})();const v4={provide:Ds,useExisting:(0,f.Gpc)(()=>Gx)};let Gx=(()=>{class i extends Ds{constructor(r,s){super(),this.validators=r,this.asyncValidators=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(r),this._setAsyncValidators(s)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Lx(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){const s=this.form.get(r.path);return x0(s,r),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),s}getControl(r){return this.form.get(r.path)}removeControl(r){Px(r.control||null,r,!1),Vx(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,s){this.form.get(r.path).setValue(s)}onSubmit(r){return this.submitted=!0,d2(this.form,this.directives),this.ngSubmit.emit(r),!1}onReset(){this.resetForm()}resetForm(r){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{const s=r.control,o=this.form.get(r.path);s!==o&&(Px(s||null,r),o instanceof Ux&&(x0(o,r),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){const s=this.form.get(r.path);u2(s,r),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){const s=this.form.get(r.path);s&&function(i,n){return Lx(i,n)}(s,r)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){PP(this.form,this),this._oldForm&&Lx(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(us,10),f.Y36(bf,10))},i.\u0275dir=f.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(r,s){1&r&&f.NdJ("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([v4]),f.qOj,f.TTD]}),i})(),P2=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[y2]]}),i})(),F2=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[P2]}),i})();const L4=new f.OlP("MAT_INPUT_VALUE_ACCESSOR"),V4=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let B4=0;const U4=Iz(class{constructor(i,n,r,s){this._defaultErrorStateMatcher=i,this._parentForm=n,this._parentFormGroup=r,this.ngControl=s}});let L2=(()=>{class i extends U4{constructor(r,s,o,c,h,m,y,C,T,x){super(m,c,h,o),this._elementRef=r,this._platform=s,this._autofillMonitor=C,this._formField=x,this._uid="mat-input-"+B4++,this.focused=!1,this.stateChanges=new ct.xQ,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>CA().has(U));const R=this._elementRef.nativeElement,O=R.nodeName.toLowerCase();this._inputValueAccessor=y||R,this._previousNativeValue=this.value,this.id=this.id,s.IOS&&T.runOutsideAngular(()=>{r.nativeElement.addEventListener("keyup",U=>{const te=U.target;!te.value&&0===te.selectionStart&&0===te.selectionEnd&&(te.setSelectionRange(1,1),te.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===O,this._isTextarea="textarea"===O,this._isInFormField=!!x,this._isNativeSelect&&(this.controlType=R.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(r){this._disabled=nr(r),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(r){this._id=r||this._uid}get required(){return this._required}set required(r){this._required=nr(r)}get type(){return this._type}set type(r){this._type=r||"text",this._validateType(),!this._isTextarea&&CA().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(r){r!==this.value&&(this._inputValueAccessor.value=r,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(r){this._readonly=nr(r)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(r=>{this.autofilled=r.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(r){this._elementRef.nativeElement.focus(r)}_focusChanged(r){r!==this.focused&&(this.focused=r,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var r,s;const o=(null===(s=null===(r=this._formField)||void 0===r?void 0:r._hideControlPlaceholder)||void 0===s?void 0:s.call(r))?null:this.placeholder;if(o!==this._previousPlaceholder){const c=this._elementRef.nativeElement;this._previousPlaceholder=o,o?c.setAttribute("placeholder",o):c.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const r=this._elementRef.nativeElement.value;this._previousNativeValue!==r&&(this._previousNativeValue=r,this.stateChanges.next())}_validateType(){V4.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let r=this._elementRef.nativeElement.validity;return r&&r.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const r=this._elementRef.nativeElement,s=r.options[0];return this.focused||r.multiple||!this.empty||!!(r.selectedIndex>-1&&s&&s.label)}return this.focused||!this.empty}setDescribedByIds(r){r.length?this._elementRef.nativeElement.setAttribute("aria-describedby",r.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.SBq),f.Y36(gn),f.Y36(ed,10),f.Y36(jx,8),f.Y36(Gx,8),f.Y36(vB),f.Y36(L4,10),f.Y36(OU),f.Y36(f.R0b),f.Y36(MU,8))},i.\u0275dir=f.lG2({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(r,s){1&r&&f.NdJ("focus",function(){return s._focusChanged(!0)})("blur",function(){return s._focusChanged(!1)})("input",function(){return s._onInput()}),2&r&&(f.Ikx("disabled",s.disabled)("required",s.required),f.uIk("id",s.id)("data-placeholder",s.placeholder)("readonly",s.readonly&&!s._isNativeSelect||null)("aria-invalid",s.empty&&s.required?null:s.errorState)("aria-required",s.required),f.ekj("mat-input-server",s._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[f._Bn([{provide:AP,useExisting:i}]),f.qOj,f.TTD]}),i})(),V2=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[vB],imports:[[PU,kU,Sr],PU,kU]}),i})(),j4=(()=>{class i{constructor(r,s,o,c){this.auth=r,this.postService=s,this.notifcationService=o,this.storage=c,this.image=null}ngOnInit(){}createPost(){const r={author:this.auth.authState.displayName||this.auth.authState.email,authorId:this.auth.currentUserId,content:this.content,image:this.image,published:new Date,title:this.title};this.postService.create(r),this.notifcationService.success("Article Added!"),this.clearFields()}uploadImage(r){const s=r.target.files[0],o=`posts/${s.name}`;if("image"!==s.type.split("/")[0])this.notifcationService.error("Chose an image please");else{const c=this.storage.upload(o,s),h=this.storage.ref(o);this.uploadPercent=c.percentageChanges(),c.snapshotChanges().pipe(El(()=>{this.downloadUrl=h.getDownloadURL(),this.downloadUrl.subscribe(m=>this.image=m)})).subscribe(),console.log(this.downloadUrl),console.log(this.image)}}clearFields(){this.title="",this.content=""}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(__),f.Y36(o0),f.Y36(lP),f.Y36(q6))},i.\u0275cmp=f.Xpm({type:i,selectors:[["app-post-dashboard"]],decls:21,vars:9,consts:[["type","file","name","file","id","file",3,"change"],[3,"hidden"],["mode","determinate",3,"value"],[3,"src"],["matInput","","placeholder","Post Title",3,"ngModel","ngModelChange"],["matInput","","placeholder","Post Content","rows","10",3,"ngModel","ngModelChange"],["mat-flat-button","","color","accent",1,"btnCreate",3,"disabled","click"]],template:function(r,s){1&r&&(f.TgZ(0,"section"),f.TgZ(1,"mat-accordion"),f.TgZ(2,"mat-expansion-panel"),f.TgZ(3,"mat-expansion-panel-header"),f.TgZ(4,"mat-panel-title"),f._uU(5," Create a post "),f.qZA(),f.qZA(),f.TgZ(6,"div"),f.TgZ(7,"input",0),f.NdJ("change",function(c){return s.uploadImage(c)}),f.qZA(),f.TgZ(8,"div",1),f._UZ(9,"mat-progress-bar",2),f.ALo(10,"async"),f.qZA(),f.TgZ(11,"div",1),f._UZ(12,"img",3),f.qZA(),f.qZA(),f.TgZ(13,"mat-form-field"),f.TgZ(14,"input",4),f.NdJ("ngModelChange",function(c){return s.title=c}),f.qZA(),f.qZA(),f._UZ(15,"br"),f.TgZ(16,"mat-form-field"),f.TgZ(17,"textarea",5),f.NdJ("ngModelChange",function(c){return s.content=c}),f.qZA(),f.qZA(),f._UZ(18,"br"),f.TgZ(19,"button",6),f.NdJ("click",function(){return s.createPost()}),f._uU(20,"Create Post"),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&r&&(f.xp6(8),f.Q6J("hidden",!s.uploadPercent),f.xp6(1),f.s9C("value",f.lcZ(10,7,s.uploadPercent)),f.xp6(2),f.Q6J("hidden",!s.image),f.xp6(1),f.Q6J("src",s.image||"//:0",f.LSH),f.xp6(2),f.Q6J("ngModel",s.title),f.xp6(3),f.Q6J("ngModel",s.content),f.xp6(2),f.Q6J("disabled",!s.title||!s.content))},directives:[hW,yU,vU,dW,yW,RU,L2,A0,kP,Hx,Tv],pipes:[Ff],styles:["section[_ngcontent-%COMP%]{max-width:700px;margin:6em auto}mat-form-field[_ngcontent-%COMP%]{width:100%}.btnCreate[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%]{width:100%;height:50%}"]}),i})();const H4=["*",[["mat-card-footer"]]],G4=["*","mat-card-footer"];let B2=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),i})(),U2=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),i})(),j2=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),i})(),H2=(()=>{class i{constructor(){this.align="start"}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(r,s){2&r&&f.ekj("mat-card-actions-align-end","end"===s.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),i})(),G2=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),i})(),$2=(()=>{class i{constructor(r){this._animationMode=r}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(el,8))},i.\u0275cmp=f.Xpm({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(r,s){2&r&&f.ekj("_mat-animation-noopable","NoopAnimations"===s._animationMode)},exportAs:["matCard"],ngContentSelectors:G4,decls:2,vars:0,template:function(r,s){1&r&&(f.F$t(H4),f.Hsn(0),f.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),i})(),z2=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[Sr],Sr]}),i})();var Y4=B(205),q2=B(8819);class W2{}class td{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(r=>{const s=r.indexOf(":");if(s>0){const o=r.slice(0,s),c=o.toLowerCase(),h=r.slice(s+1).trim();this.maybeSetNormalizedName(o,c),this.headers.has(c)?this.headers.get(c).push(h):this.headers.set(c,[h])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(r=>{let s=n[r];const o=r.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(o,s),this.maybeSetNormalizedName(r,o))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const r=this.headers.get(n.toLowerCase());return r&&r.length>0?r[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,r){return this.clone({name:n,value:r,op:"a"})}set(n,r){return this.clone({name:n,value:r,op:"s"})}delete(n,r){return this.clone({name:n,value:r,op:"d"})}maybeSetNormalizedName(n,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,n)}init(){this.lazyInit&&(this.lazyInit instanceof td?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(r=>{this.headers.set(r,n.headers.get(r)),this.normalizedNames.set(r,n.normalizedNames.get(r))})}clone(n){const r=new td;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof td?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([n]),r}applyUpdate(n){const r=n.name.toLowerCase();switch(n.op){case"a":case"s":let s=n.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(n.name,r);const o=("a"===n.op?this.headers.get(r):void 0)||[];o.push(...s),this.headers.set(r,o);break;case"d":const c=n.value;if(c){let h=this.headers.get(r);if(!h)return;h=h.filter(m=>-1===c.indexOf(m)),0===h.length?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,h)}else this.headers.delete(r),this.normalizedNames.delete(r)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(r=>n(this.normalizedNames.get(r),this.headers.get(r)))}}class K4{encodeKey(n){return K2(n)}encodeValue(n){return K2(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const Q4=/%(\d[a-f0-9])/gi,J4={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function K2(i){return encodeURIComponent(i).replace(Q4,(n,r)=>{var s;return null!==(s=J4[r])&&void 0!==s?s:n})}function Z2(i){return`${i}`}class wf{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new K4,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(i,n){const r=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(o=>{const c=o.indexOf("="),[h,m]=-1==c?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,c)),n.decodeValue(o.slice(c+1))],y=r.get(h)||[];y.push(m),r.set(h,y)}),r}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(r=>{const s=n.fromObject[r];this.map.set(r,Array.isArray(s)?s:[s])})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const r=this.map.get(n);return r?r[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,r){return this.clone({param:n,value:r,op:"a"})}appendAll(n){const r=[];return Object.keys(n).forEach(s=>{const o=n[s];Array.isArray(o)?o.forEach(c=>{r.push({param:s,value:c,op:"a"})}):r.push({param:s,value:o,op:"a"})}),this.clone(r)}set(n,r){return this.clone({param:n,value:r,op:"s"})}delete(n,r){return this.clone({param:n,value:r,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const r=this.encoder.encodeKey(n);return this.map.get(n).map(s=>r+"="+this.encoder.encodeValue(s)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const r=new wf({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(n),r}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const r=("a"===n.op?this.map.get(n.param):void 0)||[];r.push(Z2(n.value)),this.map.set(n.param,r);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let s=this.map.get(n.param)||[];const o=s.indexOf(Z2(n.value));-1!==o&&s.splice(o,1),s.length>0?this.map.set(n.param,s):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class X4{constructor(){this.map=new Map}set(n,r){return this.map.set(n,r),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}keys(){return this.map.keys()}}function Q2(i){return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer}function J2(i){return"undefined"!=typeof Blob&&i instanceof Blob}function X2(i){return"undefined"!=typeof FormData&&i instanceof FormData}class N0{constructor(n,r,s,o){let c;if(this.url=r,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==s?s:null,c=o):c=s,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new td),this.context||(this.context=new X4),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=r;else{const m=r.indexOf("?");this.urlWithParams=r+(-1===m?"?":m<r.length-1?"&":"")+h}}else this.params=new wf,this.urlWithParams=r}serializeBody(){return null===this.body?null:Q2(this.body)||J2(this.body)||X2(this.body)||function(i){return"undefined"!=typeof URLSearchParams&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof wf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||X2(this.body)?null:J2(this.body)?this.body.type||null:Q2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof wf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){var r;const s=n.method||this.method,o=n.url||this.url,c=n.responseType||this.responseType,h=void 0!==n.body?n.body:this.body,m=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,y=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let C=n.headers||this.headers,T=n.params||this.params;const x=null!==(r=n.context)&&void 0!==r?r:this.context;return void 0!==n.setHeaders&&(C=Object.keys(n.setHeaders).reduce((R,O)=>R.set(O,n.setHeaders[O]),C)),n.setParams&&(T=Object.keys(n.setParams).reduce((R,O)=>R.set(O,n.setParams[O]),T)),new N0(s,o,h,{params:T,headers:C,context:x,reportProgress:y,responseType:c,withCredentials:m})}}var Yr=(()=>((Yr=Yr||{})[Yr.Sent=0]="Sent",Yr[Yr.UploadProgress=1]="UploadProgress",Yr[Yr.ResponseHeader=2]="ResponseHeader",Yr[Yr.DownloadProgress=3]="DownloadProgress",Yr[Yr.Response=4]="Response",Yr[Yr.User=5]="User",Yr))();class $x extends class{constructor(n,r=200,s="OK"){this.headers=n.headers||new td,this.status=void 0!==n.status?n.status:r,this.statusText=n.statusText||s,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(n={}){super(n),this.type=Yr.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new $x({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}function QP(i,n){return{body:n,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let zx=(()=>{class i{constructor(r){this.handler=r}request(r,s,o={}){let c;if(r instanceof N0)c=r;else{let y,C;y=o.headers instanceof td?o.headers:new td(o.headers),o.params&&(C=o.params instanceof wf?o.params:new wf({fromObject:o.params})),c=new N0(r,s,void 0!==o.body?o.body:null,{headers:y,context:o.context,params:C,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const h=(0,qe.of)(c).pipe($c(y=>this.handler.handle(y)));if(r instanceof N0||"events"===o.observe)return h;const m=h.pipe(ar(y=>y instanceof $x));switch(o.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return m.pipe((0,it.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return m.pipe((0,it.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return m.pipe((0,it.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));case"json":default:return m.pipe((0,it.U)(y=>y.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,s={}){return this.request("DELETE",r,s)}get(r,s={}){return this.request("GET",r,s)}head(r,s={}){return this.request("HEAD",r,s)}jsonp(r,s){return this.request("JSONP",r,{params:(new wf).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,s={}){return this.request("OPTIONS",r,s)}patch(r,s,o={}){return this.request("PATCH",r,QP(o,s))}post(r,s,o={}){return this.request("POST",r,QP(o,s))}put(r,s,o={}){return this.request("PUT",r,QP(o,s))}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(W2))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac}),i})();const l8=["*"];function sj(i){return Error(`Unable to find icon with the name "${i}"`)}function oj(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function aj(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class nm{constructor(n,r,s){this.url=n,this.svgText=r,this.options=s}}let qx=(()=>{class i{constructor(r,s,o,c){this._httpClient=r,this._sanitizer=s,this._errorHandler=c,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=o}addSvgIcon(r,s,o){return this.addSvgIconInNamespace("",r,s,o)}addSvgIconLiteral(r,s,o){return this.addSvgIconLiteralInNamespace("",r,s,o)}addSvgIconInNamespace(r,s,o,c){return this._addSvgIconConfig(r,s,new nm(o,null,c))}addSvgIconResolver(r){return this._resolvers.push(r),this}addSvgIconLiteralInNamespace(r,s,o,c){const h=this._sanitizer.sanitize(f.q3G.HTML,o);if(!h)throw aj(o);return this._addSvgIconConfig(r,s,new nm("",h,c))}addSvgIconSet(r,s){return this.addSvgIconSetInNamespace("",r,s)}addSvgIconSetLiteral(r,s){return this.addSvgIconSetLiteralInNamespace("",r,s)}addSvgIconSetInNamespace(r,s,o){return this._addSvgIconSetConfig(r,new nm(s,null,o))}addSvgIconSetLiteralInNamespace(r,s,o){const c=this._sanitizer.sanitize(f.q3G.HTML,s);if(!c)throw aj(s);return this._addSvgIconSetConfig(r,new nm("",c,o))}registerFontClassAlias(r,s=r){return this._fontCssClassesByAlias.set(r,s),this}classNameForFontAlias(r){return this._fontCssClassesByAlias.get(r)||r}setDefaultFontSetClass(r){return this._defaultFontSetClass=r,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(r){const s=this._sanitizer.sanitize(f.q3G.RESOURCE_URL,r);if(!s)throw oj(r);const o=this._cachedIconsByUrl.get(s);return o?(0,qe.of)(Wx(o)):this._loadSvgIconFromConfig(new nm(r,null)).pipe((0,Gn.b)(c=>this._cachedIconsByUrl.set(s,c)),(0,it.U)(c=>Wx(c)))}getNamedSvgIcon(r,s=""){const o=lj(s,r);let c=this._svgIconConfigs.get(o);if(c)return this._getSvgFromConfig(c);if(c=this._getIconConfigFromResolvers(s,r),c)return this._svgIconConfigs.set(o,c),this._getSvgFromConfig(c);const h=this._iconSetConfigs.get(s);return h?this._getSvgFromIconSetConfigs(r,h):(0,Y4._)(sj(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(r){return r.svgText?(0,qe.of)(Wx(this._svgElementFromConfig(r))):this._loadSvgIconFromConfig(r).pipe((0,it.U)(s=>Wx(s)))}_getSvgFromIconSetConfigs(r,s){const o=this._extractIconWithNameFromAnySet(r,s);return o?(0,qe.of)(o):FU(s.filter(h=>!h.svgText).map(h=>this._loadSvgIconSetFromConfig(h).pipe(Zs(m=>{const C=`Loading icon set URL: ${this._sanitizer.sanitize(f.q3G.RESOURCE_URL,h.url)} failed: ${m.message}`;return this._errorHandler.handleError(new Error(C)),(0,qe.of)(null)})))).pipe((0,it.U)(()=>{const h=this._extractIconWithNameFromAnySet(r,s);if(!h)throw sj(r);return h}))}_extractIconWithNameFromAnySet(r,s){for(let o=s.length-1;o>=0;o--){const c=s[o];if(c.svgText&&c.svgText.indexOf(r)>-1){const h=this._svgElementFromConfig(c),m=this._extractSvgIconFromSet(h,r,c.options);if(m)return m}}return null}_loadSvgIconFromConfig(r){return this._fetchIcon(r).pipe((0,Gn.b)(s=>r.svgText=s),(0,it.U)(()=>this._svgElementFromConfig(r)))}_loadSvgIconSetFromConfig(r){return r.svgText?(0,qe.of)(null):this._fetchIcon(r).pipe((0,Gn.b)(s=>r.svgText=s))}_extractSvgIconFromSet(r,s,o){const c=r.querySelector(`[id="${s}"]`);if(!c)return null;const h=c.cloneNode(!0);if(h.removeAttribute("id"),"svg"===h.nodeName.toLowerCase())return this._setSvgAttributes(h,o);if("symbol"===h.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(h),o);const m=this._svgElementFromString("<svg></svg>");return m.appendChild(h),this._setSvgAttributes(m,o)}_svgElementFromString(r){const s=this._document.createElement("DIV");s.innerHTML=r;const o=s.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(r){const s=this._svgElementFromString("<svg></svg>"),o=r.attributes;for(let c=0;c<o.length;c++){const{name:h,value:m}=o[c];"id"!==h&&s.setAttribute(h,m)}for(let c=0;c<r.childNodes.length;c++)r.childNodes[c].nodeType===this._document.ELEMENT_NODE&&s.appendChild(r.childNodes[c].cloneNode(!0));return s}_setSvgAttributes(r,s){return r.setAttribute("fit",""),r.setAttribute("height","100%"),r.setAttribute("width","100%"),r.setAttribute("preserveAspectRatio","xMidYMid meet"),r.setAttribute("focusable","false"),s&&s.viewBox&&r.setAttribute("viewBox",s.viewBox),r}_fetchIcon(r){var s;const{url:o,options:c}=r,h=null!==(s=null==c?void 0:c.withCredentials)&&void 0!==s&&s;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==o)throw Error(`Cannot fetch icon from URL "${o}".`);const m=this._sanitizer.sanitize(f.q3G.RESOURCE_URL,o);if(!m)throw oj(o);const y=this._inProgressUrlFetches.get(m);if(y)return y;const C=this._httpClient.get(m,{responseType:"text",withCredentials:h}).pipe(El(()=>this._inProgressUrlFetches.delete(m)),(0,q2.B)());return this._inProgressUrlFetches.set(m,C),C}_addSvgIconConfig(r,s,o){return this._svgIconConfigs.set(lj(r,s),o),this}_addSvgIconSetConfig(r,s){const o=this._iconSetConfigs.get(r);return o?o.push(s):this._iconSetConfigs.set(r,[s]),this}_svgElementFromConfig(r){if(!r.svgElement){const s=this._svgElementFromString(r.svgText);this._setSvgAttributes(s,r.options),r.svgElement=s}return r.svgElement}_getIconConfigFromResolvers(r,s){for(let o=0;o<this._resolvers.length;o++){const c=this._resolvers[o](s,r);if(c)return d8(c)?new nm(c.url,null,c.options):new nm(c,null)}}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(zx,8),f.LFG(Ro),f.LFG(se,8),f.LFG(f.qLn))},i.\u0275prov=f.Yz7({factory:function(){return new i(f.LFG(zx,8),f.LFG(Ro),f.LFG(se,8),f.LFG(f.qLn))},token:i,providedIn:"root"}),i})();function Wx(i){return i.cloneNode(!0)}function lj(i,n){return i+":"+n}function d8(i){return!(!i.url||!i.options)}const h8=I0(class{constructor(i){this._elementRef=i}}),f8=new f.OlP("mat-icon-location",{providedIn:"root",factory:function(){const i=(0,f.f3M)(se),n=i?i.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}}),cj=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],m8=cj.map(i=>`[${i}]`).join(", "),_8=/^url\(['"]?#(.*?)['"]?\)$/;let uj=(()=>{class i extends h8{constructor(r,s,o,c,h){super(r),this._iconRegistry=s,this._location=c,this._errorHandler=h,this._inline=!1,this._currentIconFetch=Vi.w.EMPTY,o||r.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(r){this._inline=nr(r)}get svgIcon(){return this._svgIcon}set svgIcon(r){r!==this._svgIcon&&(r?this._updateSvgIcon(r):this._svgIcon&&this._clearSvgElement(),this._svgIcon=r)}get fontSet(){return this._fontSet}set fontSet(r){const s=this._cleanupFontValue(r);s!==this._fontSet&&(this._fontSet=s,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(r){const s=this._cleanupFontValue(r);s!==this._fontIcon&&(this._fontIcon=s,this._updateFontIconClasses())}_splitIconName(r){if(!r)return["",""];const s=r.split(":");switch(s.length){case 1:return["",s[0]];case 2:return s;default:throw Error(`Invalid icon name: "${r}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const r=this._elementsWithExternalReferences;if(r&&r.size){const s=this._location.getPathname();s!==this._previousPath&&(this._previousPath=s,this._prependPathToReferences(s))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(r){this._clearSvgElement();const s=r.querySelectorAll("style");for(let c=0;c<s.length;c++)s[c].textContent+=" ";const o=this._location.getPathname();this._previousPath=o,this._cacheChildrenWithExternalReferences(r),this._prependPathToReferences(o),this._elementRef.nativeElement.appendChild(r)}_clearSvgElement(){const r=this._elementRef.nativeElement;let s=r.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();s--;){const o=r.childNodes[s];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&r.removeChild(o)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const r=this._elementRef.nativeElement,s=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();s!=this._previousFontSetClass&&(this._previousFontSetClass&&r.classList.remove(this._previousFontSetClass),s&&r.classList.add(s),this._previousFontSetClass=s),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&r.classList.remove(this._previousFontIconClass),this.fontIcon&&r.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(r){return"string"==typeof r?r.trim().split(" ")[0]:r}_prependPathToReferences(r){const s=this._elementsWithExternalReferences;s&&s.forEach((o,c)=>{o.forEach(h=>{c.setAttribute(h.name,`url('${r}#${h.value}')`)})})}_cacheChildrenWithExternalReferences(r){const s=r.querySelectorAll(m8),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let c=0;c<s.length;c++)cj.forEach(h=>{const m=s[c],y=m.getAttribute(h),C=y?y.match(_8):null;if(C){let T=o.get(m);T||(T=[],o.set(m,T)),T.push({name:h,value:C[1]})}})}_updateSvgIcon(r){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),r){const[s,o]=this._splitIconName(r);s&&(this._svgNamespace=s),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,s).pipe(gs(1)).subscribe(c=>this._setSvgElement(c),c=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${s}:${o}! ${c.message}`))})}}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.SBq),f.Y36(qx),f.$8M("aria-hidden"),f.Y36(f8),f.Y36(f.qLn))},i.\u0275cmp=f.Xpm({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(r,s){2&r&&(f.uIk("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet),f.ekj("mat-icon-inline",s.inline)("mat-icon-no-color","primary"!==s.color&&"accent"!==s.color&&"warn"!==s.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[f.qOj],ngContentSelectors:l8,decls:1,vars:0,template:function(r,s){1&r&&(f.F$t(),f.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),i})(),dj=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[Sr],Sr]}),i})();function y8(i,n){if(1&i){const r=f.EpF();f.TgZ(0,"button",6),f.NdJ("click",function(){return f.CHM(r),f.oxw().editing=!1}),f._uU(1,"Cancel"),f.qZA()}}function v8(i,n){if(1&i){const r=f.EpF();f.TgZ(0,"mat-card-actions",11),f.TgZ(1,"button",12),f.NdJ("click",function(){return f.CHM(r),f.oxw(2).editing=!0}),f.TgZ(2,"mat-icon"),f._uU(3,"edit"),f.qZA(),f.qZA(),f.TgZ(4,"button",12),f.NdJ("click",function(){return f.CHM(r),f.oxw(2).delete()}),f.TgZ(5,"mat-icon"),f._uU(6,"delete"),f.qZA(),f.qZA(),f.qZA()}}function b8(i,n){if(1&i&&(f.TgZ(0,"mat-card",7),f._UZ(1,"img",8),f.TgZ(2,"mat-card-title",9),f._uU(3),f.qZA(),f.TgZ(4,"mat-card-content"),f._uU(5),f.qZA(),f.TgZ(6,"mat-card-subtitle"),f._uU(7),f.ALo(8,"date"),f.qZA(),f.YNc(9,v8,7,0,"mat-card-actions",10),f.qZA()),2&i){const r=f.oxw();f.xp6(1),f.Q6J("src",r.post.image,f.LSH),f.xp6(1),f.s9C("routerLink",r.post.id),f.xp6(1),f.Oqu(r.post.title),f.xp6(2),f.Oqu(r.post.content),f.xp6(2),f.AsE("Posted by ",r.post.author," \u2022 on ",f.xi3(8,7,r.post.published.toDate(),"fullDate")," "),f.xp6(2),f.Q6J("ngIf",r.auth.currentUserId===r.post.authorId)}}let E8=(()=>{class i{constructor(r,s,o,c,h){this.route=r,this.postService=s,this.router=o,this.auth=c,this.notifcationService=h,this.editing=!1}ngOnInit(){this.getPost()}getPost(){const r=this.route.snapshot.paramMap.get("id");return this.postService.getPostData(r).subscribe(s=>this.post=s)}updatePost(){const r={title:this.post.title,content:this.post.content},s=this.route.snapshot.paramMap.get("id");this.postService.update(s,r),this.editing=!1}delete(){const r=this.route.snapshot.paramMap.get("id");this.postService.delete(r),this.router.navigate(["/blog"]),this.notifcationService.info("Post deleted")}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(Tt),f.Y36(o0),f.Y36(Hi),f.Y36(__),f.Y36(lP))},i.\u0275cmp=f.Xpm({type:i,selectors:[["app-post-detail"]],decls:15,vars:6,consts:[[3,"hidden"],["matInput","","placeholder","Post title","name","title",3,"ngModel","ngModelChange"],["matInput","","placeholder","Post content","name","content","rows","10",3,"ngModel","ngModelChange"],["mat-raised-button","","color","accent",3,"click"],["mat-button","",3,"click",4,"ngIf"],["style","width: 600px; margin: 2em auto;",4,"ngIf"],["mat-button","",3,"click"],[2,"width","600px","margin","2em auto"],["mat-card-image","",3,"src"],[3,"routerLink"],["align","end",4,"ngIf"],["align","end"],["mat-icon-button","",3,"click"]],template:function(r,s){1&r&&(f.TgZ(0,"div",0),f.TgZ(1,"mat-card"),f.TgZ(2,"h1"),f._uU(3,"Edit Post"),f.qZA(),f.TgZ(4,"mat-form-field"),f.TgZ(5,"input",1),f.NdJ("ngModelChange",function(c){return s.post.title=c}),f.qZA(),f.qZA(),f._UZ(6,"br"),f.TgZ(7,"mat-form-field"),f.TgZ(8,"textarea",2),f.NdJ("ngModelChange",function(c){return s.post.content=c}),f.qZA(),f.qZA(),f._UZ(9,"br"),f.TgZ(10,"button",3),f.NdJ("click",function(){return s.updatePost()}),f._uU(11,"Save"),f.qZA(),f.YNc(12,y8,2,0,"button",4),f.qZA(),f.qZA(),f.TgZ(13,"div",0),f.YNc(14,b8,10,10,"mat-card",5),f.qZA()),2&r&&(f.Q6J("hidden",!s.editing),f.xp6(5),f.Q6J("ngModel",s.post.title),f.xp6(3),f.Q6J("ngModel",s.post.content),f.xp6(4),f.Q6J("ngIf",s.editing),f.xp6(1),f.Q6J("hidden",s.editing),f.xp6(1),f.Q6J("ngIf",s.post))},directives:[$2,RU,L2,A0,kP,Hx,Tv,Ni,G2,U2,au,B2,j2,H2,uj],pipes:[vm],styles:["mat-card[_ngcontent-%COMP%] {\n        margin: 10px auto;\n        max-width: 700px;\n    }\n\n    mat-form-field[_ngcontent-%COMP%] {\n        width: 100%;\n    }"]}),i})();const w8=["*",[["mat-toolbar-row"]]],C8=["*","mat-toolbar-row"],I8=I0(class{constructor(i){this._elementRef=i}});let hj=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=f.lG2({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),fj=(()=>{class i extends I8{constructor(r,s,o){super(r),this._platform=s,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(f.SBq),f.Y36(gn),f.Y36(se))},i.\u0275cmp=f.Xpm({type:i,selectors:[["mat-toolbar"]],contentQueries:function(r,s,o){if(1&r&&f.Suo(o,hj,5),2&r){let c;f.iGM(c=f.CRH())&&(s._toolbarRows=c)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(r,s){2&r&&f.ekj("mat-toolbar-multiple-rows",s._toolbarRows.length>0)("mat-toolbar-single-row",0===s._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[f.qOj],ngContentSelectors:C8,decls:2,vars:0,template:function(r,s){1&r&&(f.F$t(w8),f.Hsn(0),f.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),pj=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[Sr],Sr]}),i})();function S8(i,n){if(1&i){const r=f.EpF();f.TgZ(0,"mat-card-actions",7),f.TgZ(1,"button",8),f.NdJ("click",function(){f.CHM(r);const o=f.oxw().$implicit;return f.oxw().delete(o.id)}),f.TgZ(2,"mat-icon"),f._uU(3,"delete"),f.qZA(),f.qZA(),f.qZA()}}function T8(i,n){if(1&i&&(f.TgZ(0,"mat-card",3),f._UZ(1,"img",4),f.TgZ(2,"mat-card-title",5),f._uU(3),f.qZA(),f.TgZ(4,"mat-card-content"),f._uU(5),f.qZA(),f.TgZ(6,"mat-card-subtitle"),f._uU(7),f.ALo(8,"date"),f.qZA(),f.YNc(9,S8,4,0,"mat-card-actions",6),f.qZA()),2&i){const r=n.$implicit,s=f.oxw();f.xp6(1),f.Q6J("src",r.image,f.LSH),f.xp6(1),f.s9C("routerLink",r.id),f.xp6(1),f.Oqu(r.title),f.xp6(2),f.Oqu(r.content),f.xp6(2),f.AsE("Posted by ",r.author," \u2022 on ",f.xi3(8,7,r.published.toDate(),"fullDate")," "),f.xp6(2),f.Q6J("ngIf",s.auth.currentUserId===r.authorId)}}const D8=[{path:"",redirectTo:"/blog",pathMatch:"full"},{path:"blog",component:(()=>{class i{constructor(r,s){this.postsService=r,this.auth=s}ngOnInit(){this.posts=this.postsService.getPosts(),console.log(this.posts)}delete(r){this.postsService.delete(r)}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(o0),f.Y36(__))},i.\u0275cmp=f.Xpm({type:i,selectors:[["app-post-list"]],decls:6,vars:3,consts:[["color","accent"],["color","accent",1,"container"],["class","article-card",4,"ngFor","ngForOf"],[1,"article-card"],["mat-card-image","",3,"src"],[3,"routerLink"],["align","end",4,"ngIf"],["align","end"],["mat-icon-button","",3,"click"]],template:function(r,s){1&r&&(f.TgZ(0,"mat-toolbar",0),f.TgZ(1,"span"),f._uU(2,"Posts"),f.qZA(),f.qZA(),f.TgZ(3,"mat-card",1),f.YNc(4,T8,10,10,"mat-card",2),f.ALo(5,"async"),f.qZA()),2&r&&(f.xp6(4),f.Q6J("ngForOf",f.lcZ(5,1,s.posts)))},directives:[fj,$2,sn,G2,U2,au,B2,j2,Ni,H2,Tv,uj],pipes:[Ff,vm],styles:["@media (min-width: 768px){.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}}.container[_ngcontent-%COMP%]{margin:5em auto;width:80%;padding:2%;flex-wrap:wrap;justify-content:space-around}.article-card[_ngcontent-%COMP%]{max-width:350px;flex:1;margin:10px 10px 0;height:-moz-fit-content;height:fit-content}"]}),i})()},{path:"blog/:id",component:E8},{path:"dashboard",component:j4}];let Yx=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[$b.forRoot(D8)],$b]}),i})();const A8=function(){return["/dashboard"]};function x8(i,n){if(1&i){const r=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"button",5),f._uU(2,"Write a post"),f.qZA(),f.TgZ(3,"button",6),f.NdJ("click",function(){return f.CHM(r),f.oxw().auth.logout()}),f._uU(4,"Logout"),f.qZA(),f.qZA()}2&i&&(f.xp6(1),f.Q6J("routerLink",f.DdM(1,A8)))}function M8(i,n){if(1&i){const r=f.EpF();f.TgZ(0,"button",6),f.NdJ("click",function(){return f.CHM(r),f.oxw().auth.login()}),f._uU(1,"Login"),f.qZA()}}let R8=(()=>{class i{constructor(r){this.auth=r}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)(f.Y36(__))},i.\u0275cmp=f.Xpm({type:i,selectors:[["app-navbar"]],decls:9,vars:4,consts:[["color","primary",1,"mat-elevation-z6"],["routerLink","/blog",2,"cursor","pointer"],[1,"spacer",2,"flex","1"],[4,"ngIf","ngIfElse"],["showLogin",""],["mat-flat-button","","color","accent","routerLinkActive","router-link-active",3,"routerLink"],["mat-button","",3,"click"]],template:function(r,s){if(1&r&&(f.TgZ(0,"mat-toolbar",0),f.TgZ(1,"mat-toolbar-row"),f.TgZ(2,"span",1),f._uU(3,"Angular Blogspot"),f.qZA(),f._UZ(4,"span",2),f.YNc(5,x8,5,2,"div",3),f.ALo(6,"async"),f.YNc(7,M8,2,0,"ng-template",null,4,f.W1O),f.qZA(),f.qZA()),2&r){const o=f.MAs(8);f.xp6(5),f.Q6J("ngIf",f.lcZ(6,2,s.auth.afAuth.authState))("ngIfElse",o)}},directives:[fj,hj,au,Ni,Tv,l_],pipes:[Ff],encapsulation:2}),i})(),k8=(()=>{class i{constructor(){this.title="ng-blog"}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=f.Xpm({type:i,selectors:[["app-root"]],decls:2,vars:0,template:function(r,s){1&r&&(f._UZ(0,"app-navbar"),f._UZ(1,"router-outlet"))},directives:[R8,Wd],encapsulation:2}),i})(),N8=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[__],imports:[[Rr]]}),i})(),tF=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({imports:[[sP,pj,aP,V2,bU,wU,z2,dj],sP,pj,aP,V2,bU,wU,z2,dj]}),i})(),gj=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[lP],imports:[[Rr,F2,tF,Yx],Rr,F2,tF,Yx]}),i})();const mj_firebase={apiKey:"AIzaSyA4zj1SoABVlBUqTXraE4rF4TDjFUkJJlg",authDomain:"ng-blog-bc1b4.firebaseapp.com",projectId:"ng-blog-bc1b4",storageBucket:"ng-blog-bc1b4.appspot.com",messagingSenderId:"433929733964",appId:"1:433929733964:web:13de0bece3dfef829b71e9",measurementId:"G-6HMWJMD3TH"};class P8{constructor(n,r){this.observables=n,this.project=r}call(n,r){return r.subscribe(new F8(n,this.observables,this.project))}}class F8 extends db{constructor(n,r,s){super(n),this.observables=r,this.project=s,this.toRespond=[];const o=r.length;this.values=new Array(o);for(let c=0;c<o;c++)this.toRespond.push(c);for(let c=0;c<o;c++)this.add(Lm(this,r[c],void 0,c))}notifyNext(n,r,s){this.values[s]=r;const o=this.toRespond;if(o.length>0){const c=o.indexOf(s);-1!==c&&o.splice(c,1)}}notifyComplete(){}_next(n){if(0===this.toRespond.length){const r=[n,...this.values];this.project?this._tryProject(r):this.destination.next(r)}}_tryProject(n){let r;try{r=this.project.apply(this,n)}catch(s){return void this.destination.error(s)}this.destination.next(r)}}class V8{constructor(n){this.predicate=n}call(n,r){return r.subscribe(new B8(n,this.predicate))}}class B8 extends Vr.L{constructor(n,r){super(n),this.predicate=r,this.skipping=!0,this.index=0}_next(n){const r=this.destination;this.skipping&&this.tryCallPredicate(n),this.skipping||r.next(n)}tryCallPredicate(n){try{const r=this.predicate(n,this.index++);this.skipping=Boolean(r)}catch(r){this.destination.error(r)}}}let nF="";function _j(i){nF=i}class H8{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,r){null==r?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),(0,P.Pz)(r))}get(n){const r=this.domStorage_.getItem(this.prefixedName_(n));return null==r?null:(0,P.cI)(r)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class G8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,r){null==r?delete this.cache_[n]:this.cache_[n]=r}get(n){return(0,P.r3)(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const yj=function(i){try{if("undefined"!=typeof window&&void 0!==window[i]){const n=window[i];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new H8(n)}}catch(n){}return new G8},rm=yj("localStorage"),rF=yj("sessionStorage"),kv=new qo.Yd("@firebase/database"),vj=function(){let i=1;return function(){return i++}}(),bj=function(i){const n=(0,P.dS)(i),r=new P.gQ;r.update(n);const s=r.digest();return P.US.encodeByteArray(s)},O0=function(...i){let n="";for(let r=0;r<i.length;r++){const s=i[r];Array.isArray(s)||s&&"object"==typeof s&&"number"==typeof s.length?n+=O0.apply(null,s):n+="object"==typeof s?(0,P.Pz)(s):s,n+=" "}return n};let im=null,Ej=!0;const wj=function(i,n){(0,P.hu)(!n||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(kv.logLevel=qo.in.VERBOSE,im=kv.log.bind(kv),n&&rF.set("logging_enabled",!0)):"function"==typeof i?im=i:(im=null,rF.remove("logging_enabled"))},xi=function(...i){if(!0===Ej&&(Ej=!1,null===im&&!0===rF.get("logging_enabled")&&wj(!0)),im){const n=O0.apply(null,i);im(n)}},P0=function(i){return function(...n){xi(i,...n)}},iF=function(...i){const n="FIREBASE INTERNAL ERROR: "+O0(...i);kv.error(n)},Tc=function(...i){const n=`FIREBASE FATAL ERROR: ${O0(...i)}`;throw kv.error(n),new Error(n)},As=function(...i){const n="FIREBASE WARNING: "+O0(...i);kv.warn(n)},Kx=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},nd="[MIN_NAME]",Dc="[MAX_NAME]",sm=function(i,n){if(i===n)return 0;if(i===nd||n===Dc)return-1;if(n===nd||i===Dc)return 1;{const r=Zx(i),s=Zx(n);return null!==r?null!==s?r-s==0?i.length-n.length:r-s:-1:null!==s?1:i<n?-1:1}},q8=function(i,n){return i===n?0:i<n?-1:1},F0=function(i,n){if(n&&i in n)return n[i];throw new Error("Missing required key ("+i+") in object: "+(0,P.Pz)(n))},sF=function(i){if("object"!=typeof i||null===i)return(0,P.Pz)(i);const n=[];for(const s in i)n.push(s);n.sort();let r="{";for(let s=0;s<n.length;s++)0!==s&&(r+=","),r+=(0,P.Pz)(n[s]),r+=":",r+=sF(i[n[s]]);return r+="}",r},Cj=function(i,n){const r=i.length;if(r<=n)return[i];const s=[];for(let o=0;o<r;o+=n)s.push(i.substring(o,o+n>r?r:o+n));return s};function Mi(i,n){for(const r in i)i.hasOwnProperty(r)&&n(r,i[r])}const Ij=function(i){(0,P.hu)(!Kx(i),"Invalid JSON number");const s=1023;let o,c,h,m,y;0===i?(c=0,h=0,o=1/i==-1/0?1:0):(o=i<0,(i=Math.abs(i))>=Math.pow(2,1-s)?(m=Math.min(Math.floor(Math.log(i)/Math.LN2),s),c=m+s,h=Math.round(i*Math.pow(2,52-m)-Math.pow(2,52))):(c=0,h=Math.round(i/Math.pow(2,-1074))));const C=[];for(y=52;y;y-=1)C.push(h%2?1:0),h=Math.floor(h/2);for(y=11;y;y-=1)C.push(c%2?1:0),c=Math.floor(c/2);C.push(o?1:0),C.reverse();const T=C.join("");let x="";for(y=0;y<64;y+=8){let R=parseInt(T.substr(y,8),2).toString(16);1===R.length&&(R="0"+R),x+=R}return x.toLowerCase()},Z8=new RegExp("^-?(0*)\\d{1,10}$"),Sj=-2147483648,oF=2147483647,Zx=function(i){if(Z8.test(i)){const n=Number(i);if(n>=Sj&&n<=oF)return n}return null},Nv=function(i){try{i()}catch(n){setTimeout(()=>{throw As("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},L0=function(i,n){const r=setTimeout(i,n);return"object"==typeof r&&r.unref&&r.unref(),r};class J8{constructor(n,r){this.appName_=n,this.appCheckProvider=r,this.appCheck=null==r?void 0:r.getImmediate({optional:!0}),this.appCheck||null==r||r.get().then(s=>this.appCheck=s)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((r,s)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(r,s):r(null)},0)})}addTokenChangeListener(n){var r;null===(r=this.appCheckProvider)||void 0===r||r.get().then(s=>s.addTokenListener(n))}notifyForInvalidToken(){As(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class X8{constructor(n,r,s){this.appName_=n,this.firebaseOptions_=r,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(r=>r&&"auth/token-not-initialized"===r.code?(xi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,s)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(r,s):r(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(r=>r.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(r=>r.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',As(n)}}let V0=(()=>{class i{constructor(r){this.accessToken=r}getToken(r){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(r){r(this.accessToken)}removeTokenChangeListener(r){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const Mj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kj="websocket",Nj="long_polling";class lF{constructor(n,r,s,o,c=!1,h="",m=!1){this.secure=r,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=c,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rm.get("host:"+n)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&rm.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Oj(i,n,r){let s;if((0,P.hu)("string"==typeof n,"typeof type must == string"),(0,P.hu)("object"==typeof r,"typeof params must == object"),n===kj)s=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(n!==Nj)throw new Error("Unknown connection type: "+n);s=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(r.ns=i.namespace);const o=[];return Mi(r,(c,h)=>{o.push(c+"="+h)}),s+o.join("&")}class nY{constructor(){this.counters_={}}incrementCounter(n,r=1){(0,P.r3)(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=r}get(){return(0,P.p$)(this.counters_)}}const cF={},uF={};function dF(i){const n=i.toString();return cF[n]||(cF[n]=new nY),cF[n]}class iY{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,r){this.closeAfterResponse=n,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,r){for(this.pendingResponses[n]=r;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Nv(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ov{constructor(n,r,s,o,c,h,m){this.connId=n,this.repoInfo=r,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=P0(n),this.stats_=dF(r),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),Oj(r,Nj,y))}open(n,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new iY(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,P.Yr)()||"complete"===document.readyState)i();else{let n=!1;const r=function(){document.body?n||(n=!0,i()):setTimeout(r,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hF((...c)=>{const[h,m,y,C,T]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===h)this.id=m,this.password=y;else{if("close"!==h)throw new Error("Unrecognized command received: "+h);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[h,m]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const s={start:"t"};s.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(s.cb=this.scriptTagHolder.uniqueCallbackIdentifier),s.v="5",this.transportSessionId&&(s.s=this.transportSessionId),this.lastSessionId&&(s.ls=this.lastSessionId),this.applicationId&&(s.p=this.applicationId),this.appCheckToken&&(s.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Mj.test(location.hostname)&&(s.r="f");const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ov.forceAllow_=!0}static forceDisallow(){Ov.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Ov.forceAllow_&&(Ov.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const r=(0,P.Pz)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=(0,P.h$)(r),o=Cj(s,1840);for(let c=0;c<o.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[c]),this.curSegmentNum++}addDisconnectPingFrame(n,r){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const s={dframe:"t"};s.id=n,s.pw=r,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const r=(0,P.Pz)(n).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class hF{constructor(n,r,s,o){if(this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=n,this.onMessageCB=r;else{this.uniqueCallbackIdentifier=vj(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=r,this.myIFrame=hF.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){xi("frame writing exception"),m.stack&&xi(m.stack),xi(m)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||xi("No IE domain setting required")}catch(r){const s=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,r){for(this.myID=n,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;let r=this.urlFn(n),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+s.length<=1870;){const h=this.pendingSegs.shift();s=s+"&seg"+o+"="+h.seg+"&ts"+o+"="+h.ts+"&d"+o+"="+h.d,o++}return r+=s,this.addLongPollTag_(r,this.currentSerial),!0}return!1}enqueueSegment(n,r,s){this.pendingSegs.push({seg:n,ts:r,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(n,r){this.outstandingRequests.add(r);const s=()=>{this.outstandingRequests.delete(r),this.newRequest_()},o=setTimeout(s,Math.floor(25e3));this.addTag(n,()=>{clearTimeout(o),s()})}addTag(n,r){(0,P.Yr)()?this.doNodeLongPoll(n,r):setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=n,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||"loaded"===o||"complete"===o)&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),r())},s.onerror=()=>{xi("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch(s){}},Math.floor(1))}}let B0=null;"undefined"!=typeof MozWebSocket?B0=MozWebSocket:"undefined"!=typeof WebSocket&&(B0=WebSocket);let U0=(()=>{class i{constructor(r,s,o,c,h,m,y){this.connId=r,this.applicationId=o,this.appCheckToken=c,this.authToken=h,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=P0(this.connId),this.stats_=dF(s),this.connURL=i.connectionURL_(s,m,y,c),this.nodeAdmin=s.nodeAdmin}static connectionURL_(r,s,o,c){const h={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&Mj.test(location.hostname)&&(h.r="f"),s&&(h.s=s),o&&(h.ls=o),c&&(h.ac=c),Oj(r,kj,h)}open(r,s){this.onDisconnect=s,this.onMessage=r,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rm.set("previous_websocket_failure",!0);try{if((0,P.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${nF}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,m=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;m&&(c.proxy={origin:m}),this.mySock=new B0(this.connURL,[],c)}else this.mySock=new B0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const c=o.message||o.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const c=o.message||o.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let r=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(r=!0)}return!r&&null!==B0&&!i.forceDisallow_}static previouslyFailed(){return rm.isInMemoryStorage||!0===rm.get("previous_websocket_failure")}markConnectionHealthy(){rm.remove("previous_websocket_failure")}appendFrame_(r){if(this.frames.push(r),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const o=(0,P.cI)(s);this.onMessage(o)}}handleNewFrameCount_(r){this.totalFrames=r,this.frames=[]}extractFrameCount_(r){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),r.length<=6){const s=Number(r);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),r}handleIncomingFrame(r){if(null===this.mySock)return;const s=r.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(s);else{const o=this.extractFrameCount_(s);null!==o&&this.appendFrame_(o)}}send(r){this.resetKeepAlive();const s=(0,P.Pz)(r);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const o=Cj(s,16384);o.length>1&&this.sendString_(String(o.length));for(let c=0;c<o.length;c++)this.sendString_(o[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(r){try{this.mySock.send(r)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})();class fF{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Ov,U0]}initTransports_(n){const r=U0&&U0.isAvailable();let s=r&&!U0.previouslyFailed();if(n.webSocketOnly&&(r||As("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[U0];else{const o=this.transports_=[];for(const c of fF.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Wj{constructor(n,r,s,o,c,h,m,y,C,T){this.id=n,this.repoInfo_=r,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=c,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=y,this.onKill_=C,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=P0("c:"+this.id+":"),this.transportManager_=new fF(r),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,s)},Math.floor(0));const o=n.healthyTimeout||0;o>0&&(this.healthyTimeout_=L0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return r=>{n===this.conn_?this.onConnectionLost_(r):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return r=>{2!==this.state_&&(n===this.rx_?this.onPrimaryMessageReceived_(r):n===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(n){this.sendData_({t:"d",d:n})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if("t"in n){const r=n.t;"a"===r?this.upgradeIfSecondaryHealthy_():"r"===r?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===r&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const r=F0("t",n),s=F0("d",n);if("c"===r)this.onSecondaryControl_(s);else{if("d"!==r)throw new Error("Unknown protocol layer: "+r);this.pendingDataMessages.push(s)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const r=F0("t",n),s=F0("d",n);"c"===r?this.onControl_(s):"d"===r&&this.onDataMessage_(s)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const r=F0("t",n);if("d"in n){const s=n.d;if("h"===r)this.onHandshake_(s);else if("n"===r){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===r?this.onConnectionShutdown_(s):"r"===r?this.onReset_(s):"e"===r?iF("Server Error: "+s):"o"===r?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):iF("Unknown control packet command: "+r)}}onHandshake_(n){const r=n.ts,s=n.v,o=n.h;this.sessionId=n.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),"5"!==s&&As("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,s),L0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,r){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):L0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Yj{put(n,r,s,o){}merge(n,r,s,o){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,r,s){}onDisconnectMerge(n,r,s){}onDisconnectCancel(n,r){}reportStats(n){}}class Kj{constructor(n){this.allowedEvents_=n,this.listeners_={},(0,P.hu)(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...r){if(Array.isArray(this.listeners_[n])){const s=[...this.listeners_[n]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,r)}}on(n,r,s){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:r,context:s});const o=this.getInitialEvent(n);o&&r.apply(s,o)}off(n,r,s){this.validateEventType_(n);const o=this.listeners_[n]||[];for(let c=0;c<o.length;c++)if(o[c].callback===r&&(!s||s===o[c].context))return void o.splice(c,1)}validateEventType_(n){(0,P.hu)(this.allowedEvents_.find(r=>r===n),"Unknown event: "+n)}}class Jx extends Kj{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Jx}getInitialEvent(n){return(0,P.hu)("online"===n,"Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}class En{constructor(n,r){if(void 0===r){this.pieces_=n.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=r}toString(){let n="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)""!==this.pieces_[r]&&(n+="/"+this.pieces_[r]);return n||"/"}}function hn(){return new En("")}function zt(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Cf(i){return i.pieces_.length-i.pieceNum_}function On(i){let n=i.pieceNum_;return n<i.pieces_.length&&n++,new En(i.pieces_,n)}function gF(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function j0(i,n=0){return i.pieces_.slice(i.pieceNum_+n)}function Jj(i){if(i.pieceNum_>=i.pieces_.length)return null;const n=[];for(let r=i.pieceNum_;r<i.pieces_.length-1;r++)n.push(i.pieces_[r]);return new En(n,0)}function rr(i,n){const r=[];for(let s=i.pieceNum_;s<i.pieces_.length;s++)r.push(i.pieces_[s]);if(n instanceof En)for(let s=n.pieceNum_;s<n.pieces_.length;s++)r.push(n.pieces_[s]);else{const s=n.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&r.push(s[o])}return new En(r,0)}function qt(i){return i.pieceNum_>=i.pieces_.length}function xs(i,n){const r=zt(i),s=zt(n);if(null===r)return n;if(r===s)return xs(On(i),On(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+i+")")}function TY(i,n){const r=j0(i,0),s=j0(n,0);for(let o=0;o<r.length&&o<s.length;o++){const c=sm(r[o],s[o]);if(0!==c)return c}return r.length===s.length?0:r.length<s.length?-1:1}function mF(i,n){if(Cf(i)!==Cf(n))return!1;for(let r=i.pieceNum_,s=n.pieceNum_;r<=i.pieces_.length;r++,s++)if(i.pieces_[r]!==n.pieces_[s])return!1;return!0}function la(i,n){let r=i.pieceNum_,s=n.pieceNum_;if(Cf(i)>Cf(n))return!1;for(;r<i.pieces_.length;){if(i.pieces_[r]!==n.pieces_[s])return!1;++r,++s}return!0}class DY{constructor(n,r){this.errorPrefix_=r,this.parts_=j0(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=(0,P.ug)(this.parts_[s]);Xj(this)}}function Xj(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+om(i))}function om(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class _F extends Kj{constructor(){let n,r;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(r="visibilitychange",n="hidden"):void 0!==document.mozHidden?(r="mozvisibilitychange",n="mozHidden"):void 0!==document.msHidden?(r="msvisibilitychange",n="msHidden"):void 0!==document.webkitHidden&&(r="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const s=!document[n];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new _F}getInitialEvent(n){return(0,P.hu)("visible"===n,"Unknown event type: "+n),[this.visible_]}}const H0=1e3;let eM,am=(()=>{class i extends Yj{constructor(r,s,o,c,h,m,y,C){if(super(),this.repoInfo_=r,this.applicationId_=s,this.onDataUpdate_=o,this.onConnectStatus_=c,this.onServerInfoUpdate_=h,this.authTokenProvider_=m,this.appCheckTokenProvider_=y,this.authOverride_=C,this.id=i.nextPersistentConnectionId_++,this.log_=P0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=H0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_F.getInstance().on("visible",this.onVisible_,this),-1===r.host.indexOf("fblocal")&&Jx.getInstance().on("online",this.onOnline_,this)}sendRequest(r,s,o){const c=++this.requestNumber_,h={r:c,a:r,b:s};this.log_((0,P.Pz)(h)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(h),o&&(this.requestCBHash_[c]=o)}get(r){this.initConnection_();const s=new P.BH,o={p:r._path.toString(),q:r._queryObject},c={action:"g",request:o,onComplete:m=>{const y=m.d;"ok"===m.s?(this.onDataUpdate_(o.p,y,!1,null),s.resolve(y)):s.reject(y)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const h=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const m=this.outstandingGets_[h];void 0===m||c!==m||(delete this.outstandingGets_[h],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+h+" timed out on connection"),s.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(h),s.promise}listen(r,s,o,c){this.initConnection_();const h=r._queryIdentifier,m=r._path.toString();this.log_("Listen called for "+m+" "+h),this.listens.has(m)||this.listens.set(m,new Map),(0,P.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(m).has(h),"listen() called twice for same path/queryId.");const y={onComplete:c,hashFn:s,query:r,tag:o};this.listens.get(m).set(h,y),this.connected_&&this.sendListen_(y)}sendGet_(r){const s=this.outstandingGets_[r];this.sendRequest("g",s.request,o=>{delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(o)})}sendListen_(r){const s=r.query,o=s._path.toString(),c=s._queryIdentifier;this.log_("Listen on "+o+" for "+c);const h={p:o};r.tag&&(h.q=s._queryObject,h.t=r.tag),h.h=r.hashFn(),this.sendRequest("q",h,y=>{const C=y.d,T=y.s;i.warnOnListenWarnings_(C,s),(this.listens.get(o)&&this.listens.get(o).get(c))===r&&(this.log_("listen response",y),"ok"!==T&&this.removeListen_(o,c),r.onComplete&&r.onComplete(T,C))})}static warnOnListenWarnings_(r,s){if(r&&"object"==typeof r&&(0,P.r3)(r,"w")){const o=(0,P.DV)(r,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const c='".indexOn": "'+s._queryParams.getIndex().toString()+'"',h=s._path.toString();As(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${h} to your security rules for better performance.`)}}}refreshAuthToken(r){this.authToken_=r,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(r)}reduceReconnectDelayIfAdminCredential_(r){(r&&40===r.length||(0,P.GJ)(r))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(r){this.appCheckToken_=r,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const r=this.authToken_,s=(0,P.w9)(r)?"auth":"gauth",o={cred:r};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(s,o,c=>{const h=c.s,m=c.d||"error";this.authToken_===r&&("ok"===h?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(h,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},r=>{const s=r.s,o=r.d||"error";"ok"===s?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,o)})}unlisten(r,s){const o=r._path.toString(),c=r._queryIdentifier;this.log_("Unlisten called for "+o+" "+c),(0,P.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,c)&&this.connected_&&this.sendUnlisten_(o,c,r._queryObject,s)}sendUnlisten_(r,s,o,c){this.log_("Unlisten on "+r+" for "+s);const h={p:r};c&&(h.q=o,h.t=c),this.sendRequest("n",h)}onDisconnectPut(r,s,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",r,s,o):this.onDisconnectRequestQueue_.push({pathString:r,action:"o",data:s,onComplete:o})}onDisconnectMerge(r,s,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",r,s,o):this.onDisconnectRequestQueue_.push({pathString:r,action:"om",data:s,onComplete:o})}onDisconnectCancel(r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",r,null,s):this.onDisconnectRequestQueue_.push({pathString:r,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(r,s,o,c){const h={p:s,d:o};this.log_("onDisconnect "+r,h),this.sendRequest(r,h,m=>{c&&setTimeout(()=>{c(m.s,m.d)},Math.floor(0))})}put(r,s,o,c){this.putInternal("p",r,s,o,c)}merge(r,s,o,c){this.putInternal("m",r,s,o,c)}putInternal(r,s,o,c,h){this.initConnection_();const m={p:s,d:o};void 0!==h&&(m.h=h),this.outstandingPuts_.push({action:r,request:m,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+s)}sendPut_(r){const s=this.outstandingPuts_[r].action,o=this.outstandingPuts_[r].request,c=this.outstandingPuts_[r].onComplete;this.outstandingPuts_[r].queued=this.connected_,this.sendRequest(s,o,h=>{this.log_(s+" response",h),delete this.outstandingPuts_[r],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(h.s,h.d)})}reportStats(r){if(this.connected_){const s={c:r};this.log_("reportStats",s),this.sendRequest("s",s,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(r){if("r"in r){this.log_("from server: "+(0,P.Pz)(r));const s=r.r,o=this.requestCBHash_[s];o&&(delete this.requestCBHash_[s],o(r.b))}else{if("error"in r)throw"A server-side error has occurred: "+r.error;"a"in r&&this.onDataPush_(r.a,r.b)}}onDataPush_(r,s){this.log_("handleServerMessage",r,s),"d"===r?this.onDataUpdate_(s.p,s.d,!1,s.t):"m"===r?this.onDataUpdate_(s.p,s.d,!0,s.t):"c"===r?this.onListenRevoked_(s.p,s.q):"ac"===r?this.onAuthRevoked_(s.s,s.d):"apc"===r?this.onAppCheckRevoked_(s.s,s.d):"sd"===r?this.onSecurityDebugPacket_(s):iF("Unrecognized action received from server: "+(0,P.Pz)(r)+"\nAre you using the latest client?")}onReady_(r,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(r),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(r){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(r))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(r){r&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0)),this.visible_=r}onOnline_(r){r?(this.log_("Browser went online."),this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=H0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const r=(new Date).getTime()-this.lastConnectionAttemptTime_;let s=Math.max(0,this.reconnectDelay_-r);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var r=this;return(0,Ce.Z)(function*(){if(r.shouldReconnect_()){r.log_("Making a connection attempt"),r.lastConnectionAttemptTime_=(new Date).getTime(),r.lastConnectionEstablishedTime_=null;const s=r.onDataMessage_.bind(r),o=r.onReady_.bind(r),c=r.onRealtimeDisconnect_.bind(r),h=r.id+":"+i.nextConnectionId_++,m=r.lastSessionId;let y=!1,C=null;const T=function(){C?C.close():(y=!0,c())};r.realtime_={close:T,sendRequest:function(O){(0,P.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(O)}};const R=r.forceTokenRefresh_;r.forceTokenRefresh_=!1;try{const[O,U]=yield Promise.all([r.authTokenProvider_.getToken(R),r.appCheckTokenProvider_.getToken(R)]);y?xi("getToken() completed but was canceled"):(xi("getToken() completed. Creating connection."),r.authToken_=O&&O.accessToken,r.appCheckToken_=U&&U.token,C=new Wj(h,r.repoInfo_,r.applicationId_,r.appCheckToken_,r.authToken_,s,o,c,te=>{As(te+" ("+r.repoInfo_.toString()+")"),r.interrupt("server_kill")},m))}catch(O){r.log_("Failed to get token: "+O),y||(r.repoInfo_.nodeAdmin&&As(O),T())}}})()}interrupt(r){xi("Interrupting connection for reason: "+r),this.interruptReasons_[r]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(r){xi("Resuming connection for reason: "+r),delete this.interruptReasons_[r],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(r){const s=r-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let r=0;r<this.outstandingPuts_.length;r++){const s=this.outstandingPuts_[r];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[r],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(r,s){let o;o=s?s.map(h=>sF(h)).join("$"):"default";const c=this.removeListen_(r,o);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(r,s){const o=new En(r).toString();let c;if(this.listens.has(o)){const h=this.listens.get(o);c=h.get(s),h.delete(s),0===h.size&&this.listens.delete(o)}else c=void 0;return c}onAuthRevoked_(r,s){xi("Auth token revoked: "+r+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===r||"permission_denied"===r)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(r,s){xi("App check token revoked: "+r+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===r||"permission_denied"===r)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(r){this.securityDebugCallback_?this.securityDebugCallback_(r):"msg"in r&&console.log("FIREBASE: "+r.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const r of this.listens.values())for(const s of r.values())this.sendListen_(s);for(let r=0;r<this.outstandingPuts_.length;r++)this.outstandingPuts_[r]&&this.sendPut_(r);for(;this.onDisconnectRequestQueue_.length;){const r=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(r.action,r.pathString,r.data,r.onComplete)}for(let r=0;r<this.outstandingGets_.length;r++)this.outstandingGets_[r]&&this.sendGet_(r)}sendConnectStats_(){const r={};let s="js";(0,P.Yr)()&&(s=this.repoInfo_.nodeAdmin?"admin_node":"node"),r["sdk."+s+"."+nF.replace(/\./g,"-")]=1,(0,P.uI)()?r["framework.cordova"]=1:(0,P.b$)()&&(r["framework.reactnative"]=1),this.reportStats(r)}shouldReconnect_(){const r=Jx.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&r}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class Jt{constructor(n,r){this.name=n,this.node=r}static Wrap(n,r){return new Jt(n,r)}}class Xx{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,r){const s=new Jt(nd,n),o=new Jt(nd,r);return 0!==this.compare(s,o)}minPost(){return Jt.MIN}}class nH extends Xx{static get __EMPTY_NODE(){return eM}static set __EMPTY_NODE(n){eM=n}compare(n,r){return sm(n.name,r.name)}isDefinedOn(n){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,r){return!1}minPost(){return Jt.MIN}maxPost(){return new Jt(Dc,eM)}makePost(n,r){return(0,P.hu)("string"==typeof n,"KeyIndex indexValue must always be a string."),new Jt(n,eM)}toString(){return".key"}}const Ac=new nH;class tM{constructor(n,r,s,o,c=null){this.isReverse_=o,this.resultGenerator_=c,this.nodeStack_=[];let h=1;for(;!n.isEmpty();)if(n=n,h=r?s(n.key,r):1,o&&(h*=-1),h<0)n=this.isReverse_?n.left:n.right;else{if(0===h){this.nodeStack_.push(n);break}this.nodeStack_.push(n),n=this.isReverse_?n.right:n.left}}getNext(){if(0===this.nodeStack_.length)return null;let r,n=this.nodeStack_.pop();if(r=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}let vF,tl=(()=>{class i{constructor(r,s,o,c,h){this.key=r,this.value=s,this.color=null!=o?o:i.RED,this.left=null!=c?c:Us.EMPTY_NODE,this.right=null!=h?h:Us.EMPTY_NODE}copy(r,s,o,c,h){return new i(null!=r?r:this.key,null!=s?s:this.value,null!=o?o:this.color,null!=c?c:this.left,null!=h?h:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||!!r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,s,o){let c=this;const h=o(r,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(r,s,o),null):0===h?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(r,s,o)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return Us.EMPTY_NODE;let r=this;return!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.removeMin_(),null),r.fixUp_()}remove(r,s){let o,c;if(o=this,s(r,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(r,s),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===s(r,o.key)){if(o.right.isEmpty())return Us.EMPTY_NODE;c=o.right.min_(),o=o.copy(c.key,c.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(r,s))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let r=this;return r.right.isRed_()&&!r.left.isRed_()&&(r=r.rotateLeft_()),r.left.isRed_()&&r.left.left.isRed_()&&(r=r.rotateRight_()),r.left.isRed_()&&r.right.isRed_()&&(r=r.colorFlip_()),r}moveRedLeft_(){let r=this.colorFlip_();return r.right.left.isRed_()&&(r=r.copy(null,null,null,null,r.right.rotateRight_()),r=r.rotateLeft_(),r=r.colorFlip_()),r}moveRedRight_(){let r=this.colorFlip_();return r.left.left.isRed_()&&(r=r.rotateRight_(),r=r.colorFlip_()),r}rotateLeft_(){const r=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight_(){const r=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip_(){const r=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,s)}checkMaxDepth_(){const r=this.check_();return Math.pow(2,r)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const r=this.left.check_();if(r!==this.right.check_())throw new Error("Black depths differ");return r+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Us{constructor(n,r=Us.EMPTY_NODE){this.comparator_=n,this.root_=r}insert(n,r){return new Us(this.comparator_,this.root_.insert(n,r,this.comparator_).copy(null,null,tl.BLACK,null,null))}remove(n){return new Us(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,tl.BLACK,null,null))}get(n){let r,s=this.root_;for(;!s.isEmpty();){if(r=this.comparator_(n,s.key),0===r)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}getPredecessorKey(n){let r,s=this.root_,o=null;for(;!s.isEmpty();){if(r=this.comparator_(n,s.key),0===r){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}r<0?s=s.left:r>0&&(o=s,s=s.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new tM(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,r){return new tM(this.root_,n,this.comparator_,!1,r)}getReverseIteratorFrom(n,r){return new tM(this.root_,n,this.comparator_,!0,r)}getReverseIterator(n){return new tM(this.root_,null,this.comparator_,!0,n)}}function FY(i,n){return sm(i.name,n.name)}function yF(i,n){return sm(i,n)}Us.EMPTY_NODE=new class{copy(n,r,s,o,c){return this}insert(n,r,s){return new tl(n,r,null)}remove(n,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rH=function(i){return"number"==typeof i?"number:"+Ij(i):"string:"+i},iH=function(i){if(i.isLeafNode()){const n=i.val();(0,P.hu)("string"==typeof n||"number"==typeof n||"object"==typeof n&&(0,P.r3)(n,".sv"),"Priority must be a string or number.")}else(0,P.hu)(i===vF||i.isEmpty(),"priority of unexpected type.");(0,P.hu)(i===vF||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sH,oH,aH,Pv=(()=>{class i{constructor(r,s=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=r,this.priorityNode_=s,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),iH(this.priorityNode_)}static set __childrenNodeConstructor(r){sH=r}static get __childrenNodeConstructor(){return sH}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(r){return new i(this.value_,r)}getImmediateChild(r){return".priority"===r?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(r){return qt(r)?this:".priority"===zt(r)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(r,s){return null}updateImmediateChild(r,s){return".priority"===r?this.updatePriority(s):s.isEmpty()&&".priority"!==r?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(r,s).updatePriority(this.priorityNode_)}updateChild(r,s){const o=zt(r);return null===o?s:s.isEmpty()&&".priority"!==o?this:((0,P.hu)(".priority"!==o||1===Cf(r),".priority must be the last token in a path"),this.updateImmediateChild(o,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(On(r),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(r,s){return!1}val(r){return r&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let r="";this.priorityNode_.isEmpty()||(r+="priority:"+rH(this.priorityNode_.val())+":");const s=typeof this.value_;r+=s+":",r+="number"===s?Ij(this.value_):this.value_,this.lazyHash_=bj(r)}return this.lazyHash_}getValue(){return this.value_}compareTo(r){return r===i.__childrenNodeConstructor.EMPTY_NODE?1:r instanceof i.__childrenNodeConstructor?-1:((0,P.hu)(r.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(r))}compareToLeafNode_(r){const s=typeof r.value_,o=typeof this.value_,c=i.VALUE_TYPE_ORDER.indexOf(s),h=i.VALUE_TYPE_ORDER.indexOf(o);return(0,P.hu)(c>=0,"Unknown leaf type: "+s),(0,P.hu)(h>=0,"Unknown leaf type: "+o),c===h?"object"===o?0:this.value_<r.value_?-1:this.value_===r.value_?0:1:h-c}withIndex(){return this}isIndexed(){return!0}equals(r){if(r===this)return!0;if(r.isLeafNode()){const s=r;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}return!1}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const Bn=new class extends Xx{compare(n,r){const s=n.node.getPriority(),o=r.node.getPriority(),c=s.compareTo(o);return 0===c?sm(n.name,r.name):c}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,r){return!n.getPriority().equals(r.getPriority())}minPost(){return Jt.MIN}maxPost(){return new Jt(Dc,new Pv("[PRIORITY-POST]",aH))}makePost(n,r){const s=oH(n);return new Jt(r,new Pv("[PRIORITY-POST]",s))}toString(){return".priority"}},jY=Math.log(2);class HY{constructor(n){this.count=parseInt(Math.log(n+1)/jY,10),this.current_=this.count-1;const o=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=n+1&o}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const nM=function(i,n,r,s){i.sort(n);const o=function(y,C){const T=C-y;let x,R;if(0===T)return null;if(1===T)return x=i[y],R=r?r(x):x,new tl(R,x.node,tl.BLACK,null,null);{const O=parseInt(T/2,10)+y,U=o(y,O),te=o(O+1,C);return x=i[O],R=r?r(x):x,new tl(R,x.node,tl.BLACK,U,te)}},m=function(y){let C=null,T=null,x=i.length;const R=function(U,te){const pe=x-U,Fe=x;x-=U;const Ge=o(pe+1,Fe),$e=i[pe],We=r?r($e):$e;O(new tl(We,$e.node,te,null,Ge))},O=function(U){C?(C.left=U,C=U):(T=U,C=U)};for(let U=0;U<y.count;++U){const te=y.nextBitIsOne(),pe=Math.pow(2,y.count-(U+1));te?R(pe,tl.BLACK):(R(pe,tl.BLACK),R(pe,tl.RED))}return T}(new HY(i.length));return new Us(s||n,m)};let bF;const Fv={};class rd{constructor(n,r){this.indexes_=n,this.indexSet_=r}static get Default(){return(0,P.hu)(Fv&&Bn,"ChildrenNode.ts has not been loaded"),bF=bF||new rd({".priority":Fv},{".priority":Bn}),bF}get(n){const r=(0,P.DV)(this.indexes_,n);if(!r)throw new Error("No index defined for "+n);return r instanceof Us?r:null}hasIndex(n){return(0,P.r3)(this.indexSet_,n.toString())}addIndex(n,r){(0,P.hu)(n!==Ac,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const c=r.getIterator(Jt.Wrap);let m,h=c.getNext();for(;h;)o=o||n.isDefinedOn(h.node),s.push(h),h=c.getNext();m=o?nM(s,n.getCompare()):Fv;const y=n.toString(),C=Object.assign({},this.indexSet_);C[y]=n;const T=Object.assign({},this.indexes_);return T[y]=m,new rd(T,C)}addToIndexes(n,r){const s=(0,P.UI)(this.indexes_,(o,c)=>{const h=(0,P.DV)(this.indexSet_,c);if((0,P.hu)(h,"Missing index implementation for "+c),o===Fv){if(h.isDefinedOn(n.node)){const m=[],y=r.getIterator(Jt.Wrap);let C=y.getNext();for(;C;)C.name!==n.name&&m.push(C),C=y.getNext();return m.push(n),nM(m,h.getCompare())}return Fv}{const m=r.get(n.name);let y=o;return m&&(y=y.remove(new Jt(n.name,m))),y.insert(n,n.node)}});return new rd(s,this.indexSet_)}removeFromIndexes(n,r){const s=(0,P.UI)(this.indexes_,o=>{if(o===Fv)return o;{const c=r.get(n.name);return c?o.remove(new Jt(n.name,c)):o}});return new rd(s,this.indexSet_)}}let G0,Ft=(()=>{class i{constructor(r,s,o){this.children_=r,this.priorityNode_=s,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&iH(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return G0||(G0=new i(new Us(yF),null,rd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||G0}updatePriority(r){return this.children_.isEmpty()?this:new i(this.children_,r,this.indexMap_)}getImmediateChild(r){if(".priority"===r)return this.getPriority();{const s=this.children_.get(r);return null===s?G0:s}}getChild(r){const s=zt(r);return null===s?this:this.getImmediateChild(s).getChild(On(r))}hasChild(r){return null!==this.children_.get(r)}updateImmediateChild(r,s){if((0,P.hu)(s,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(s);{const o=new Jt(r,s);let c,h;s.isEmpty()?(c=this.children_.remove(r),h=this.indexMap_.removeFromIndexes(o,this.children_)):(c=this.children_.insert(r,s),h=this.indexMap_.addToIndexes(o,this.children_));const m=c.isEmpty()?G0:this.priorityNode_;return new i(c,m,h)}}updateChild(r,s){const o=zt(r);if(null===o)return s;{(0,P.hu)(".priority"!==zt(r)||1===Cf(r),".priority must be the last token in a path");const c=this.getImmediateChild(o).updateChild(On(r),s);return this.updateImmediateChild(o,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(r){if(this.isEmpty())return null;const s={};let o=0,c=0,h=!0;if(this.forEachChild(Bn,(m,y)=>{s[m]=y.val(r),o++,h&&i.INTEGER_REGEXP_.test(m)?c=Math.max(c,Number(m)):h=!1}),!r&&h&&c<2*o){const m=[];for(const y in s)m[y]=s[y];return m}return r&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(null===this.lazyHash_){let r="";this.getPriority().isEmpty()||(r+="priority:"+rH(this.getPriority().val())+":"),this.forEachChild(Bn,(s,o)=>{const c=o.hash();""!==c&&(r+=":"+s+":"+c)}),this.lazyHash_=""===r?"":bj(r)}return this.lazyHash_}getPredecessorChildName(r,s,o){const c=this.resolveIndex_(o);if(c){const h=c.getPredecessorKey(new Jt(r,s));return h?h.name:null}return this.children_.getPredecessorKey(r)}getFirstChildName(r){const s=this.resolveIndex_(r);if(s){const o=s.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(r){const s=this.getFirstChildName(r);return s?new Jt(s,this.children_.get(s)):null}getLastChildName(r){const s=this.resolveIndex_(r);if(s){const o=s.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(r){const s=this.getLastChildName(r);return s?new Jt(s,this.children_.get(s)):null}forEachChild(r,s){const o=this.resolveIndex_(r);return o?o.inorderTraversal(c=>s(c.name,c.node)):this.children_.inorderTraversal(s)}getIterator(r){return this.getIteratorFrom(r.minPost(),r)}getIteratorFrom(r,s){const o=this.resolveIndex_(s);if(o)return o.getIteratorFrom(r,c=>c);{const c=this.children_.getIteratorFrom(r.name,Jt.Wrap);let h=c.peek();for(;null!=h&&s.compare(h,r)<0;)c.getNext(),h=c.peek();return c}}getReverseIterator(r){return this.getReverseIteratorFrom(r.maxPost(),r)}getReverseIteratorFrom(r,s){const o=this.resolveIndex_(s);if(o)return o.getReverseIteratorFrom(r,c=>c);{const c=this.children_.getReverseIteratorFrom(r.name,Jt.Wrap);let h=c.peek();for(;null!=h&&s.compare(h,r)>0;)c.getNext(),h=c.peek();return c}}compareTo(r){return this.isEmpty()?r.isEmpty()?0:-1:r.isLeafNode()||r.isEmpty()?1:r===$0?-1:0}withIndex(r){if(r===Ac||this.indexMap_.hasIndex(r))return this;{const s=this.indexMap_.addIndex(r,this.children_);return new i(this.children_,this.priorityNode_,s)}}isIndexed(r){return r===Ac||this.indexMap_.hasIndex(r)}equals(r){if(r===this)return!0;if(r.isLeafNode())return!1;{const s=r;if(this.getPriority().equals(s.getPriority())){if(this.children_.count()===s.children_.count()){const o=this.getIterator(Bn),c=s.getIterator(Bn);let h=o.getNext(),m=c.getNext();for(;h&&m;){if(h.name!==m.name||!h.node.equals(m.node))return!1;h=o.getNext(),m=c.getNext()}return null===h&&null===m}return!1}return!1}}resolveIndex_(r){return r===Ac?null:this.indexMap_.get(r.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const $0=new class extends Ft{constructor(){super(new Us(yF),Ft.EMPTY_NODE,rd.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return Ft.EMPTY_NODE}isEmpty(){return!1}};function pr(i,n=null){if(null===i)return Ft.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(n=i[".priority"]),(0,P.hu)(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new Pv(i,pr(n));if(i instanceof Array){let r=Ft.EMPTY_NODE;return Mi(i,(s,o)=>{if((0,P.r3)(i,s)&&"."!==s.substring(0,1)){const c=pr(o);(c.isLeafNode()||!c.isEmpty())&&(r=r.updateImmediateChild(s,c))}}),r.updatePriority(pr(n))}{const r=[];let s=!1;if(Mi(i,(h,m)=>{if("."!==h.substring(0,1)){const y=pr(m);y.isEmpty()||(s=s||!y.getPriority().isEmpty(),r.push(new Jt(h,y)))}}),0===r.length)return Ft.EMPTY_NODE;const c=nM(r,FY,h=>h.name,yF);if(s){const h=nM(r,Bn.getCompare());return new Ft(c,pr(n),new rd({".priority":h},{".priority":Bn}))}return new Ft(c,pr(n),rd.Default)}}Object.defineProperties(Jt,{MIN:{value:new Jt(nd,Ft.EMPTY_NODE)},MAX:{value:new Jt(Dc,$0)}}),nH.__EMPTY_NODE=Ft.EMPTY_NODE,Pv.__childrenNodeConstructor=Ft,function(i){vF=i}($0),function(i){aH=i}($0),function(i){oH=i}(pr);class EF extends Xx{constructor(n){super(),this.indexPath_=n,(0,P.hu)(!qt(n)&&".priority"!==zt(n),"Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,r){const s=this.extractChild(n.node),o=this.extractChild(r.node),c=s.compareTo(o);return 0===c?sm(n.name,r.name):c}makePost(n,r){const s=pr(n),o=Ft.EMPTY_NODE.updateChild(this.indexPath_,s);return new Jt(r,o)}maxPost(){const n=Ft.EMPTY_NODE.updateChild(this.indexPath_,$0);return new Jt(Dc,n)}toString(){return j0(this.indexPath_,0).join("/")}}const wF=new class extends Xx{compare(n,r){const s=n.node.compareTo(r.node);return 0===s?sm(n.name,r.name):s}isDefinedOn(n){return!0}indexedValueChanged(n,r){return!n.equals(r)}minPost(){return Jt.MIN}maxPost(){return Jt.MAX}makePost(n,r){const s=pr(n);return new Jt(r,s)}toString(){return".value"}},Lv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qY=function(){let i=0;const n=[];return function(r){const s=r===i;let o;i=r;const c=new Array(8);for(o=7;o>=0;o--)c[o]=Lv.charAt(r%64),r=Math.floor(r/64);(0,P.hu)(0===r,"Cannot push at time == 0");let h=c.join("");if(s){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)h+=Lv.charAt(n[o]);return(0,P.hu)(20===h.length,"nextPushId: Length should be 20."),h}}(),uH=function(i){if(i===""+oF)return"-";const n=Zx(i);if(null!=n)return""+(n+1);const r=new Array(i.length);for(let h=0;h<r.length;h++)r[h]=i.charAt(h);if(r.length<786)return r.push("-"),r.join("");let s=r.length-1;for(;s>=0&&"z"===r[s];)s--;if(-1===s)return Dc;const c=Lv.charAt(Lv.indexOf(r[s])+1);return r[s]=c,r.slice(0,s+1).join("")},dH=function(i){if(i===""+Sj)return nd;const n=Zx(i);if(null!=n)return""+(n-1);const r=new Array(i.length);for(let s=0;s<r.length;s++)r[s]=i.charAt(s);return"-"===r[r.length-1]?1===r.length?""+oF:(delete r[r.length-1],r.join("")):(r[r.length-1]=Lv.charAt(Lv.indexOf(r[r.length-1])-1),r.join("")+"z".repeat(786-r.length))};function hH(i){return{type:"value",snapshotNode:i}}function Vv(i,n){return{type:"child_added",snapshotNode:n,childName:i}}function z0(i,n){return{type:"child_removed",snapshotNode:n,childName:i}}function q0(i,n,r){return{type:"child_changed",snapshotNode:n,childName:i,oldSnap:r}}class IF{constructor(n){this.index_=n}updateChild(n,r,s,o,c,h){(0,P.hu)(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=n.getImmediateChild(r);return m.getChild(o).equals(s.getChild(o))&&m.isEmpty()===s.isEmpty()||(null!=h&&(s.isEmpty()?n.hasChild(r)?h.trackChildChange(z0(r,m)):(0,P.hu)(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?h.trackChildChange(Vv(r,s)):h.trackChildChange(q0(r,s,m))),n.isLeafNode()&&s.isEmpty())?n:n.updateImmediateChild(r,s).withIndex(this.index_)}updateFullNode(n,r,s){return null!=s&&(n.isLeafNode()||n.forEachChild(Bn,(o,c)=>{r.hasChild(o)||s.trackChildChange(z0(o,c))}),r.isLeafNode()||r.forEachChild(Bn,(o,c)=>{if(n.hasChild(o)){const h=n.getImmediateChild(o);h.equals(c)||s.trackChildChange(q0(o,c,h))}else s.trackChildChange(Vv(o,c))})),r.withIndex(this.index_)}updatePriority(n,r){return n.isEmpty()?Ft.EMPTY_NODE:n.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class W0{constructor(n){this.indexedFilter_=new IF(n.getIndex()),this.index_=n.getIndex(),this.startPost_=W0.getStartPost_(n),this.endPost_=W0.getEndPost_(n)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){return this.index_.compare(this.getStartPost(),n)<=0&&this.index_.compare(n,this.getEndPost())<=0}updateChild(n,r,s,o,c,h){return this.matches(new Jt(r,s))||(s=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(n,r,s,o,c,h)}updateFullNode(n,r,s){r.isLeafNode()&&(r=Ft.EMPTY_NODE);let o=r.withIndex(this.index_);o=o.updatePriority(Ft.EMPTY_NODE);const c=this;return r.forEachChild(Bn,(h,m)=>{c.matches(new Jt(h,m))||(o=o.updateImmediateChild(h,Ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,o,s)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const r=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),r)}return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const r=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),r)}return n.getIndex().maxPost()}}class YY{constructor(n){this.rangedFilter_=new W0(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft()}updateChild(n,r,s,o,c,h){return this.rangedFilter_.matches(new Jt(r,s))||(s=Ft.EMPTY_NODE),n.getImmediateChild(r).equals(s)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,r,s,o,c,h):this.fullLimitUpdateChild_(n,r,s,c,h)}updateFullNode(n,r,s){let o;if(r.isLeafNode()||r.isEmpty())o=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<r.numChildren()&&r.isIndexed(this.index_)){let c;o=Ft.EMPTY_NODE.withIndex(this.index_),c=this.reverse_?r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;c.hasNext()&&h<this.limit_;){const m=c.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),m)<=0:this.index_.compare(m,this.rangedFilter_.getEndPost())<=0,!y)break;o=o.updateImmediateChild(m.name,m.node),h++}}else{let c,h,m,y;if(o=r.withIndex(this.index_),o=o.updatePriority(Ft.EMPTY_NODE),this.reverse_){y=o.getReverseIterator(this.index_),c=this.rangedFilter_.getEndPost(),h=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();m=(R,O)=>x(O,R)}else y=o.getIterator(this.index_),c=this.rangedFilter_.getStartPost(),h=this.rangedFilter_.getEndPost(),m=this.index_.getCompare();let C=0,T=!1;for(;y.hasNext();){const x=y.getNext();!T&&m(c,x)<=0&&(T=!0),T&&C<this.limit_&&m(x,h)<=0?C++:o=o.updateImmediateChild(x.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,o,s)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,r,s,o,c){let h;if(this.reverse_){const x=this.index_.getCompare();h=(R,O)=>x(O,R)}else h=this.index_.getCompare();const m=n;(0,P.hu)(m.numChildren()===this.limit_,"");const y=new Jt(r,s),C=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),T=this.rangedFilter_.matches(y);if(m.hasChild(r)){const x=m.getImmediateChild(r);let R=o.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=R&&(R.name===r||m.hasChild(R.name));)R=o.getChildAfterChild(this.index_,R,this.reverse_);const O=null==R?1:h(R,y);if(T&&!s.isEmpty()&&O>=0)return null!=c&&c.trackChildChange(q0(r,s,x)),m.updateImmediateChild(r,s);{null!=c&&c.trackChildChange(z0(r,x));const te=m.updateImmediateChild(r,Ft.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(null!=c&&c.trackChildChange(Vv(R.name,R.node)),te.updateImmediateChild(R.name,R.node)):te}}return s.isEmpty()?n:T&&h(C,y)>=0?(null!=c&&(c.trackChildChange(z0(C.name,C.node)),c.trackChildChange(Vv(r,s))),m.updateImmediateChild(r,s).updateImmediateChild(C.name,Ft.EMPTY_NODE)):n}}class rM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bn}copy(){const n=new rM;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function SF(i,n,r){const s=i.copy();return s.startSet_=!0,void 0===n&&(n=null),s.indexStartValue_=n,null!=r?(s.startNameSet_=!0,s.indexStartName_=r):(s.startNameSet_=!1,s.indexStartName_=""),s}function TF(i,n,r){const s=i.copy();return s.endSet_=!0,void 0===n&&(n=null),s.indexEndValue_=n,void 0!==r?(s.endNameSet_=!0,s.indexEndName_=r):(s.endNameSet_=!1,s.indexEndName_=""),s}function iM(i,n){const r=i.copy();return r.index_=n,r}function fH(i){const n={};if(i.isDefault())return n;let r;return i.index_===Bn?r="$priority":i.index_===wF?r="$value":i.index_===Ac?r="$key":((0,P.hu)(i.index_ instanceof EF,"Unrecognized index type!"),r=i.index_.toString()),n.orderBy=(0,P.Pz)(r),i.startSet_&&(n.startAt=(0,P.Pz)(i.indexStartValue_),i.startNameSet_&&(n.startAt+=","+(0,P.Pz)(i.indexStartName_))),i.endSet_&&(n.endAt=(0,P.Pz)(i.indexEndValue_),i.endNameSet_&&(n.endAt+=","+(0,P.Pz)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?n.limitToFirst=i.limit_:n.limitToLast=i.limit_),n}function pH(i){const n={};if(i.startSet_&&(n.sp=i.indexStartValue_,i.startNameSet_&&(n.sn=i.indexStartName_)),i.endSet_&&(n.ep=i.indexEndValue_,i.endNameSet_&&(n.en=i.indexEndName_)),i.limitSet_){n.l=i.limit_;let r=i.viewFrom_;""===r&&(r=i.isViewFromLeft()?"l":"r"),n.vf=r}return i.index_!==Bn&&(n.i=i.index_.toString()),n}class sM extends Yj{constructor(n,r,s,o){super(),this.repoInfo_=n,this.onDataUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=P0("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,r){return void 0!==r?"tag$"+r:((0,P.hu)(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,r,s,o){const c=n._path.toString();this.log_("Listen called for "+c+" "+n._queryIdentifier);const h=sM.getListenId_(n,s),m={};this.listens_[h]=m;const y=fH(n._queryParams);this.restRequest_(c+".json",y,(C,T)=>{let x=T;if(404===C&&(x=null,C=null),null===C&&this.onDataUpdate_(c,x,!1,s),(0,P.DV)(this.listens_,h)===m){let R;R=C?401===C?"permission_denied":"rest_error:"+C:"ok",o(R,null)}})}unlisten(n,r){const s=sM.getListenId_(n,r);delete this.listens_[s]}get(n){const r=fH(n._queryParams),s=n._path.toString(),o=new P.BH;return this.restRequest_(s+".json",r,(c,h)=>{let m=h;404===c&&(m=null,c=null),null===c?(this.onDataUpdate_(s,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(n){}restRequest_(n,r={},s){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,c])=>{o&&o.accessToken&&(r.auth=o.accessToken),c&&c.token&&(r.ac=c.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+(0,P.xO)(r);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(s&&4===m.readyState){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let y=null;if(m.status>=200&&m.status<300){try{y=(0,P.cI)(m.responseText)}catch(C){As("Failed to parse JSON response for "+h+": "+m.responseText)}s(null,y)}else 401!==m.status&&404!==m.status&&As("Got unsuccessful REST response for "+h+" Status: "+m.status),s(m.status);s=null}},m.open("GET",h,!0),m.send()})}}class eK{constructor(){this.rootNode_=Ft.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,r){this.rootNode_=this.rootNode_.updateChild(n,r)}}function oM(){return{value:null,children:new Map}}function Bv(i,n,r){if(qt(n))i.value=r,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(n,r);else{const s=zt(n);i.children.has(s)||i.children.set(s,oM()),Bv(i.children.get(s),n=On(n),r)}}function DF(i,n){if(qt(n))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const r=i.value;return i.value=null,r.forEachChild(Bn,(s,o)=>{Bv(i,new En(s),o)}),DF(i,n)}}if(i.children.size>0){const r=zt(n);return n=On(n),i.children.has(r)&&DF(i.children.get(r),n)&&i.children.delete(r),0===i.children.size}return!0}function AF(i,n,r){null!==i.value?r(n,i.value):function(i,n){i.children.forEach((r,s)=>{n(s,r)})}(i,(s,o)=>{AF(o,new En(n.toString()+"/"+s),r)})}class nK{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),r=Object.assign({},n);return this.last_&&Mi(this.last_,(s,o)=>{r[s]=r[s]-o}),this.last_=n,r}}class sK{constructor(n,r){this.server_=r,this.statsToReport_={},this.statsListener_=new nK(n);const s=1e4+2e4*Math.random();L0(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const n=this.statsListener_.get(),r={};let s=!1;Mi(n,(o,c)=>{c>0&&(0,P.r3)(this.statsToReport_,o)&&(r[o]=c,s=!0)}),s&&this.server_.reportStats(r),L0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ca=(()=>(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ca||(ca={})),ca))();function RF(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class aM{constructor(n,r,s){this.path=n,this.affectedTree=r,this.revert=s,this.type=ca.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(n){if(qt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new En(n));return new aM(hn(),r,this.revert)}}return(0,P.hu)(zt(this.path)===n,"operationForChild called for unrelated child."),new aM(On(this.path),this.affectedTree,this.revert)}}class Y0{constructor(n,r){this.source=n,this.path=r,this.type=ca.LISTEN_COMPLETE}operationForChild(n){return qt(this.path)?new Y0(this.source,hn()):new Y0(this.source,On(this.path))}}class lm{constructor(n,r,s){this.source=n,this.path=r,this.snap=s,this.type=ca.OVERWRITE}operationForChild(n){return qt(this.path)?new lm(this.source,hn(),this.snap.getImmediateChild(n)):new lm(this.source,On(this.path),this.snap)}}class Uv{constructor(n,r,s){this.source=n,this.path=r,this.children=s,this.type=ca.MERGE}operationForChild(n){if(qt(this.path)){const r=this.children.subtree(new En(n));return r.isEmpty()?null:r.value?new lm(this.source,hn(),r.value):new Uv(this.source,hn(),r)}return(0,P.hu)(zt(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new Uv(this.source,On(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class If{constructor(n,r,s){this.node_=n,this.fullyInitialized_=r,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(qt(n))return this.isFullyInitialized()&&!this.filtered_;const r=zt(n);return this.isCompleteForChild(r)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class oK{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function K0(i,n,r,s,o,c){const h=s.filter(m=>m.type===r);h.sort((m,y)=>function(i,n,r){if(null==n.childName||null==r.childName)throw(0,P.g5)("Should only compare child_ events.");const s=new Jt(n.childName,n.snapshotNode),o=new Jt(r.childName,r.snapshotNode);return i.index_.compare(s,o)}(i,m,y)),h.forEach(m=>{const y=function(i,n,r){return"value"===n.type||"child_removed"===n.type||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,i.index_)),n}(i,m,c);o.forEach(C=>{C.respondsTo(m.type)&&n.push(C.createEvent(y,i.query_))})})}function lM(i,n){return{eventCache:i,serverCache:n}}function Z0(i,n,r,s){return lM(new If(n,r,s),i.serverCache)}function mH(i,n,r,s){return lM(i.eventCache,new If(n,r,s))}function cM(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function cm(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let kF;class Un{constructor(n,r=(()=>(kF||(kF=new Us(q8)),kF))()){this.value=n,this.children=r}static fromObject(n){let r=new Un(null);return Mi(n,(s,o)=>{r=r.set(new En(s),o)}),r}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,r){if(null!=this.value&&r(this.value))return{path:hn(),value:this.value};if(qt(n))return null;{const s=zt(n),o=this.children.get(s);if(null!==o){const c=o.findRootMostMatchingPathAndValue(On(n),r);return null!=c?{path:rr(new En(s),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(qt(n))return this;{const r=zt(n),s=this.children.get(r);return null!==s?s.subtree(On(n)):new Un(null)}}set(n,r){if(qt(n))return new Un(r,this.children);{const s=zt(n),c=(this.children.get(s)||new Un(null)).set(On(n),r),h=this.children.insert(s,c);return new Un(this.value,h)}}remove(n){if(qt(n))return this.children.isEmpty()?new Un(null):new Un(null,this.children);{const r=zt(n),s=this.children.get(r);if(s){const o=s.remove(On(n));let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),null===this.value&&c.isEmpty()?new Un(null):new Un(this.value,c)}return this}}get(n){if(qt(n))return this.value;{const r=zt(n),s=this.children.get(r);return s?s.get(On(n)):null}}setTree(n,r){if(qt(n))return r;{const s=zt(n),c=(this.children.get(s)||new Un(null)).setTree(On(n),r);let h;return h=c.isEmpty()?this.children.remove(s):this.children.insert(s,c),new Un(this.value,h)}}fold(n){return this.fold_(hn(),n)}fold_(n,r){const s={};return this.children.inorderTraversal((o,c)=>{s[o]=c.fold_(rr(n,o),r)}),r(n,this.value,s)}findOnPath(n,r){return this.findOnPath_(n,hn(),r)}findOnPath_(n,r,s){const o=!!this.value&&s(r,this.value);if(o)return o;if(qt(n))return null;{const c=zt(n),h=this.children.get(c);return h?h.findOnPath_(On(n),rr(r,c),s):null}}foreachOnPath(n,r){return this.foreachOnPath_(n,hn(),r)}foreachOnPath_(n,r,s){if(qt(n))return this;{this.value&&s(r,this.value);const o=zt(n),c=this.children.get(o);return c?c.foreachOnPath_(On(n),rr(r,o),s):new Un(null)}}foreach(n){this.foreach_(hn(),n)}foreach_(n,r){this.children.inorderTraversal((s,o)=>{o.foreach_(rr(n,s),r)}),this.value&&r(n,this.value)}foreachChild(n){this.children.inorderTraversal((r,s)=>{s.value&&n(r,s.value)})}}class nl{constructor(n){this.writeTree_=n}static empty(){return new nl(new Un(null))}}function Q0(i,n,r){if(qt(n))return new nl(new Un(r));{const s=i.writeTree_.findRootMostValueAndPath(n);if(null!=s){const o=s.path;let c=s.value;const h=xs(o,n);return c=c.updateChild(h,r),new nl(i.writeTree_.set(o,c))}{const o=new Un(r),c=i.writeTree_.setTree(n,o);return new nl(c)}}}function NF(i,n,r){let s=i;return Mi(r,(o,c)=>{s=Q0(s,rr(n,o),c)}),s}function _H(i,n){if(qt(n))return nl.empty();{const r=i.writeTree_.setTree(n,new Un(null));return new nl(r)}}function OF(i,n){return null!=um(i,n)}function um(i,n){const r=i.writeTree_.findRootMostValueAndPath(n);return null!=r?i.writeTree_.get(r.path).getChild(xs(r.path,n)):null}function yH(i){const n=[],r=i.writeTree_.value;return null!=r?r.isLeafNode()||r.forEachChild(Bn,(s,o)=>{n.push(new Jt(s,o))}):i.writeTree_.children.inorderTraversal((s,o)=>{null!=o.value&&n.push(new Jt(s,o.value))}),n}function Sf(i,n){if(qt(n))return i;{const r=um(i,n);return new nl(null!=r?new Un(r):i.writeTree_.subtree(n))}}function PF(i){return i.writeTree_.isEmpty()}function jv(i,n){return vH(hn(),i.writeTree_,n)}function vH(i,n,r){if(null!=n.value)return r.updateChild(i,n.value);{let s=null;return n.children.inorderTraversal((o,c)=>{".priority"===o?((0,P.hu)(null!==c.value,"Priority writes must always be leaf nodes"),s=c.value):r=vH(rr(i,o),c,r)}),!r.getChild(i).isEmpty()&&null!==s&&(r=r.updateChild(rr(i,".priority"),s)),r}}function uM(i,n){return IH(n,i)}function gK(i,n){if(i.snap)return la(i.path,n);for(const r in i.children)if(i.children.hasOwnProperty(r)&&la(rr(i.path,r),n))return!0;return!1}function _K(i){return i.visible}function bH(i,n,r){let s=nl.empty();for(let o=0;o<i.length;++o){const c=i[o];if(n(c)){const h=c.path;let m;if(c.snap)la(r,h)?(m=xs(r,h),s=Q0(s,m,c.snap)):la(h,r)&&(m=xs(h,r),s=Q0(s,hn(),c.snap.getChild(m)));else{if(!c.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(la(r,h))m=xs(r,h),s=NF(s,m,c.children);else if(la(h,r))if(m=xs(h,r),qt(m))s=NF(s,hn(),c.children);else{const y=(0,P.DV)(c.children,zt(m));if(y){const C=y.getChild(On(m));s=Q0(s,hn(),C)}}}}}return s}function EH(i,n,r,s,o){if(s||o){const c=Sf(i.visibleWrites,n);return!o&&PF(c)?r:o||null!=r||OF(c,hn())?jv(bH(i.allWrites,function(C){return(C.visible||o)&&(!s||!~s.indexOf(C.writeId))&&(la(C.path,n)||la(n,C.path))},n),r||Ft.EMPTY_NODE):null}{const c=um(i.visibleWrites,n);if(null!=c)return c;{const h=Sf(i.visibleWrites,n);return PF(h)?r:null!=r||OF(h,hn())?jv(h,r||Ft.EMPTY_NODE):null}}}function dM(i,n,r,s){return EH(i.writeTree,i.treePath,n,r,s)}function FF(i,n){return function(i,n,r){let s=Ft.EMPTY_NODE;const o=um(i.visibleWrites,n);if(o)return o.isLeafNode()||o.forEachChild(Bn,(c,h)=>{s=s.updateImmediateChild(c,h)}),s;if(r){const c=Sf(i.visibleWrites,n);return r.forEachChild(Bn,(h,m)=>{const y=jv(Sf(c,new En(h)),m);s=s.updateImmediateChild(h,y)}),yH(c).forEach(h=>{s=s.updateImmediateChild(h.name,h.node)}),s}return yH(Sf(i.visibleWrites,n)).forEach(h=>{s=s.updateImmediateChild(h.name,h.node)}),s}(i.writeTree,i.treePath,n)}function wH(i,n,r,s){return function(i,n,r,s,o){(0,P.hu)(s||o,"Either existingEventSnap or existingServerSnap must exist");const c=rr(n,r);if(OF(i.visibleWrites,c))return null;{const h=Sf(i.visibleWrites,c);return PF(h)?o.getChild(r):jv(h,o.getChild(r))}}(i.writeTree,i.treePath,n,r,s)}function hM(i,n){return function(i,n){return um(i.visibleWrites,n)}(i.writeTree,rr(i.treePath,n))}function LF(i,n,r){return function(i,n,r,s){const o=rr(n,r),c=um(i.visibleWrites,o);return null!=c?c:s.isCompleteForChild(r)?jv(Sf(i.visibleWrites,o),s.getNode().getImmediateChild(r)):null}(i.writeTree,i.treePath,n,r)}function CH(i,n){return IH(rr(i.treePath,n),i.writeTree)}function IH(i,n){return{treePath:i,writeTree:n}}class SK{constructor(){this.changeMap=new Map}trackChildChange(n){const r=n.type,s=n.childName;(0,P.hu)("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==s,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const c=o.type;if("child_added"===r&&"child_removed"===c)this.changeMap.set(s,q0(s,n.snapshotNode,o.snapshotNode));else if("child_removed"===r&&"child_added"===c)this.changeMap.delete(s);else if("child_removed"===r&&"child_changed"===c)this.changeMap.set(s,z0(s,o.oldSnap));else if("child_changed"===r&&"child_added"===c)this.changeMap.set(s,Vv(s,n.snapshotNode));else{if("child_changed"!==r||"child_changed"!==c)throw(0,P.g5)("Illegal combination of changes: "+n+" occurred after "+o);this.changeMap.set(s,q0(s,n.snapshotNode,o.oldSnap))}}else this.changeMap.set(s,n)}getChanges(){return Array.from(this.changeMap.values())}}const SH=new class{getCompleteChild(n){return null}getChildAfterChild(n,r,s){return null}};class VF{constructor(n,r,s=null){this.writes_=n,this.viewCache_=r,this.optCompleteServerCache_=s}getCompleteChild(n){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(n))return r.getNode().getImmediateChild(n);{const s=null!=this.optCompleteServerCache_?new If(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return LF(this.writes_,n,s)}}getChildAfterChild(n,r,s){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:cm(this.viewCache_),c=function(i,n,r,s,o,c){return function(i,n,r,s,o,c,h){let m;const y=Sf(i.visibleWrites,n),C=um(y,hn());if(null!=C)m=C;else{if(null==r)return[];m=jv(y,r)}if(m=m.withIndex(h),m.isEmpty()||m.isLeafNode())return[];{const T=[],x=h.getCompare(),R=c?m.getReverseIteratorFrom(s,h):m.getIteratorFrom(s,h);let O=R.getNext();for(;O&&T.length<o;)0!==x(O,s)&&T.push(O),O=R.getNext();return T}}(i.writeTree,i.treePath,n,r,s,o,c)}(this.writes_,o,r,1,s,n);return 0===c.length?null:c[0]}}function TH(i,n,r,s,o,c){const h=n.eventCache;if(null!=hM(s,r))return n;{let m,y;if(qt(r))if((0,P.hu)(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const C=cm(n),x=FF(s,C instanceof Ft?C:Ft.EMPTY_NODE);m=i.filter.updateFullNode(n.eventCache.getNode(),x,c)}else{const C=dM(s,cm(n));m=i.filter.updateFullNode(n.eventCache.getNode(),C,c)}else{const C=zt(r);if(".priority"===C){(0,P.hu)(1===Cf(r),"Can't have a priority with additional path components");const T=h.getNode();y=n.serverCache.getNode();const x=wH(s,r,T,y);m=null!=x?i.filter.updatePriority(T,x):h.getNode()}else{const T=On(r);let x;if(h.isCompleteForChild(C)){y=n.serverCache.getNode();const R=wH(s,r,h.getNode(),y);x=null!=R?h.getNode().getImmediateChild(C).updateChild(T,R):h.getNode().getImmediateChild(C)}else x=LF(s,C,n.serverCache);m=null!=x?i.filter.updateChild(h.getNode(),C,x,T,o,c):h.getNode()}}return Z0(n,m,h.isFullyInitialized()||qt(r),i.filter.filtersNodes())}}function fM(i,n,r,s,o,c,h,m){const y=n.serverCache;let C;const T=h?i.filter:i.filter.getIndexedFilter();if(qt(r))C=T.updateFullNode(y.getNode(),s,null);else if(T.filtersNodes()&&!y.isFiltered()){const O=y.getNode().updateChild(r,s);C=T.updateFullNode(y.getNode(),O,null)}else{const O=zt(r);if(!y.isCompleteForPath(r)&&Cf(r)>1)return n;const U=On(r),pe=y.getNode().getImmediateChild(O).updateChild(U,s);C=".priority"===O?T.updatePriority(y.getNode(),pe):T.updateChild(y.getNode(),O,pe,U,SH,null)}const x=mH(n,C,y.isFullyInitialized()||qt(r),T.filtersNodes());return TH(i,x,r,o,new VF(o,x,c),m)}function BF(i,n,r,s,o,c,h){const m=n.eventCache;let y,C;const T=new VF(o,n,c);if(qt(r))C=i.filter.updateFullNode(n.eventCache.getNode(),s,h),y=Z0(n,C,!0,i.filter.filtersNodes());else{const x=zt(r);if(".priority"===x)C=i.filter.updatePriority(n.eventCache.getNode(),s),y=Z0(n,C,m.isFullyInitialized(),m.isFiltered());else{const R=On(r),O=m.getNode().getImmediateChild(x);let U;if(qt(R))U=s;else{const te=T.getCompleteChild(x);U=null!=te?".priority"===gF(R)&&te.getChild(Jj(R)).isEmpty()?te:te.updateChild(R,s):Ft.EMPTY_NODE}y=O.equals(U)?n:Z0(n,i.filter.updateChild(m.getNode(),x,U,R,T,h),m.isFullyInitialized(),i.filter.filtersNodes())}}return y}function DH(i,n){return i.eventCache.isCompleteForChild(n)}function AH(i,n,r){return r.foreach((s,o)=>{n=n.updateChild(s,o)}),n}function UF(i,n,r,s,o,c,h,m){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let C,y=n;C=qt(r)?s:new Un(null).setTree(r,s);const T=n.serverCache.getNode();return C.children.inorderTraversal((x,R)=>{if(T.hasChild(x)){const U=AH(0,n.serverCache.getNode().getImmediateChild(x),R);y=fM(i,y,new En(x),U,o,c,h,m)}}),C.children.inorderTraversal((x,R)=>{const O=!n.serverCache.isCompleteForChild(x)&&void 0===R.value;if(!T.hasChild(x)&&!O){const te=AH(0,n.serverCache.getNode().getImmediateChild(x),R);y=fM(i,y,new En(x),te,o,c,h,m)}}),y}class PK{constructor(n,r){this.query_=n,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new IF(s.getIndex()),c=function(i){return i.loadsAllData()?new IF(i.getIndex()):i.hasLimit()?new YY(i):new W0(i)}(s);this.processor_=function(i){return{filter:i}}(c);const h=r.serverCache,m=r.eventCache,y=o.updateFullNode(Ft.EMPTY_NODE,h.getNode(),null),C=c.updateFullNode(Ft.EMPTY_NODE,m.getNode(),null),T=new If(y,h.isFullyInitialized(),o.filtersNodes()),x=new If(C,m.isFullyInitialized(),c.filtersNodes());this.viewCache_=lM(x,T),this.eventGenerator_=new oK(this.query_)}get query(){return this.query_}}function VK(i,n){const r=cm(i.viewCache_);return r&&(i.query._queryParams.loadsAllData()||!qt(n)&&!r.getImmediateChild(zt(n)).isEmpty())?r.getChild(n):null}function xH(i){return 0===i.eventRegistrations_.length}function MH(i,n,r){const s=[];if(r){(0,P.hu)(null==n,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(c=>{const h=c.createCancelEvent(r,o);h&&s.push(h)})}if(n){let o=[];for(let c=0;c<i.eventRegistrations_.length;++c){const h=i.eventRegistrations_[c];if(h.matches(n)){if(n.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(c+1));break}}else o.push(h)}i.eventRegistrations_=o}else i.eventRegistrations_=[];return s}function RH(i,n,r,s){n.type===ca.MERGE&&null!==n.source.queryId&&((0,P.hu)(cm(i.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(cM(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,c=function(i,n,r,s,o){const c=new SK;let h,m;if(r.type===ca.OVERWRITE){const C=r;C.source.fromUser?h=BF(i,n,C.path,C.snap,s,o,c):((0,P.hu)(C.source.fromServer,"Unknown source."),m=C.source.tagged||n.serverCache.isFiltered()&&!qt(C.path),h=fM(i,n,C.path,C.snap,s,o,m,c))}else if(r.type===ca.MERGE){const C=r;C.source.fromUser?h=function(i,n,r,s,o,c,h){let m=n;return s.foreach((y,C)=>{const T=rr(r,y);DH(n,zt(T))&&(m=BF(i,m,T,C,o,c,h))}),s.foreach((y,C)=>{const T=rr(r,y);DH(n,zt(T))||(m=BF(i,m,T,C,o,c,h))}),m}(i,n,C.path,C.children,s,o,c):((0,P.hu)(C.source.fromServer,"Unknown source."),m=C.source.tagged||n.serverCache.isFiltered(),h=UF(i,n,C.path,C.children,s,o,m,c))}else if(r.type===ca.ACK_USER_WRITE){const C=r;h=C.revert?function(i,n,r,s,o,c){let h;if(null!=hM(s,r))return n;{const m=new VF(s,n,o),y=n.eventCache.getNode();let C;if(qt(r)||".priority"===zt(r)){let T;if(n.serverCache.isFullyInitialized())T=dM(s,cm(n));else{const x=n.serverCache.getNode();(0,P.hu)(x instanceof Ft,"serverChildren would be complete if leaf node"),T=FF(s,x)}T=T,C=i.filter.updateFullNode(y,T,c)}else{const T=zt(r);let x=LF(s,T,n.serverCache);null==x&&n.serverCache.isCompleteForChild(T)&&(x=y.getImmediateChild(T)),C=null!=x?i.filter.updateChild(y,T,x,On(r),m,c):n.eventCache.getNode().hasChild(T)?i.filter.updateChild(y,T,Ft.EMPTY_NODE,On(r),m,c):y,C.isEmpty()&&n.serverCache.isFullyInitialized()&&(h=dM(s,cm(n)),h.isLeafNode()&&(C=i.filter.updateFullNode(C,h,c)))}return h=n.serverCache.isFullyInitialized()||null!=hM(s,hn()),Z0(n,C,h,i.filter.filtersNodes())}}(i,n,C.path,s,o,c):function(i,n,r,s,o,c,h){if(null!=hM(o,r))return n;const m=n.serverCache.isFiltered(),y=n.serverCache;if(null!=s.value){if(qt(r)&&y.isFullyInitialized()||y.isCompleteForPath(r))return fM(i,n,r,y.getNode().getChild(r),o,c,m,h);if(qt(r)){let C=new Un(null);return y.getNode().forEachChild(Ac,(T,x)=>{C=C.set(new En(T),x)}),UF(i,n,r,C,o,c,m,h)}return n}{let C=new Un(null);return s.foreach((T,x)=>{const R=rr(r,T);y.isCompleteForPath(R)&&(C=C.set(T,y.getNode().getChild(R)))}),UF(i,n,r,C,o,c,m,h)}}(i,n,C.path,C.affectedTree,s,o,c)}else{if(r.type!==ca.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+r.type);h=function(i,n,r,s,o){const c=n.serverCache;return TH(i,mH(n,c.getNode(),c.isFullyInitialized()||qt(r),c.isFiltered()),r,s,SH,o)}(i,n,r.path,s,c)}const y=c.getChanges();return function(i,n,r){const s=n.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),c=cM(i);(r.length>0||!i.eventCache.isFullyInitialized()||o&&!s.getNode().equals(c)||!s.getNode().getPriority().equals(c.getPriority()))&&r.push(hH(cM(n)))}}(n,h,y),{viewCache:h,changes:y}}(i.processor_,o,n,r,s);return function(i,n){(0,P.hu)(n.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(n.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,c.viewCache),(0,P.hu)(c.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,kH(i,c.changes,c.viewCache.eventCache.getNode(),null)}function kH(i,n,r,s){return function(i,n,r,s){const o=[],c=[];return n.forEach(h=>{"child_changed"===h.type&&i.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&c.push(function(i,n){return{type:"child_moved",snapshotNode:n,childName:i}}(h.childName,h.snapshotNode))}),K0(i,o,"child_removed",n,s,r),K0(i,o,"child_added",n,s,r),K0(i,o,"child_moved",c,s,r),K0(i,o,"child_changed",n,s,r),K0(i,o,"value",n,s,r),o}(i.eventGenerator_,n,r,s?[s]:i.eventRegistrations_)}let pM,mM;class NH{constructor(){this.views=new Map}}function jF(i,n,r,s){const o=n.source.queryId;if(null!==o){const c=i.views.get(o);return(0,P.hu)(null!=c,"SyncTree gave us an op for an invalid query."),RH(c,n,r,s)}{let c=[];for(const h of i.views.values())c=c.concat(RH(h,n,r,s));return c}}function OH(i,n,r,s,o){const h=i.views.get(n._queryIdentifier);if(!h){let m=dM(r,o?s:null),y=!1;m?y=!0:s instanceof Ft?(m=FF(r,s),y=!1):(m=Ft.EMPTY_NODE,y=!1);const C=lM(new If(m,y,!1),new If(s,o,!1));return new PK(n,C)}return h}function PH(i){const n=[];for(const r of i.views.values())r.query._queryParams.loadsAllData()||n.push(r);return n}function Tf(i,n){let r=null;for(const s of i.views.values())r=r||VK(s,n);return r}function FH(i,n){return n._queryParams.loadsAllData()?gM(i):i.views.get(n._queryIdentifier)}function LH(i,n){return null!=FH(i,n)}function Df(i){return null!=gM(i)}function gM(i){for(const n of i.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let YK=1;class VH{constructor(n){this.listenProvider_=n,this.syncPointTree_=new Un(null),this.pendingWriteTree_={visibleWrites:nl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function HF(i,n,r,s,o){return function(i,n,r,s,o){(0,P.hu)(s>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),i.allWrites.push({path:n,snap:r,writeId:s,visible:o}),o&&(i.visibleWrites=Q0(i.visibleWrites,n,r)),i.lastWriteId=s}(i.pendingWriteTree_,n,r,s,o),o?Hv(i,new lm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,r)):[]}function Af(i,n,r=!1){const s=function(i,n){for(let r=0;r<i.allWrites.length;r++){const s=i.allWrites[r];if(s.writeId===n)return s}return null}(i.pendingWriteTree_,n);if(function(i,n){const r=i.allWrites.findIndex(m=>m.writeId===n);(0,P.hu)(r>=0,"removeWrite called with nonexistent writeId.");const s=i.allWrites[r];i.allWrites.splice(r,1);let o=s.visible,c=!1,h=i.allWrites.length-1;for(;o&&h>=0;){const m=i.allWrites[h];m.visible&&(h>=r&&gK(m,s.path)?o=!1:la(s.path,m.path)&&(c=!0)),h--}return!!o&&(c?(function(i){i.visibleWrites=bH(i.allWrites,_K,hn()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(s.snap?i.visibleWrites=_H(i.visibleWrites,s.path):Mi(s.children,y=>{i.visibleWrites=_H(i.visibleWrites,rr(s.path,y))}),!0))}(i.pendingWriteTree_,n)){let c=new Un(null);return null!=s.snap?c=c.set(hn(),!0):Mi(s.children,h=>{c=c.set(new En(h),!0)}),Hv(i,new aM(s.path,c,r))}return[]}function J0(i,n,r){return Hv(i,new lm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,r))}function GF(i,n,r,s){const o=n._path,c=i.syncPointTree_.get(o);let h=[];if(c&&("default"===n._queryIdentifier||LH(c,n))){const m=function(i,n,r,s){const o=n._queryIdentifier,c=[];let h=[];const m=Df(i);if("default"===o)for(const[y,C]of i.views.entries())h=h.concat(MH(C,r,s)),xH(C)&&(i.views.delete(y),C.query._queryParams.loadsAllData()||c.push(C.query));else{const y=i.views.get(o);y&&(h=h.concat(MH(y,r,s)),xH(y)&&(i.views.delete(o),y.query._queryParams.loadsAllData()||c.push(y.query)))}return m&&!Df(i)&&c.push(new((0,P.hu)(pM,"Reference.ts has not been loaded"),pM)(n._repo,n._path)),{removed:c,events:h}}(c,n,r,s);(function(i){return 0===i.views.size})(c)&&(i.syncPointTree_=i.syncPointTree_.remove(o));const y=m.removed;h=m.events;const C=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),T=i.syncPointTree_.findOnPath(o,(x,R)=>Df(R));if(C&&!T){const x=i.syncPointTree_.subtree(o);if(!x.isEmpty()){const R=function(i){return i.fold((n,r,s)=>{if(r&&Df(r))return[gM(r)];{let o=[];return r&&(o=PH(r)),Mi(s,(c,h)=>{o=o.concat(h)}),o}})}(x);for(let O=0;O<R.length;++O){const U=R[O],te=U.query,pe=HH(i,U);i.listenProvider_.startListening(X0(te),yM(i,te),pe.hashFn,pe.onComplete)}}}if(!T&&y.length>0&&!s)if(C){const x=null;i.listenProvider_.stopListening(X0(n),x)}else y.forEach(x=>{const R=i.queryToTagMap.get(vM(x));i.listenProvider_.stopListening(X0(x),R)});!function(i,n){for(let r=0;r<n.length;++r){const s=n[r];if(!s._queryParams.loadsAllData()){const o=vM(s),c=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(c)}}}(i,y)}return h}function BH(i,n,r){const s=n._path;let o=null,c=!1;i.syncPointTree_.foreachOnPath(s,(x,R)=>{const O=xs(x,s);o=o||Tf(R,O),c=c||Df(R)});let m,h=i.syncPointTree_.get(s);h?(c=c||Df(h),o=o||Tf(h,hn())):(h=new NH,i.syncPointTree_=i.syncPointTree_.set(s,h)),null!=o?m=!0:(m=!1,o=Ft.EMPTY_NODE,i.syncPointTree_.subtree(s).foreachChild((R,O)=>{const U=Tf(O,hn());U&&(o=o.updateImmediateChild(R,U))}));const y=LH(h,n);if(!y&&!n._queryParams.loadsAllData()){const x=vM(n);(0,P.hu)(!i.queryToTagMap.has(x),"View does not exist, but we have a tag");const R=YK++;i.queryToTagMap.set(x,R),i.tagToQueryMap.set(R,x)}let T=function(i,n,r,s,o,c){const h=OH(i,n,s,o,c);return i.views.has(n._queryIdentifier)||i.views.set(n._queryIdentifier,h),function(i,n){i.eventRegistrations_.push(n)}(h,r),function(i,n){const r=i.viewCache_.eventCache,s=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Bn,(c,h)=>{s.push(Vv(c,h))}),r.isFullyInitialized()&&s.push(hH(r.getNode())),kH(i,s,r.getNode(),n)}(h,r)}(h,n,r,uM(i.pendingWriteTree_,s),o,m);if(!y&&!c){const x=FH(h,n);T=T.concat(function(i,n,r){const s=n._path,o=yM(i,n),c=HH(i,r),h=i.listenProvider_.startListening(X0(n),o,c.hashFn,c.onComplete),m=i.syncPointTree_.subtree(s);if(o)(0,P.hu)(!Df(m.value),"If we're adding a query, it shouldn't be shadowed");else{const y=m.fold((C,T,x)=>{if(!qt(C)&&T&&Df(T))return[gM(T).query];{let R=[];return T&&(R=R.concat(PH(T).map(O=>O.query))),Mi(x,(O,U)=>{R=R.concat(U)}),R}});for(let C=0;C<y.length;++C){const T=y[C];i.listenProvider_.stopListening(X0(T),yM(i,T))}}return h}(i,n,x))}return T}function _M(i,n,r){const o=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(n,(h,m)=>{const C=Tf(m,xs(h,n));if(C)return C});return EH(o,n,c,r,!0)}function Hv(i,n){return UH(n,i.syncPointTree_,null,uM(i.pendingWriteTree_,hn()))}function UH(i,n,r,s){if(qt(i.path))return jH(i,n,r,s);{const o=n.get(hn());null==r&&null!=o&&(r=Tf(o,hn()));let c=[];const h=zt(i.path),m=i.operationForChild(h),y=n.children.get(h);if(y&&m){const C=r?r.getImmediateChild(h):null,T=CH(s,h);c=c.concat(UH(m,y,C,T))}return o&&(c=c.concat(jF(o,i,s,r))),c}}function jH(i,n,r,s){const o=n.get(hn());null==r&&null!=o&&(r=Tf(o,hn()));let c=[];return n.children.inorderTraversal((h,m)=>{const y=r?r.getImmediateChild(h):null,C=CH(s,h),T=i.operationForChild(h);T&&(c=c.concat(jH(T,m,y,C)))}),o&&(c=c.concat(jF(o,i,s,r))),c}function HH(i,n){const r=n.query,s=yM(i,r);return{hashFn:()=>(function(i){return i.viewCache_.serverCache.getNode()}(n)||Ft.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return s?function(i,n,r){const s=$F(i,r);if(s){const o=zF(s),c=o.path,h=o.queryId,m=xs(c,n);return qF(i,c,new Y0(RF(h),m))}return[]}(i,r._path,s):function(i,n){return Hv(i,new Y0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(i,r._path);{const c=function(i,n){let r="Unknown Error";"too_big"===i?r="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?r="Client doesn't have permission to access the desired data.":"unavailable"===i&&(r="The service is unavailable");const s=new Error(i+" at "+n._path.toString()+": "+r);return s.code=i.toUpperCase(),s}(o,r);return GF(i,r,null,c)}}}}function yM(i,n){const r=vM(n);return i.queryToTagMap.get(r)}function vM(i){return i._path.toString()+"$"+i._queryIdentifier}function $F(i,n){return i.tagToQueryMap.get(n)}function zF(i){const n=i.indexOf("$");return(0,P.hu)(-1!==n&&n<i.length-1,"Bad queryKey."),{queryId:i.substr(n+1),path:new En(i.substr(0,n))}}function qF(i,n,r){const s=i.syncPointTree_.get(n);return(0,P.hu)(s,"Missing sync point for query tag that we're tracking"),jF(s,r,uM(i.pendingWriteTree_,n),null)}function X0(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new((0,P.hu)(mM,"Reference.ts has not been loaded"),mM)(i._repo,i._path):i}class WF{constructor(n){this.node_=n}getImmediateChild(n){const r=this.node_.getImmediateChild(n);return new WF(r)}node(){return this.node_}}class YF{constructor(n,r){this.syncTree_=n,this.path_=r}getImmediateChild(n){const r=rr(this.path_,n);return new YF(this.syncTree_,r)}node(){return _M(this.syncTree_,this.path_)}}const GH=function(i,n,r){return i&&"object"==typeof i?((0,P.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?a5(i[".sv"],n,r):"object"==typeof i[".sv"]?l5(i[".sv"],n):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},a5=function(i,n,r){switch(i){case"timestamp":return r.timestamp;default:(0,P.hu)(!1,"Unexpected server value: "+i)}},l5=function(i,n,r){i.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const s=i.increment;"number"!=typeof s&&(0,P.hu)(!1,"Unexpected increment value: "+s);const o=n.node();if((0,P.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const h=o.getValue();return"number"!=typeof h?s:h+s},$H=function(i,n,r,s){return ZF(n,new YF(r,i),s)},KF=function(i,n,r){return ZF(i,new WF(n),r)};function ZF(i,n,r){const s=i.getPriority().val(),o=GH(s,n.getImmediateChild(".priority"),r);let c;if(i.isLeafNode()){const h=i,m=GH(h.getValue(),n,r);return m!==h.getValue()||o!==h.getPriority().val()?new Pv(m,pr(o)):i}{const h=i;return c=h,o!==h.getPriority().val()&&(c=c.updatePriority(new Pv(o))),h.forEachChild(Bn,(m,y)=>{const C=ZF(y,n.getImmediateChild(m),r);C!==y&&(c=c.updateImmediateChild(m,C))}),c}}class QF{constructor(n="",r=null,s={children:{},childCount:0}){this.name=n,this.parent=r,this.node=s}}function bM(i,n){let r=n instanceof En?n:new En(n),s=i,o=zt(r);for(;null!==o;){const c=(0,P.DV)(s.node.children,o)||{children:{},childCount:0};s=new QF(o,s,c),r=On(r),o=zt(r)}return s}function dm(i){return i.node.value}function JF(i,n){i.node.value=n,XF(i)}function zH(i){return i.node.childCount>0}function EM(i,n){Mi(i.node.children,(r,s)=>{n(new QF(r,i,s))})}function qH(i,n,r,s){r&&!s&&n(i),EM(i,o=>{qH(o,n,!0,s)}),r&&s&&n(i)}function eI(i){return new En(null===i.parent?i.name:eI(i.parent)+"/"+i.name)}function XF(i){null!==i.parent&&function(i,n,r){const s=function(i){return void 0===dm(i)&&!zH(i)}(r),o=(0,P.r3)(i.node.children,n);s&&o?(delete i.node.children[n],i.node.childCount--,XF(i)):!s&&!o&&(i.node.children[n]=r.node,i.node.childCount++,XF(i))}(i.parent,i.name,i)}const h5=/[\[\].#$\/\u0000-\u001F\u007F]/,f5=/[\[\].#$\u0000-\u001F\u007F]/,e1=10485760,wM=function(i){return"string"==typeof i&&0!==i.length&&!h5.test(i)},WH=function(i){return"string"==typeof i&&0!==i.length&&!f5.test(i)},tI=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!Kx(i)||i&&"object"==typeof i&&(0,P.r3)(i,".sv")},xc=function(i,n,r,s){s&&void 0===n||nI((0,P.gK)(i,"value"),n,r)},nI=function(i,n,r){const s=r instanceof En?new DY(r,i):r;if(void 0===n)throw new Error(i+"contains undefined "+om(s));if("function"==typeof n)throw new Error(i+"contains a function "+om(s)+" with contents = "+n.toString());if(Kx(n))throw new Error(i+"contains "+n.toString()+" "+om(s));if("string"==typeof n&&n.length>e1/3&&(0,P.ug)(n)>e1)throw new Error(i+"contains a string greater than "+e1+" utf8 bytes "+om(s)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){let o=!1,c=!1;if(Mi(n,(h,m)=>{if(".value"===h)o=!0;else if(".priority"!==h&&".sv"!==h&&(c=!0,!wM(h)))throw new Error(i+" contains an invalid key ("+h+") "+om(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(i,n){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(n),i.byteLength_+=(0,P.ug)(n),Xj(i)})(s,h),nI(i,m,s),function(i){const n=i.parts_.pop();i.byteLength_-=(0,P.ug)(n),i.parts_.length>0&&(i.byteLength_-=1)}(s)}),o&&c)throw new Error(i+' contains ".value" child '+om(s)+" in addition to actual children.")}},YH=function(i,n,r,s){if(s&&void 0===n)return;const o=(0,P.gK)(i,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");const c=[];Mi(n,(h,m)=>{const y=new En(h);if(nI(o,m,rr(r,y)),".priority"===gF(y)&&!tI(m))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(y)}),function(i,n){let r,s;for(r=0;r<n.length;r++){s=n[r];const c=j0(s);for(let h=0;h<c.length;h++)if((".priority"!==c[h]||h!==c.length-1)&&!wM(c[h]))throw new Error(i+"contains an invalid key ("+c[h]+") in path "+s.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(TY);let o=null;for(r=0;r<n.length;r++){if(s=n[r],null!==o&&la(o,s))throw new Error(i+"contains a path "+o.toString()+" that is ancestor of another path "+s.toString());o=s}}(o,c)},t1=function(i,n,r){if(!r||void 0!==n){if(Kx(n))throw new Error((0,P.gK)(i,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!tI(n))throw new Error((0,P.gK)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rI=function(i,n,r,s){if(!(s&&void 0===r||wM(r)))throw new Error((0,P.gK)(i,n)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},iI=function(i,n,r,s){if(!(s&&void 0===r||WH(r)))throw new Error((0,P.gK)(i,n)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ua=function(i,n){if(".info"===zt(n))throw new Error(i+" failed = Can't modify data under /.info/")},KH=function(i,n){const r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!wM(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),WH(i)}(r))throw new Error((0,P.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class _5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function CM(i,n){let r=null;for(let s=0;s<n.length;s++){const o=n[s],c=o.getPath();null!==r&&!mF(c,r.path)&&(i.eventLists_.push(r),r=null),null===r&&(r={events:[],path:c}),r.events.push(o)}r&&i.eventLists_.push(r)}function n1(i,n,r){CM(i,r),ZH(i,s=>mF(s,n))}function da(i,n,r){CM(i,r),ZH(i,s=>la(s,n)||la(n,s))}function ZH(i,n){i.recursionDepth_++;let r=!0;for(let s=0;s<i.eventLists_.length;s++){const o=i.eventLists_[s];o&&(n(o.path)?(y5(i.eventLists_[s]),i.eventLists_[s]=null):r=!1)}r&&(i.eventLists_=[]),i.recursionDepth_--}function y5(i){for(let n=0;n<i.events.length;n++){const r=i.events[n];if(null!==r){i.events[n]=null;const s=r.getEventRunner();im&&xi("event: "+r.toString()),Nv(s)}}}const QH="repo_interrupt";class b5{constructor(n,r,s,o){this.repoInfo_=n,this.forceRestClient_=r,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oM(),this.transactionQueueTree_=new QF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JH(i){const r=i.infoData_.getNode(new En(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+r}function sI(i){return function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i}({timestamp:JH(i)})}function XH(i,n,r,s,o){i.dataUpdateCount++;const c=new En(n);r=i.interceptServerDataCallback_?i.interceptServerDataCallback_(n,r):r;let h=[];if(o)if(s){const y=(0,P.UI)(r,C=>pr(C));h=function(i,n,r,s){const o=$F(i,s);if(o){const c=zF(o),h=c.path,m=c.queryId,y=xs(h,n),C=Un.fromObject(r);return qF(i,h,new Uv(RF(m),y,C))}return[]}(i.serverSyncTree_,c,y,o)}else{const y=pr(r);h=function(i,n,r,s){const o=$F(i,s);if(null!=o){const c=zF(o),h=c.path,m=c.queryId,y=xs(h,n);return qF(i,h,new lm(RF(m),y,r))}return[]}(i.serverSyncTree_,c,y,o)}else if(s){const y=(0,P.UI)(r,C=>pr(C));h=function(i,n,r){const s=Un.fromObject(r);return Hv(i,new Uv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,s))}(i.serverSyncTree_,c,y)}else{const y=pr(r);h=J0(i.serverSyncTree_,c,y)}let m=c;h.length>0&&(m=$v(i,c)),da(i.eventQueue_,m,h)}function e3(i,n){r1(i,"connected",n),!1===n&&function(i){Gv(i,"onDisconnectEvents");const n=sI(i),r=oM();AF(i.onDisconnect_,hn(),(o,c)=>{const h=$H(o,c,i.serverSyncTree_,n);Bv(r,o,h)});let s=[];AF(r,hn(),(o,c)=>{s=s.concat(J0(i.serverSyncTree_,o,c));const h=a1(i,o);$v(i,h)}),i.onDisconnect_=oM(),da(i.eventQueue_,hn(),s)}(i)}function r1(i,n,r){const s=new En("/.info/"+n),o=pr(r);i.infoData_.updateSnapshot(s,o);const c=J0(i.infoSyncTree_,s,o);da(i.eventQueue_,s,c)}function IM(i){return i.nextWriteId_++}function i1(i,n,r,s,o){Gv(i,"set",{path:n.toString(),value:r,priority:s});const c=sI(i),h=pr(r,s),m=_M(i.serverSyncTree_,n),y=KF(h,m,c),C=IM(i),T=HF(i.serverSyncTree_,n,y,C,!0);CM(i.eventQueue_,T),i.server_.put(n.toString(),h.val(!0),(R,O)=>{const U="ok"===R;U||As("set at "+n+" failed: "+R);const te=Af(i.serverSyncTree_,C,!U);da(i.eventQueue_,n,te),xf(0,o,R,O)});const x=a1(i,n);$v(i,x),da(i.eventQueue_,x,[])}function T5(i,n,r){i.server_.onDisconnectCancel(n.toString(),(s,o)=>{"ok"===s&&DF(i.onDisconnect_,n),xf(0,r,s,o)})}function t3(i,n,r,s){const o=pr(r);i.server_.onDisconnectPut(n.toString(),o.val(!0),(c,h)=>{"ok"===c&&Bv(i.onDisconnect_,n,o),xf(0,s,c,h)})}function s1(i,n,r){let s;s=".info"===zt(n._path)?GF(i.infoSyncTree_,n,r):GF(i.serverSyncTree_,n,r),n1(i.eventQueue_,n._path,s)}function n3(i){i.persistentConnection_&&i.persistentConnection_.interrupt(QH)}function Gv(i,...n){let r="";i.persistentConnection_&&(r=i.persistentConnection_.id+":"),xi(r,...n)}function xf(i,n,r,s){n&&Nv(()=>{if("ok"===r)n(null);else{const o=(r||"error").toUpperCase();let c=o;s&&(c+=": "+s);const h=new Error(c);h.code=o,n(h)}})}function o1(i,n,r){return _M(i.serverSyncTree_,n,r)||Ft.EMPTY_NODE}function SM(i,n=i.transactionQueueTree_){if(n||TM(i,n),dm(n)){const r=i3(i,n);(0,P.hu)(r.length>0,"Sending zero length transaction queue"),r.every(o=>0===o.status)&&function(i,n,r){const s=r.map(C=>C.currentWriteId),o=o1(i,n,s);let c=o;const h=o.hash();for(let C=0;C<r.length;C++){const T=r[C];(0,P.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const x=xs(n,T.path);c=c.updateChild(x,T.currentOutputSnapshotRaw)}const m=c.val(!0),y=n;i.server_.put(y.toString(),m,C=>{Gv(i,"transaction put response",{path:y.toString(),status:C});let T=[];if("ok"===C){const x=[];for(let R=0;R<r.length;R++)r[R].status=2,T=T.concat(Af(i.serverSyncTree_,r[R].currentWriteId)),r[R].onComplete&&x.push(()=>r[R].onComplete(null,!0,r[R].currentOutputSnapshotResolved)),r[R].unwatcher();TM(i,bM(i.transactionQueueTree_,n)),SM(i,i.transactionQueueTree_),da(i.eventQueue_,n,T);for(let R=0;R<x.length;R++)Nv(x[R])}else{if("datastale"===C)for(let x=0;x<r.length;x++)r[x].status=3===r[x].status?4:0;else{As("transaction at "+y.toString()+" failed: "+C);for(let x=0;x<r.length;x++)r[x].status=4,r[x].abortReason=C}$v(i,n)}},h)}(i,eI(n),r)}else zH(n)&&EM(n,r=>{SM(i,r)})}function $v(i,n){const r=r3(i,n),s=eI(r);return function(i,n,r){if(0===n.length)return;const s=[];let o=[];const h=n.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<n.length;m++){const y=n[m],C=xs(r,y.path);let x,T=!1;if((0,P.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)T=!0,x=y.abortReason,o=o.concat(Af(i.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)T=!0,x="maxretry",o=o.concat(Af(i.serverSyncTree_,y.currentWriteId,!0));else{const R=o1(i,y.path,h);y.currentInputSnapshot=R;const O=n[m].update(R.val());if(void 0!==O){nI("transaction failed: Data returned ",O,y.path);let U=pr(O);"object"==typeof O&&null!=O&&(0,P.r3)(O,".priority")||(U=U.updatePriority(R.getPriority()));const pe=y.currentWriteId,Fe=sI(i),Ge=KF(U,R,Fe);y.currentOutputSnapshotRaw=U,y.currentOutputSnapshotResolved=Ge,y.currentWriteId=IM(i),h.splice(h.indexOf(pe),1),o=o.concat(HF(i.serverSyncTree_,y.path,Ge,y.currentWriteId,y.applyLocally)),o=o.concat(Af(i.serverSyncTree_,pe,!0))}else T=!0,x="nodata",o=o.concat(Af(i.serverSyncTree_,y.currentWriteId,!0))}da(i.eventQueue_,r,o),o=[],T&&(n[m].status=2,setTimeout(n[m].unwatcher,Math.floor(0)),n[m].onComplete&&s.push("nodata"===x?()=>n[m].onComplete(null,!1,n[m].currentInputSnapshot):()=>n[m].onComplete(new Error(x),!1,null)))}TM(i,i.transactionQueueTree_);for(let m=0;m<s.length;m++)Nv(s[m]);SM(i,i.transactionQueueTree_)}(i,i3(i,r),s),s}function r3(i,n){let r,s=i.transactionQueueTree_;for(r=zt(n);null!==r&&void 0===dm(s);)s=bM(s,r),r=zt(n=On(n));return s}function i3(i,n){const r=[];return s3(i,n,r),r.sort((s,o)=>s.order-o.order),r}function s3(i,n,r){const s=dm(n);if(s)for(let o=0;o<s.length;o++)r.push(s[o]);EM(n,o=>{s3(i,o,r)})}function TM(i,n){const r=dm(n);if(r){let s=0;for(let o=0;o<r.length;o++)2!==r[o].status&&(r[s]=r[o],s++);r.length=s,JF(n,r.length>0?r:void 0)}EM(n,s=>{TM(i,s)})}function a1(i,n){const r=eI(r3(i,n)),s=bM(i.transactionQueueTree_,n);return function(i,n,r){let s=i.parent;for(;null!==s;){if(n(s))return!0;s=s.parent}}(s,o=>{l1(i,o)}),l1(i,s),qH(s,o=>{l1(i,o)}),r}function l1(i,n){const r=dm(n);if(r){const s=[];let o=[],c=-1;for(let h=0;h<r.length;h++)3===r[h].status||(1===r[h].status?((0,P.hu)(c===h-1,"All SENT items should be at beginning of queue."),c=h,r[h].status=3,r[h].abortReason="set"):((0,P.hu)(0===r[h].status,"Unexpected transaction status in abort"),r[h].unwatcher(),o=o.concat(Af(i.serverSyncTree_,r[h].currentWriteId,!0)),r[h].onComplete&&s.push(r[h].onComplete.bind(null,new Error("set"),!1,null))));-1===c?JF(n,void 0):r.length=c+1,da(i.eventQueue_,eI(n),o);for(let h=0;h<s.length;h++)Nv(s[h])}}const c1=function(i,n){const r=F5(i),s=r.namespace;return"firebase.com"===r.domain&&Tc(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||"undefined"===s)&&"localhost"!==r.domain&&Tc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&As("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new lF(r.host,r.secure,s,n,"ws"===r.scheme||"wss"===r.scheme,"",s!==r.subdomain),path:new En(r.pathString)}},F5=function(i){let n="",r="",s="",o="",c="",h=!0,m="https",y=443;if("string"==typeof i){let C=i.indexOf("//");C>=0&&(m=i.substring(0,C-1),i=i.substring(C+2));let T=i.indexOf("/");-1===T&&(T=i.length);let x=i.indexOf("?");-1===x&&(x=i.length),n=i.substring(0,Math.min(T,x)),T<x&&(o=function(i){let n="";const r=i.split("/");for(let s=0;s<r.length;s++)if(r[s].length>0){let o=r[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(c){}n+="/"+o}return n}(i.substring(T,x)));const R=function(i){const n={};"?"===i.charAt(0)&&(i=i.substring(1));for(const r of i.split("&")){if(0===r.length)continue;const s=r.split("=");2===s.length?n[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):As(`Invalid query segment '${r}' in query '${i}'`)}return n}(i.substring(Math.min(i.length,x)));C=n.indexOf(":"),C>=0?(h="https"===m||"wss"===m,y=parseInt(n.substring(C+1),10)):C=n.length;const O=n.slice(0,C);if("localhost"===O.toLowerCase())r="localhost";else if(O.split(".").length<=2)r=O;else{const U=n.indexOf(".");s=n.substring(0,U).toLowerCase(),r=n.substring(U+1),c=s}"ns"in R&&(c=R.ns)}return{host:n,port:y,domain:r,subdomain:s,secure:h,scheme:m,pathString:o,namespace:c}};class o3{constructor(n,r,s,o){this.eventType=n,this.eventRegistration=r,this.snapshot=s,this.prevName=o}getPath(){const n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class a3{constructor(n,r,s){this.eventRegistration=n,this.error=r,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class l3{constructor(n,r){this.snapshotCallback=n,this.cancelCallback=r}onValue(n,r){this.snapshotCallback.call(null,n,r)}onCancel(n){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class c3{constructor(n,r){this._repo=n,this._path=r}cancel(){const n=new P.BH;return T5(this._repo,this._path,n.wrapCallback(()=>{})),n.promise}remove(){ua("OnDisconnect.remove",this._path);const n=new P.BH;return t3(this._repo,this._path,null,n.wrapCallback(()=>{})),n.promise}set(n){ua("OnDisconnect.set",this._path),xc("OnDisconnect.set",n,this._path,!1);const r=new P.BH;return t3(this._repo,this._path,n,r.wrapCallback(()=>{})),r.promise}setWithPriority(n,r){ua("OnDisconnect.setWithPriority",this._path),xc("OnDisconnect.setWithPriority",n,this._path,!1),t1("OnDisconnect.setWithPriority",r,!1);const s=new P.BH;return function(i,n,r,s,o){const c=pr(r,s);i.server_.onDisconnectPut(n.toString(),c.val(!0),(h,m)=>{"ok"===h&&Bv(i.onDisconnect_,n,c),xf(0,o,h,m)})}(this._repo,this._path,n,r,s.wrapCallback(()=>{})),s.promise}update(n){ua("OnDisconnect.update",this._path),YH("OnDisconnect.update",n,this._path,!1);const r=new P.BH;return function(i,n,r,s){if((0,P.xb)(r))return xi("onDisconnect().update() called with empty data.  Don't do anything."),void xf(0,s,"ok",void 0);i.server_.onDisconnectMerge(n.toString(),r,(o,c)=>{"ok"===o&&Mi(r,(h,m)=>{const y=pr(m);Bv(i.onDisconnect_,rr(n,h),y)}),xf(0,s,o,c)})}(this._repo,this._path,n,r.wrapCallback(()=>{})),r.promise}}class js{constructor(n,r,s,o){this._repo=n,this._path=r,this._queryParams=s,this._orderByCalled=o}get key(){return qt(this._path)?null:gF(this._path)}get ref(){return new ha(this._repo,this._path)}get _queryIdentifier(){const n=pH(this._queryParams),r=sF(n);return"{}"===r?"default":r}get _queryObject(){return pH(this._queryParams)}isEqual(n){if(!((n=(0,P.m9)(n))instanceof js))return!1;const r=this._repo===n._repo,s=mF(this._path,n._path);return r&&s&&this._queryIdentifier===n._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(i){let n="";for(let r=i.pieceNum_;r<i.pieces_.length;r++)""!==i.pieces_[r]&&(n+="/"+encodeURIComponent(String(i.pieces_[r])));return n||"/"}(this._path)}}function DM(i,n){if(!0===i._orderByCalled)throw new Error(n+": You can't combine multiple orderBy calls.")}function Mf(i){let n=null,r=null;if(i.hasStart()&&(n=i.getIndexStartValue()),i.hasEnd()&&(r=i.getIndexEndValue()),i.getIndex()===Ac){const s="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==nd)throw new Error(s);if("string"!=typeof n)throw new Error(o)}if(i.hasEnd()){if(i.getIndexEndName()!==Dc)throw new Error(s);if("string"!=typeof r)throw new Error(o)}}else if(i.getIndex()===Bn){if(null!=n&&!tI(n)||null!=r&&!tI(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(i.getIndex()instanceof EF||i.getIndex()===wF,"unknown index type."),null!=n&&"object"==typeof n||null!=r&&"object"==typeof r)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function AM(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ha extends js{constructor(n,r){super(n,r,new rM,!1)}get parent(){const n=Jj(this._path);return null===n?null:new ha(this._repo,n)}get root(){let n=this;for(;null!==n.parent;)n=n.parent;return n}}class hm{constructor(n,r,s){this._node=n,this.ref=r,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const r=new En(n),s=fm(this.ref,n);return new hm(this._node.getChild(r),s,Bn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(s,o)=>n(new hm(o,fm(this.ref,s),Bn)))}hasChild(n){const r=new En(n);return!this._node.getChild(r).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function u3(i,n){return(i=(0,P.m9)(i))._checkNotDeleted("ref"),void 0!==n?fm(i._root,n):i._root}function d3(i,n){(i=(0,P.m9)(i))._checkNotDeleted("refFromURL");const r=c1(n,i._repo.repoInfo_.nodeAdmin);KH("refFromURL",r);const s=r.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&s.host!==i._repo.repoInfo_.host&&Tc("refFromURL: Host name does not match the current database: (found "+s.host+" but expected "+i._repo.repoInfo_.host+")"),u3(i,r.path.toString())}function fm(i,n){return null===zt((i=(0,P.m9)(i))._path)?((r=n)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),iI("child","path",r,!1)):iI("child","path",n,!1),new ha(i._repo,rr(i._path,n));var r}function u1(i,n){i=(0,P.m9)(i),ua("set",i._path),xc("set",n,i._path,!1);const r=new P.BH;return i1(i._repo,i._path,n,null,r.wrapCallback(()=>{})),r.promise}function j5(i,n){YH("update",n,i._path,!1);const r=new P.BH;return function(i,n,r,s){Gv(i,"update",{path:n.toString(),value:r});let o=!0;const c=sI(i),h={};if(Mi(r,(m,y)=>{o=!1,h[m]=$H(rr(n,m),pr(y),i.serverSyncTree_,c)}),o)xi("update() called with empty data.  Don't do anything."),xf(0,s,"ok",void 0);else{const m=IM(i),y=function(i,n,r,s){!function(i,n,r,s){(0,P.hu)(s>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:n,children:r,writeId:s,visible:!0}),i.visibleWrites=NF(i.visibleWrites,n,r),i.lastWriteId=s}(i.pendingWriteTree_,n,r,s);const o=Un.fromObject(r);return Hv(i,new Uv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,o))}(i.serverSyncTree_,n,h,m);CM(i.eventQueue_,y),i.server_.merge(n.toString(),r,(C,T)=>{const x="ok"===C;x||As("update at "+n+" failed: "+C);const R=Af(i.serverSyncTree_,m,!x),O=R.length>0?$v(i,n):n;da(i.eventQueue_,O,R),xf(0,s,C,T)}),Mi(r,C=>{const T=a1(i,rr(n,C));$v(i,T)}),da(i.eventQueue_,n,[])}}(i._repo,i._path,n,r.wrapCallback(()=>{})),r.promise}function H5(i){return function(i,n){const r=function(i,n){const r=n._path;let s=null;i.syncPointTree_.foreachOnPath(r,(C,T)=>{const x=xs(C,r);s=s||Tf(T,x)});let o=i.syncPointTree_.get(r);o?s=s||Tf(o,hn()):(o=new NH,i.syncPointTree_=i.syncPointTree_.set(r,o));const c=null!=s,h=c?new If(s,!0,!1):null;return function(i){return cM(i.viewCache_)}(OH(o,n,uM(i.pendingWriteTree_,n._path),c?h.getNode():Ft.EMPTY_NODE,c))}(i.serverSyncTree_,n);return null!=r?Promise.resolve(r):i.server_.get(n).then(s=>{const o=pr(s).withIndex(n._queryParams.getIndex()),c=J0(i.serverSyncTree_,n._path,o);return n1(i.eventQueue_,n._path,c),Promise.resolve(o)},s=>(Gv(i,"get for query "+(0,P.Pz)(n)+" failed: "+s),Promise.reject(new Error(s))))}((i=(0,P.m9)(i))._repo,i).then(n=>new hm(n,new ha(i._repo,i._path),i._queryParams.getIndex()))}class xM{constructor(n){this.callbackContext=n}respondsTo(n){return"value"===n}createEvent(n,r){const s=r._queryParams.getIndex();return new o3("value",this,new hm(n.snapshotNode,new ha(r._repo,r._path),s))}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,r){return this.callbackContext.hasCancelCallback?new a3(this,n,r):null}matches(n){return n instanceof xM&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class MM{constructor(n,r){this.eventType=n,this.callbackContext=r}respondsTo(n){let r="children_added"===n?"child_added":n;return r="children_removed"===r?"child_removed":r,this.eventType===r}createCancelEvent(n,r){return this.callbackContext.hasCancelCallback?new a3(this,n,r):null}createEvent(n,r){(0,P.hu)(null!=n.childName,"Child events should have a childName.");const s=fm(new ha(r._repo,r._path),n.childName),o=r._queryParams.getIndex();return new o3(n.type,this,new hm(n.snapshotNode,s,o),n.prevName)}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof MM&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function oI(i,n,r,s,o){let c;if("object"==typeof s&&(c=void 0,o=s),"function"==typeof s&&(c=s),o&&o.onlyOnce){const y=r,C=(T,x)=>{s1(i._repo,i,m),y(T,x)};C.userCallback=r.userCallback,C.context=r.context,r=C}const h=new l3(r,c||void 0),m="value"===n?new xM(h):new MM(n,h);return function(i,n,r){let s;s=".info"===zt(n._path)?BH(i.infoSyncTree_,n,r):BH(i.serverSyncTree_,n,r),n1(i.eventQueue_,n._path,s)}(i._repo,i,m),()=>s1(i._repo,i,m)}function d1(i,n,r,s){return oI(i,"value",n,r,s)}function h3(i,n,r,s){return oI(i,"child_added",n,r,s)}function f3(i,n,r,s){return oI(i,"child_changed",n,r,s)}function p3(i,n,r,s){return oI(i,"child_moved",n,r,s)}function g3(i,n,r,s){return oI(i,"child_removed",n,r,s)}function m3(i,n,r){let s=null;const o=r?new l3(r):null;"value"===n?s=new xM(o):n&&(s=new MM(n,o)),s1(i._repo,i,s)}class rl{}class _3 extends rl{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){xc("endAt",this._value,n._path,!0);const r=TF(n._queryParams,this._value,this._key);if(AM(r),Mf(r),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new js(n._repo,n._path,r,n._orderByCalled)}}class $5 extends rl{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){xc("endBefore",this._value,n._path,!1);const r=function(i,n,r){let s,o;return i.index_===Ac?("string"==typeof n&&(n=dH(n)),o=TF(i,n,r)):(s=null==r?nd:dH(r),o=TF(i,n,s)),o.endBeforeSet_=!0,o}(n._queryParams,this._value,this._key);if(AM(r),Mf(r),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new js(n._repo,n._path,r,n._orderByCalled)}}class y3 extends rl{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){xc("startAt",this._value,n._path,!0);const r=SF(n._queryParams,this._value,this._key);if(AM(r),Mf(r),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new js(n._repo,n._path,r,n._orderByCalled)}}class W5 extends rl{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){xc("startAfter",this._value,n._path,!1);const r=function(i,n,r){let s;if(i.index_===Ac)"string"==typeof n&&(n=uH(n)),s=SF(i,n,r);else{let o;o=null==r?Dc:uH(r),s=SF(i,n,o)}return s.startAfterSet_=!0,s}(n._queryParams,this._value,this._key);if(AM(r),Mf(r),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new js(n._repo,n._path,r,n._orderByCalled)}}class K5 extends rl{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new js(n._repo,n._path,function(i,n){const r=i.copy();return r.limitSet_=!0,r.limit_=n,r.viewFrom_="l",r}(n._queryParams,this._limit),n._orderByCalled)}}class Q5 extends rl{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new js(n._repo,n._path,function(i,n){const r=i.copy();return r.limitSet_=!0,r.limit_=n,r.viewFrom_="r",r}(n._queryParams,this._limit),n._orderByCalled)}}class X5 extends rl{constructor(n){super(),this._path=n}_apply(n){DM(n,"orderByChild");const r=new En(this._path);if(qt(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const s=new EF(r),o=iM(n._queryParams,s);return Mf(o),new js(n._repo,n._path,o,!0)}}class tZ extends rl{_apply(n){DM(n,"orderByKey");const r=iM(n._queryParams,Ac);return Mf(r),new js(n._repo,n._path,r,!0)}}class rZ extends rl{_apply(n){DM(n,"orderByPriority");const r=iM(n._queryParams,Bn);return Mf(r),new js(n._repo,n._path,r,!0)}}class sZ extends rl{_apply(n){DM(n,"orderByValue");const r=iM(n._queryParams,wF);return Mf(r),new js(n._repo,n._path,r,!0)}}class aZ extends rl{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){if(xc("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _3(this._value,this._key)._apply(new y3(this._value,this._key)._apply(n))}}function il(i,...n){let r=(0,P.m9)(i);for(const s of n)r=s._apply(r);return r}(function(i){(0,P.hu)(!pM,"__referenceConstructor has already been defined"),pM=i})(ha),function(i){(0,P.hu)(!mM,"__referenceConstructor has already been defined"),mM=i}(ha);const h1={};function b3(i,n,r,s,o){let c=s||i.options.databaseURL;void 0===c&&(i.options.projectId||Tc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xi("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let y,C,h=c1(c,o),m=h.repoInfo;"undefined"!=typeof process&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(y=!0,c=`http://${C}?ns=${m.namespace}`,h=c1(c,o),m=h.repoInfo):y=!h.repoInfo.secure;const T=o&&y?new V0(V0.OWNER):new X8(i.name,i.options,n);KH("Invalid Firebase Database URL",h),qt(h.path)||Tc("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function(i,n,r,s){let o=h1[n.name];o||(o={},h1[n.name]=o);let c=o[i.toURLString()];return c&&Tc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new b5(i,false,r,s),o[i.toURLString()]=c,c}(m,i,T,new J8(i.name,r));return new pZ(x,i)}class pZ{constructor(n,r){this._repoInternal=n,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(i,n,r){if(i.stats_=dF(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new sM(i.repoInfo_,(s,o,c,h)=>{XH(i,s,o,c,h)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>e3(i,!0),0);else{if(null!=r){if("object"!=typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(r)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}i.persistentConnection_=new am(i.repoInfo_,n,(s,o,c,h)=>{XH(i,s,o,c,h)},s=>{e3(i,s)},s=>{!function(i,n){Mi(n,(r,s)=>{r1(i,r,s)})}(i,s)},i.authTokenProvider_,i.appCheckProvider_,r),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(s=>{i.server_.refreshAuthToken(s)}),i.appCheckProvider_.addTokenChangeListener(s=>{i.server_.refreshAppCheckToken(s.token)}),i.statsReporter_=function(i,n){const r=i.toString();return uF[r]||(uF[r]=n()),uF[r]}(i.repoInfo_,()=>new sK(i.stats_,i.server_)),i.infoData_=new eK,i.infoSyncTree_=new VH({startListening:(s,o,c,h)=>{let m=[];const y=i.infoData_.getNode(s._path);return y.isEmpty()||(m=J0(i.infoSyncTree_,s._path,y),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),r1(i,"connected",!1),i.serverSyncTree_=new VH({startListening:(s,o,c,h)=>(i.server_.listen(s,c,o,(m,y)=>{const C=h(m,y);da(i.eventQueue_,s._path,C)}),[]),stopListening:(s,o)=>{i.server_.unlisten(s,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ha(this._repo,hn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(i,n){const r=h1[n];(!r||r[i.key]!==i)&&Tc(`Database ${n}(${i.repoInfo_}) has already been deleted.`),n3(i),delete r[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){null===this._rootInternal&&Tc("Cannot call "+n+" on a deleted database.")}}function yZ(i,n){wj(i,n)}class CZ{constructor(n,r){this.committed=n,this.snapshot=r}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}am.prototype.simpleListen=function(i,n){this.sendRequest("q",{p:i},n)},am.prototype.echo=function(i,n){this.sendRequest("echo",{d:i},n)},_j(Ra.SDK_VERSION),(0,Ra._registerComponent)(new dt.wA("database",(n,{instanceIdentifier:r})=>b3(n.getProvider("app").getImmediate(),n.getProvider("auth-internal"),n.getProvider("app-check-internal"),r),"PUBLIC").setMultipleInstances(!0)),(0,Ra.registerVersion)("@firebase/database","0.12.1",void 0);const DZ=new qo.Yd("@firebase/database-compat"),E3=function(i){DZ.warn("FIREBASE WARNING: "+i)};class MZ{constructor(n){this._delegate=n}cancel(n){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",n,!0);const r=this._delegate.cancel();return n&&r.then(()=>n(null),s=>n(s)),r}remove(n){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",n,!0);const r=this._delegate.remove();return n&&r.then(()=>n(null),s=>n(s)),r}set(n,r){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",r,!0);const s=this._delegate.set(n);return r&&s.then(()=>r(null),o=>r(o)),s}setWithPriority(n,r,s){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",s,!0);const o=this._delegate.setWithPriority(n,r);return s&&o.then(()=>s(null),c=>s(c)),o}update(n,r){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){const o={};for(let c=0;c<n.length;++c)o[""+c]=n[c];n=o,E3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",r,!0);const s=this._delegate.update(n);return r&&s.then(()=>r(null),o=>r(o)),s}}class RZ{constructor(n,r){this.committed=n,this.snapshot=r}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Rf{constructor(n,r){this._database=n,this._delegate=r}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(n){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),n=String(n),iI("DataSnapshot.child","path",n,!1),new Rf(this._database,this._delegate.child(n))}hasChild(n){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),iI("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(n){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(r=>n(new Rf(this._database,r)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new vo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Yi{constructor(n,r){this.database=n,this._delegate=r}on(n,r,s,o){var c;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",r,!1);const h=Yi.getCancelAndContextArgs_("Query.on",s,o),m=(C,T)=>{r.call(h.context,new Rf(this.database,C),T)};m.userCallback=r,m.context=h.context;const y=null===(c=h.cancel)||void 0===c?void 0:c.bind(h.context);switch(n){case"value":return d1(this._delegate,m,y),r;case"child_added":return h3(this._delegate,m,y),r;case"child_removed":return g3(this._delegate,m,y),r;case"child_changed":return f3(this._delegate,m,y),r;case"child_moved":return p3(this._delegate,m,y),r;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(n,r,s){if((0,P.Dv)("Query.off",0,3,arguments.length),function(i,n,r){if(void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,n),(0,P.Wj)("Query.off","callback",r,!0),(0,P.lb)("Query.off","context",s,!0),r){const o=()=>{};o.userCallback=r,o.context=s,m3(this._delegate,n,o)}else m3(this._delegate,n)}get(){return H5(this._delegate).then(n=>new Rf(this.database,n))}once(n,r,s,o){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",r,!0);const c=Yi.getCancelAndContextArgs_("Query.once",s,o),h=new P.BH,m=(C,T)=>{const x=new Rf(this.database,C);r&&r.call(c.context,x,T),h.resolve(x)};m.userCallback=r,m.context=c.context;const y=C=>{c.cancel&&c.cancel.call(c.context,C),h.reject(C)};switch(n){case"value":d1(this._delegate,m,y,{onlyOnce:!0});break;case"child_added":h3(this._delegate,m,y,{onlyOnce:!0});break;case"child_removed":g3(this._delegate,m,y,{onlyOnce:!0});break;case"child_changed":f3(this._delegate,m,y,{onlyOnce:!0});break;case"child_moved":p3(this._delegate,m,y,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return h.promise}limitToFirst(n){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new Yi(this.database,il(this._delegate,function(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new K5(i)}(n)))}limitToLast(n){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new Yi(this.database,il(this._delegate,function(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Q5(i)}(n)))}orderByChild(n){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new Yi(this.database,il(this._delegate,function(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return iI("orderByChild","path",i,!1),new X5(i)}(n)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new Yi(this.database,il(this._delegate,new tZ))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new Yi(this.database,il(this._delegate,new rZ))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new Yi(this.database,il(this._delegate,new sZ))}startAt(n=null,r){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new Yi(this.database,il(this._delegate,function(i=null,n){return rI("startAt","key",n,!0),new y3(i,n)}(n,r)))}startAfter(n=null,r){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new Yi(this.database,il(this._delegate,function(i,n){return rI("startAfter","key",n,!0),new W5(i,n)}(n,r)))}endAt(n=null,r){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new Yi(this.database,il(this._delegate,function(i,n){return rI("endAt","key",n,!0),new _3(i,n)}(n,r)))}endBefore(n=null,r){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new Yi(this.database,il(this._delegate,function(i,n){return rI("endBefore","key",n,!0),new $5(i,n)}(n,r)))}equalTo(n,r){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new Yi(this.database,il(this._delegate,function(i,n){return rI("equalTo","key",n,!0),new aZ(i,n)}(n,r)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(n){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(n instanceof Yi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(n._delegate)}static getCancelAndContextArgs_(n,r,s){const o={cancel:void 0,context:void 0};if(r&&s)o.cancel=r,(0,P.Wj)(n,"cancel",o.cancel,!0),o.context=s,(0,P.lb)(n,"context",o.context,!0);else if(r)if("object"==typeof r&&null!==r)o.context=r;else{if("function"!=typeof r)throw new Error((0,P.gK)(n,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=r}return o}get ref(){return new vo(this.database,new ha(this._delegate._repo,this._delegate._path))}}class vo extends Yi{constructor(n,r){super(n,new js(r._repo,r._path,new rM,!1)),this.database=n,this._delegate=r}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(n){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof n&&(n=String(n)),new vo(this.database,fm(this._delegate,n))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const n=this._delegate.parent;return n?new vo(this.database,n):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new vo(this.database,this._delegate.root)}set(n,r){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",r,!0);const s=u1(this._delegate,n);return r&&s.then(()=>r(null),o=>r(o)),s}update(n,r){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(n)){const o={};for(let c=0;c<n.length;++c)o[""+c]=n[c];n=o,E3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ua("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",r,!0);const s=j5(this._delegate,n);return r&&s.then(()=>r(null),o=>r(o)),s}setWithPriority(n,r,s){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",s,!0);const o=function(i,n,r){if(ua("setWithPriority",i._path),xc("setWithPriority",n,i._path,!1),t1("setWithPriority",r,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const s=new P.BH;return i1(i._repo,i._path,n,r,s.wrapCallback(()=>{})),s.promise}(this._delegate,n,r);return s&&o.then(()=>s(null),c=>s(c)),o}remove(n){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",n,!0);const r=function(i){return ua("remove",i._path),u1(i,null)}(this._delegate);return n&&r.then(()=>n(null),s=>n(s)),r}transaction(n,r,s){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",n,!1),(0,P.Wj)("Reference.transaction","onComplete",r,!0),function(i,n,r,s){if(void 0!==r&&"boolean"!=typeof r)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,s);const o=function(i,n,r){var s;if(i=(0,P.m9)(i),ua("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const o=null===(s=null==r?void 0:r.applyLocally)||void 0===s||s,c=new P.BH,m=d1(i,()=>{});return function(i,n,r,s,o,c){Gv(i,"transaction on "+n);const h={path:n,update:r,onComplete:s,status:null,order:vj(),applyLocally:c,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=o1(i,n,void 0);h.currentInputSnapshot=m;const y=h.update(m.val());if(void 0===y)h.unwatcher(),h.currentOutputSnapshotRaw=null,h.currentOutputSnapshotResolved=null,h.onComplete&&h.onComplete(null,!1,h.currentInputSnapshot);else{nI("transaction failed: Data returned ",y,h.path),h.status=0;const C=bM(i.transactionQueueTree_,n),T=dm(C)||[];let x;T.push(h),JF(C,T),"object"==typeof y&&null!==y&&(0,P.r3)(y,".priority")?(x=(0,P.DV)(y,".priority"),(0,P.hu)(tI(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(_M(i.serverSyncTree_,n)||Ft.EMPTY_NODE).getPriority().val();const R=sI(i),O=pr(y,x),U=KF(O,m,R);h.currentOutputSnapshotRaw=O,h.currentOutputSnapshotResolved=U,h.currentWriteId=IM(i);const te=HF(i.serverSyncTree_,n,U,h.currentWriteId,h.applyLocally);da(i.eventQueue_,n,te),SM(i,i.transactionQueueTree_)}}(i._repo,i._path,n,(y,C,T)=>{let x=null;y?c.reject(y):(x=new hm(T,new ha(i._repo,i._path),Bn),c.resolve(new CZ(C,x)))},m,o),c.promise}(this._delegate,n,{applyLocally:s}).then(c=>new RZ(c.committed,new Rf(this.database,c.snapshot)));return r&&o.then(c=>r(null,c.committed,c.snapshot),c=>r(c,!1,null)),o}setPriority(n,r){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",r,!0);const s=function(i,n){i=(0,P.m9)(i),ua("setPriority",i._path),t1("setPriority",n,!1);const r=new P.BH;return i1(i._repo,rr(i._path,".priority"),n,null,r.wrapCallback(()=>{})),r.promise}(this._delegate,n);return r&&s.then(()=>r(null),o=>r(o)),s}push(n,r){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",r,!0);const s=function(i,n){i=(0,P.m9)(i),ua("push",i._path),xc("push",n,i._path,!0);const r=JH(i._repo),s=qY(r),o=fm(i,s),c=fm(i,s);let h;return h=null!=n?u1(c,n).then(()=>c):Promise.resolve(c),o.then=h.then.bind(h),o.catch=h.then.bind(h,void 0),o}(this._delegate,n),o=s.then(h=>new vo(this.database,h));r&&o.then(()=>r(null),h=>r(h));const c=new vo(this.database,s);return c.then=o.then.bind(o),c.catch=o.catch.bind(o,void 0),c}onDisconnect(){return ua("Reference.onDisconnect",this._delegate._path),new MZ(new c3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class aI{constructor(n,r){this._delegate=n,this.app=r,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(n,r,s={}){!function(i,n,r,s={}){(i=(0,P.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&Tc("Cannot call useEmulator() after instance has already been initialized.");const o=i._repoInternal;let c;if(o.repoInfo_.nodeAdmin)s.mockUserToken&&Tc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new V0(V0.OWNER);else if(s.mockUserToken){const h="string"==typeof s.mockUserToken?s.mockUserToken:(0,P.Sg)(s.mockUserToken,i.app.options.projectId);c=new V0(h)}!function(i,n,r,s){i.repoInfo_=new lF(`${n}:${r}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),s&&(i.authTokenProvider_=s)}(o,n,r,c)}(this._delegate,n,r,s)}ref(n){if((0,P.Dv)("database.ref",0,1,arguments.length),n instanceof vo){const r=d3(this._delegate,n.toString());return new vo(this,r)}{const r=u3(this._delegate,n);return new vo(this,r)}}refFromURL(n){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const s=d3(this._delegate,n);return new vo(this,s)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function(i){(i=(0,P.m9)(i))._checkNotDeleted("goOffline"),n3(i._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function(i){(i=(0,P.m9)(i))._checkNotDeleted("goOnline"),function(i){i.persistentConnection_&&i.persistentConnection_.resume(QH)}(i._repo)}(this._delegate)}}aI.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:i=>function(i){return{".sv":{increment:i}}}(i)};var NZ=Object.freeze({__proto__:null,initStandalone:function({app:i,url:n,version:r,customAuthImpl:s,namespace:o,nodeAdmin:c=!1}){_j(r);const h=new dt.zt("auth-internal",new dt.H0("database-standalone"));return h.setComponent(new dt.wA("auth-internal",()=>s,"PRIVATE")),{instance:new aI(b3(i,h,void 0,n,c),i),namespace:o}}});const OZ=aI.ServerValue;function w3(i){return null==i}function C3(i){return"function"==typeof i.set}function I3(i,n){return C3(n)?n:i.ref(n)}function S3(i,n){if(function(i){return"string"==typeof i}(i))return n.stringCase();if(C3(i))return n.firebaseCase();if(function(i){return"function"==typeof i.exportVal}(i))return n.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function lI(i,n,r="on",s=Qd.z){return new bn.y(o=>{let c=null;return c=i[r](n,(h,m)=>{s.schedule(()=>{o.next({snapshot:h,prevKey:m})}),"once"===r&&s.schedule(()=>o.complete())},h=>{s.schedule(()=>o.error(h))}),"on"===r?{unsubscribe(){null!=c&&i.off(n,c)}}:{unsubscribe(){}}}).pipe((0,it.U)(o=>{const{snapshot:c,prevKey:h}=o;let m=null;return c.exists()&&(m=c.key),{type:n,payload:c,prevKey:h,key:m}}),(0,q2.B)())}function T3(i,n){const r=i.length;for(let s=0;s<r;s++)if(i[s].payload.key===n)return s;return-1}function UZ(i,n){const{payload:r,prevKey:s,key:o}=n,c=T3(i,o),h=function(i,n){if(w3(n))return 0;{const r=T3(i,n);return-1===r?i.length:r+1}}(i,s);switch(n.type){case"value":if(n.payload&&n.payload.exists()){let m=null;n.payload.forEach(y=>{const C={payload:y,type:"value",prevKey:m,key:y.key};return m=y.key,i=[...i,C],!1})}return i;case"child_added":if(c>-1){const m=i[c-1];(m&&m.key||null)!==s&&(i=i.filter(y=>y.payload.key!==r.key)).splice(h,0,n)}else{if(null==s)return[n,...i];(i=i.slice()).splice(h,0,n)}return i;case"child_removed":return i.filter(m=>m.payload.key!==r.key);case"child_changed":return i.map(m=>m.payload.key===o?n:m);case"child_moved":if(c>-1){const m=i.splice(c,1)[0];return(i=i.slice()).splice(h,0,m),i}return i;default:return i}}function D3(i){return(w3(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function A3(i,n,r){return function(i,n,r){return lI(i,"value","once",r).pipe(or(s=>{const o=[(0,qe.of)(s)];return n.forEach(c=>o.push(lI(i,c,"on",r))),(0,uu.T)(...o).pipe(Lo(UZ,[]))}),y_())}(i,n=D3(n),r)}function x3(i,n,r){const s=(n=D3(n)).map(o=>lI(i,o,"on",r));return(0,uu.T)(...s)}function M3(i,n){return function(s,o){return S3(s,{stringCase:()=>i.child(s)[n](o),firebaseCase:()=>s[n](o),snapshotCase:()=>s.ref[n](o)})}}function $Z(i){return function(r){return r?S3(r,{stringCase:()=>i.child(r).remove(),firebaseCase:()=>r.remove(),snapshotCase:()=>r.ref.remove()}):i.remove()}}function R3(i,n){return function(){return lI(i,"value","on",n)}}!function(i){i.INTERNAL.registerComponent(new dt.wA("database-compat",(n,{instanceIdentifier:r})=>{const s=n.getProvider("app-compat").getImmediate(),o=n.getProvider("database").getImmediate({identifier:r});return new aI(o,s)},"PUBLIC").setServiceProps({Reference:vo,Query:Yi,Database:aI,DataSnapshot:Rf,enableLogging:yZ,INTERNAL:NZ,ServerValue:OZ}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.1.1")}(cS.Z);const WZ=new f.OlP("angularfire2.realtimeDatabaseURL"),YZ=new f.OlP("angularfire2.database.use-emulator");let KZ=(()=>{class i{constructor(r,s,o,c,h,m,y,C,T,x,R,O,U,te){this.schedulers=m;const pe=y,Fe=(0,rs.on)(r,h,s);C&&g_(Fe,h,T,R,O,U,x,te),this.database=(0,Xt.cc)(`${Fe.name}.database.${o}`,"AngularFireDatabase",Fe.name,()=>{const Ge=h.runOutsideAngular(()=>Fe.database(o||void 0));return pe&&Ge.useEmulator(...pe),Ge},[pe])}list(r,s){const o=this.schedulers.ngZone.runOutsideAngular(()=>I3(this.database,r));let c=o;return s&&(c=s(o)),function(i,n){const r=n.schedulers.outsideAngular,s=n.schedulers.ngZone.run(()=>i.ref);return{query:i,update:M3(s,"update"),set:M3(s,"set"),push:o=>s.push(o),remove:$Z(s),snapshotChanges:o=>A3(i,o,r).pipe(Xt.iC),stateChanges:o=>x3(i,o,r).pipe(Xt.iC),auditTrail:o=>function(i,n,r){return function(i,n,r){return function(i,n){return lI(i,"value","on",n).pipe((0,it.U)(r=>{let s;return r.payload.forEach(o=>(s=o.key,!1)),{data:r,lastKeyToLoad:s}}))}(i,r).pipe(function(...i){return n=>{let r;return"function"==typeof i[i.length-1]&&(r=i.pop()),n.lift(new P8(i,r))}}(n),(0,it.U)(([o,c])=>{const h=o.lastKeyToLoad,m=c.map(y=>y.key);return{actions:c,lastKeyToLoad:h,loadedKeys:m}}),function(i){return n=>n.lift(new V8(i))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,it.U)(o=>o.actions))}(i,x3(i,n).pipe(Lo((o,c)=>[...o,c],[])),r)}(i,o,r).pipe(Xt.iC),valueChanges:(o,c)=>A3(i,o,r).pipe((0,it.U)(m=>m.map(y=>c&&c.idField?Object.assign(Object.assign({},y.payload.val()),{[c.idField]:y.key}):y.payload.val())),Xt.iC)}}(c,this)}object(r){return function(i,n){return{query:i,snapshotChanges:()=>R3(i,n.schedulers.outsideAngular)().pipe(Xt.iC),update:r=>i.ref.update(r),set:r=>i.ref.set(r),remove:()=>i.ref.remove(),valueChanges:()=>R3(i,n.schedulers.outsideAngular)().pipe(Xt.iC,(0,it.U)(s=>s.payload.exists()?s.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>I3(this.database,r)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(r){return new(r||i)(f.LFG(rs.Dh),f.LFG(rs.xv,8),f.LFG(WZ,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Xt.HU),f.LFG(YZ,8),f.LFG(m_,8),f.LFG(io,8),f.LFG(Kd,8),f.LFG(Zd,8),f.LFG(Tp,8),f.LFG(aS,8),f.LFG(Wb,8))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),ZZ=(()=>{class i{constructor(){p_.Z.registerVersion("angularfire",Xt.q4.full,"rtdb-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[KZ]}),i})(),QZ=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[o0],imports:[[Rr,tF,gj,Yx]]}),i})(),JZ=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=f.oAB({type:i,bootstrap:[k8]}),i.\u0275inj=f.cJS({providers:[],imports:[[Mm,Yx,N8,gj,rs.hO.initializeApp(mj_firebase),NN,ZZ,lS,lS,pz,QZ]]}),i})();(0,f.G48)(),jc().bootstrapModule(JZ).catch(i=>console.error(i))},4762:(Ye,Ie,B)=>{"use strict";function he(ue,me){var ve={};for(var Ee in ue)Object.prototype.hasOwnProperty.call(ue,Ee)&&me.indexOf(Ee)<0&&(ve[Ee]=ue[Ee]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var ge=0;for(Ee=Object.getOwnPropertySymbols(ue);ge<Ee.length;ge++)me.indexOf(Ee[ge])<0&&Object.prototype.propertyIsEnumerable.call(ue,Ee[ge])&&(ve[Ee[ge]]=ue[Ee[ge]])}return ve}function ee(ue,me,ve,Ee){return new(ve||(ve=Promise))(function(ne,Le){function et(Je){try{at(Ee.next(Je))}catch(yt){Le(yt)}}function At(Je){try{at(Ee.throw(Je))}catch(yt){Le(yt)}}function at(Je){Je.done?ne(Je.value):function(ne){return ne instanceof ve?ne:new ve(function(Le){Le(ne)})}(Je.value).then(et,At)}at((Ee=Ee.apply(ue,me||[])).next())})}function W(ue,me){var Ee,ge,ne,Le,ve={label:0,sent:function(){if(1&ne[0])throw ne[1];return ne[1]},trys:[],ops:[]};return Le={next:et(0),throw:et(1),return:et(2)},"function"==typeof Symbol&&(Le[Symbol.iterator]=function(){return this}),Le;function et(at){return function(Je){return function(at){if(Ee)throw new TypeError("Generator is already executing.");for(;ve;)try{if(Ee=1,ge&&(ne=2&at[0]?ge.return:at[0]?ge.throw||((ne=ge.return)&&ne.call(ge),0):ge.next)&&!(ne=ne.call(ge,at[1])).done)return ne;switch(ge=0,ne&&(at=[2&at[0],ne.value]),at[0]){case 0:case 1:ne=at;break;case 4:return ve.label++,{value:at[1],done:!1};case 5:ve.label++,ge=at[1],at=[0];continue;case 7:at=ve.ops.pop(),ve.trys.pop();continue;default:if(!(ne=(ne=ve.trys).length>0&&ne[ne.length-1])&&(6===at[0]||2===at[0])){ve=0;continue}if(3===at[0]&&(!ne||at[1]>ne[0]&&at[1]<ne[3])){ve.label=at[1];break}if(6===at[0]&&ve.label<ne[1]){ve.label=ne[1],ne=at;break}if(ne&&ve.label<ne[2]){ve.label=ne[2],ve.ops.push(at);break}ne[2]&&ve.ops.pop(),ve.trys.pop();continue}at=me.call(ue,ve)}catch(Je){at=[6,Je],ge=0}finally{Ee=ne=0}if(5&at[0])throw at[1];return{value:at[0]?at[1]:void 0,done:!0}}([at,Je])}}}function H(ue){var me="function"==typeof Symbol&&Symbol.iterator,ve=me&&ue[me],Ee=0;if(ve)return ve.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&Ee>=ue.length&&(ue=void 0),{value:ue&&ue[Ee++],done:!ue}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}function re(ue,me){var ve="function"==typeof Symbol&&ue[Symbol.iterator];if(!ve)return ue;var ge,Le,Ee=ve.call(ue),ne=[];try{for(;(void 0===me||me-- >0)&&!(ge=Ee.next()).done;)ne.push(ge.value)}catch(et){Le={error:et}}finally{try{ge&&!ge.done&&(ve=Ee.return)&&ve.call(Ee)}finally{if(Le)throw Le.error}}return ne}function de(ue,me,ve){if(ve||2===arguments.length)for(var ne,Ee=0,ge=me.length;Ee<ge;Ee++)(ne||!(Ee in me))&&(ne||(ne=Array.prototype.slice.call(me,0,Ee)),ne[Ee]=me[Ee]);return ue.concat(ne||Array.prototype.slice.call(me))}B.d(Ie,{_T:()=>he,mG:()=>ee,Jh:()=>W,XA:()=>H,CR:()=>re,ev:()=>de})},8239:(Ye,Ie,B)=>{"use strict";function f(j,he,ye,X,se,ee,W){try{var L=j[ee](W),G=L.value}catch(H){return void ye(H)}L.done?he(G):Promise.resolve(G).then(X,se)}function $(j){return function(){var he=this,ye=arguments;return new Promise(function(X,se){var ee=j.apply(he,ye);function W(G){f(ee,X,se,W,L,"next",G)}function L(G){f(ee,X,se,W,L,"throw",G)}W(void 0)})}}B.d(Ie,{Z:()=>$})}},Ye=>{Ye(Ye.s=1833)}]);